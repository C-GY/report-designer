(function(e,t){if(!e.seajs){var l=e.seajs={version:"2.2.3"},n=l.data={},r=C("Object"),i=C("String"),a=Array.isArray||C("Array"),s=C("Function"),o=C("Undefined"),d=0,p=n.events={};l.on=function(e,t){return(p[e]||(p[e]=[])).push(t),l},l.off=function(e,t){if(!e&&!t)return p=n.events={},l;var r=p[e];if(r)if(t)for(var i=r.length-1;i>=0;i--)r[i]===t&&r.splice(i,1);else delete p[e];return l};var g,c=l.emit=function(e,t){var n,r=p[e];if(r)for(r=r.slice();n=r.shift();)n(t);return l},h=/[^?#]*\//,u=/\/\.\//g,f=/\/[^/]+\/\.\.\//,_=/([^:/])\/\//g,m=/^([^/:]+)(\/.+)$/,x=/{([^{]+)}/g,y=/^\/\/.|:\//,b=/^.*?\/\/.*?\//,w=document,v=V(w.URL),k=w.scripts,A=w.getElementById("seajsnode")||k[k.length-1],z=V(((g=A).hasAttribute?g.src:g.getAttribute("src",4))||v);l.resolve=function(e,t){if(!e)return"";var l,r,a;e=function(e){var t=n.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(x,function(e,l){return i(t[l])?t[l]:e})),e}(e=function(e){var t,l=n.paths;return l&&(t=e.match(m))&&i(l[t[1]])&&(e=l[t[1]]+t[2]),e}(e=function(e){var t=n.alias;return t&&i(t[e])?t[e]:e}(e))),r=(l=e).length-1;var o=N(e="#"===(a=l.charAt(r))?l.substring(0,r):".js"===l.substring(r-2)||l.indexOf("?")>0||".css"===l.substring(r-3)||"/"===a?l:l+".js",t);return o=function(e){var t=n.map,l=e;if(t)for(var r=0,i=t.length;r<i;r++){var a=t[r];if((l=s(a)?a(e)||e:e.replace(a[0],a[1]))!==e)break}return l}(o)};var j,S,$=w.head||w.getElementsByTagName("head")[0]||w.documentElement,q=$.getElementsByTagName("base")[0],M=/\.css(?:\?|$)/i,R=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;l.request=function(e,t,l,r){var i=M.test(e),a=w.createElement(i?"link":"script");l&&(a.charset=l),o(r)||a.setAttribute("crossorigin",r),function(e,t,l,r){var i="onload"in e;function a(){e.onload=e.onerror=e.onreadystatechange=null,l||n.debug||$.removeChild(e),e=null,t()}!l||!R&&i?i?(e.onload=a,e.onerror=function(){c("error",{uri:r,node:e}),a()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&a()}:setTimeout(function(){!function e(t,l){var n,r=t.sheet;if(R)r&&(n=!0);else if(r)try{r.cssRules&&(n=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(n=!0)}setTimeout(function(){n?l():e(t,l)},20)}(e,t)},1)}(a,t,i,e),i?(a.rel="stylesheet",a.href=e):(a.async=!0,a.src=e),j=a,q?$.insertBefore(a,q):$.appendChild(a),j=null};var B,H=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,I=/\\\\/g,T=l.cache={},F={},O={},Y={},P=D.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};D.prototype.resolve=function(){for(var e=this.dependencies,t=[],l=0,n=e.length;l<n;l++)t[l]=D.resolve(e[l],this.uri);return t},D.prototype.load=function(){if(!(this.status>=P.LOADING)){this.status=P.LOADING;var e=this.resolve();c("load",e);for(var t,l=this._remain=e.length,n=0;n<l;n++)(t=D.get(e[n])).status<P.LOADED?t._waitings[this.uri]=(t._waitings[this.uri]||0)+1:this._remain--;if(0!==this._remain){var r={};for(n=0;n<l;n++)(t=T[e[n]]).status<P.FETCHING?t.fetch(r):t.status===P.SAVED&&t.load();for(var i in r)r.hasOwnProperty(i)&&r[i]()}else this.onload()}},D.prototype.onload=function(){this.status=P.LOADED,this.callback&&this.callback();var e,t,l=this._waitings;for(e in l)l.hasOwnProperty(e)&&((t=T[e])._remain-=l[e],0===t._remain&&t.onload());delete this._waitings,delete this._remain},D.prototype.fetch=function(e){var t=this.uri;this.status=P.FETCHING;var r={uri:t};c("fetch",r);var i=r.requestUri||t;function a(){l.request(r.requestUri,r.onRequest,r.charset,r.crossorigin)}i&&!O[i]?F[i]?Y[i].push(this):(F[i]=!0,Y[i]=[this],c("request",r={uri:t,requestUri:i,onRequest:function(){delete F[i],O[i]=!0,B&&(D.save(t,B),B=null);var e,l=Y[i];delete Y[i];for(;e=l.shift();)e.load()},charset:s(n.charset)?n.charset(i):n.charset,crossorigin:s(n.crossorigin)?n.crossorigin(i):n.crossorigin}),r.requested||(e?e[r.requestUri]=a:a())):this.load()},D.prototype.exec=function(){var e=this;if(e.status>=P.EXECUTING)return e.exports;e.status=P.EXECUTING;var t=e.uri;function l(e){return D.get(l.resolve(e)).exec()}l.resolve=function(e){return D.resolve(e,t)},l.async=function(e,n){return D.use(e,n,t+"_async_"+L()),l};var n=e.factory,r=s(n)?n(l,e.exports={},e):n;return void 0===r&&(r=e.exports),delete e.factory,e.exports=r,e.status=P.EXECUTED,c("exec",e),r},D.resolve=function(e,t){var n={id:e,refUri:t};return c("resolve",n),n.uri||l.resolve(n.id,t)},D.define=function(e,t,l){var n,r,i=arguments.length;1===i?(l=e,e=void 0):2===i&&(l=t,a(e)?(t=e,e=void 0):t=void 0),!a(t)&&s(l)&&(n=l.toString(),r=[],n.replace(I,"").replace(H,function(e,t,l){l&&r.push(l)}),t=r);var o={id:e,uri:D.resolve(e),deps:t,factory:l};if(!o.uri&&w.attachEvent){var d=function(){if(j)return j;if(S&&"interactive"===S.readyState)return S;for(var e=$.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var l=e[t];if("interactive"===l.readyState)return S=l}}();d&&(o.uri=d.src)}c("define",o),o.uri?D.save(o.uri,o):B=o},D.save=function(e,t){var l=D.get(e);l.status<P.SAVED&&(l.id=t.id||e,l.dependencies=t.deps||[],l.factory=t.factory,l.status=P.SAVED)},D.get=function(e,t){return T[e]||(T[e]=new D(e,t))},D.use=function(t,l,n){var r=D.get(n,a(t)?t:[t]);r.callback=function(){for(var t=[],n=r.resolve(),i=0,a=n.length;i<a;i++)t[i]=T[n[i]].exec();l&&l.apply(e,t),delete r.callback},r.load()},D.preload=function(e){var t=n.preload,l=t.length;l?D.use(t,function(){t.splice(0,l),D.preload(e)},n.cwd+"_preload_"+L()):e()},l.use=function(e,t){return D.preload(function(){D.use(e,t,n.cwd+"_use_"+L())}),l},D.define.cmd={},e.define=D.define,l.Module=D,n.fetchedList=O,n.cid=L,l.require=function(e){var t=D.get(D.resolve(e));return t.status<P.EXECUTING&&(t.onload(),t.exec()),t.exports};var X,E;n.base=(z.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",z])[1],n.dir=z,n.cwd=v,n.charset="utf-8",n.history={},n.preload=(X=[],E=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(E+=" "+w.cookie).replace(/(seajs-\w+)=1/g,function(e,t){X.push(t)}),X),l.config=function(e){for(var t in e){var i=e[t],s=n[t];if(n.history[t]=n.history[t]||[],n.history[t].push(W(i)),s&&r(s))for(var o in i)s[o]=i[o];else a(s)?i=s.concat(i):"base"===t&&("/"!==i.slice(-1)&&(i+="/"),i=N(i)),n[t]=i}return c("config",e),l}}function C(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function L(){return d++}function V(e){return e.match(h)[0]}function N(e,t){var l,r=e.charAt(0);if(y.test(e))l=e;else if("."===r)l=function(e){for(e=e.replace(u,"/");e.match(f);)e=e.replace(f,"/");return e=e.replace(_,"$1/")}((t?V(t):n.cwd)+e);else if("/"===r){var i=n.cwd.match(b);l=i?i[0]+e.substring(1):e}else l=n.base+e;return 0===l.indexOf("//")&&(l=location.protocol+l),l}function D(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function W(e){if(r(e)){var t={};for(var l in e)t[l]=e[l];return t}return e}})(this),(e=>{window.define?define("magix5",e):window.Magix=e()})(()=>{let e=0,t=[],l=window,n=document,r=l.setTimeout,i=encodeURIComponent;function a(){}let s,o=JSON.stringify,d=n.head,p=l.performance,g=p.now.bind(p),c="prototype",h=Object[c].toString,u=e=>h.call(e).slice(8,-1),f=e=>"Object"==u(e),_=Array.isArray,m=t=>(t||"_")+e++,x=e=>n.getElementById(e),y=(e,t)=>e.innerHTML=t,b={rootId:m(),error(e){throw e}},w=e=>!e||"object"!=typeof e,v=(e,t,l)=>{if(e&&t&&!(l=e==t))try{l=16==(16&t.compareDocumentPosition(e))}catch(e){}return l},k=e=>{e["\x1ea"]=null},{assign:A,keys:z,hasOwnProperty:j}=Object,S=d.getAttribute,$=(e,t)=>S.call(e,t),q=(e,t,l)=>{t&&!q[e]&&(q[e]=1,l=n.createElement("style"),y(l,t),d.appendChild(l))},M=(e,t,l,n)=>{try{n=_(t)?e.apply(l,t):e.call(l,t)}catch(e){b.error(e)}return n},R=(e,t)=>e&&j.call(e,t),B=(e,t)=>{let l,n;if(w(t))"\x1e"==(l=t+"")[0]&&(t=e[l]);else for(l in t)n=t[l],n=B(e,n),t[l]=n;return t},H=(e,t)=>t.a-e.a;function I(e,t,l){(l=this).a=[],l.b=t||5,l.c=l.b+(e||20)}A(I[c],{get(e){let t=this.a["\x1e"+e];return t&&(t.a++,t=t.c),t},set(e,t){let l=this,n=l.a,r="\x1e"+e,i=n[r],a=l.b;if(!i){if(n.length>=l.c)for(n.sort(H);a--;)(i=n.pop()).a>0&&l.del(i.o);i={d:e},n.push(i),n[r]=i}i.c=t,i.a=1},del(e){e="\x1e"+e;let t=this.a,l=t[e];l&&(l.a=-1,l.c="",t[e]=null)},has(e){return R(this.a,"\x1e"+e)}});let T,F={bubbles:!0,cancelable:!0},O=[],Y=(e,t,l,n,r,i)=>{let a={a:n,b:l,c:t,d:e,e(e){n?M(l,e,i):l(e)}};O.push(a),e.addEventListener(t,a.e,r)},P=(e,t,l,n,r)=>{for(let i,a=O.length;a--;)if((i=O[a]).c==t&&i.a==n&&i.d==e&&i.b===l){O.splice(a,1),e.removeEventListener(t,i.e,r);break}},X=new I,E=(e,t,l)=>(X.has(e)?l=X.get(e):(l=M(Function(`return ${e}`)),t&&X.set(e,l)),l),C=decodeURIComponent,L=new I,V=e=>{let t,l,n,r,i,a,s=L.get(e);if(!s){if(r={},-1==(i=e.indexOf("?"))?(t=e,a=""):(t=e.substring(0,i),a=e.substring(i+1)),a)for(i of a.split("&"))[l,n]=i.split("="),r[C(l)]=C(n||"");L.set(e,s={a:t,b:r})}return{path:s.a,params:A({},s.b)}},N=new I,D=(e,t,l)=>(N.has(e)?l=N.get(e):(l=E(e,null),e.includes("\x1e")?B(t,l):N.set(e,l)),l),W=0,U=[],K=()=>{let e,t,l,n=g();try{for(;;){if(e=U[W],l=U[W-1],t=U[W+1],U[W]=null,U[W-1]=null,U[W+1]=null,U[W+2]=null,W+=4,!e){U.length=W=0;break}if(e!=a&&(_(t)?e.apply(l,t):e.call(l,t)),g()-n>8&&U.length>W){r(K);break}}}catch(e){b.error(e),r(K)}},G=(e,t,l,n)=>{if(W||(W=1,r(K)),n)for(let e=U.length-1;e>=W;e-=4)U[e]==n&&(U[e-3]=null,U[e-2]=a,U[e-1]=null,U[e]=null);U.push(l,e,t,n)},Q=m();b.views={},b.defaultView=Q;let J=e=>e.__esModule||window.Symbol&&"Module"===e[Symbol.toStringTag],Z=e=>"Function"==u(e),ee=(e,t)=>{if(e&&e.prototype&&e.prototype instanceof rt)return t(e);if(Q==e)return T||(T=rt.extend()),t(T);let l,n=b.views,r=[],i=0,a=()=>{i||G(t,r)},s=(e,t)=>{let l=e=>{r[t]||(i--,r[t]=J(e)?e.default:e,a())};(e=e(l))&&e.then&&e.then(l)},o=e=>t=>{i--,r[e]=J(t)?t.default:t,a()};if(e){_(e)||(e=[e]);for(let t=0;t<e.length;t++)(l=n[e[t]])?(Z(l)&&!l.extend?(i++,s(l,t)):r[t]=J(l)?l.default:l,a()):window.seajs?(i++,seajs.use(e[t],o(t))):window.require&&(l=require(e[t]),r[t]=J(l)?l.default:l,a())}else a()};function te(){}let le=(e,t,l,n)=>(te[c]=t[c],n=new te,A(n,l),n.constructor=e,e[c]=n,e),ne=e=>e;let re,ie,ae={fire(e,t){let l,n,r=this,i=r["\x1e"+e],a=0;if(t||(t={}),t.type=e,i)for(l=i.length;a<l;a++)(n=i[a]).a?(n.b=1,M(n.a,t,r),n.b=""):n.b||(i.splice(a--,1),l--);(i=r[`on${e}`])&&M(i,t,r)},on(e,t){let l="\x1e"+e;(this[l]||(this[l]=[])).push({a:t})},off(e,t){let l,n="\x1e"+e,r=this,i=r[n];if(t){if(i)for(l of i)if(l.a==t){l.a="";break}}else r[n]=null,r[`on${e}`]=null}},se={},oe=(e,t,l,n)=>{t.includes("\x1e")&&(n=se[e])&&B(n.a,l)},de=(e,t)=>{R(se,e)||(se[e]=t,ce.fire("add",{vframe:t}))},pe=(e,t,l,n,r,i,a)=>{for(t=e.c,r=e.d;t.length;)[l,a,n]=t.shift(),G(n,(i=r[l])&&M(i,a,r))},ge=e=>e.b||(e.b=m(ie));function ce(e,t){let l=this,n=ge(e);l.id=n,l.root=e,l.e=1,l.b={},l.pId=t,l.c=[],l.a={},de(n,l)}A(ce,{root:()=>re,all:()=>se,byId:e=>se[e],byNode:e=>se[e.b]},ae),A(ce[c],{mountView(e,t){let l,n,r,i,a,s=this,{id:o,root:d,pId:p}=s;!s.f&&d&&(s.f=1,s.g=d.innerHTML),s.unmountView(),d&&e&&(l=V(e),r=l.path,s.path=e,i=l.params,oe(p,e,i),s.h=r,(p=i["\x1e"])&&f(p)?i=p:A(i,t),n=s.e,ee(r,e=>{if(n==s.e){if(!e)return void 0;a=nt(e),r=new e(o,d,s,i,a),s.d=r,Qe(r),M(r.init,i,r),G(r.f,i,r),G(()=>{r.g(),r.tmpl||r.h||Ge(r)})}}))},unmountView(){let e=this,{d:t,root:l}=e;e.c=[],t&&(e.d=0,t.c&&(t.c=0,k(t),e.unmountZone(),t.fire("destroy"),Qe(t,1),l&&e.f&&y(l,e.g))),e.e++},mountVframe(e,t,l){let n,r=this,i=r.id,a=r.b,s=ge(e);return(n=se[s])||(R(a,s)||(r.i=0),a[s]=s,n=new ce(e,i)),n.mountView(t,l),n},mountZone(e){let t,l=this,n=(e=e||l.root).querySelectorAll("[mx5-view]");for(t of n)t.a||(t.a=1,l.mountVframe(t,$(t,"mx5-view")))},unmountVframe(e,t){let l,n;var r,i,a;e=e?this.b[t?e:e.b]:this.id,(l=se[e])&&(l.unmountView(),n=l.pId,(i=se[r=e])&&(delete se[r],(a=i.root).a=0,a.b=0,ce.fire("remove",{vframe:i}),i.id=i.root=i.pId=i.b=null),(l=se[n])&&R(l.b,e)&&(delete l.b[e],l.i=0))},unmountZone(e){let t,l,n,r=this;for(t in r.b)(n=e?(l=se[t])&&v(l.root,e):1)&&r.unmountVframe(t,1)},children(e){return(e=this).i||(e.i=z(e.b))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=se[t.pId];return t},invoke(e,t){let l,n,r=this,i=r.c;return new Promise(a=>{(l=r.d)&&l.h?a((n=l[e])&&M(n,t,l)):i.push([e,t,a])})}});let he=new I(30,10),ue=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,fe={},_e={},me={};let xe=(e,l)=>{let n,r,i,a,o,d,p,g,c=[],h=e,u=$(e,"mx5-"+l),f=0;if(u&&((o=he.get(u))||(o={v:(o=u.match(ue)||t)[1],n:o[2],i:o[3]},he.set(u,o)),o=A({},o,{r:u})),o&&!o.v||_e[l]){if(!(g=h.c)){for(p=[h];h!=s&&(h=h.parentNode);){if(se[r=h.b]||(r=h.c)){g=r;break}p.push(h)}if(g)for(u of p)u.c=g}if(g){h=e.b,se[h]&&(f=g=h);do{if((n=se[g])&&(d=n.d)){if(a=(i=d.i)[l])for(h=a.length;h--;)i={r:r=a[h],v:g,n:r},r?!f&&e.matches(r)&&c.push(i):f&&c.unshift(i);if(d.tmpl&&!f)break;f=0}}while(n&&(g=n.pId))}}return o&&c.push(o),c},ye=e=>{let t,l,n,r,i,a,s,o,{target:d,type:p}=e,g=[];for(;d&&1==d.nodeType&&!(e.cancelBubble||(l=d.d)&&l[p]);){if(g.push(d),(t=xe(d,p)).length){g=[];for(let{v:l,r:g,n:c,i:h}of t){if(s!=l){if(s&&e.cancelBubble)break;s=l}if(!(r=(n=se[l])&&n.d))break;r.h&&(a=r[i=c+"\x1e"+p])&&(e.eventTarget=d,o=h?D(h,n.a):me,e.params=o,M(a,e,r))}}d=d.parentNode}for(s of g)(l=s.d||(s.d={}))[p]=1},be=(e,t,l)=>{let n=0|fe[e],r=l?-1:1;n&&l!==n||(l?P:Y)(s,e,ye),fe[e]=n+r,t&&(_e[e]=(0|_e[e])+r)};let we={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","`":"&#96;"},ve=/[&<>"'\`]/g,ke=e=>null==e?"":""+e,Ae=e=>we[e],ze=e=>ke(e).replace(ve,Ae),je={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Se=e=>je[e],$e=/[!')(*]/g,qe=e=>i(ke(e)).replace($e,Se),Me=/[\\'"]/g,Re=e=>ke(e).replace(Me,"\\$&"),Be=(e,t,l)=>(e[l]=t,l),He=(e,l,n)=>{if(e.c&&(n=e.tmpl)){let r,i=e.j,a=e.id,s=se[a],o={a:[],b:0},d=e.d,p=s.a;e.k=0,e.j={},l&&e.fire("dompatch"),r=n(d,Te,a,ke,qe,p,Be,Re,_);let g=()=>{if(e.l=r,e.m>1)e.m=1,He(e);else{for(r of(e.m=0,n=o.c||!e.h,o.a))G(r.g,t,r,"\x1e"+r.id);for(r of(n&&Ge(e),e.fire("domready"),e.n))r();e.n.length=0}};G(Ve,[e.root,e.l,r,o,s,i,e,g])}},Ie={},Te=(e,t,l,n,r)=>{let i;if(e){t=t||Ie;let a,s,o,d,p,g,c="",h={},u=0,f="<"+e,_="",m=[];if(l)for(d of l){if(o=d.a,d.b==Oe){if(!o)continue;o=ze(o)}_+=o,g&&d.b==Oe&&g.b==Oe?g.a+=d.a:(d.d&&(h[d.d]=(h[d.d]||0)+1,u++),a=a||d.e,g=d,m.push(d))}for(s in n=n||Ie,t)!1!==(o=t[s])&&null!=o?(!0===o&&(t[s]=o=n[s]?o:""),"id"==s?c=o:"_"!=s||c?"mx5-view"==s&&o&&!c&&(c=e+"\x1e"+V(o).path):c=o,"value"==s&&"textarea"==e?_=o:R(Fe,s)||(f+=` ${s}="${o&&ze(o)}"`)):n[s]||delete t[s];p=f,i={a:f+=r?"/>":`>${_}</${e}>`,c:_,d:c,b:e,e:a||t.$,f:n,g:p,h:t,i:m,j:h,k:u,l:r}}else i={b:t?"\x1e":Oe,a:l+""};return i},Fe={_:1,$:1};let Oe=e;let Ye="http://www.w3.org/",Pe={svg:`${Ye}2000/svg`,math:`${Ye}1998/Math/MathML`},Xe=(e,t,l)=>{let n,r,i,a=0,s=l.f,o=t.f,d=l.h,p=t.h;if(t)for(n in p)R(d,n)||(a=1,(i=o[n])?e[i]="":e.removeAttribute(n));for(n in d)R(Fe,n)||(r=d[n],(i=s[n])?t&&e[i]==r||(a=1,e[i]=r):t&&p[n]==r||(a=1,e.setAttribute(n,r)));return a&&delete e.d,a},Ee=(e,t)=>{let l,r=e.b;return r==Oe?l=n.createTextNode(e.a):(l=n.createElementNS(Pe[r]||t.namespaceURI,r),Xe(l,0,e),y(l,e.c)),l},Ce=(e,t,l,n,r)=>{let i,a,s,o,d={};for(i=n;i>=l;i--,r--)(s=(a=e[i]).d)&&(d[o="\x1e"+s]=(d[o]||0)+1,(a=d[s]||(d[s]=[])).push(t[r]));return d},Le=(e,t)=>!e.d&&!t.d&&e.b==t.b||e.b==Oe&&t.b==Oe||"\x1e"==e.b||"\x1e"==t.b||e.d&&t.d==e.d,Ve=(e,t,l,n,r,i,a,s)=>{if(a.c){if(t){if(t.e||t.c!=l.c){let o,d,p,g,c,h=t.i,u=l.i,f=l.j,_=l.k,m=t.k,x=e.childNodes,b=0,w=h.length-1,v=0,k=u.length-1;0;let A=h[b],z=h[w],j=u[v],S=u[k],$=b,q=w;for(;b<=w&&v<=k;)if(A)if(z)if(Le(A,j))n.b++,G(Ne,[x[$],e,A,j,n,r,i,a,s]),f[A.d]&&(f[A.d]--,_--,(g=c&&c[A.d])&&--c["\x1e"+A.d]),$++,A=h[++b],j=u[++v];else if(Le(z,S))n.b++,G(Ne,[x[q],e,z,S,n,r,i,a,s]),f[z.d]&&(f[z.d]--,_--),q--,z=h[--w],S=u[--k];else if(Le(A,S))d=x[$],e.insertBefore(d,x[q+1]),n.b++,G(Ne,[d,e,A,S,n,r,i,a,s]),f[A.d]&&(f[A.d]--,_--),q--,A=h[++b],S=u[--k];else if(Le(j,z))d=x[q],e.insertBefore(d,x[$++]),n.b++,G(Ne,[d,e,z,j,n,r,i,a,s]),f[z.d]&&(f[z.d]--,_--),z=h[--w],j=u[++v];else{if(!c&&_>0&&m>0&&(c=Ce(h,x,b,w,q)),(g=c&&c[j.d])&&(g=g[--c["\x1e"+j.d]])){if(p=A,g!=x[$]){for(d=b+1,o=$+1;d<=w;d++)if((p=h[d])&&x[o++]==g){h[d]=null;break}b--,e.insertBefore(g,x[$])}f[p.d]&&f[p.d]--,n.b++,G(Ne,[g,e,p,j,n,r,i,a,s])}else c&&c[A.d]&&f[A.d]?(n.c=1,e.insertBefore(Ee(j,e),x[$]),b--,q++):(n.b++,G(Ne,[x[$],e,A,j,n,r,i,a,s]));++$,A=h[++b],j=u[++v]}else z=h[--w];else A=h[++b];for(o=v,d=1;o<=k;o++,d++)"\x1e"==(p=u[o]).b?y(e,p.a):e.insertBefore(Ee(p,e),x[q+d]),n.c=1;for(o=$;o<=q;o++)1==(p=x[$]).nodeType&&r.unmountZone(p),e.removeChild(p),n.c=1}}else n.c=1,y(e,l.c);n.b||s()}},Ne=(e,t,l,n,r,i,a,s,o)=>{if(s.c){0;let d=l.h,p=n.h;if(l.e||l.a!=n.a)if("\x1e"==l.b||"\x1e"==n.b)r.c=1,y(t,n.a);else if(l.b==n.b){if(l.b==Oe)r.c=1,e.nodeValue=n.a;else if(!d._||d._!=p._){let t,g,c,h,u,f,_,m=p["mx5-view"],x=n.c,y=l.g!=n.g,b=se[e.b],w=m&&V(m);if(y&&(y=Xe(e,l,n))&&(r.c=1),m&&b&&b.h==w.path&&(h=b.d)){if(f=x!=l.c,_=m!=b.path,c=d.$,!f&&!_&&c)for(c of u=c.split(","))if("#"==c||R(a,c)){_=1;break}(_||f)&&(c=h.f,u=w.params,oe(b.pId,m,u),b.path=m,b.g=x,!1!==M(c,u,h)&&r.a.push(h),t=!h.tmpl)}else t=1,g=b;g&&(r.c=1,b.unmountVframe()),t&&!n.l&&Ve(e,l,n,r,i,a,s,o)}}else r.c=1,i.unmountZone(e),t.replaceChild(Ee(n,t),e);--r.b||o()}},De={},We=A({get:e=>e?De[e]:De,set(e){A(De,e)}},ae),Ue=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Ke=(e,t,l)=>(e.a?l=e:((l=function(e,t){for(t of l.a)M(t,e,this)}).a=[e],l.b=1),l.a=l.a.concat(t.a||t),l),Ge=e=>{let t,l;e.c&&(l=e.h,e.h=1,(t=e.owner).mountZone(),l||G(pe,t))},Qe=(e,t)=>{let l,{o:n,i:r,p:i,id:a}=e;for(l in n)be(l,r[l],t);for(l of(n=t?P:Y,i))n(l.a,l.b,l.c,a,l.d,e)},Je={win:l,doc:n};function Ze(...e){return A(this,...e),this}let et=(e,t,l)=>{let n,r,i,a,s={};for(r of e)for(n in r)i=r[n],a=s[n],"ctor"!=n?(Ue.test(n)&&(a?i=Ke(a,i):i.b=1),s[n]=i):l.push(i);for(n in s)R(t,n)||(t[n]=s[n])};function tt(...e){let t=this.a||(this.a=[]);return et(e,this[c],t),this}let lt=e=>(function(...t){return M(e,t,this)});let nt=e=>{if(!e["\x1e"]){e["\x1e"]=[];let t,l,n,r,i,a,s,o,d,p,g,h=e[c],u={},f=[],_={};for(s in h)if(t=h[s],l=s.match(Ue))for(o of([,a,n,r,g]=l,p=g?E(g):{},r=r.split(","))){if(i=Je[n],d=1,a){if(i){f.push({c:t,a:i,b:o,d:p});continue}d=2,(i=_[o])||(i=_[o]=[]),i[n]||(i[n]=1,i.push(n))}u[o]=u[o]|d,(i=h[o=n+"\x1e"+o])?i.b&&(t.b?h[o]=Ke(t,i):R(h,s)&&(h[o]=t)):h[o]=t}h.g=h.render=lt(h.render),h.o=u,h.p=f,h.i=_,h.f=h.assign}return e["\x1e"]};function rt(e,t,l,n){(n=this).root=t,n.owner=l,n.id=e,n.c=1,n.k=1,n.d={},n.j={},n.m=0,n.n=[]}function it(){this.id=m("b"),this.a={}}A(rt,{merge:tt,extend:function e(t){let l=this,n=(t=t||{}).ctor;function r(e,t,r,i,a,s,o,d){if(l.call(d=this,e,t,r,i),s=l.a)for(o of s)M(o,i,d);if(a)for(o of a)M(o,i,d);n&&M(n,i,d)}return r.merge=tt,r.extend=e,r.static=Ze,le(r,l,t)}}),A(rt[c],ae,{init:a,render:a,assign:a,observeLocation(e,t){let l;(l=this.a).a=1,f(e)&&(t=e.path,e=e.params),l.b=t,e&&(l.c=(e+"").split(","))},get(e,t){return t=this.d,e&&(t=t[e]),t},set(e,t){let l,n,r,i=this,a=i.d,s=i.j,o=i.k;for(r in e)l=e[r],n=a[r],w(l)&&n==l||R(t,r)||(s[r]=1,o=1),a[r]=l;return i.k=o,i},digest(e,t){let l=this.set(e,t);return new Promise(e=>{l.k?(l.m++,l.n.push(e),1==l.m&&He(l,1)):e()})},finale(){let e=this;return new Promise(t=>{e.m?e.n.push(t):t()})}}),A(it[c],{get(e,t){let l,n=this.a;if(e){let t,l=_(e)?e.slice():(e+"").split(".");for(;(t=l.shift())&&n;)n=n[t];t&&(n=void 0)}return void 0!==t&&(l=u(t))!=u(n)&&(n=t),n},set(e,t){f(e)||(e={[e]:t}),A(this.a,e)}});let at=(e,t,l)=>n=>{if(l=e[t]){delete e[t];for(let e of l)M(e,n,l.a)}},st=(e,t,l,n,r)=>{if(e.a)return e;if(e.b)return e.enqueue(st.bind(e,e,t,l,n,r));e.b=1,_(t)||(t=[t]);let i=e.constructor,a=0,s=i.d,o=((e,t,l,n,r,i)=>{let a=[],s=null,o=0;return(d,p,c)=>{let h;o++;let u,f=d.b,_=f.a;if(a[p+1]=d,c?(s=c,h=1):i.has(_)||(_&&i.set(_,d),f.b=g(),(u=f.c)&&M(u,d,d),h=1),!l.a){let t=o==n;t&&(l.b=0,2==r&&(a[0]=s,M(e,a,l))),1==r&&M(e,[c||null,d,t,p],l)}h&&t.fire("end",{bag:d,error:c})}})(l,i,e,t.length,n,i.c);for(let e of t)if(e){let t,[l,n]=i.get(e,r),d=l.b.a,p=o.bind(l,l,a++);d&&s[d]?s[d].push(p):n?(d&&((t=[p]).a=l,s[d]=t,p=at(s,d)),i.e(l,p)):p()}return e};function ot(){this.id=m("s"),this.f=[]}A(ot[c],{all(e,t){return st(this,e,t,2)},save(e,t){return st(this,e,t,2,1)},one(e,t){return st(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,l=this;l.b||l.a||(l.b=1,r(()=>{l.b=0,l.a||(t=l.f.shift())&&M(t,l.g=e)}))},destroy(e){(e=this).a=1,e.f=0}});let dt=(e,t,l)=>[o(t),o(e)].join("\x1e"),pt=A({add(e){let t,l=this.h;for(t of(_(e)||(e=[e]),e))if(t){let{name:e,cache:n}=t;t.cache=0|n,l[e]=t}},create(e){let t=this.meta(e),l=0|e.cache||t.cache,n=new it;n.set(t),n.b={c:t.after,a:l&&dt(t,e)},f(e)&&n.set(e);let r=t.before;return r&&M(r,n,n),this.fire("begin",{bag:n}),n},meta(e){return this.h[e.name||e]||e},get(e,t){let l,n,r=this;return t||(l=r.cached(e)),l||(l=r.create(e),n=1),[l,n]},cached(e){let t,l,n=this,r=n.c,i=n.meta(e),a=0|e.cache||i.cache;if(a&&(l=dt(i,e)),l){let e=n.d[l];e?t=e.a:(t=r.get(l))&&g()-t.b.b>a&&(r.del(l),t=0)}return t}},ae);ot.extend=((e,t,l)=>{function n(){ot.call(this)}return n.e=e,n.c=new I(t,l),n.d={},n.h={},A(n,pt),le(n,ot)});let gt=0,ct={config:(e,t)=>(t=b,e&&(t=f(e)?A(t,e):t[e]),t),boot(e){gt||(gt=1,A(b,e),((e,t)=>(re||(s=n.body,e=ie=b.rootId,(t=x(e))||(t=s),re=new ce(t)),re))().mountView(b.defaultView))},unboot(){gt&&re&&(re.unmountVframe(),re=null)},toMap:(e,t)=>{let l,n={};if(e)for(l of e)n[t&&l?l[t]:l]=t?l:1+(0|n[l]);return n},toTry:M,toUrl:(e,t,l)=>{let n,r,a,s=[];for(r in t)((n=t[r]+"")||R(l,r))&&(n=i(n),s.push(a=r+"="+n));return a&&(e+=(e&&(e.includes("?")?"&":"?"))+s.join("&")),e},parseUrl:V,guid:m,use:ee,dispatch:(e,t,l)=>{let n=new Event(t,F);A(n,l),e.dispatchEvent(n)},guard:ne,type:u,has:R,inside:v,applyStyle:q,Cache:I,View:rt,Vframe:ce,State:We,Service:ot,Event:ae,mark:(e,t,l,n,r)=>(null!==e[r="\x1ea"]&&(l=e[r]||(e[r]={}),R(l,t)||(l[t]=0),n=++l[t]),l=>(l=e[r],l&&n===l[t])),unmark:k,node:x,task:G,taskFinale:()=>new Promise(e=>{G(e)})};return ct.default=ct,ct});let Designer={init(e){let t=document.getElementById("boot").src.replace(/\/[^\/]+$/,"/");seajs.config({paths:{designer:t+"designer",i18n:t+"i18n",gallery:t+"gallery",util:t+"util",panels:t+"panels",elements:t+"elements"},alias:{magix:"magix5"}}),seajs.use(["magix","i18n/index"],(t,l)=>{t.applyStyle(["rd-_gallery_mx-style_index_","@charset \"UTF-8\";\n\n\n\n\n\nbody,\nul,\nh5,\ninput,\ntextarea {\nmargin:0;\npadding:0;\n}\n\nul {\nlist-style-type:none;\nlist-style-image:none;\n}\n\n\n\n\n\n\nhtml {\n-webkit-text-size-adjust:100%;\n-moz-text-size-adjust:100%;\n-ms-text-size-adjust:100%;\ntext-size-adjust:100%;\n  \nfont-size:62.5%;\n  \n}\nbody {\nfont-size:14px;\nline-height:1.5;\n}\n\n\nbody,\nbutton,\ninput,\ntextarea {\nfont-family:'helvetica neue', arial, 'hiragino sans gb', stheiti, 'wenquanyi micro hei', sans-serif;\n-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;\n  \n-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;\ntext-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;\n  \n}\n\nh5 {\nfont-size:14px;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimg {\nborder-style:none;\n  \nwidth:auto\\9;\n  \nheight:auto;\n  \nmax-width:100%;\n  \nvertical-align:top;\n  \n-ms-interpolation-mode:bicubic;\n  \n}\n\nsvg:not(:root) {\noverflow:hidden;\n}\n\n\n\nbutton,\ninput,\ntextarea {\nfont-family:inherit;\n  \nfont-size:100%;\n  \nmargin:0;\n  \nvertical-align:middle;\n  \n*vertical-align:middle;\n  \n}\n\ninput,\nbutton {\n*overflow:visible;\n}\n\nbutton {\ntext-transform:none;\n}\n\n\nbutton[disabled],\ninput[disabled] {\ncursor:not-allowed;\n}\n\ninput[type=\"checkbox\"],\ninput[type=\"radio\"] {\nbox-sizing:border-box;\n  \npadding:0;\n  \n*height:13px;\n  \n*width:13px;\n  \n}\n\n\n\n\n\n\n\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\nborder-style:none;\npadding:0;\n}\n\n\n\ntextarea {\noverflow:auto;\n  \nresize:vertical;\n  \n}\n\n\n\n@media screen and (-webkit-min-device-pixel-ratio: 0) {\n  input {\nline-height:normal !important;\n  }\n}\n\ninput::-moz-placeholder,\ntextarea::-moz-placeholder {\ncolor:darkGray;\nopacity:1;\n}\n\nlabel {\ncursor:pointer;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml {\nbox-sizing:border-box;\n}\n* {\nbox-sizing:inherit;\n}\n*:before,\n*:after {\nbox-sizing:inherit;\n}\ninput:focus,\ntextarea:focus,\nbutton:focus {\noutline:none;\nresize:none;\n}\nlabel {\ncursor:default;\ndisplay:inline-block;\nmax-width:100%;\nfont-weight:400;\n}\n::-ms-clear {\ndisplay:none;\n}\n\n@font-face{\nfont-family:rd-_gallery_mx-style_index_-mc-iconfont;\n  \n  src: url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA') format('woff');\n}\n.rd-_gallery_mx-style_index_-mc-iconfont {\nfont-family:rd-_gallery_mx-style_index_-mc-iconfont;\nline-height:1;\nfont-size:16px;\nfont-style:normal;\nfont-weight:normal;\nfont-variant:normal;\ndisplay:inline-block;\nspeak:none;\nposition:relative;\n-webkit-font-smoothing:antialiased;\n-moz-osx-font-smoothing:grayscale;\n}\n\n.rd-_gallery_mx-style_index_-mr10 {\nmargin-right:10px;\n}\n.rd-_gallery_mx-style_index_-hp100 {\nheight:100%;\n}\n.rd-_gallery_mx-style_index_-tc {\ntext-align:center;\n}\n.rd-_gallery_mx-style_index_-fl {\nfloat:left;\n}\n.rd-_gallery_mx-style_index_-fr {\nfloat:right;\n}\n.rd-_gallery_mx-style_index_-pa {\nposition:absolute;\n}\n.rd-_gallery_mx-style_index_-pr {\nposition:relative;\n}\nhtml .rd-_gallery_mx-style_index_-none {\ndisplay:none;\n}\n.rd-_gallery_mx-style_index_-clearfix:before,\n.rd-_gallery_mx-style_index_-clearfix:after {\ncontent:\" \";\ndisplay:table;\n}\n.rd-_gallery_mx-style_index_-clearfix:after {\nclear:both;\n}\n.rd-_gallery_mx-style_index_-unselectable {\n-webkit-user-select:none;\n-moz-user-select:none;\n-ms-user-select:none;\nuser-select:none;\n}\n.rd-_gallery_mx-style_index_-scrollable::-webkit-scrollbar {\nheight:6px;\nwidth:6px;\nbackground:#fafafa;\n}\n.rd-_gallery_mx-style_index_-scrollable::-webkit-scrollbar-corner {\nheight:6px;\nwidth:6px;\nbackground:#fafafa;\n}\n.rd-_gallery_mx-style_index_-scrollable::-webkit-scrollbar-thumb {\nbackground:#c0c0c0;\n}\n.rd-_gallery_mx-style_index_-scrollable::-webkit-scrollbar-thumb:hover {\nbackground:#949494;\n}\n.rd-_gallery_mx-style_index_-ellipsis {\nwhite-space:nowrap;\nword-wrap:normal;\noverflow:hidden;\ntext-overflow:ellipsis;\n}\n\n.rd-_gallery_mx-style_index_-btn {\noutline:none;\ndisplay:inline-block;\nfont-weight:normal;\ntext-align:center;\nvertical-align:middle;\ncursor:pointer;\nbackground-image:none;\nbackground-color:#ccc;\nwhite-space:nowrap;\npadding:4px 14px;\nfont-size:14px;\nline-height:1;\nborder:0;\ncolor:#333;\nborder-radius:2px;\n-webkit-user-select:none;\n-moz-user-select:none;\n-ms-user-select:none;\nuser-select:none;\n}\n.rd-_gallery_mx-style_index_-btn:hover,\n.rd-_gallery_mx-style_index_-btn:focus {\nbackground-color:#a0a0a0;\ncolor:#333;\n}\n.rd-_gallery_mx-style_index_-btn-brand {\nbackground-color:#FA742B;\ncolor:#fff;\n}\n.rd-_gallery_mx-style_index_-btn-brand:hover,\n.rd-_gallery_mx-style_index_-btn-brand:focus {\nbackground-color:#bd361b;\ncolor:#fff;\n}\n.rd-_gallery_mx-style_index_-btn[disabled] {\nbackground-color:#fbfbfb;\ncolor:#333;\n}\n.rd-_gallery_mx-style_index_-btn[disabled]:hover {\nborder-color:#e6e6e6;\ncolor:#333;\n}\n\n.rd-_gallery_mx-style_index_-dialog-header {\npadding:8px 25px;\nborder-bottom:1px solid #e6e6e6;\ncolor:#333;\nmargin:0;\nline-height:1.42857143;\nbackground:#fff;\n}\n.rd-_gallery_mx-style_index_-dialog-body {\npadding:18px 25px;\n}\n.rd-_gallery_mx-style_index_-dialog-footer {\npadding:8px 25px;\ntext-align:left;\nborder-top:1px solid #e6e6e6;\nbackground:#fff;\n}\n\n.rd-_gallery_mx-style_index_-loading {\npadding:150px 0;\nmargin:0 auto;\nwidth:150px;\ntext-align:center;\nline-height:0;\n}\n.rd-_gallery_mx-style_index_-loading:before,\n.rd-_gallery_mx-style_index_-loading:after {\ncontent:\"\";\n}\n.rd-_gallery_mx-style_index_-loading-anim,\n.rd-_gallery_mx-style_index_-loading:after,\n.rd-_gallery_mx-style_index_-loading:before {\nwidth:14px;\nheight:14px;\nbackground-color:#ccc;\nborder-radius:100%;\ndisplay:inline-block;\n-webkit-animation:rd-_gallery_mx-style_index_-sk-bouncedelay 1s infinite ease-in-out both;\nanimation:rd-_gallery_mx-style_index_-sk-bouncedelay 1s infinite ease-in-out both;\n}\n.rd-_gallery_mx-style_index_-loading:before {\n-webkit-animation-delay:-0.32s;\nanimation-delay:-0.32s;\n}\n.rd-_gallery_mx-style_index_-loading-anim {\nmargin:0 10px;\n-webkit-animation-delay:-0.16s;\nanimation-delay:-0.16s;\n}\n@-webkit-keyframes rd-_gallery_mx-style_index_-sk-bouncedelay {\n  0%,\n  80%,\n  100% {\ntransform:scale(0);\n  }\n  40% {\ntransform:scale(1);\n  }\n}\n@keyframes rd-_gallery_mx-style_index_-sk-bouncedelay {\n  0%,\n  80%,\n  100% {\ntransform:scale(0);\n  }\n  40% {\ntransform:scale(1);\n  }\n}\n\n::-moz-placeholder {\ncolor:#999;\n}\n:-ms-input-placeholder {\ncolor:#999;\n}\n::-ms-input-placeholder {\ncolor:#999;\n}\n::placeholder {\ncolor:#999;\n}\n::-moz-selection {\nbackground-color:rgba(243, 123, 99, 0.6);\n}\n::selection {\nbackground-color:rgba(243, 123, 99, 0.6);\n}\n.rd-_gallery_mx-style_index_-input,\n.rd-_gallery_mx-style_index_-textarea {\ncaret-color:#FA742B;\ndisplay:inline-block;\nheight:22px;\npadding:3px 4px;\nborder-radius:2px;\nbox-sizing:border-box;\nbox-shadow:none;\nborder:1px solid #e6e6e6;\nbackground-color:#fff;\ncolor:#333;\nwidth:140px;\nvertical-align:middle;\nmax-width:100%;\noutline:none;\ntransition:border-color 0.25s;\n}\n.rd-_gallery_mx-style_index_-input:hover,\n.rd-_gallery_mx-style_index_-textarea:hover {\nborder-color:#ccc;\n}\n.rd-_gallery_mx-style_index_-input:focus,\n.rd-_gallery_mx-style_index_-input-focus,\n.rd-_gallery_mx-style_index_-textarea:focus {\nborder-color:#FA742B !important;\n}\n.rd-_gallery_mx-style_index_-input-focus:hover {\nborder-color:#FA742B !important;\n}\n.rd-_gallery_mx-style_index_-textarea {\nheight:auto;\n}\n.rd-_gallery_mx-style_index_-input[disabled],\n.rd-_gallery_mx-style_index_-textarea[disabled] {\nbackground-color:#fbfbfb;\n}\n.rd-_gallery_mx-style_index_-input[disabled]:hover,\n.rd-_gallery_mx-style_index_-textarea[disabled]:hover {\ncursor:not-allowed;\nborder-color:#e6e6e6;\n}\n\n\n","rd-_assets_index_","@font-face{\nfont-family:rd-_assets_index_-iconfont;\n  \nsrc:url('//at.alicdn.com/t/font_890516_jtrl4f5t32n.eot');\nsrc:url('//at.alicdn.com/t/font_890516_jtrl4f5t32n.eot?#iefix') format('embedded-opentype'), url('//at.alicdn.com/t/font_890516_jtrl4f5t32n.woff2') format('woff2'), url('//at.alicdn.com/t/font_890516_jtrl4f5t32n.woff') format('woff'), url('//at.alicdn.com/t/font_890516_jtrl4f5t32n.ttf') format('truetype'), url('//at.alicdn.com/t/font_890516_jtrl4f5t32n.svg#iconfont') format('svg');\n}\n.rd-_assets_index_-iconfont {\nfont-family:rd-_assets_index_-iconfont;\nline-height:1;\nfont-size:16px;\nfont-style:normal;\nfont-weight:normal;\nfont-variant:normal;\ndisplay:inline-block;\nspeak:none;\nposition:relative;\n-webkit-font-smoothing:antialiased;\n-moz-osx-font-smoothing:grayscale;\n}\n\nbody {\nmin-width:1200px;\n}\n.rd-_assets_index_-f12 {\nfont-size:12px;\n}\n.rd-_assets_index_-mr2 {\nmargin-right:2px;\n}\n.rd-_assets_index_-r180 {\ntransform:rotate(180deg);\n}\n.rd-_assets_index_-r90 {\ntransform:rotate(90deg);\n}\n.rd-_assets_index_-flipx {\ntransform:scaleX(-1);\n}\n.rd-_assets_index_-ml100 {\nmargin-left:100px;\n}\n.rd-_assets_index_-mr30 {\nmargin-right:30px;\n}\n.rd-_assets_index_-m-center {\ndisplay:flex;\nalign-items:center;\n}\n.rd-_assets_index_-sticky-top {\nposition:-webkit-sticky;\nposition:sticky;\ntop:0;\n}\n.rd-_assets_index_-text-align-center {\ntext-align:center;\n}\n.rd-_assets_index_-width-100p {\nwidth:100%;\n}\n.rd-_assets_index_-table {\nborder-collapse:collapse;\nborder:1px solid #000;\nborder-spacing:0;\ntable-layout:fixed;\n}\n.rd-_assets_index_-table-cell {\nborder:1px solid #000;\n}\n.rd-_assets_index_-table-cell-tip {\ntext-align:center;\nfont-size:12px;\ncolor:#999;\n}\n.rd-_assets_index_-text-pre-hidden {\noverflow:hidden;\nwhite-space:pre;\n}\n"]);let n=navigator.language.toLowerCase();try{let e=window.localStorage;e&&(n=e.getItem("l.lang")||n)}catch(e){}t.config(e),t.config({lang:n});let r=l.default;t.View.merge({ctor(){this.set({i18n:r})},"@:{throttle}"(e,t){t=t||150;let l,n=Date.now();return(...r)=>{let i=Date.now();clearTimeout(l),i-n>t?(n=i,e.apply(this,r)):l=setTimeout(()=>{e.apply(this,r)},t-(i-n))}}}),document.title=r("@:{lang#site.name}"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",error(e){setTimeout(()=>{throw e},0)}})})}};define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,l)=>{let n,r,i,a,s,o,d,p,g,c,h,u,f={class:"rd-_gallery_mx-color_index_-body"},_={xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},m={class:"rd-_gallery_mx-color_index_-alpha rd-_gallery_mx-style_index_-pr"},x={class:"rd-_gallery_mx-color_index_-foot"},y={value:"value"};Object.defineProperty(t,"__esModule",{value:!0});const b=e("magix"),w=e("../mx-dragdrop/index"),v=e("../mx-monitor/index");b.default.applyStyle("rd-_gallery_mx-color_index_","\n.rd-_gallery_mx-color_index_-color {\nposition:relative;\nheight:22px;\nborder:solid 1px #e6e6e6;\nborder-radius:2px;\ndisplay:flex;\nalign-items:center;\ncursor:pointer;\npadding:1px;\ntransition:border-color 0.25s;\n}\n.rd-_gallery_mx-color_index_-color:hover {\nborder-color:#ccc;\n}\n.rd-_gallery_mx-color_index_-picker,\n.rd-_gallery_mx-color_index_-alpha {\nbackground:#fff;\nbackground-image:linear-gradient(45deg, #eee 25%, #0000 0, #0000 75%, #eee 0), linear-gradient(45deg, #eee 25%, #0000 0, #0000 75%, #eee 0);\nbackground-position:0px 0, 6px 6px;\nbackground-size:12px 12px;\n}\n.rd-_gallery_mx-color_index_-picker {\nmin-width:18px;\nheight:18px;\ntext-indent:-100000em;\nborder:solid 1px #ccc;\nposition:relative;\n}\n.rd-_gallery_mx-color_index_-text {\npadding:3px 4px;\n}\n.rd-_gallery_mx-color_index_-picker::after {\ncontent:' ';\ndisplay:block;\nright:0;\nbottom:0;\nposition:absolute;\nborder-width:6px 6px 0 0;\nborder-style:solid;\nborder-color:#0000 #ccc;\n}\n.rd-_gallery_mx-color_index_-color-zone {\nposition:absolute;\nborder-radius:2px;\nz-index:300;\nborder:1px solid #e6e6e6;\nbackground-color:#fff;\ndisplay:none;\n-webkit-user-select:none;\n-moz-user-select:none;\n-ms-user-select:none;\nuser-select:none;\npadding:2px;\n}\n.rd-_gallery_mx-color_index_-placement--bottom {\ntop:100%;\nmargin-top:4px;\n}\n.rd-_gallery_mx-color_index_-placement--top {\nbottom:100%;\nmargin-bottom:4px;\n}\n.rd-_gallery_mx-color_index_-shortcuts {\nwidth:176px;\n}\n.rd-_gallery_mx-color_index_-shortcuts-item {\nborder:1px solid #000;\nfloat:left;\nwidth:12px;\nheight:12px;\nmargin:-1px 0px 0 -1px;\nposition:relative;\n}\n.rd-_gallery_mx-color_index_-selected:before {\ncontent:' ';\nposition:absolute;\nleft:2px;\ntop:2px;\nborder:solid 1px #e8e8e8;\nborder-style:inset;\nwidth:6px;\nheight:6px;\n}\n.rd-_gallery_mx-color_index_-body {\nmargin:5px 0;\nheight:150px;\n}\n.rd-_gallery_mx-color_index_-cpicker {\nposition:relative;\nfloat:left;\nwidth:148px;\nheight:148px;\n}\n.rd-_gallery_mx-color_index_-cpicker-indicator {\nposition:absolute;\nwidth:8px;\nheight:8px;\nbox-shadow:0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0, 0, 0, 0.3), 0 0 1px 2px rgba(0, 0, 0, 0.4);\nborder-radius:50%;\nleft:-4px;\ntop:-4px;\n}\n.rd-_gallery_mx-color_index_-slide {\nwidth:18px;\nheight:148px;\nposition:relative;\nfloat:left;\nmargin-left:10px;\n}\n.rd-_gallery_mx-color_index_-slide-indicator {\nposition:absolute;\nleft:2px;\ntop:-2px;\nheight:4px;\nwidth:14px;\nbox-shadow:0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0, 0, 0, 0.3), 0 0 1px 2px rgba(0, 0, 0, 0.4);\nbackground:#fff;\n}\n.rd-_gallery_mx-color_index_-foot {\nheight:25px;\n}\n.rd-_gallery_mx-color_index_-color-value {\nwidth:80px;\nmargin-right:5px;\nvertical-align:middle;\n}\n.rd-_gallery_mx-color_index_-bgcolor {\nwidth:30px;\nborder-radius:2px;\nheight:22px;\ndisplay:inline-block;\nmargin-right:5px;\nvertical-align:middle;\nborder:1px solid #ddd;\n}\n.rd-_gallery_mx-color_index_-remove {\nposition:absolute;\nright:5px;\ntop:4px;\nfont-size:12px;\nopacity:0.2;\n}\n.rd-_gallery_mx-color_index_-remove:hover {\nopacity:0.5;\n}\n.rd-_gallery_mx-color_index_-alpha {\nwidth:174px;\nheight:12px;\nmargin-bottom:5px;\n}\n.rd-_gallery_mx-color_index_-alpha-tracker {\nheight:100%;\n}\n.rd-_gallery_mx-color_index_-alpha-indicator {\nposition:absolute;\nleft:-2px;\ntop:2px;\nheight:8px;\nwidth:4px;\nbox-shadow:0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0, 0, 0, 0.3), 0 0 1px 2px rgba(0, 0, 0, 0.4);\nbackground:#fff;\n}\n.rd-_gallery_mx-color_index_-notallowed {\ncursor:not-allowed;\nbackground-color:#fbfbfb;\n}\n.rd-_gallery_mx-color_index_-notallowed:hover {\nborder-color:#e6e6e6;\n}\n.rd-_gallery_mx-color_index_-notallowed:hover .rd-_gallery_mx-color_index_-remove {\nopacity:0.1;\n}\n.rd-_gallery_mx-color_index_-notallowed .rd-_gallery_mx-color_index_-picker {\nopacity:0.4;\n}\n.rd-_gallery_mx-color_index_-notallowed .rd-_gallery_mx-color_index_-remove {\nopacity:0.1;\n}\n");let k=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],A=(e,t,l)=>{let n,r,i,a,s;e=e%360/60,n=r=i=l-(s=l*t);let o=255*(n+=[s,a=s*(1-Math.abs(e%2-1)),0,0,a,s][e=~~e]),d=255*(r+=[a,s,s,a,0,0][e]),p=255*(i+=[0,0,a,s,s,a][e]);return{r:o,g:d,b:p,hex:"#"+(16777216|p|d<<8|o<<16).toString(16).slice(1)}};t.default=b.default.View.extend({tmpl:(e,t,l,b,w,v,k,A)=>{let z,j,S;try{let w,v,k,$,q,M,R,B,H,I,T=[],{disabled:F,text:O,textWidth:Y,color:P,clear:X,i18n:E,placement:C,align:L,renderUI:V,shortcuts:N,alpha:D,current:W}=e;if(v=[],j=2,z="{{if text}}",S="if(text){",O&&(q=[t(0,0,(j=3,z="{{=text}}",S="<%=text%>",b(O)))],j=3,z="{{if textWidth}}",$="",S="<%if(textWidth){%>",Y&&($+="width:"+(j=3,z="{{=textWidth}}",S="<%=textWidth%>",b(Y))+"px"+(j=3,z="{{/if}}",""),S="<%}%>"),k=[t("div",{class:"rd-_gallery_mx-color_index_-text rd-_gallery_mx-style_index_-unselectable","mx5-click":l+"\x1e@:{toggle}()",style:$},q)],v.push(...k)),k=[t(0,0,"picker")],j=5,z="{{if color}}",$="",S="<%if(color){%>",P&&($+="background:"+(j=5,z="{{=color}}",S="<%=color%>",b(P))+";"+(j=5,z="{{/if}}",""),S="<%}%>"),$+=(j=5,z="{{if !text}}",""),S="<%if(!text){%>",O||($+="width:100%"+(j=5,z="{{/if}}",""),S="<%}%>"),v.push(t("div",{class:"rd-_gallery_mx-color_index_-picker rd-_gallery_mx-style_index_-unselectable","mx5-click":l+"\x1e@:{toggle}()",style:$},k)),j=6,z="{{if clear&&color}}",S="if(clear&&color){",X&&P&&(q=[t(0,0,"\ue67f")],k=[t("i",{class:"rd-_gallery_mx-color_index_-remove rd-_gallery_mx-style_index_-mc-iconfont","mx5-click":l+"\x1e@:{clear.color}()",title:(j=7,z="{{=i18n('@:{lang#remove.color}')}}",S="<%=i18n('@:{lang#remove.color}')%>",b(E("@:{lang#remove.color}")))},q)],v.push(...k)),k=[],j=10,z="{{if renderUI}}",S="if(renderUI){",V){q=[],M=[],j=12,z="{{each shortcuts as sc}}",S="for(let $q_c_lzqrodh=shortcuts.length,$q_key_wvfqludzi=0;$q_key_wvfqludzi<$q_c_lzqrodh;$q_key_wvfqludzi++){let sc=shortcuts[$q_key_wvfqludzi];";for(let e=N.length,n=0;n<e;n+=1){let e=N[n];R=[t("li",{class:"rd-_gallery_mx-color_index_-shortcuts-item",id:"sc_"+(j=13,z="{{=sc}}",S="<%=sc%>",b(e))+"_"+(j=13,z="{{=$viewId}}","")+l,style:"background:#"+(j=13,z="{{=sc}}",S="<%=sc%>",b(e)),"mx5-click":l+"\x1e@:{shortcuts.picked}({color:'#"+(j=13,z="{{=sc}}",S="<%=$eq(sc)%>",A(e))+"'})"})],M.push(...R)}q.push(t("ul",{class:"rd-_gallery_mx-color_index_-shortcuts rd-_gallery_mx-style_index_-clearfix",id:"scs_"+(j=11,z="{{=$viewId}}","")+l},M)),I=n?[n]:[n=t("stop",{_:"_",offset:"0%","stop-color":"#000000","stop-opacity":"1"})],r?I.push(r):I.push(r=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),H=[t("lineargradient",{id:"gb_"+(j=20,z="{{=$viewId}}","")+l,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},I)],I=i?[i]:[i=t("stop",{_:"b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})],r?I.push(r):I.push(r=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),H.push(t("lineargradient",{id:"gw_"+(j=24,z="{{=$viewId}}","")+l,x1:"0%",y1:"100%",x2:"100%",y2:"100%"},I)),B=[t("defs",0,H),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+(j=29,z="{{=$viewId}}","")+l+")"}),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+(j=30,z="{{=$viewId}}","")+l+")"})],R=[t("svg",_,B),t("div",{class:"rd-_gallery_mx-color_index_-cpicker-indicator",id:"ci_"+(j=32,z="{{=$viewId}}","")+l})],M=[t("div",{class:"rd-_gallery_mx-color_index_-cpicker",id:"cz_"+(j=17,z="{{=$viewId}}","")+l,"mx5-mousedown":l+"\x1e@:{color.zone.drag}()"},R)],I=a?[a]:[a=t("stop",{_:"c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"})],s?I.push(s):I.push(s=t("stop",{_:"d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"})),o?I.push(o):I.push(o=t("stop",{_:"e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"})),d?I.push(d):I.push(d=t("stop",{_:"f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"})),p?I.push(p):I.push(p=t("stop",{_:"g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"})),g?I.push(g):I.push(g=t("stop",{_:"h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"})),c?I.push(c):I.push(c=t("stop",{_:"i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"})),h?I.push(h):I.push(h=t("stop",{_:"j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"})),u?I.push(u):I.push(u=t("stop",{_:"k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})),H=[t("lineargradient",{id:"ghsv_"+(j=37,z="{{=$viewId}}","")+l,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},I)],B=[t("defs",0,H),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+(j=49,z="{{=$viewId}}","")+l+")"})],R=[t("svg",_,B),t("div",{class:"rd-_gallery_mx-color_index_-slide-indicator",id:"si_"+(j=51,z="{{=$viewId}}","")+l})],M.push(t("div",{class:"rd-_gallery_mx-color_index_-slide","mx5-mousedown":l+"\x1e@:{slide.drag}()"},R)),q.push(t("div",f,M)),j=54,z="{{if alpha}}",S="if(alpha){",D&&(B=[t("div",{class:"rd-_gallery_mx-color_index_-alpha-indicator",id:"ai_"+(j=57,z="{{=$viewId}}","")+l})],R=[t("div",{class:"rd-_gallery_mx-color_index_-alpha-tracker rd-_gallery_mx-style_index_-pr",id:"at_"+(j=56,z="{{=$viewId}}","")+l,"mx5-mousedown":l+"\x1e@:{alpha.drag}()"},B)],M=[t("div",m,R)],q.push(...M)),M=[t("span",{class:"rd-_gallery_mx-color_index_-bgcolor",id:"bc_"+(j=62,z="{{=$viewId}}","")+l}),t("input",{class:"rd-_gallery_mx-color_index_-color-value rd-_gallery_mx-style_index_-input",readonly:!0,id:"v_"+(j=63,z="{{=$viewId}}","")+l,value:(j=63,z="{{=current}}",S="<%=current%>",b(W))},0,y,1)],R=[t(0,0,"\u786e\u5b9a")],M.push(t("button",{class:"rd-_gallery_mx-style_index_-btn rd-_gallery_mx-style_index_-btn-brand",type:"button","mx5-click":l+"\x1e@:{enter}();"},R)),q.push(t("div",x,M)),k.push(...q)}return v.push(t("div",{id:"bd_"+(j=9,z="{{=$viewId}}","")+l,class:"rd-_gallery_mx-color_index_-color-zone rd-_gallery_mx-color_index_-placement--"+(j=9,z="{{=placement}}",S="<%=placement%>",b(C)),style:(j=9,z="{{=align}}",S="<%=align%>",b(L)+":-1px")},k)),w="rd-_gallery_mx-color_index_-color"+(j=1,z="{{if disabled}}",""),S="<%if(disabled){%>",F&&(w+=" rd-_gallery_mx-color_index_-notallowed"+(j=1,z="{{/if}}",""),S="<%}%>"),T.push(t("div",{"mx5-contextmenu":l+"\x1e@:{prevent}()",id:"root_"+(j=1,z="{{=$viewId}}","")+l,class:w},v)),t(l,0,T)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+z+"\r\n\tat line: "+j,t+="\r\n\ttranslate to: "+S+"\r\n\tat file:gallery/mx-color/index.html"}},init(e){this.set({shortcuts:k}),v.default["@:{setup}"](),this.on("destroy",()=>{v.default["@:{remove}"](this),v.default["@:{teardown}"]()})},assign(e){return this["@:{color}"]=e.color||"",this["@:{show.alpha}"]=e.alpha+""=="true",this["@:{hsv.info}"]={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"}),!0},render(){this.digest({alpha:this["@:{show.alpha}"],color:this["@:{color}"],current:this["@:{color}"]})},"@:{set.hsv}"(e,t){let l=this,n=l["@:{hsv.info}"];n.h=e.h,n.s=e.s,n.v=e.v;let r=A(e.h,e.s,e.v).hex,i=b.default.node("cz_"+l.id),a=i.clientWidth,s=A(e.h,1,1);if(i.style.background=s.hex,l["@:{hex.color}"]=r,l["@:{sync.color}"](),!t){let e=b.node("scs_"+l.id).querySelector('li[class$="rd-_gallery_mx-color_index_-selected"]');e&&e.classList.remove("rd-_gallery_mx-color_index_-selected");let t=b.node("si_"+l.id),r=t.clientHeight/2,i=Math.round(n.h*a/360-r),s=b.node("ci_"+l.id),o=s.clientWidth/2;t.style.top=i+"px",i=Math.round((1-n.v)*a-o);let d=Math.round(n.s*a-o);s.style.left=d+"px",s.style.top=i+"px"}let o=b.node("sc_"+r.substr(1,6)+"_"+l.id);o&&o.classList.add("rd-_gallery_mx-color_index_-selected")},"@:{set.color}"(e){let t=this,l=parseInt(e.substr(1,2),16);isNaN(l)&&(l=255);let n=parseInt(e.substr(3,2),16);isNaN(n)&&(n=255);let r=parseInt(e.substr(5,2),16);isNaN(r)&&(r=255);let i=((e,t,l)=>{let n,r,i,a;return e/=255,t/=255,l/=255,{h:n=(n=0==(a=(i=Math.max(e,t,l))-Math.min(e,t,l))?null:i==e?(t-l)/a+(t<l?6:0):i==t?(l-e)/a+2:(e-t)/a+4)%6*60,s:r=0===a?0:a/i,v:i}})(l,n,r),a=parseInt(e.substr(7,2),16);isNaN(a)&&(a=255),t["@:{hex.alpha}"]=("0"+a.toString(16)).slice(-2),t["@:{set.hsv}"](i),t["@:{show.alpha}"]&&t["@:{set.alpha}"](a)},"@:{set.alpha}"(e){let t=b.node("ai_"+this.id);e/=255,e*=b.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},"@:{sync.color}"(){let e=this,t=b.node("bc_"+e.id),l=e["@:{hex.color}"];e["@:{show.alpha}"]&&(b.node("at_"+e.id).style.background="linear-gradient(to right, "+l+"00 0%,"+l+" 100%)",l+=e["@:{hex.alpha}"]),t.style.background=l,b.node("v_"+e.id).value=l},"@:{prevent}<contextmenu>"(e){e.preventDefault()},"@:{color.zone.drag}<mousedown>"(e){let t=this,l=b.node("cz_"+t.id).clientWidth,n=b.node("ci_"+t.id).clientWidth/2,r=e.eventTarget.getBoundingClientRect(),i=e.pageX-r.left-window.pageXOffset,a=e.pageY-r.top-window.pageYOffset,s=i/l,o=(l-a)/l;t["@:{set.hsv}"]({h:t["@:{hsv.info}"].h,s:s,v:o});let d=b.node("ci_"+t.id),p=getComputedStyle(d),g=p.left,c=p.top,h=parseInt(g,10),u=parseInt(c,10),f=e;t["@:{drag.drop}"](e,e=>{let r=e.pageY-f.pageY,i=e.pageX-f.pageX;(r+=u)<=-n?r=-n:r>=l-n&&(r=l-n),(i+=h)<=-n?i=-n:i>=l-n&&(i=l-n),d.style.left=i+"px",d.style.top=r+"px";let a=(i+n)/l,s=(l-(r+n))/l;t["@:{set.hsv}"]({h:t["@:{hsv.info}"].h,s:a,v:s})})},"@:{slide.drag}<mousedown>"(e){let t=this,l=e.eventTarget,n=b.node("si_"+t.id),r=b.node("cz_"+t.id).clientWidth,i=n.clientHeight/2,a=l.getBoundingClientRect(),s=(e.pageY-a.top-window.scrollY)/r*360;t["@:{set.hsv}"]({h:s,s:t["@:{hsv.info}"].s,v:t["@:{hsv.info}"].v});let o=parseInt(getComputedStyle(n).top,10);t["@:{drag.drop}"](e,l=>{let a=l.pageY-e.pageY;(a+=o)<=-i?a=-i:a>=r-i&&(a=r-i),n.style.top=a+"px";let s=(a+i)/r*360;t["@:{set.hsv}"]({h:s,s:t["@:{hsv.info}"].s,v:t["@:{hsv.info}"].v},!0)})},"@:{alpha.drag}<mousedown>"(e){let t=e.eventTarget,l=this,n=b.node("ai_"+l.id),r=b.node("at_"+l.id).clientWidth,i=n.clientWidth/2,a=t.getBoundingClientRect(),s=(e.pageX-a.left)/r*255|0;l["@:{hex.alpha}"]=("0"+s.toString(16)).slice(-2),l["@:{set.alpha}"](s),l["@:{sync.color}"]();let o=getComputedStyle(n),d=parseInt(o.left,10);l["@:{drag.drop}"](e,t=>{let a=t.pageX-e.pageX;(a+=d)<=-i?a=-i:a>=r-i&&(a=r-i),n.style.left=a+"px";let s=Math.round((a+i)/r*255);l["@:{hex.alpha}"]=("0"+s.toString(16)).slice(-2),l["@:{sync.color}"]()})},"@:{enter}<click>"(){let e=this;e["@:{hide}"]();let t=b.node("v_"+e.id).value;t!=e["@:{color}"]&&(e.digest({color:t,current:t}),b.default.dispatch(e.root,"input",{color:e["@:{color}"]=t}))},"@:{shortcuts.picked}<click>"(e){this["@:{set.color}"](e.params.color),e.eventTarget.classList.add("rd-_gallery_mx-color_index_-selected")},"@:{inside}"(e){return b.default.inside(e,this.root)},async"@:{show}"(){let e=b.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",v.default["@:{add}"](this),b.node("root_"+this.id).classList.add("rd-_gallery_mx-style_index_-input-focus"),this["@:{init.sync.color}"]||(await this.digest({renderUI:!0}),this["@:{set.color}"](this["@:{color}"]),this["@:{init.sync.color}"]=1))},"@:{hide}"(){let e=b.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(b.node("root_"+this.id).classList.remove("rd-_gallery_mx-style_index_-input-focus"),e.style.display="none",v.default["@:{remove}"](this))},"@:{toggle}<click>"(){if(this.get("disabled"))return;let e=b.node("bd_"+this.id);"none"==getComputedStyle(e).display?this["@:{show}"]():this["@:{hide}"]()},"@:{clear.color}<click>"(){if(this.get("disabled"))return;let e=this;if(e["@:{init.sync.color}"]){let t=b.node("v_"+e.id).value;e["@:{hide}"](),e.digest({color:"",current:t})}else e.digest({color:""});b.default.dispatch(e.root,"input",{color:e["@:{color}"]=""})}}).merge(w.default)}),define("gallery/mx-column/index",["magix","../mx-number/index"],(e,t,l)=>{let n;e("../mx-number/index"),Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");r.default.applyStyle("rd-_gallery_mx-column_index_","\n.rd-_gallery_mx-column_index_-tip {\nborder-radius:2px;\nfont-size:12px;\ncolor:#999;\nborder:solid 1px #e6e6e6;\npadding:0 4px;\n}\n"),t.default=r.default.View.extend({tmpl:(e,t,l,r,i,a,s,o)=>{let d,p,g;try{let r,c,h,u,f=[],{fields:_,min:m,max:x,columns:y}=e;if(p=1,d="{{if fields.length}}",g="if(fields.length){",_.length){c=[],p=2,d="{{each fields as field}}",g="for(let $q_c_wgonskrqi=fields.length,$q_key_suoszusj=0;$q_key_suoszusj<$q_c_wgonskrqi;$q_key_suoszusj++){let field=fields[$q_key_suoszusj];";for(let e=_.length,n=0;n<e;n+=1){let e=_[n];u="gallery/mx-number/index?"+(p=3,d="{{=min}}",""),g="<%if(($_temp=min)!=null){%>",null!=(r=m)&&(u+="min="+(g="<%=$eu($_temp)%>",i(r)),g="<%}%>"),u+=(p=3,d="{{=max}}",""),g="<%if(($_temp=max)!=null){%>",null!=(r=x)&&(u+="&max="+(g="<%=$eu($_temp)%>",i(r)),g="<%}%>"),u+="&value="+(p=3,d="{{#columns[field.id]}}",g="<%#columns[field.id],'\x1ecolumns.'+(field.id)%>",s(a,y[e.id],"\x1ecolumns."+e.id)),h=[t("div",{$:"columns,fields","mx5-input":l+"\x1e@:{update.width}({id:'"+(p=3,d="{{=field.id}}",g="<%=$eq(field.id)%>",o(e.id))+"'})","mx5-change":l+"\x1e@:{stop}()",class:"rd-_gallery_mx-style_index_-input rd-_gallery_mx-style_index_-pr","mx5-view":u})],c.push(...h)}f.push(...c)}else n?c=[n]:(h=[t(0,0,"\u8bf7\u5148\u7ed1\u5b9a\u6570\u636e\u5b57\u6bb5")],c=[n=t("div",{_:"_",class:"rd-_gallery_mx-column_index_-tip"},h)]),f.push(...c);return t(l,0,f)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+d+"\r\n\tat line: "+p,t+="\r\n\ttranslate to: "+g+"\r\n\tat file:gallery/mx-column/index.html"}},assign(e){let{columns:t,min:l,max:n,fields:r}=e;this.set({min:l,max:n,columns:t,fields:r})},"@:{notify.change}"(){let e=this.get("columns");r.default.dispatch(this.root,"change",{columns:e})},render(){this.digest()},"@:{update.width}<input>"(e){e.stopPropagation();let t=this.get("columns"),{id:l}=e.params;t[l]=e.value,this["@:{notify.change}"]()},"@:{stop}<change>"(e){e.stopPropagation()}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,l)=>{let n={class:"rd-_gallery_mx-style_index_-dialog-header"},r={class:"rd-_gallery_mx-style_index_-dialog-body",style:"word-break:break-all"},i={class:"rd-_gallery_mx-style_index_-clearfix rd-_gallery_mx-style_index_-dialog-footer"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../i18n/index");t.default=a.default.View.extend({tmpl:(e,t,l,a)=>{let s,o,d;try{let p,g,c=[],{title:h,body:u,i18n:f}=e;return g=[t(0,0,(o=2,s="{{=title}}",d="<%=title%>",a(h)))],p=[t("h5",0,g)],c.push(t("div",n,p)),p=[t(0,0,(o=4,s="{{=body}}",d="<%=body%>",a(u)))],c.push(t("div",r,p)),g=[t(0,0,(o=6,s="{{=i18n('@:{lang#btn.enter}')}}",d="<%=i18n('@:{lang#btn.enter}')%>",a(f("@:{lang#btn.enter}"))))],p=[t("button",{"mx5-click":l+"\x1e@:{enter}();",class:"rd-_gallery_mx-style_index_-btn rd-_gallery_mx-style_index_-btn-brand rd-_gallery_mx-style_index_-fr",type:"button"},g)],c.push(t("div",i,p)),t(l,0,c)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+s+"\r\n\tat line: "+o,t+="\r\n\ttranslate to: "+d+"\r\n\tat file:gallery/mx-dialog/alert.html"}},init(e){this["@:{dialog}"]=e.dialog,this["@:{string.body}"]=e.body,this["@:{string.title}"]=e.title||s.default("@:{lang#dialog.tip}"),this["@:{fn.enter.callback}"]=e.enterCallback},render(){this.digest({body:this["@:{string.body}"],title:this["@:{string.title}"]})},"@:{enter}<click>"(){let e=this;e["@:{dialog}"].close(),e["@:{fn.enter.callback}"]&&a.default.toTry(e["@:{fn.enter.callback}"])}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,l)=>{let n={class:"rd-_gallery_mx-style_index_-dialog-header"},r={class:"rd-_gallery_mx-style_index_-dialog-body",style:"word-break:break-all"},i={class:"rd-_gallery_mx-style_index_-clearfix rd-_gallery_mx-style_index_-dialog-footer"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../i18n/index");t.default=a.default.View.extend({tmpl:(e,t,l,a)=>{let s,o,d;try{let p,g,c=[],{title:h,body:u,i18n:f}=e;return g=[t(0,0,(o=2,s="{{=title}}",d="<%=title%>",a(h)))],p=[t("h5",0,g)],c.push(t("div",n,p)),p=[t(0,0,(o=4,s="{{=body}}",d="<%=body%>",a(u)))],c.push(t("div",r,p)),g=[t(0,0,(o=6,s="{{=i18n('@:{lang#btn.cancel}')}}",d="<%=i18n('@:{lang#btn.cancel}')%>",a(f("@:{lang#btn.cancel}"))))],p=[t("button",{type:"button","mx5-click":l+"\x1e@:{cancel}()",class:"rd-_gallery_mx-style_index_-btn rd-_gallery_mx-style_index_-fr"},g)],g=[t(0,0,(o=7,s="{{=i18n('@:{lang#btn.enter}')}}",d="<%=i18n('@:{lang#btn.enter}')%>",a(f("@:{lang#btn.enter}"))))],p.push(t("button",{type:"button","mx5-click":l+"\x1e@:{enter}()",class:"rd-_gallery_mx-style_index_-btn rd-_gallery_mx-style_index_-btn-brand rd-_gallery_mx-style_index_-fr rd-_gallery_mx-style_index_-mr10"},g)),c.push(t("div",i,p)),t(l,0,c)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+s+"\r\n\tat line: "+o,t+="\r\n\ttranslate to: "+d+"\r\n\tat file:gallery/mx-dialog/confirm.html"}},init(e){let t=this;t["@:{dialog}"]=e.dialog,t["@:{string.body}"]=e.body,t["@:{string.title}"]=e.title||s.default("@:{lang#dialog.tip}"),t["@:{fn.enter.callback}"]=e.enterCallback,t["@:{fn.calcel.callback}"]=e.cancelCallback},render(){this.digest({body:this["@:{string.body}"],title:this["@:{string.title}"]})},"@:{enter}<click>"(){let e=this;e["@:{dialog}"].close(),e["@:{fn.enter.callback}"]&&a.default.toTry(e["@:{fn.enter.callback}"])},"@:{cancel}<click>"(){let e=this;e["@:{dialog}"].close(),e["@:{fn.calcel.callback}"]&&a.default.toTry(e["@:{fn.calcel.callback}"])}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,l)=>{let n;Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");e("./alert"),e("./confirm"),r.default.applyStyle("rd-_gallery_mx-dialog_index_","\n.rd-_gallery_mx-dialog_index_-dialog {\nposition:absolute;\n}\n.rd-_gallery_mx-dialog_index_-dialog-content {\nposition:relative;\nbackground-color:#fff;\nborder-radius:2px;\nborder:1px solid #e6e6e6;\n}\n.rd-_gallery_mx-dialog_index_-dialog-close {\nposition:absolute;\ncursor:pointer;\nopacity:0.2;\nz-index:1;\ntop:7px;\nright:10px;\n}\n.rd-_gallery_mx-dialog_index_-dialog-close:hover,\n.rd-_gallery_mx-dialog_index_-dialog-close:focus {\nopacity:0.5;\n}\n.rd-_gallery_mx-dialog_index_-dialog-backdrop {\nposition:fixed;\ntop:0;\nright:0;\nleft:0;\nbottom:0;\nbackground-color:#000;\nopacity:0.2;\n}\n.rd-_gallery_mx-dialog_index_-blur {\n-webkit-filter:blur(3px);\nfilter:blur(3px);\n}\n.rd-_gallery_mx-dialog_index_-anim-mask {\n-webkit-animation:rd-_gallery_mx-dialog_index_-fadein 0.3s;\nanimation:rd-_gallery_mx-dialog_index_-fadein 0.3s;\n-webkit-animation-fill-mode:forwards;\nanimation-fill-mode:forwards;\n}\n.rd-_gallery_mx-dialog_index_-focus {\nposition:absolute;\nright:10px;\ntop:0;\nwidth:1px;\nheight:0px;\n}\n.rd-_gallery_mx-dialog_index_-loading-ext {\npadding:80px 0;\n}\n@-webkit-keyframes rd-_gallery_mx-dialog_index_-fadein {\n  from {\nopacity:0;\n  }\n  to {\nopacity:0.2;\n  }\n}\n@keyframes rd-_gallery_mx-dialog_index_-fadein {\n  from {\nopacity:0;\n  }\n  to {\nopacity:0.2;\n  }\n}\n.rd-_gallery_mx-dialog_index_-anim-mask-out {\n-webkit-animation:rd-_gallery_mx-dialog_index_-fadeout 0.2s;\nanimation:rd-_gallery_mx-dialog_index_-fadeout 0.2s;\n-webkit-animation-fill-mode:forwards;\nanimation-fill-mode:forwards;\n}\n@-webkit-keyframes rd-_gallery_mx-dialog_index_-fadeout {\n  from {\nopacity:0.2;\n  }\n  to {\nopacity:0;\n  }\n}\n@keyframes rd-_gallery_mx-dialog_index_-fadeout {\n  from {\nopacity:0.2;\n  }\n  to {\nopacity:0;\n  }\n}\n.rd-_gallery_mx-dialog_index_-dialog-content-ext {\nmargin-bottom:50px;\nmin-height:60px;\n}\n.rd-_gallery_mx-dialog_index_-scroll-cnt {\nposition:fixed;\nwidth:100%;\nheight:100%;\noverflow:auto;\nleft:0;\ntop:0;\n}\n.rd-_gallery_mx-dialog_index_-anim-body {\n-webkit-animation:rd-_gallery_mx-dialog_index_-move 0.3s;\nanimation:rd-_gallery_mx-dialog_index_-move 0.3s;\n-webkit-animation-fill-mode:forwards;\nanimation-fill-mode:forwards;\n}\n@-webkit-keyframes rd-_gallery_mx-dialog_index_-move {\n  from {\nmargin-top:-50px;\nopacity:0;\n  }\n  to {\nmargin-top:0;\nopacity:1;\n  }\n}\n@keyframes rd-_gallery_mx-dialog_index_-move {\n  from {\nmargin-top:-50px;\nopacity:0;\n  }\n  to {\nmargin-top:0;\nopacity:1;\n  }\n}\n.rd-_gallery_mx-dialog_index_-anim-body-out {\n-webkit-animation:rd-_gallery_mx-dialog_index_-moveup 0.2s;\nanimation:rd-_gallery_mx-dialog_index_-moveup 0.2s;\n-webkit-animation-fill-mode:forwards;\nanimation-fill-mode:forwards;\n}\n@-webkit-keyframes rd-_gallery_mx-dialog_index_-moveup {\n  from {\nmargin-top:0;\nopacity:1;\n  }\n  to {\nmargin-top:-50px;\nopacity:0;\n  }\n}\n@keyframes rd-_gallery_mx-dialog_index_-moveup {\n  from {\nmargin-top:0;\nopacity:1;\n  }\n  to {\nmargin-top:-50px;\nopacity:0;\n  }\n}\n");let i=500,a=[],s=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g,c,h=[],{removeClass:u,zIndex:f,left:_,top:m,width:x,closable:y}=e;return o="rd-_gallery_mx-dialog_index_-dialog-backdrop"+(a=1,i="{{if !removeClass}}",""),s="<%if(!removeClass){%>",u||(o+=" rd-_gallery_mx-dialog_index_-anim-mask"+(a=1,i="{{/if}}",""),s="<%}%>"),h.push(t("div",{style:"z-index:"+(a=1,i="{{=zIndex-1}}",s="<%=zIndex-1%>",r(f-1)),id:"mask_"+(a=1,i="{{=$viewId}}","")+l,class:o})),p=[t("input",{id:"focus_"+(a=4,i="{{=$viewId}}","")+l,class:"rd-_gallery_mx-dialog_index_-focus"},0,0,1)],g=[t(0,0,"\ue67f")],p.push(t("span",{class:"rd-_gallery_mx-style_index_-mc-iconfont rd-_gallery_mx-dialog_index_-dialog-close "+(a=5,i="{{= closable ? '' : 'none'}}",s="<%=closable ? '' : 'rd-_gallery_mx-style_index_-none'%>",r(y?"":"rd-_gallery_mx-style_index_-none")),"mx5-click":l+"\x1e@:{close}()"},g)),n?g=[n]:(c=[t("span",{class:"rd-_gallery_mx-style_index_-loading-anim"})],g=[n=t("div",{_:"_",class:"rd-_gallery_mx-dialog_index_-loading-ext rd-_gallery_mx-style_index_-loading"},c)]),p.push(t("div",{class:"rd-_gallery_mx-dialog_index_-dialog-content rd-_gallery_mx-dialog_index_-dialog-content-ext",id:"cnt_"+(a=6,i="{{=$viewId}}","")+l},g)),o="rd-_gallery_mx-dialog_index_-dialog"+(a=3,i="{{if !removeClass}}",""),s="<%if(!removeClass){%>",u||(o+=" rd-_gallery_mx-dialog_index_-anim-body"+(a=3,i="{{/if}}",""),s="<%}%>"),d=[t("div",{id:"body_"+(a=3,i="{{=$viewId}}","")+l,style:"left:"+(a=3,i="{{=left}}",s="<%=left%>",r(_))+"px;top:"+(a=3,i="{{=top}}",s="<%=top%>",r(m))+"px;width:"+(a=3,i="{{=width}}",s="<%=width%>",r(x))+"px",class:o},p)],h.push(t("div",{class:"rd-_gallery_mx-dialog_index_-scroll-cnt",style:"z-index:"+(a=2,i="{{=zIndex}}",s="<%=zIndex%>",r(f))},d)),t(l,0,h)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:gallery/mx-dialog/index.html"}},init(e){let t=this,l=r.default.node("app"),n=t.root;t.on("destroy",()=>{(e=>{for(let t,l=a.length-1;l>=0;l--)if((t=a[l]).id==e.id){a.splice(l,1);break}})(t),500==(i-=2)&&l.classList.remove("rd-_gallery_mx-dialog_index_-blur"),r.default.dispatch(n,"close"),n.parentNode.removeChild(n)}),r.default.has(e,"closable")||(e.closable=!0),t.set(e),500==i&&l.classList.add("rd-_gallery_mx-dialog_index_-blur"),i+=2,a.push(t)},async render(){let e=this;await e.digest({zIndex:i});let t=e.get(),l=r.default.mark(e,"@:{render}");setTimeout(()=>{l()&&(e.root.style.display="block",r.default.node("focus_"+e.id).focus())},30),e.owner.mountVframe(r.default.node("cnt_"+e.id),t.view,t),setTimeout(()=>{l()&&e.digest({removeClass:!0})},300)},"@:{notify.main.view.unload}"(e){let t=r.default.node("cnt_"+this.id);r.default.Vframe.byNode(t).invoke("fire",["unload",e])},"@:{close.anim}"(){let e,t=this.id;(e=r.default.node("body_"+t)).classList.add("rd-_gallery_mx-dialog_index_-anim-body-out"),(e=r.default.node("mask_"+t)).classList.add("rd-_gallery_mx-dialog_index_-anim-mask-out")},"@:{close}<click>"(){r.default.dispatch(this.root,"dlg_close")},"$doc<keyup>"(e){if(27==e.keyCode){let e=a[a.length-1];e==this&&e.get("closable")&&r.default.dispatch(this.root,"dlg_close")}}});Object.assign(s,{"@:{dialog.show}"(e,t){let l=r.default.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+l+'" style="display:none" />');let n,i=r.default.node(l),a=e.owner.mountVframe(i,"gallery/mx-dialog/index",t);return i.addEventListener("dlg_close",()=>{if(!i["@:{is.closing}"]&&!n){let e=()=>{i["@:{is.closing}"]=1,a.invoke("@:{close.anim}"),setTimeout(()=>{a.unmountVframe()},200)},t={p:0,prevent(){n=1},resolve(){t.p=1,n=0,e()},reject(){t.p=1,n=0}};a.invoke("@:{notify.main.view.unload}",[t]),n||t.p||e()}}),i},alert(e,t,l){this.confirm(e,t,null,l,"alert")},confirm(e,t,l,n,r){this.mxDialog("gallery/mx-dialog/"+(r||"confirm"),{body:e,cancelCallback:l,enterCallback:t,title:n,modal:!0,width:300,closable:!1,left:(window.innerWidth-300)/2,top:Math.max((window.innerHeight-220)/2,0)})},mxDialog(e,t){let l,n,i=this,a={view:e},s=r.default.mark(this,"@:{dialog}");return r.default.use(e,o=>{let d="$dlg_"+e;!i[d]&&s()&&(i[d]=1,Object.assign(a,o.dialogOptions),Object.assign(a,t),a.width||(a.width=500),a.left||(a.left=(window.innerWidth-a.width)/2),a.top||(a.top=100),a.dialog={close(){l&&r.default.dispatch(l,"dlg_close")}},(l=i["@:{dialog.show}"](i,a)).addEventListener("close",()=>{delete i[d],n&&n()}))}),{close(){l&&r.default.dispatch(l,"dlg_close")},whenClose(e){n=e}}}}),t.default=s}),define("gallery/mx-dragdrop/index",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=window.getComputedStyle,r=e=>{(e=window.getSelection)&&e().removeAllRanges()},i=e=>{e.preventDefault()},a=["mousemove"],s=["mouseup"],o=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];t.default={ctor(){let e=this;e.on("destroy",()=>{e["@:{dd&drag.end}"]()})},"@:{dd&drag.end}"(e){let t=this;if(t["@:{dd&move.proxy}"]){let l;for(l of a)document.removeEventListener(l,t["@:{dd&move.proxy}"]);for(l of s)document.removeEventListener(l,t["@:{dd&stop.proxy}"]);for(l of o)document.removeEventListener(l,i);window.removeEventListener("blur",t["@:{dd&stop.proxy}"]),delete t["@:{dd&move.proxy}"];let n=t["@:{dd&stop.callback}"];n&&n(e)}},"@:{drag.drop}"(e,t,l){let n=this;if(n["@:{dd&drag.end}"](),e){let e;for(e of(r(),n["@:{dd&stop.callback}"]=l,n["@:{dd&stop.proxy}"]=n["@:{dd&drag.end}"].bind(n),n["@:{dd&move.proxy}"]=(e=>{t&&t(e)}),a))document.addEventListener(e,n["@:{dd&move.proxy}"]);for(e of s)document.addEventListener(e,n["@:{dd&stop.proxy}"]);for(e of o)document.addEventListener(e,i,{passive:!1});window.addEventListener("blur",n["@:{dd&stop.proxy}"])}},"@:{from.point}"(e,t){let l=null;if(document.elementFromPoint)for(!i["@:{dd&fixed}"]&&n&&(i["@:{dd&fixed}"]=!0,i["@:{dd&add.scroll}"]=null!==document.elementFromPoint(-1,-1)),i["@:{dd&add.scroll}"]&&(e+=window.pageXOffset,t+=window.pageYOffset),l=document.elementFromPoint(e,t);l&&3==l.nodeType;)l=l.parentNode;return l},"@:{clear.selection}":r}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,l)=>{let n,r={class:"rd-_gallery_mx-dropdown_index_-dropdown-menu-wrapper"};Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../mx-monitor/index");i.default.applyStyle("rd-_gallery_mx-dropdown_index_","\n.rd-_gallery_mx-dropdown_index_-dropdown {\noutline:0;\nposition:relative;\nmin-width:50px;\nwidth:100%;\nbackground-color:#fff;\nborder:solid 1px #e6e6e6;\nborder-radius:2px;\ndisplay:inline-block;\nvertical-align:middle;\nheight:22px;\ntransition:all 0.25s;\n}\n.rd-_gallery_mx-dropdown_index_-dropdown:hover {\nborder-color:#ccc;\n}\n.rd-_gallery_mx-dropdown_index_-dropdown-toggle {\ncolor:#333;\nposition:relative;\nwidth:100%;\ncursor:pointer;\n-webkit-user-select:none;\n-moz-user-select:none;\n-ms-user-select:none;\nuser-select:none;\npadding:0 20px 0 3px;\n}\n.rd-_gallery_mx-dropdown_index_-notallowed {\ncursor:not-allowed;\nbackground-color:#fbfbfb;\n}\n.rd-_gallery_mx-dropdown_index_-notallowed:hover {\nborder-color:#e6e6e6;\n}\n.rd-_gallery_mx-dropdown_index_-notallowed .rd-_gallery_mx-dropdown_index_-dropdown-toggle {\ncursor:not-allowed;\n}\n.rd-_gallery_mx-dropdown_index_-arrow {\nposition:absolute;\nright:0;\ntop:0;\nfont-size:20px;\ncolor:#ccc;\ntransition:all 0.25s;\n}\n.rd-_gallery_mx-dropdown_index_-open .rd-_gallery_mx-dropdown_index_-arrow {\ntransform:rotate(180deg);\ntop:0;\n}\n.rd-_gallery_mx-dropdown_index_-open,\n.rd-_gallery_mx-dropdown_index_-open:hover {\nborder-color:#FA742B;\n}\n.rd-_gallery_mx-dropdown_index_-dropdown-toggle-label {\nheight:20px;\nline-height:21px;\nwhite-space:nowrap;\noverflow:hidden;\ntext-overflow:ellipsis;\ndisplay:block;\n}\n.rd-_gallery_mx-dropdown_index_-dropdown-toggle-label-ph {\ncolor:#999;\n}\n.rd-_gallery_mx-dropdown_index_-dropdown-menu-wrapper {\nposition:absolute;\ntop:100%;\nleft:-1px;\nright:-1px;\nmargin-top:4px;\nborder-radius:2px;\nz-index:300;\nborder:1px solid #e6e6e6;\nbackground-color:#fff;\ndisplay:none;\n-webkit-user-select:none;\n-moz-user-select:none;\n-ms-user-select:none;\nuser-select:none;\n}\n.rd-_gallery_mx-dropdown_index_-open .rd-_gallery_mx-dropdown_index_-dropdown-menu-wrapper {\ndisplay:block;\n}\n.rd-_gallery_mx-dropdown_index_-dropdown-menu {\noverflow:auto;\nmax-height:196px;\npadding:2px 0;\n}\n.rd-_gallery_mx-dropdown_index_-dropdown-item {\npadding:0 2px;\nmargin:2px 0;\n}\n.rd-_gallery_mx-dropdown_index_-item-link {\ncursor:pointer;\ncolor:#666;\ndisplay:block;\nwidth:100%;\npadding:0 5px;\nheight:20px;\nline-height:20px;\nborder-radius:2px;\n}\n.rd-_gallery_mx-dropdown_index_-item-link:hover {\ncolor:#333;\nbackground-color:#f0f0f0;\n}\n.rd-_gallery_mx-dropdown_index_-active,\n.rd-_gallery_mx-dropdown_index_-active:hover,\n.rd-_gallery_mx-dropdown_index_-active:active,\n.rd-_gallery_mx-dropdown_index_-active:focus {\ncolor:#fff;\nbackground-color:#FA742B;\n}\n"),t.default=i.default.View.extend({tmpl:(e,t,l,i,a,s,o)=>{let d,p,g;try{let a,c,h,u,f,_,m,x,y,b,w=[],{disabled:v,selectedText:k,selected:A,emptyText:z,rList:j,list:S,textKey:$,valueKey:q}=e;if(h=[],f=[t(0,0,(p=6,d="{{=selectedText}}",g="<%=selectedText%>",i(k)))],c="rd-_gallery_mx-dropdown_index_-dropdown-toggle-label"+(p=6,d="{{if (selected===''||selected==emptyText)}}",""),g="<%if(selected===''||selected==emptyText){%>",""!==A&&A!=z||(c+=" rd-_gallery_mx-dropdown_index_-dropdown-toggle-label-ph"+(p=6,d="{{/if}}",""),g="<%}%>"),u=[t("span",{class:c},f)],n?u.push(n):(f=[t(0,0,"\ue692")],u.push(n=t("span",{_:"_",class:"rd-_gallery_mx-dropdown_index_-arrow rd-_gallery_mx-style_index_-mc-iconfont"},f))),h.push(t("div",{class:"rd-_gallery_mx-dropdown_index_-dropdown-toggle","mx5-click":l+"\x1e@:{toggle}()",title:(p=5,d="{{=selectedText}}",g="<%=selectedText%>",i(k))},u)),p=9,d="{{if rList}}",g="if(rList){",j){m=[],p=12,d="{{each list as item}}",g="for(let $q_c_wloppqkj=list.length,$q_key_joojpnfxo=0;$q_key_joojpnfxo<$q_c_wloppqkj;$q_key_joojpnfxo++){let item=list[$q_key_joojpnfxo];";for(let e=S.length,n=0;n<e;n+=1){let e=S[n];x=[],p=13,d="{{set text=item,value=item}}",g="<%let text=item,value=item;%>";let r=e,h=e;p=14,d="{{if textKey&&valueKey}}",g="if(textKey&&valueKey){",$&&q&&(p=15,d="{{text=item[textKey]}}",_="",g="<%text=item[textKey]%>",r=e[$],_+=" "+(p=16,d="{{value=item[valueKey]}}",""),g="<%value=item[valueKey]%>",h=e[q]),p=18,d="{{set equal=(value+'')===(selected+'')}}",g="<%let equal=(value+'')===(selected+'');%>";let u=h+""==A+"";b=[t(0,0,(p=23,d="{{=text}}",g="<%=text%>",i(r)))],c="rd-_gallery_mx-dropdown_index_-item-link rd-_gallery_mx-style_index_-ellipsis"+(p=21,d="{{if equal}}",""),g="<%if(equal){%>",u&&(c+=" rd-_gallery_mx-dropdown_index_-active"+(p=21,d="{{/if}}",""),g="<%}%>"),y=[t("span",{"mx5-click":l+"\x1e@:{select}({item:'"+(p=22,d="{{#item}}",g="<%#item,'\x1elist.'+($q_key_joojpnfxo)%>",o(s,e,"\x1elist."+n))+"'})",class:c},b)],x.push(t("li",{title:(p=19,d="{{=text}}",g="<%=text%>",i(r)),active:(p=19,d="{{=equal}}",g="<%=equal%>",a=u,a),class:"rd-_gallery_mx-dropdown_index_-dropdown-item"},y)),m.push(...x)}f=[t("ul",{class:"rd-_gallery_mx-dropdown_index_-dropdown-menu",id:"list_"+(p=11,d="{{=$viewId}}","")+l},m)],u=[t("div",r,f)],h.push(...u)}return c="rd-_gallery_mx-dropdown_index_-dropdown"+(p=1,d="{{if disabled}}",""),g="<%if(disabled){%>",v&&(c+=" rd-_gallery_mx-dropdown_index_-notallowed"+(p=1,d="{{/if}}",""),g="<%}%>"),w.push(t("div",{id:"dd_"+(p=1,d="{{=$viewId}}","")+l,class:c},h)),t(l,0,w)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+d+"\r\n\tat line: "+p,t+="\r\n\ttranslate to: "+g+"\r\n\tat file:gallery/mx-dropdown/index.html"}},init(e){a.default["@:{setup}"](),this.on("destroy",()=>{a.default["@:{remove}"](this),a.default["@:{teardown}"]()})},assign(e){let t=e.selected,l=e.textKey||"",n=e.valueKey||"",r=e.emptyText||"",a=e.disabled+""=="true",s=e.list||[];s=s.slice();let o=i.default.toMap(s,n);if(r)if(l&&n){if(!o[""]){let e={};e[l]=r,e[n]="",s.unshift(e),o[""]=e}}else o[r]||(s.unshift(r),o[r]=r);t||!r||l||n||(t=r),t&&o[t]||(t=o[t]||s[0],l&&n&&(t=t[n]));let d=l&&n?o[t][l]:t;return this.set({selected:t,selectedText:d,list:s,textKey:l,valueKey:n,emptyText:r,disabled:a}),!0},render(){this.digest()},"@:{inside}"(e){return i.default.inside(e,this.root)},async"@:{show}"(){let e=this,t=i.default.node("dd_"+e.id);if(!t.classList.contains("rd-_gallery_mx-dropdown_index_-open")){t.classList.add("rd-_gallery_mx-dropdown_index_-open"),e.get("rList")||await e.digest({rList:!0});let l=(t=i.default.node("list_"+e.id)).querySelector("li[active]");l&&l.scrollIntoViewIfNeeded&&l.scrollIntoViewIfNeeded(),a.default["@:{add}"](e)}},"@:{hide}"(){let e=this,t=i.default.node("dd_"+e.id);t.classList.contains("rd-_gallery_mx-dropdown_index_-open")&&(t.classList.remove("rd-_gallery_mx-dropdown_index_-open"),a.default["@:{remove}"](e))},"@:{toggle}<click>"(){let e=this,t=i.default.node("dd_"+e.id);t.classList.contains("rd-_gallery_mx-dropdown_index_-open")?e["@:{hide}"]():t.classList.contains("rd-_gallery_mx-dropdown_index_-notallowed")||e["@:{show}"]()},"@:{select}<click>"(e){let t=this;t["@:{hide}"]();let l=t.get("valueKey"),n=t.get("textKey"),r=t.get("selected"),a=e.params.item,s=a,o=a;n&&l&&(o=a[n],s=a[l]),r!==s&&(t.digest({selected:s,selectedText:o}),i.default.dispatch(t.root,"change",{item:a,value:l?a[l]:a,text:n?a[n]:a}))}})}),define("gallery/mx-field/index",["magix","../../elements/table/consts"],(e,t,l)=>{let n,r={class:"rd-_gallery_mx-field_index_-drop-tip"};Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../elements/table/consts");let s=i.default.State;i.default.applyStyle("rd-_gallery_mx-field_index_","\n.rd-_gallery_mx-field_index_-drop-zone {\nmin-height:100px;\nborder:solid 1px #e6e6e6;\nbackground:#fff;\nborder-radius:2px;\n}\n.rd-_gallery_mx-field_index_-drop-tip {\nmargin-top:40px;\nfont-size:12px;\ntext-align:center;\ncolor:#999;\n}\n.rd-_gallery_mx-field_index_-item-draggable {\nborder:solid 1px #e6e6e6;\nborder-radius:2px;\nmargin:2px;\nline-height:20px;\nheight:20px;\nfont-size:12px;\nposition:relative;\nbackground-color:#fff;\n}\n.rd-_gallery_mx-field_index_-item-draggable::after {\ncontent:' ';\nwidth:98%;\nmargin:0 1%;\nheight:2px;\nleft:0;\nposition:absolute;\n}\n.rd-_gallery_mx-field_index_-notallowed {\nbackground:#fbfbfb;\ncursor:not-allowed;\n}\n.rd-_gallery_mx-field_index_-notallowed .rd-_gallery_mx-field_index_-item-draggable {\nbackground:#fbfbfb;\n}\n.rd-_gallery_mx-field_index_-item--top::after {\ntop:-3px;\nbackground-color:#bd361b;\n}\n.rd-_gallery_mx-field_index_-item--bottom::after {\nbottom:-3px;\nbackground-color:#bd361b;\n}\n.rd-_gallery_mx-field_index_-item-dragged {\nbackground-color:#fff;\nopacity:0.4;\n}\n.rd-_gallery_mx-field_index_-drop-zone-enter {\nbackground-color:#FA742B10;\n}\n"),t.default=i.default.View.extend({tmpl:(e,t,l,i)=>{let a,s,o;try{let d,p,g,c,h,u,f=[],{enter:_,disabled:m,fields:x,dragIndex:y,index:b,onTop:w,i18n:v}=e;if(p=[],s=2,a="{{if fields&&fields.length}}",o="if(fields&&fields.length){",x&&x.length){g=[],s=3,a="{{each fields as field i}}",o="for(let $q_c_gtezyxwm=fields.length,i=0;i<$q_c_gtezyxwm;i++){let field=fields[i];";for(let e=x.length,r=0;r<e;r+=1){let e=x[r];n?h=[n]:(u=[t(0,0,"\ue69c")],h=[n=t("span",{_:"_",class:"rd-_assets_index_-iconfont"},u)]),u=[t(0,0,(s=6,a="{{=field.name}}",o="<%=field.name%>",i(e.name)))],h.push(t("span",0,u)),d="rd-_gallery_mx-field_index_-item-draggable"+(s=4,a="{{if i==dragIndex}}",""),o="<%if(i==dragIndex){%>",r==y?(d+=" rd-_gallery_mx-field_index_-item-dragged"+(s=4,a="{{else if i==index}}",""),o="<%}else if(i==index){%>"):r==b&&(d+=" rd-_gallery_mx-field_index_-item--"+(s=4,a="{{=onTop?'top':'bottom'}}",o="<%=onTop?'top':'bottom'%>",i(w?"top":"bottom"))+(s=4,a="{{/if}}",""),o="<%}%>"),c=[t("div",{draggable:(s=4,a="{{=!disabled}}",o="<%=!disabled%>",!m&&"true"),"mx5-dragstart":l+"\x1e@:{drag.start}({index:"+(s=4,a="{{=i}}",o="<%=i%>",i(r))+"})","mx5-dragover":l+"\x1e@:{drag.over}({index:"+(s=4,a="{{=i}}",o="<%=i%>",i(r))+"})",class:d},h)],g.push(...c)}p.push(...g)}else c=[t(0,0,(s=11,a="{{=i18n('@:{lang#mx-gallery.field.drag.tip}')}}",o="<%=i18n('@:{lang#mx-gallery.field.drag.tip}')%>",i(v("@:{lang#mx-gallery.field.drag.tip}"))))],g=[t("div",r,c)],p.push(...g);return d="rd-_gallery_mx-field_index_-drop-zone"+(s=1,a="{{if enter}}",""),o="<%if(enter){%>",_&&(d+=" rd-_gallery_mx-field_index_-drop-zone-enter"+(s=1,a="{{/if}}",""),o="<%}%>"),d+=(s=1,a="{{if disabled}}",""),o="<%if(disabled){%>",m&&(d+=" rd-_gallery_mx-field_index_-notallowed"+(s=1,a="{{/if}}",""),o="<%}%>"),f.push(t("div",{"mx5-dragleave":l+"\x1e@:{drag.exit}()","mx5-dragenter":l+"\x1e@:{drag.enter}()","mx5-contextmenu":l+"\x1e@:{prevent}()",class:d},p)),t(l,0,f)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+a+"\r\n\tat line: "+s,t+="\r\n\ttranslate to: "+o+"\r\n\tat file:gallery/mx-field/index.html"}},assign(e){if(this["@:{props}"]=e.props,this["@:{now.url}"]=null,this["@:{now.id}"]=null,this["@:{fields}"]=null,this["@:{drag.index}"]=null,this["@:{drag.node}"]=null,e.props.bind){let{url:t,fields:l,id:n}=e.props.bind;t&&(this["@:{now.url}"]=t),n&&(this["@:{now.id}"]=n),l&&(this["@:{fields}"]=l,this.set({fields:l}))}this.set(e)},render(){this.digest()},"@:{notify.change}"(){var e;let t=this["@:{now.url}"],l=this["@:{fields}"],n=this["@:{now.id}"],r=this["@:{props}"].columns||{},s={...r};for(let e in r)delete r[e];for(let t of l)r[t.id]=null!==(e=s[t.id])&&void 0!==e?e:a.default["@:{default.cell.width}"];i.default.dispatch(this.root,"change",{bindField:{url:t,id:n,fields:l}})},"@:{drag.exit}<dragleave>"(e){if(this.get("disabled"))return;i.default.inside(e.relatedTarget,e.eventTarget)||this.digest({enter:!1,index:-1})},"@:{drag.enter}<dragenter>"(e){if(this.get("disabled"))return;if(!i.default.inside(e.relatedTarget,e.eventTarget)){let e=this["@:{fields}"],t=this.get("index"),l=this["@:{drag.index}"];s.get("@:{bind.field.drag.data}")&&e.length&&(null==t||-1==t)&&this.set({index:e.length-1,onTop:0}),this.digest({enter:-1==l||null==l})}},"@:{drag.start}<dragstart>"(e){this["@:{drag.index}"]=e.params.index,this["@:{drag.node}"]=e.eventTarget,e.dataTransfer.effectAllowed="all",e.dataTransfer.setData("text/plain","fix ff"),this.set({dragIndex:this["@:{drag.index}"]})},"@:{drag.over}<dragover>"(e){let t=this;if(e.preventDefault(),!this.get("disabled"))if(t["@:{drag.node}"]!=e.eventTarget){e.dataTransfer.dropEffect="move";let l=e.eventTarget.getBoundingClientRect(),n=l.top+l.height/2>e.pageY,r=e.params.index;t.digest({onTop:n,index:r})}else e.dataTransfer.dropEffect="none"},"$doc<drop>"(e){if(e.preventDefault(),this.get("disabled"))return;if(i.default.inside(e.target,this.root)){let e=s.get("@:{bind.field.drag.data}");if(e){s.set({"@:{bind.field.drag.data}":null});let{url:t,field:l,id:n}=e,r=this["@:{fields}"];if(this["@:{now.url}"]!=t)this["@:{now.url}"]=t,r=[l],this["@:{fields}"]=r,this["@:{now.id}"]=n,this.set({index:-1,fields:r});else{let e=this.get();null!=e.index&&-1!=e.index?r.splice(e.index+(e.onTop?0:1),0,l):r.length||r.push(l),this.set({index:-1,fields:r})}this["@:{notify.change}"]()}else{let e=this.get();if(null!=e.index&&-1!=e.index){let t=this["@:{drag.index}"],l=this["@:{fields}"],n=l[t];l.splice(e.index+(e.onTop?0:1),0,n),e.index<t?l.splice(t+1,1):l.splice(t,1),this.set({fields:l,index:-1}),this["@:{drag.index}"]=-1,this["@:{notify.change}"]()}}}else{let e=this["@:{drag.index}"];if(null!=e&&-1!=e){this["@:{drag.index}"]=-1;let t=this["@:{fields}"];t.splice(e,1),this.set({index:-1,fields:t}),this["@:{notify.change}"]()}}this.digest({enter:!1,dragIndex:-1}),this["@:{drag.node}"]=null},"@:{prevent}<contextmenu>"(e){e.preventDefault()}})}),define("gallery/mx-font/align",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");n.default.applyStyle("rd-_gallery_mx-font_style_","\n.rd-_gallery_mx-font_style_-group {\ndisplay:inline-block;\nheight:25px;\nline-height:25px;\nvertical-align:bottom;\n}\n.rd-_gallery_mx-font_style_-group-item {\nwidth:20px;\nmargin:0 1px;\ntext-align:center;\nheight:20px;\nline-height:20px;\ncursor:pointer;\nbackground:#e0e0e0;\nborder-radius:2px;\n}\n.rd-_gallery_mx-font_style_-group-item:hover {\nbackground:#ccc;\n}\n.rd-_gallery_mx-font_style_-active,\n.rd-_gallery_mx-font_style_-active:hover {\nbackground:#FA742B;\ncolor:#fff;\n}\n.rd-_gallery_mx-font_style_-notallowed,\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-group-item {\ncursor:not-allowed;\nopacity:0.7;\n}\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-group-item,\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-group-item:hover {\nbackground:#e9e9e9;\n}\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-active,\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-active:hover {\nbackground:#fb955d;\n}\n"),t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o,d,p=[],{disabled:g,i18n:c,value:h}=e;return d=[t(0,0,"\ue687")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=2,r="{{if value.h=='flex-start'}}",""),a="<%if(value.h=='flex-start'){%>","flex-start"==h.h&&(s+=" rd-_gallery_mx-font_style_-active"+(i=2,r="{{/if}}",""),a="<%}%>"),o=[t("li",{title:(i=2,r="{{=i18n('@:{lang#mx-gallery.font.align.left}')}}",a="<%=i18n('@:{lang#mx-gallery.font.align.left}')%>",n(c("@:{lang#mx-gallery.font.align.left}"))),"mx5-click":l+"\x1e@:{set}({type:'h',v:'flex-start'})",class:s},d)],d=[t(0,0,"\ue68a")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=3,r="{{if value.h=='center'}}",""),a="<%if(value.h=='center'){%>","center"==h.h&&(s+=" rd-_gallery_mx-font_style_-active"+(i=3,r="{{/if}}",""),a="<%}%>"),o.push(t("li",{title:(i=3,r="{{=i18n('@:{lang#mx-gallery.font.align.center}')}}",a="<%=i18n('@:{lang#mx-gallery.font.align.center}')%>",n(c("@:{lang#mx-gallery.font.align.center}"))),"mx5-click":l+"\x1e@:{set}({type:'h',v:'center'})",class:s},d)),d=[t(0,0,"\ue686")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=4,r="{{if value.h=='flex-end'}}",""),a="<%if(value.h=='flex-end'){%>","flex-end"==h.h&&(s+=" rd-_gallery_mx-font_style_-active"+(i=4,r="{{/if}}",""),a="<%}%>"),o.push(t("li",{title:(i=4,r="{{=i18n('@:{lang#mx-gallery.font.align.right}')}}",a="<%=i18n('@:{lang#mx-gallery.font.align.right}')%>",n(c("@:{lang#mx-gallery.font.align.right}"))),"mx5-click":l+"\x1e@:{set}({type:'h',v:'flex-end'})",class:s},d)),d=[t(0,0,"\ue614")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=5,r="{{if value.v=='flex-start'}}",""),a="<%if(value.v=='flex-start'){%>","flex-start"==h.v&&(s+=" rd-_gallery_mx-font_style_-active"+(i=5,r="{{/if}}",""),a="<%}%>"),o.push(t("li",{title:(i=5,r="{{=i18n('@:{lang#mx-gallery.font.align.top}')}}",a="<%=i18n('@:{lang#mx-gallery.font.align.top}')%>",n(c("@:{lang#mx-gallery.font.align.top}"))),"mx5-click":l+"\x1e@:{set}({type:'v',v:'flex-start'})",class:s},d)),d=[t(0,0,"\ue613")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=6,r="{{if value.v=='center'}}",""),a="<%if(value.v=='center'){%>","center"==h.v&&(s+=" rd-_gallery_mx-font_style_-active"+(i=6,r="{{/if}}",""),a="<%}%>"),o.push(t("li",{title:(i=6,r="{{=i18n('@:{lang#mx-gallery.font.align.middle}')}}",a="<%=i18n('@:{lang#mx-gallery.font.align.middle}')%>",n(c("@:{lang#mx-gallery.font.align.middle}"))),"mx5-click":l+"\x1e@:{set}({type:'v',v:'center'})",class:s},d)),d=[t(0,0,"\ue612")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=7,r="{{if value.v=='flex-end'}}",""),a="<%if(value.v=='flex-end'){%>","flex-end"==h.v&&(s+=" rd-_gallery_mx-font_style_-active"+(i=7,r="{{/if}}",""),a="<%}%>"),o.push(t("li",{title:(i=7,r="{{=i18n('@:{lang#mx-gallery.font.align.bottom}')}}",a="<%=i18n('@:{lang#mx-gallery.font.align.bottom}')%>",n(c("@:{lang#mx-gallery.font.align.bottom}"))),"mx5-click":l+"\x1e@:{set}({type:'v',v:'flex-end'})",class:s},d)),s="rd-_gallery_mx-style_index_-unselectable rd-_gallery_mx-font_style_-group"+(i=1,r="{{if disabled}}",""),a="<%if(disabled){%>",g&&(s+=" rd-_gallery_mx-font_style_-notallowed"+(i=1,r="{{/if}}",""),a="<%}%>"),p.push(t("ul",{class:s},o)),t(l,0,p)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:gallery/mx-font/align.html"}},assign(e){return this["@:{current.value}"]=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"@:{set}<click>"(e){let t=this;if(t.get("disabled"))return;let l=t["@:{current.value}"],{type:r,v:i}=e.params;l[r]=i,t["@:{current.value}"]=l,t.digest({value:l}),n.default.dispatch(t.root,"input",{value:l})}})}),define("gallery/mx-font/style",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");n.default.applyStyle("rd-_gallery_mx-font_style_","\n.rd-_gallery_mx-font_style_-group {\ndisplay:inline-block;\nheight:25px;\nline-height:25px;\nvertical-align:bottom;\n}\n.rd-_gallery_mx-font_style_-group-item {\nwidth:20px;\nmargin:0 1px;\ntext-align:center;\nheight:20px;\nline-height:20px;\ncursor:pointer;\nbackground:#e0e0e0;\nborder-radius:2px;\n}\n.rd-_gallery_mx-font_style_-group-item:hover {\nbackground:#ccc;\n}\n.rd-_gallery_mx-font_style_-active,\n.rd-_gallery_mx-font_style_-active:hover {\nbackground:#FA742B;\ncolor:#fff;\n}\n.rd-_gallery_mx-font_style_-notallowed,\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-group-item {\ncursor:not-allowed;\nopacity:0.7;\n}\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-group-item,\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-group-item:hover {\nbackground:#e9e9e9;\n}\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-active,\n.rd-_gallery_mx-font_style_-notallowed .rd-_gallery_mx-font_style_-active:hover {\nbackground:#fb955d;\n}\n"),t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o,d,p=[],{disabled:g,i18n:c,value:h}=e;return d=[t(0,0,"\ue749")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=2,r="{{if value.bold}}",""),a="<%if(value.bold){%>",h.bold&&(s+=" rd-_gallery_mx-font_style_-active"+(i=2,r="{{/if}}",""),a="<%}%>"),o=[t("li",{title:(i=2,r="{{=i18n('@:{lang#mx-gallery.font.style.bold}')}}",a="<%=i18n('@:{lang#mx-gallery.font.style.bold}')%>",n(c("@:{lang#mx-gallery.font.style.bold}"))),"mx5-click":l+"\x1e@:{set}({key:'bold'})",class:s},d)],d=[t(0,0,"\ue65f")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=3,r="{{if value.italic}}",""),a="<%if(value.italic){%>",h.italic&&(s+=" rd-_gallery_mx-font_style_-active"+(i=3,r="{{/if}}",""),a="<%}%>"),o.push(t("li",{title:(i=3,r="{{=i18n('@:{lang#mx-gallery.font.style.italic}')}}",a="<%=i18n('@:{lang#mx-gallery.font.style.italic}')%>",n(c("@:{lang#mx-gallery.font.style.italic}"))),"mx5-click":l+"\x1e@:{set}({key:'italic'})",class:s},d)),d=[t(0,0,"\ue62e")],s="rd-_gallery_mx-style_index_-fl rd-_gallery_mx-font_style_-group-item rd-_assets_index_-iconfont"+(i=4,r="{{if value.underline}}",""),a="<%if(value.underline){%>",h.underline&&(s+=" rd-_gallery_mx-font_style_-active"+(i=4,r="{{/if}}",""),a="<%}%>"),o.push(t("li",{title:(i=4,r="{{=i18n('@:{lang#mx-gallery.font.style.underline}')}}",a="<%=i18n('@:{lang#mx-gallery.font.style.underline}')%>",n(c("@:{lang#mx-gallery.font.style.underline}"))),"mx5-click":l+"\x1e@:{set}({key:'underline'})",class:s},d)),s="rd-_gallery_mx-style_index_-unselectable rd-_gallery_mx-font_style_-group"+(i=1,r="{{if disabled}}",""),a="<%if(disabled){%>",g&&(s+=" rd-_gallery_mx-font_style_-notallowed"+(i=1,r="{{/if}}",""),a="<%}%>"),p.push(t("ul",{class:s},o)),t(l,0,p)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:gallery/mx-font/style.html"}},assign(e){return this["@:{current.value}"]=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"@:{set}<click>"(e){let t=this;if(t.get("disabled"))return;let l=t["@:{current.value}"],{key:r}=e.params;l[r]=!l[r],t["@:{current.value}"]=l,t.digest({value:l}),n.default.dispatch(t.root,"input",{value:l})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,l)=>{let n,r={class:"rd-_gallery_mx-menu_index_-items rd-_gallery_mx-style_index_-unselectable"};Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../mx-monitor/index");i.default.applyStyle("rd-_gallery_mx-menu_index_","\n.rd-_gallery_mx-menu_index_-container {\nz-index:400;\n}\n.rd-_gallery_mx-menu_index_-items {\nbackground-color:#fff;\nborder:solid 1px #e6e6e6;\nborder-radius:2px;\ncursor:default;\npadding:2px 0;\nbox-shadow:rgba(0, 0, 0, 0.06) 0 1px 3px 1px;\n}\n.rd-_gallery_mx-menu_index_-items-li {\nheight:22px;\nline-height:22px;\ncursor:default;\nborder-radius:2px;\npadding:0 8px;\nmargin:2px;\n}\n.rd-_gallery_mx-menu_index_-over {\ncolor:#fff;\nbackground-color:#FA742B;\n}\n.rd-_gallery_mx-menu_index_-spliter {\nheight:1px;\nbackground:#eee;\nmargin:4px 0;\n}\n.rd-_gallery_mx-menu_index_-item-disabled {\ncolor:#ccc;\ncursor:not-allowed;\n}\n"),t.default=i.default.View.extend({tmpl:(e,t,l,i,a,s,o)=>{let d,p,g;try{let a,c,h,u,f,_,m=[],{width:x,list:y,disabled:b,textKey:w}=e;c=[],p=6,d="{{each list as one}}",g="for(let $q_c_jwchvyl=list.length,$q_key_qdpdbpl=0;$q_key_qdpdbpl<$q_c_jwchvyl;$q_key_qdpdbpl++){let one=list[$q_key_qdpdbpl];";for(let e=y.length,r=0;r<e;r+=1){let e=y[r];h=[],p=7,d="{{if one.spliter}}",g="if(one.spliter){",e.spliter?(u=n?[n]:[n=t("li",{_:"_",class:"rd-_gallery_mx-menu_index_-spliter"})],h.push(...u)):(_=[t(0,0,(p=15,d="{{=one[textKey]}}",g="<%=one[textKey]%>",i(e[w])))],f="rd-_gallery_mx-style_index_-ellipsis rd-_gallery_mx-menu_index_-items-li "+(p=10,d="{{if disabled[one.id]}}",""),g="<%if(disabled[one.id]){%>",b[e.id]&&(f+=" rd-_gallery_mx-menu_index_-item-disabled"+(p=10,d="{{/if}}",""),g="<%}%>"),u=[t("li",{"mx5-mouseover":l+"\x1e@:{hover}({d:"+(p=11,d="{{=disabled[one.id]||0}}",g="<%=disabled[one.id]||0%>",i(b[e.id]||0))+"})","mx5-mouseout":l+"\x1e@:{hover}({d:"+(p=12,d="{{=disabled[one.id]||0}}",g="<%=disabled[one.id]||0%>",i(b[e.id]||0))+"});","mx5-click":l+"\x1e@:{select}({item:'"+(p=13,d="{{#one}}",g="<%#one,'\x1elist.'+($q_key_qdpdbpl)%>",o(s,e,"\x1elist."+r))+"',d:"+(p=13,d="{{=disabled[one.id]||0}}",g="<%=disabled[one.id]||0%>",i(b[e.id]||0))+"})",title:(p=14,d="{{=one[textKey]}}",g="<%=one[textKey]%>",i(e[w])),class:f},_)],h.push(...u)),c.push(...h)}return a=[t("ul",r,c)],m.push(t("div",{style:"width:"+(p=1,d="{{=width}}",g="<%=width%>",i(x))+"px;position:absolute;left:-10000px;top:-10000px",class:"rd-_gallery_mx-menu_index_-container",id:"cnt_"+(p=3,d="{{=$viewId}}","")+l,"mx5-contextmenu":l+"\x1e@:{prevent}()"},a)),t(l,0,m)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+d+"\r\n\tat line: "+p,t+="\r\n\ttranslate to: "+g+"\r\n\tat file:gallery/mx-menu/index.html"}},init(e){let t=this;a.default["@:{setup}"](),t.on("destroy",()=>{a.default["@:{remove}"](t),a.default["@:{teardown}"]()})},assign(e){let t=this,l=e.width||140,n=e.valueKey||"id",r=e.textKey||"text";t["@:{list}"]=e.list,t["@:{width}"]=l,t["@:{value.key}"]=n,t["@:{text.key}"]=r,t["@:{menu.disabled}"]=e.disabled||{},t["@:{fn.picked}"]=e.picked},async render(e){let t=this;await t.digest({disabled:t["@:{menu.disabled}"],list:t["@:{list}"],width:t["@:{width}"],valueKey:t["@:{value.key}"],textKey:t["@:{text.key}"]}),e&&this["@:{show}"](e)},"@:{inside}"(e){return i.default.inside(e,this.root)},"@:{show}"(e){let t=this;if(!t["@:{ui.show}"]){t["@:{ui.show}"]=1;let l=i.node("cnt_"+t.id),n=l.clientWidth,r=l.clientHeight,s=e.pageX,o=e.pageY;s+n>window.innerWidth&&(s-=n)<0&&(s=0),o+r>window.innerHeight&&(o-=r)<0&&(o=0),l.style.left=s+"px",l.style.top=o+"px",a.default["@:{add}"](t)}},"@:{hide}"(){let e=this;if(e["@:{ui.show}"]){e["@:{ui.show}"]=!1,i.node("cnt_"+e.id).style.left="-10000px",a.default["@:{remove}"](e)}},"@:{hover}<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!i.default.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("rd-_gallery_mx-menu_index_-over")},"@:{select}<click>"(e){if(e.params.d)return;this["@:{hide}"]();let t=this["@:{fn.picked}"];t&&t(e.params.item)},"@:{prevent}<contextmenu>"(e){e.preventDefault()}}).static({show(e,t,l){let n="ctx_"+e.id,r=i.node(n),a=r&&i.default.Vframe.byNode(r);a?(a.invoke("assign",[l]),a.invoke("render",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${n}"></div>`),(a=e.owner.mountVframe(i.node(n),"gallery/mx-menu/index",l)).invoke("@:{show}",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=0,r=[],i=["mousedown","keyup","touchstart","pointerstart"],a=e=>{for(let t=r.length;t--;){let l=r[t];if(l["@:{destroyed}"])r.splice(t,1);else{let t=l["@:{view}"];"resize"!=e.type&&t["@:{inside}"](e.target)||t["@:{hide}"]()}}},s=e=>{let t=r[e.id];t&&(t["@:{destroyed}"]=!0),delete r[e.id]};t.default={"@:{add}"(e){s(e);let t={"@:{view}":e};r.push(t),r[e.id]=t},"@:{remove}":s,"@:{setup}"(){if(!n){for(let e of i)document.addEventListener(e,a);window.addEventListener("resize",a)}n++},"@:{teardown}"(){if(n>0&&!--n){for(let e of i)document.removeEventListener(e,a);window.removeEventListener("resize",a)}}}}),define("gallery/mx-number/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");n.default.applyStyle("rd-_gallery_mx-number_index_","\n.rd-_gallery_mx-number_index_-ipt {\nwidth:100%;\nborder:none;\nheight:100%;\nbackground-color:transparent;\ncolor:#333;\ndisplay:block;\n}\n.rd-_gallery_mx-number_index_-up,\n.rd-_gallery_mx-number_index_-down {\nwidth:20px;\nheight:50%;\nposition:absolute;\nright:1px;\nborder:2px solid #fff;\nborder-radius:2px;\ncursor:pointer;\n}\n.rd-_gallery_mx-number_index_-up:hover,\n.rd-_gallery_mx-number_index_-down:hover {\nbackground-color:#f0f0f0;\n}\n.rd-_gallery_mx-number_index_-up {\ntop:1px;\n}\n.rd-_gallery_mx-number_index_-down {\nbottom:1px;\n}\n.rd-_gallery_mx-number_index_-arrow:after {\nwidth:0;\nheight:0;\nposition:absolute;\ntop:0;\nright:0;\nbottom:0;\nleft:0;\nborder-left:4px solid rgba(0, 0, 0, 0);\nborder-right:4px solid rgba(0, 0, 0, 0);\ncontent:'';\ndisplay:block;\nmargin:auto;\n}\n.rd-_gallery_mx-number_index_-down:after {\nborder-top:4px solid #ccc;\n}\n.rd-_gallery_mx-number_index_-up:after {\nborder-bottom:4px solid #ccc;\n}\n.rd-_gallery_mx-number_index_-up.rd-_gallery_mx-number_index_-notallowed,\n.rd-_gallery_mx-number_index_-down.rd-_gallery_mx-number_index_-notallowed {\ncursor:not-allowed;\nborder-color:transparent;\n}\n.rd-_gallery_mx-number_index_-up.rd-_gallery_mx-number_index_-notallowed:hover,\n.rd-_gallery_mx-number_index_-down.rd-_gallery_mx-number_index_-notallowed:hover {\nbackground-color:transparent;\n}\n"),t.default=n.default.View.extend({tmpl:(e,t,l)=>{let n,r,i;try{let a,s,o=[],{disabled:d}=e;return o.push(t("input",{class:"rd-_gallery_mx-number_index_-ipt",id:"ipt_"+(r=1,n="{{=$viewId}}","")+l,"mx5-focusin":l+"\x1e@:{active}()","mx5-focusout":l+"\x1e@:{deactive}()","mx5-change":l+"\x1e@:{num.check}()","mx5-keydown":l+"\x1e@:{press.check}()",disabled:(r=1,n="{{=disabled}}",i="<%=disabled%>",a=d,a),autocomplete:"off","mx5-input":l+"\x1e@:{input.check}()"},0,0,1)),s="rd-_gallery_mx-number_index_-up rd-_gallery_mx-number_index_-arrow rd-_gallery_mx-style_index_-unselectable"+(r=2,n="{{if disabled}}",""),i="<%if(disabled){%>",d&&(s+=" rd-_gallery_mx-number_index_-notallowed"+(r=2,n="{{/if}}",""),i="<%}%>"),o.push(t("span",{"mx5-click":l+"\x1e@:{num.change}({i:1})","mx5-mousedown":l+"\x1e@:{fast.start}({i:1})","mx5-contextmenu":l+"\x1e@:{prevent}()",class:s})),s="rd-_gallery_mx-number_index_-down rd-_gallery_mx-number_index_-arrow rd-_gallery_mx-style_index_-unselectable"+(r=3,n="{{if disabled}}",""),i="<%if(disabled){%>",d&&(s+=" rd-_gallery_mx-number_index_-notallowed"+(r=3,n="{{/if}}",""),i="<%}%>"),o.push(t("span",{"mx5-click":l+"\x1e@:{num.change}()","mx5-mousedown":l+"\x1e@:{fast.start}()","mx5-contextmenu":l+"\x1e@:{prevent}()",class:s})),t(l,0,o)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+n+"\r\n\tat line: "+r,t+="\r\n\ttranslate to: "+i+"\r\n\tat file:gallery/mx-number/index.html"}},assign(e){let t=this,l=e.value;void 0===l&&(l=""),""!==l&&(l=+l);let r=t["@:{value}"]!==l,i=t["@:{disabled}"];return t["@:{value}"]=l,t["@:{step}"]=+e.step||1,t["@:{support.empty}"]=e.empty+""=="true",t["@:{format.value}"]=e.format+""=="true",t["@:{disabled}"]=t.root.hasAttribute("disabled"),t["@:{max}"]=n.default.has(e,"max")?+e.max:Number.MAX_VALUE,t["@:{min}"]=n.default.has(e,"min")?+e.min:-Number.MAX_VALUE,t["@:{ratio}"]=+e.ratio||10,t["@:{tail.length}"]=e.fixed||0,r||i!=t["@:{disabled}"]},async render(){let e=this,t=n.default.mark(this,"@{render}");await e.digest({disabled:e["@:{disabled}"]}),t()&&e["@:{fix.value}"]()},"@:{fix.value}"(){let e=this,t=e["@:{value}"];""!==t&&(t=e["@:{get.value}"](t),e["@:{format.value}"]&&(t=t.toFixed(e["@:{tail.length}"]))),e["@:{ctrl.input}"]=n.node("ipt_"+e.id),e["@:{ctrl.input}"].value=t},"@:{get.value}"(e){let t=this;if((e=+e)||0===e){let l=t["@:{max}"],n=t["@:{min}"];e>l?e=l:e<n&&(e=n),e=+e.toFixed(t["@:{tail.length}"])}return isNaN(e)?t["@:{support.empty}"]?"":0:e},"@:{set.value}"(e,t){let l=this;if(""!==e||!l["@:{support.empty}"])return(e=l["@:{get.value}"](e))!==l["@:{value}"]&&(t||(l["@:{ctrl.input}"].value=e),n.default.dispatch(l.root,"input",{value:l["@:{value}"]=e})),l["@:{value}"];n.default.dispatch(l.root,"input",{value:l["@:{value}"]=e})},"@:{num.change}"(e,t){let l=this["@:{value}"];""===l&&(l=0);let n=this["@:{step}"],r=l;t&&(n*=this["@:{ratio}"]),e?r+=n:r-=n,this["@:{set.value}"](r)},"@:{cursor.show}"(){let e=this["@:{ctrl.input}"];e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},"@:{simulator.active}"(){let e=this;e.root.classList.add("rd-_gallery_mx-style_index_-input-focus"),n.default.has(e,"@:{last.value}")||(e["@:{last.value}"]=e["@:{value}"])},"@:{num.check}<change>"(e){e.stopPropagation()},"@:{active}<focusin>"(){this["@:{simulator.active}"]()},"@:{deactive}<focusout>"(e){let t=this;t["@:{ui.keep.active}"]||(t.root.classList.remove("rd-_gallery_mx-style_index_-input-focus"),t["@:{fix.value}"](),t["@:{last.value}"]!=t["@:{value}"]&&n.default.dispatch(t.root,"change",{value:t["@:{value}"]}),delete t["@:{last.value}"])},"@:{num.change}<click>"(e){let t=this;t["@:{disabled}"]||t["@:{fast.change.start}"]||(t["@:{num.change}"](e.params.i,e.shiftKey),t["@:{cursor.show}"]())},"@:{fast.start}<mousedown>"(e){let t=this;if(!t["@:{disabled}"]){t["@:{ui.keep.active}"]=!0,t["@:{simulator.active}"]();let l=e.params.i,r=n.default.mark(this,"@:{mousedown}");t["@:{long.tap.timer}"]=setTimeout(()=>{r()&&(t["@:{interval.timer}"]=setInterval(()=>{r()&&(t["@:{fast.change.start}"]=!0,t["@:{num.change}"](l),t["@:{cursor.show}"]())},50))},300)}},"@:{press.check}<keydown>"(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();let t=this;if(!t["@:{disabled}"]){let l=e.eventTarget.value;if(""===l)t["@:{value}"]="";else{let e=Number(l);(e||0===e)&&e!=t["@:{value}"]&&(t["@:{value}"]=e)}t["@:{num.change}"](38==e.keyCode,e.shiftKey)}}},"@:{prevent}<contextmenu>"(e){e.preventDefault()},"@:{input.check}<input>"(e){e.stopPropagation();let t=e.eventTarget;this["@:{set.value}"](t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e["@:{long.tap.timer}"]),clearInterval(e["@:{interval.timer}"]),delete e["@:{ui.keep.active}"];let t=n.default.mark(this,"@:mouseup");setTimeout(()=>{t()&&delete e["@:{fast.change.start}"]},0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,l)=>{let n={class:"rd-_gallery_mx-picture_index_-pic-tip"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("../mx-dialog/index");r.default.applyStyle("rd-_gallery_mx-picture_index_","\n.rd-_gallery_mx-picture_index_-pic {\nheight:100px;\npadding:4px;\nborder:solid 1px #e6e6e6;\nbackground:#fff;\ncursor:pointer;\nmargin:4px 0;\nborder-radius:2px;\n}\n.rd-_gallery_mx-picture_index_-pic-tip {\nline-height:92px;\ntext-align:center;\ncolor:#999;\n}\n.rd-_gallery_mx-picture_index_-minh500 {\nmin-height:500px;\n}\n.rd-_gallery_mx-picture_index_-item-container {\nwidth:100px;\nheight:100px;\nmargin:4px;\noverflow:hidden;\nborder:1px solid #e6e6e6;\ncursor:pointer;\npadding:4px;\n}\n.rd-_gallery_mx-picture_index_-item-container:hover {\nborder-color:#999;\n}\n.rd-_gallery_mx-picture_index_-item {\nwidth:100%;\nheight:100%;\nbackground-position:50%;\nbackground-repeat:no-repeat;\nbackground-size:contain;\n}\n.rd-_gallery_mx-picture_index_-item-title {\nwidth:100px;\nmargin:0 5px;\nheight:25px;\n}\n.rd-_gallery_mx-picture_index_-mt30 {\nmargin:30px 0;\n}\n.rd-_gallery_mx-picture_index_-f16 {\nfont-size:16px;\n}\n.rd-_gallery_mx-picture_index_-remove {\nposition:absolute;\nright:3px;\ntop:2px;\nopacity:0.2;\n}\n.rd-_gallery_mx-picture_index_-remove:hover {\nopacity:0.5;\n}\n.rd-_gallery_mx-picture_index_-notallowed {\nbackground:#fbfbfb;\ncursor:not-allowed;\n}\n.rd-_gallery_mx-picture_index_-notallowed .rd-_gallery_mx-picture_index_-remove {\nopacity:0.1;\n}\n.rd-_gallery_mx-picture_index_-notallowed .rd-_gallery_mx-picture_index_-remove:hover {\nopacity:0.1;\n}\n.rd-_gallery_mx-picture_index_-tabs {\nmargin-bottom:10px;\nborder-bottom:solid 1px #fca576;\n}\n.rd-_gallery_mx-picture_index_-tabs-item {\nfloat:left;\nheight:25px;\nline-height:25px;\nmargin:0 5px;\npadding:0 4px;\ncursor:pointer;\nmargin-bottom:-1px;\ntransition:all 0.25s;\n}\n.rd-_gallery_mx-picture_index_-tabs-active {\nbackground:#fca576;\nborder-radius:4px 4px 0 0;\n}\n"),t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g,c,h=[],{disabled:u,src:f,i18n:_}=e;return d=[],a=2,i="{{if src}}",s="if(src){",f?(c=[t(0,0,"\ue67f")],g=[t("i",{class:"rd-_gallery_mx-picture_index_-remove rd-_gallery_mx-style_index_-mc-iconfont","mx5-click":(a=4,i="{{!disabled}}",s="<%!disabled%>",!u&&l+"\x1e@:{clear.image}()"),title:(a=4,i="{{=i18n('@:{lang#remove.image}')}}",s="<%=i18n('@:{lang#remove.image}')%>",r(_("@:{lang#remove.image}")))},c)],p=[t("div",{class:"rd-_gallery_mx-picture_index_-item",style:"background-image:url('"+(a=3,i="{{=src}}",s="<%=src%>",r(f))+"')"},g)],d.push(...p)):(g=[t(0,0,(a=8,i="{{=i18n('@:{lang#click.choose.image}')}}",s="<%=i18n('@:{lang#click.choose.image}')%>",r(_("@:{lang#click.choose.image}"))))],p=[t("div",n,g)],d.push(...p)),o="rd-_gallery_mx-picture_index_-pic rd-_gallery_mx-style_index_-pr"+(a=1,i="{{if disabled}}",""),s="<%if(disabled){%>",u&&(o+=" rd-_gallery_mx-picture_index_-notallowed"+(a=1,i="{{/if}}",""),s="<%}%>"),h.push(t("div",{"mx5-click":(a=1,i="{{!disabled}}",s="<%!disabled%>",!u&&l+"\x1e@:{choose.picture}()"),class:o},d)),t(l,0,h)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:gallery/mx-picture/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()},"@:{choose.picture}<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,done(t){e.digest(t),e["@:{fire.event}"](t)}})},"@:{fire.event}"(e){r.default.dispatch(this.root,"change",e)},"@:{clear.image}<click>"(e){e.stopPropagation(),this.digest({src:""}),this["@:{fire.event}"]({src:"",width:0,height:0})}}).merge(i.default)}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,l)=>{let n={class:"rd-_assets_index_-sticky-top rd-_gallery_mx-style_index_-dialog-header"},r={class:"rd-_gallery_mx-picture_index_-minh500 rd-_gallery_mx-style_index_-clearfix rd-_gallery_mx-style_index_-dialog-body"},i={class:"rd-_gallery_mx-picture_index_-f16 rd-_gallery_mx-picture_index_-mt30 rd-_gallery_mx-style_index_-tc"},a={class:"rd-_gallery_mx-picture_index_-tabs rd-_gallery_mx-style_index_-clearfix"},s={class:"rd-_gallery_mx-picture_index_-item-title rd-_gallery_mx-style_index_-ellipsis rd-_gallery_mx-style_index_-tc"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),d=e("../../designer/service"),p=e("../../i18n/index");t.default=o.default.View.extend({tmpl:(e,t,l,o,d,p,g,c)=>{let h,u,f;try{let d,p,g,_,m,x,y=[],{i18n:b,error:w,list:v,cIndex:k}=e;if(p=[t(0,0,(u=2,h="{{=i18n('@:{lang#lib.images}')}}",f="<%=i18n('@:{lang#lib.images}')%>",o(b("@:{lang#lib.images}"))))],d=[t("h5",0,p)],y.push(t("div",n,d)),d=[],u=5,h="{{if error}}",f="if(error){",w)g=[t(0,0,(u=6,h="{{=error.msg}}",f="<%=error.msg%>",o(w.msg)))],p=[t("div",i,g)],d.push(...p);else{p=[],g=[],u=9,h="{{each list as category ci}}",f="for(let $q_c_zefdpzx=list.length,ci=0;ci<$q_c_zefdpzx;ci++){let category=list[ci];";for(let e=v.length,n=0;n<e;n+=1){let e=v[n];x=[t(0,0,(u=10,h="{{=category.title}}",f="<%=category.title%>",o(e.title)))],m="rd-_gallery_mx-picture_index_-tabs-item"+(u=10,h="{{if ci==cIndex}}",""),f="<%if(ci==cIndex){%>",n==k&&(m+=" rd-_gallery_mx-picture_index_-tabs-active"+(u=10,h="{{/if}}",""),f="<%}%>"),_=[t("div",{"mx5-click":(u=10,h="{{ci!=cIndex}}",f="<%ci!=cIndex%>",n!=k&&l+"\x1e@:{change.tab}({to:"+(u=10,h="{{=ci}}",f="<%=ci%>",o(n))+"})"),class:m},x)],g.push(..._)}p.push(t("div",a,g)),u=13,h="{{each list[cIndex].list as p}}",f="for(let $q_a_drnvtoe=list[cIndex].list,$q_c_hknrhkr=$q_a_drnvtoe.length,$q_key_fpgxbmjvj=0;$q_key_fpgxbmjvj<$q_c_hknrhkr;$q_key_fpgxbmjvj++){let p=$q_a_drnvtoe[$q_key_fpgxbmjvj];";for(let e=v[k].list,n=e.length,r=0;r<n;r+=1){let n=e[r];x=[t("div",{class:"rd-_gallery_mx-picture_index_-item",style:"background-image:url('"+(u=16,h="{{=p.src}}",f="<%=p.src%>",o(n.src))+"')"})],_=[t("div",{class:"rd-_gallery_mx-picture_index_-item-container","mx5-click":l+"\x1e@:{use}({src:'"+(u=15,h="{{=p.src}}",f="<%=$eq(p.src)%>",c(n.src))+"'})"},x)],x=[t(0,0,(u=18,h="{{=p.title}}",f="<%=p.title%>",o(n.title)))],_.push(t("div",s,x)),g=[t("div",{class:"rd-_gallery_mx-style_index_-fl",title:(u=14,h="{{=p.title}}",f="<%=p.title%>",o(n.title))},_)],p.push(...g)}d.push(...p)}return y.push(t("div",r,d)),t(l,0,y)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+h+"\r\n\tat line: "+u,t+="\r\n\ttranslate to: "+f+"\r\n\tat file:gallery/mx-picture/list.html"}},init(e){this["@:{dialog}"]=e.dialog,this["@:{done.callback}"]=e.done,this.set({cIndex:0})},render(){let e=o.default.mark(this,"@:{render}");this.fetch("@:{get.images}",(t,l)=>{e()&&this.digest({error:t,list:l.get("data",[])})})},"@:{use}<click>"(e){let t=this,l=new Image,n=t["@:{done.callback}"],r=e.params.src,i=o.default.mark(this,"@:{use}");l.onerror=(()=>{i()&&t.alert(p.default("@:{lang#load.img.error}"))}),l.onload=(()=>{if(i()){let e=l.width,i=l.height;t["@:{dialog}"].close(),n({src:r,width:e,height:i})}}),l.src=r},"@:{change.tab}<click>"(e){let{to:t}=e.params;this.digest({cIndex:t})}}).merge(d.default)}),define("gallery/mx-pointer/cursor",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=n.default.guid("cursor_");n.default.applyStyle("rd-_gallery_mx-pointer_cursor_",".rd-_gallery_mx-pointer_cursor_-cursor {\nopacity:0;\nbackground:#fff;\nposition:fixed;\nleft:0;\nright:0;\ntop:0;\nbottom:0;\nz-index:10000;\n}\n");const i=document.body;t.default={"@:{show}"(e){let t=getComputedStyle(e);this["@:{show.by.type}"](t.cursor)},"@:{show.by.type}"(e){let t=n.node(r);t||(document.body.insertAdjacentHTML("beforeend",`<div class="rd-_gallery_mx-pointer_cursor_-cursor" id="${r}"/>`),t=n.node(r)),t.style.cursor=e,t.style.display="block"},"@:{hide}"(){let e=n.node(r);e&&(e.style.display="none")},"@:{root.show.by.type}"(e){i.style.cursor=e},"@:{root.hide}"(){i.style.cursor="auto"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");n.default.applyStyle("rd-_gallery_mx-pointer_follower_","\n.rd-_gallery_mx-pointer_follower_-drag-effect {\nbackground:#FA742B;\nposition:absolute;\nopacity:0.6;\nleft:-1000px;\ntop:-1000px;\nwidth:30px;\nheight:30px;\ntext-align:center;\nline-height:30px;\ncolor:#fff;\nborder-radius:2px;\nz-index:5000;\npointer-events:none;\n}\n");let r=n.default.guid("de_");t.default={"@:{update}"(e){let t=n.node(r);t||(document.body.insertAdjacentHTML("beforeend",`<div class="rd-_gallery_mx-pointer_follower_-drag-effect rd-_assets_index_-iconfont" id="${r}"/>`),t=n.node(r)),t.innerHTML=e},"@:{show}"(e){let t=n.node(r).style;t.left=e.pageX+10+"px",t.top=e.pageY+18+"px"},"@:{hide}"(){let e=n.node(r).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");n.default.applyStyle("rd-_gallery_mx-pointer_select_","\n.rd-_gallery_mx-pointer_select_-rect {\nposition:absolute;\nborder:dashed 1px #FA742B;\ndisplay:none;\npointer-events:none;\n}\n");let r=n.default.guid("set_");t.default={"@:{init}"(){n.node(r)||document.body.insertAdjacentHTML("beforeend",`<div id="${r}" class="rd-_gallery_mx-pointer_select_-rect"></div>`)},"@:{update}"(e,t,l,i){let a=n.node(r).style;a.left=e+"px",a.top=t+"px",a.width=l+"px",a.height=i+"px",a.display="block"},"@:{hide}"(){n.node(r).style.display="none"}}}),define("gallery/mx-runner/fx",["./index"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("./index");let r=e=>e,i=Date.now,a=function(e,t){let l=this;l["@:{alg.fn}"]&&!t||(t=t||r,l["@:{alg.fn}"]=((e,n)=>e+(n-e)*t(l["@:{current.timespan}"]/l["@:{item.timespan}"]))),l["@:{task.list}"]=[],l["@:{interval}"]=e};Object.assign(a.prototype,{"@:{run}"(e,t){let l=this;l["@:{destroyed}"]||(l["@:{task.list}"].push({"@:{timespan}":e,"@:{fn}":t}),l["@:{for.runner.fn}"]||l["@:{start.work}"]())},"@:{start.work}"(){let e=this,t=e["@:{task.list}"].shift();t?(e["@:{item.timespan}"]=t["@:{timespan}"],e["@:{item.fn}"]=t["@:{fn}"],e["@:{now.time}"]=i(),e["@:{for.runner.fn}"]||n.default["@:{task.add}"](e["@:{interval}"],e["@:{for.runner.fn}"]=(t=>{e["@:{current.timespan}"]=Date.now()-e["@:{now.time}"],e["@:{current.timespan}"]>e["@:{item.timespan}"]&&(e["@:{current.timespan}"]=e["@:{item.timespan}"],t=1);try{e["@:{item.fn}"](e["@:{alg.fn}"])}catch(e){t=e}t&&e["@:{start.work}"]()}))):e["@:{stop}"]()},"@:{stop}"(){let e=this;e["@:{for.runner.fn}"]&&(n.default["@:{task.remove}"](e["@:{for.runner.fn}"]),delete e["@:{for.runner.fn}"])},"@:{destroy}"(){this["@:{stop}"](),this["@:{task.list}"]=[],this["@:{destroyed}"]=1}}),t.default={"@:{get.fx}"(e,t){let l=new a(e,t);return this.on("destroy",()=>{l["@:{destroy}"]()}),l}}}),define("gallery/mx-runner/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");let r=window.requestAnimationFrame||(e=>setTimeout(e,16)),i=window.cancelAnimationFrame||clearTimeout,a=Date.now;t.default={"@:{task.list}":[],"@:{task.add}"(e,t){this["@:{task.list}"].push({i:e||15,f:t,n:a()}),this["@:{start.work}"]()},"@:{task.remove}"(e){let t=this["@:{task.list}"];for(let l,n=0;n<t.length;n++)if(!(l=t[n]).r&&l.f==e){l.r=1;break}},"@:{start.work}"(){let e=this;if(!e["@:{timer.id}"]){let t=()=>{let l=e["@:{task.list}"];for(let e,t,r=0;r<l.length;r++)(e=l[r]).r?l.splice(r--,1):(t=a())-e.n>=e.i&&(e.n=t,n.default.toTry(e.f));l.length?e["@:{timer.id}"]=r(t):(i(e["@:{timer.id}"]),delete e["@:{timer.id}"])};e["@:{timer.id}"]=r(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("./zh-cn"),i={"zh-cn":r.default,zh:r.default},a=n.default.has,s=/\{(\d+)\}/g;t.default=((e,...t)=>{let l=(n.default.config("lang")||navigator.language).toLowerCase();a(i,l)||(l="zh-cn");let r=i[l],o=a(r,e)?r[e]:e;return t.length&&(o=o.replace(s,(e,l,n)=>(l|=0,t.length>l?(n=t[l],a(r,n)?r[n]:n):e))),o})}),define("i18n/zh-cn",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"@:{lang#site.name}":"\u7269\u8054\u7f51\u8bbe\u8ba1\u5668","@:{lang#dialog.tip}":"\u63d0\u793a","@:{lang#btn.enter}":"\u786e\u5b9a","@:{lang#btn.cancel}":"\u53d6\u6d88","@:{lang#zoom.in}":"\u653e\u5927","@:{lang#zoom.out}":"\u7f29\u5c0f","@:{lang#axis.delete.line}":"\u5220\u9664\u8f85\u52a9\u7ebf","@:{lang#axis.move.line}":"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf","@:{lang#undo}":"\u64a4\u9500(Ctrl+Z)","@:{lang#redo}":"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)","@:{lang#panel.drag}":"\u6309\u4e0b\u79fb\u52a8\u9762\u677f","@:{lang#panel.ew-resize}":"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6","@:{lang#panel.ns-resize}":"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6","@:{lang#panel.elements}":"\u5143\u7d20","@:{lang#panel.props}":"\u5c5e\u6027","@:{lang#panel.data}":"\u6570\u636e\u6e90","@:{lang#panel.overview}":"\u6982\u89c8\u56fe","@:{lang#panel.open.panel}":"\u6253\u5f00{0}\u9762\u677f","@:{lang#panel.close.panel}":"\u5173\u95ed{0}\u9762\u677f","@:{lang#panel.expand.panel}":"\u5c55\u5f00{0}\u9762\u677f","@:{lang#panel.shrink.panel}":"\u6298\u53e0{0}\u9762\u677f","@:{lang#press.drag.rotate.element}":"\u6309\u4e0b\u62d6\u52a8\u65cb\u8f6c\u5143\u7d20","@:{lang#press.drag.width.element}":"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6","@:{lang#press.drag.height.element}":"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u9ad8\u5ea6","@:{lang#press.drag.width.height.element}":"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6\u548c\u9ad8\u5ea6","@:{lang#props.type}":"\u7c7b\u578b\uff1a","@:{lang#props.x}":"X\u5750\u6807\uff1a","@:{lang#props.y}":"Y\u5750\u6807\uff1a","@:{lang#props.width}":"\u5bbd\uff1a","@:{lang#props.height}":"\u9ad8\uff1a","@:{lang#props.rotate}":"\u65cb\u8f6c\u89d2\u5ea6\uff1a","@:{lang#props.background}":"\u80cc\u666f\u989c\u8272\uff1a","@:{lang#props.forecolor}":"\u6587\u5b57\u989c\u8272\uff1a","@:{lang#menu.select.all}":"\u5168\u9009","@:{lang#menu.paste}":"\u7c98\u8d34","@:{lang#menu.copy}":"\u590d\u5236","@:{lang#menu.cut}":"\u526a\u5207","@:{lang#menu.delete}":"\u5220\u9664","@:{lang#menu.move.up}":"\u4e0a\u79fb\u4e00\u5c42","@:{lang#menu.to.top}":"\u79fb\u81f3\u9876\u5c42","@:{lang#menu.move.down}":"\u4e0b\u79fb\u4e00\u5c42","@:{lang#menu.to.bottom}":"\u79fb\u81f3\u5e95\u5c42","@:{lang#align.left}":"\u5de6\u5bf9\u9f50","@:{lang#align.right}":"\u53f3\u5bf9\u9f50","@:{lang#align.top}":"\u4e0a\u5bf9\u9f50","@:{lang#align.bottom}":"\u4e0b\u5bf9\u9f50","@:{lang#align.middle}":"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50","@:{lang#align.center}":"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50","@:{lang#load.img.error}":"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e","@:{lang#remove.image}":"\u6e05\u9664\u56fe\u7247","@:{lang#click.choose.image}":"\u70b9\u51fb\u9009\u62e9\u56fe\u7247","@:{lang#lib.images}":"\u56fe\u7247\u5e93","@:{lang#remove.color}":"\u6e05\u9664\u989c\u8272","@:{lang#props.font.size}":"\u5b57\u53f7\uff1a","@:{lang#props.font.family}":"\u5b57\u4f53\uff1a","@:{lang#props.page.scale}":"\u5168\u5c4f\u663e\u793a\uff1a","@:{lang#props.page.paper.size}":"\u7eb8\u5f20\u5c3a\u5bf8\uff1a","@:{lang#props.background.image}":"\u80cc\u666f\u56fe\u7247\uff1a","@:{lang#props.color}":"\u989c\u8272\uff1a","@:{lang#props.background.repeat}":"\u5e73\u94fa\u65b9\u5f0f\uff1a","@:{lang#props.full}":"\u62c9\u4f38\u94fa\u6ee1","@:{lang#props.no.repeat}":"\u539f\u59cb\u5c3a\u5bf8","@:{lang#props.repeat.x}":"\u6a2a\u5411\u5e73\u94fa","@:{lang#props.repeat.y}":"\u5782\u76f4\u5e73\u94fa","@:{lang#props.repeat}":"\u53cc\u5411\u5e73\u94fa","@:{lang#props.scale.auto}":"\u81ea\u9002\u5e94","@:{lang#props.scale.full}":"\u5168\u5c4f\u94fa\u6ee1","@:{lang#props.bind.fields}":"\u7ed1\u5b9a\u5b57\u6bb5\uff1a","@:{lang#props.locked}":"\u9501\u5b9a\u7f16\u8f91\uff1a","@:{lang#elements.text}":"\u6587\u672c","@:{lang#elements.page}":"\u9875\u9762","@:{lang#elements.line}":"\u76f4\u7ebf","@:{lang#elements.bezier}":"\u8d1d\u585e\u5c14","@:{lang#elements.rect}":"\u77e9\u5f62","@:{lang#elements.image}":"\u56fe\u7247","@:{lang#elements.circle}":"\u5706\u5f62","@:{lang#elements.repeat}":"\u5e73\u94fa\u56fe","@:{lang#elements.chart-line}":"\u6298\u7ebf\u56fe","@:{lang#elements.chart-meter}":"\u4eea\u8868\u76d8","@:{lang#elements.chart-bar}":"\u67f1\u72b6\u56fe","@:{lang#elements.chart-pie}":"\u997c\u56fe","@:{lang#elements.table}":"\u8868\u683c","@:{lang#elements.repeat.select.image}":"\u8bf7\u9009\u62e9\u5e73\u94fa\u56fe\u7247","@:{lang#elements.image.select.image}":"\u8bf7\u9009\u62e9\u56fe\u7247","@:{lang#props.alpha}":"\u900f\u660e\u5ea6\uff1a","@:{lang#props.letter.spacing}":"\u5b57\u95f4\u8ddd\uff1a","@:{lang#props.text.content}":"\u5185\u5bb9\uff1a","@:{lang#props.font.style}":"\u6837\u5f0f\uff1a","@:{lang#props.font.align}":"\u6392\u5217\uff1a","@:{lang#mx-gallery.font.style.bold}":"\u52a0\u7c97","@:{lang#mx-gallery.font.style.italic}":"\u659c\u4f53","@:{lang#mx-gallery.font.style.underline}":"\u4e0b\u5212\u7ebf","@:{lang#mx-gallery.font.align.left}":"\u6c34\u5e73\u5c45\u5de6","@:{lang#mx-gallery.font.align.center}":"\u6c34\u5e73\u5c45\u4e2d","@:{lang#mx-gallery.font.align.right}":"\u6c34\u5e73\u5c45\u53f3","@:{lang#mx-gallery.font.align.top}":"\u5782\u76f4\u5c45\u4e0a","@:{lang#mx-gallery.font.align.middle}":"\u5782\u76f4\u5c45\u4e2d","@:{lang#mx-gallery.font.align.bottom}":"\u5782\u76f4\u5c45\u4e0b","@:{lang#mx-gallery.field.drag.tip}":"\u62d6\u52a8\u6570\u636e\u6e90\u5b57\u6bb5\u5230\u8fd9\u91cc","@:{lang#props.long}":"\u957f\uff1a","@:{lang#props.image}":"\u56fe\u7247\uff1a","@:{lang#props.bordercolor}":"\u8fb9\u6846\u989c\u8272\uff1a","@:{lang#props.fillcolor}":"\u586b\u5145\u989c\u8272\uff1a","@:{lang#props.line.type}":"\u7ebf\u7c7b\u578b\uff1a","@:{lang#props.border.type}":"\u8fb9\u6846\u7c7b\u578b\uff1a","@:{lang#props.border.width}":"\u8fb9\u6846\u5bbd\u5ea6\uff1a","@:{lang#props.border.radius}":"\u5706\u89d2\uff1a","@:{lang#props.border.type.solid}":"\u5b9e\u7ebf","@:{lang#props.border.type.dashed}":"\u865a\u7ebf","@:{lang#props.border.type.dotted}":"\u70b9\u7ebf","@:{lang#props.image.width}":"\u56fe\u7247\u5bbd\uff1a","@:{lang#props.image.height}":"\u56fe\u7247\u9ad8\uff1a","@:{lang#props.image.reset}":"\u8fd8\u539f\u5c3a\u5bf8\uff1a","@:{lang#props.chart.title}":"\u56fe\u8868\u6807\u9898\uff1a","@:{lang#props.offset.hor}":"\u6c34\u5e73(%)\uff1a","@:{lang#props.offset.ver}":"\u5782\u76f4(%)\uff1a","@:{lang#elements.image.reset}":"\u539f\u59cb\u56fe\u7247\u5bbd\u9ad8","@:{lang#elements.text.content}":"\u8bf7\u8f93\u5165\u5185\u5bb9","@:{lang#same.width}":"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u5bbd\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u5bbd\u5ea6)\u540c\u6b65\u5bbd\u5ea6","@:{lang#same.height}":"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u9ad8\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u9ad8\u5ea6)\u540c\u6b65\u9ad8\u5ea6","@:{lang#same.ver.space}":"\u4ee5\u5143\u7d20\u4e2d\u5fc3\u70b9(\u6309\u4e0bshift\u5219\u4ee5\u5143\u7d20\u81ea\u8eab)\u5782\u76f4\u5747\u5206\u6392\u5217","@:{lang#same.hor.space}":"\u4ee5\u5143\u7d20\u4e2d\u5fc3\u70b9(\u6309\u4e0bshift\u5219\u4ee5\u5143\u7d20\u81ea\u8eab)\u6c34\u5e73\u5747\u5206\u6392\u5217","@:{lang#props.bezier.start.x}":"\u8d77\u59cb\u70b9X\uff1a","@:{lang#props.bezier.start.y}":"\u8d77\u59cb\u70b9Y\uff1a","@:{lang#props.bezier.ctrl1.x}":"\u63a7\u5236\u70b91X\uff1a","@:{lang#props.bezier.ctrl1.y}":"\u63a7\u5236\u70b91Y\uff1a","@:{lang#props.bezier.ctrl2.x}":"\u63a7\u5236\u70b92X\uff1a","@:{lang#props.bezier.ctrl2.y}":"\u63a7\u5236\u70b92Y\uff1a","@:{lang#props.bezier.end.x}":"\u7ed3\u675f\u70b9X\uff1a","@:{lang#props.bezier.end.y}":"\u7ed3\u675f\u70b9Y\uff1a","@:{lang#props.table.columns.width}":"\u5217\u5bbd\uff1a","@:{lang#props.table.head.row.background}":"\u8868\u5934\u80cc\u666f\uff1a","@:{lang#props.table.head.row.height}":"\u8868\u5934\u884c\u9ad8\uff1a","@:{lang#props.table.body.row.height}":"\u5185\u5bb9\u884c\u9ad8\uff1a","@:{lang#props.table.body.odd.row.background}":"\u5947\u6570\u884c\uff1a","@:{lang#props.table.body.even.row.background}":"\u5076\u6570\u884c\uff1a","@:{lang#props.table.cell.align}":"\u5185\u5bb9\u5bf9\u9f50\uff1a","@:{lang#props.table.cell.align.left}":"\u5c45\u5de6","@:{lang#props.table.cell.align.center}":"\u5c45\u4e2d","@:{lang#props.table.cell.align.right}":"\u5c45\u53f3","@:{lang#props.table.foot.spacing}":"\u9875\u811a\u7559\u767d\uff1a","@:{lang#props.table.head.font.size}":"\u8868\u5934\u5b57\u53f7\uff1a","@:{lang#props.table.body.font.size}":"\u5185\u5bb9\u5b57\u53f7\uff1a","@:{lang#data.choose.source}":"\u8bf7\u5728\u4e0a\u65b9\u9009\u62e9\u6570\u636e\u6e90","@:{lang#data.choose.support.element}":"\u8bf7\u9009\u4e2d\u4e00\u4e2a\u652f\u6301\u6570\u636e\u7ed1\u5b9a\u7684\u7ec4\u4ef6\uff0c\u5982\u8868\u683c","@:{lang#font.simsun}":"\u5b8b\u4f53","@:{lang#font.simhei}":"\u9ed1\u4f53","@:{lang#font.kaiti}":"\u6977\u4f53","@:{lang#font.yahei}":"\u5fae\u8f6f\u96c5\u9ed1","@:{lang#font.jhei}":"\u5fae\u8f6f\u6b63\u9ed1\u4f53","@:{lang#font.lisu}":"\u96b6\u4e66","@:{lang#font.youyuan}":"\u5e7c\u5706","@:{lang#save.content.title}":"\u4fdd\u5b58\u5185\u5bb9","@:{lang#select.source}":"\u8bf7\u9009\u62e9\u6570\u636e\u6e90"}}),define("util/bezier",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=(e,t,l,n,r)=>t*(1-e)*(1-e)*(1-e)+3*l*e*(1-e)*(1-e)+3*n*e*e*(1-e)+r*e*e*e,r=(e,t,l,n)=>{let r=-2*(3*e-6*t+3*l),i=4*Math.pow(3*e-6*t+3*l,2)-36*(n-e+3*t-3*l)*(t-e),a=6*(n-e+3*t-3*l);if(i>0){let e=Math.sqrt(i),t=(r+e)/a,l=(r-e)/a;if(t>=0&&l>=0&&t<=1&&l<=1)return[t,l,0,1];if(t>=0&&t<=1)return[t,0,1];if(l>=0&&l<=1)return[l,0,1]}return[0,1]};t.default=(e=>{let{x:t,y:l,width:i,height:a}=(e=>{let t=r(e.startX,e.ctrl1X,e.ctrl2X,e.endX),l=r(e.startY,e.ctrl1Y,e.ctrl2Y,e.endY),i=[],a=[];for(let l of t)i.push(n(l,e.startX,e.ctrl1X,e.ctrl2X,e.endX));for(let t of l)a.push(n(t,e.startY,e.ctrl1Y,e.ctrl2Y,e.endY));let s=Math.min(...i),o=Math.max(...i),d=Math.min(...a);return{x:s,y:d,width:o-s,height:Math.max(...a)-d}})(e);e.x=t,e.y=l,e.width=i,e.height=a})}),define("util/converter",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default={"@:{real.to.stage.coord}"({x:e,y:t}){let l=n.node("stage_canvas").getBoundingClientRect();return{x:e-=l.left,y:t-=l.top}},"@:{stage.to.real.coord}"({x:e,y:t}){let l=n.node("stage_canvas").getBoundingClientRect();return{x:e+=l.left,y:t+=l.top}},"@:{to.show.value}":e=>e/n.State.get("@:{stage.scale}")|0,"@:{to.real.value}":e=>e*n.State.get("@:{stage.scale}")}}),define("util/transform",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7};t.default={"@:{rotate.rect}"({x:e,y:t,width:l,height:n},r){let i=Math.sqrt(Math.pow(l,2)+Math.pow(n,2))/2,a=l?Math.round(180*Math.atan(n/l)/Math.PI):0,s=180-r-a,o=a-r,d=90-r,p=r,g=l/2,c=n/2,h=e+g,u=t+c,f={x:h+i*Math.cos(s*Math.PI/180),y:u-i*Math.sin(s*Math.PI/180)},_={x:h+c*Math.cos(d*Math.PI/180),y:u-c*Math.sin(d*Math.PI/180)},m={x:h+i*Math.cos(o*Math.PI/180),y:u-i*Math.sin(o*Math.PI/180)},x={x:h+g*Math.cos(p*Math.PI/180),y:u+g*Math.sin(p*Math.PI/180)},y={x:h-i*Math.cos(s*Math.PI/180),y:u+i*Math.sin(s*Math.PI/180)},b={x:h-c*Math.sin(p*Math.PI/180),y:u+c*Math.cos(p*Math.PI/180)},w={x:h-i*Math.cos(o*Math.PI/180),y:u+i*Math.sin(o*Math.PI/180)},v={x:h-g*Math.cos(p*Math.PI/180),y:u-g*Math.sin(p*Math.PI/180)},k=Math.min(f.x,m.x,y.x,w.x),A=Math.max(f.x,m.x,y.x,w.x),z=Math.min(f.y,m.y,y.y,w.y),j=Math.max(f.y,m.y,y.y,w.y);return{point:[f,_,m,x,y,b,w,v],width:A-k,height:j-z,left:k,right:A,top:z,bottom:j}},"@:{get.point.and.opposite}"(e,t){let l={},r={},i=n[t],a=0,s=i-4;return s<0&&(s=i+4),{current:{index:i,point:r=e[i]},opposite:{index:a=s,point:l=e.slice(s,s+1)[0]}}},"@:{get.scaled.rect}"(e,t){let{x:l,y:n,width:r,height:i,scale:a}=e,s={x:0,y:0},o=r*(a.x-1),d=i*(a.y-1),p=r+o,g=i+d,c=l-o/2,h=n-d/2;if(t){let e=[{x:l,y:n},{x:l+r,y:n},{x:l+r,y:n+i},{x:l,y:n+i}],a=[{x:c,y:h},{x:c+p,y:h},{x:c+p,y:h+g},{x:c,y:h+g}];s.x=e[t].x-a[t].x,s.y=e[t].y-a[t].y}return{x:c+s.x,y:h+s.y,width:p,height:g}},"@:{get.new.rect}"(e,t,l,n){let r=this["@:{get.scaled.rect}"]({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),i=r.width,a=r.height,s=this["@:{rotate.rect}"](r,e.rotate),o=l.point[n].x-s.point[n].x+s.left,d=l.point[n].y-s.point[n].y+s.top;return{left:o+s.width/2-i/2,top:d+s.height/2-a/2,width:i,height:a}},"@:{get.rect.xy}"({x:e,y:t,width:l,height:n},r){if(0==l)return{x:e,y:t};let i=e+l/2,a=t+n/2,s=Math.sqrt(l*l/2/2+n*n/2/2),o=180*Math.atan(n/l)/Math.PI+r+180;return{x:i+s*Math.cos(o*Math.PI/180),y:a+s*Math.sin(o*Math.PI/180)}}}}),define("panels/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");let r=[{title:"@:{lang#panel.elements}",icon:"&#xe629;",width:100,height:270,left:25,top:90,show:!0,resizeY:!0,id:"p-elements",view:"panels/elements/index"},{title:"@:{lang#panel.props}",icon:"&#xe7a1;",width:240,height:120,right:10,top:90,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"},{title:"@:{lang#panel.data}",icon:"&#xe609;",width:200,height:120,show:!1,right:260,top:90,id:"p-data",view:"panels/data/index"},{title:"@:{lang#panel.overview}",icon:"&#xe7ad;",width:180,height:124,show:!0,left:25,bottom:10,id:"p-overview",view:"panels/overview/index",fixedSize:!0}],i=n.default.toMap(r,"id");t.default={"@:{open.panels}"(){for(let e of r)e.show&&this["@:{open.panel}"](e.id,!0);n.State.fire("@:{event#panel.change}")},"@:{open.panel}"(e,t){let l=i[e];if(!l.opened){if(l.opened=1,l.eId)n.node(l.eId).style.display="block";else{l.eId=n.default.guid("panel_");let e=n.node(n.default.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${l.eId}"></div>`);let t=n.Vframe.byNode(e);l.close=(()=>{this["@:{close.panel}"](l.id)}),t.mountVframe(n.node(l.eId),"panels/panel",l)}if(!t){n.State.fire("@:{event#panel.change}"),n.Vframe.byNode(n.node(l.eId)).invoke("@:{show}")}}},"@:{close.panel}"(e){let t=i[e];if(t.opened){t.opened=0;let e=n.node(t.eId);e.style.display="none",n.State.fire("@:{event#panel.change}"),n.Vframe.byNode(e).invoke("@:{hide}")}},"@:{toggle.panel}"(e){i[e].opened?this["@:{close.panel}"](e):this["@:{open.panel}"](e)},"@:{support.panels}":()=>r}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,l)=>{let n={class:"rd-_gallery_mx-style_index_-clearfix rd-_gallery_mx-style_index_-unselectable rd-_panels_panel_-title"},r={class:"rd-_assets_index_-f12 rd-_assets_index_-iconfont rd-_assets_index_-mr2"},i={class:"rd-_assets_index_-m-center rd-_gallery_mx-style_index_-fr rd-_gallery_mx-style_index_-hp100"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../gallery/mx-pointer/cursor"),o=e("../gallery/mx-dragdrop/index");a.default.applyStyle("rd-_panels_panel_","\n.rd-_panels_panel_-panel {\nbackground:#fffe;\nposition:absolute;\nbox-shadow:0 2px 4px 0 rgba(0, 0, 0, 0.3);\n}\n.rd-_panels_panel_-title {\nfont-size:12px;\nheight:18px;\nline-height:18px;\nbackground:#FA742B;\ncolor:#fff;\n}\n.rd-_panels_panel_-title-text {\npadding:0 5px;\ncursor:move;\nwidth:calc(100% - 36px);\n}\n.rd-_panels_panel_-title-icon {\nwidth:16px;\nheight:14px;\nmargin:0 1px;\nfont-size:11px;\ncursor:pointer;\ndisplay:inline-flex;\njustify-content:center;\nalign-items:center;\nborder-radius:2px;\n}\n.rd-_panels_panel_-title-icon:hover {\nbackground:#e64e30;\n}\n.rd-_panels_panel_-content-outer {\noverflow:hidden;\ntransition:height 0.25s;\n}\n.rd-_panels_panel_-content-outer-disable-anim {\ntransition:none;\n}\n.rd-_panels_panel_-content {\nwidth:calc(100% - 2px);\noverflow:auto;\nfloat:left;\n}\n.rd-_panels_panel_-hbar {\nwidth:2px;\nfloat:right;\nbackground:#fafafa;\ncursor:ew-resize;\n}\n.rd-_panels_panel_-foot {\nheight:2px;\ncursor:ns-resize;\nbackground:#fafafa;\n}\n.rd-_panels_panel_-p-scroll {\nscroll-behavior:smooth;\n}\n.rd-_panels_panel_-p-scroll::-webkit-scrollbar {\nheight:2px;\nwidth:2px;\nbackground:#fafafa;\n}\n.rd-_panels_panel_-p-scroll::-webkit-scrollbar-corner {\nheight:2px;\nwidth:2px;\nbackground:#fafafa;\n}\n");let d=[],p={"@:{add}"(e){d.push(e)},"@:{remove}"(e){for(let t=d.length;t--;)if(d[t]==e){d.splice(t,1);break}this["@:{z-index}"]()},"@:{z-index}"(){for(let e=d.length;e--;)d[e]["@:{set.z-index}"](300+e)},"@:{top}"(e){if(d[d.length-1]!=e){for(let t=d.length;t--;)if(d[t]==e){d.splice(t,1);break}d.push(e),this["@:{z-index}"]()}}};t.default=a.default.View.extend({tmpl:(e,t,l,a)=>{let s,o,d;try{let p,g,c,h,u,f,_=[],{width:m,left:x,right:y,top:b,bottom:w,zIndex:v,i18n:k,icon:A,title:z,shrink:j,fixedSize:S,height:$,resizeX:q,view:M,resizeY:R}=e;return u=[t(0,1,(o=4,s="{{=icon}}",d="<%=icon%>",a(A)))],h=[t("i",r,u),t(0,0,(o=5,s="{{=i18n(title)}}",d="<%=i18n(title)%>",a(k(z))))],c=[t("div",{class:"rd-_gallery_mx-style_index_-fl rd-_panels_panel_-title-text",title:(o=3,s="{{=i18n('@:{lang#panel.drag}')}}",d="<%=i18n('@:{lang#panel.drag}')%>",a(k("@:{lang#panel.drag}"))),"mx5-mousedown":l+"\x1e@:{drag.move}()"},h)],u=[t(0,0,"\ue73a")],f="rd-_assets_index_-iconfont rd-_panels_panel_-title-icon"+(o=8,s="{{if shrink}}",""),d="<%if(shrink){%>",j&&(f+=" rd-_assets_index_-r180"+(o=8,s="{{/if}}",""),d="<%}%>"),h=[t("i",{"mx5-click":l+"\x1e@:{toggle.height}()",title:(o=8,s="{{=i18n(shrink?'@:{lang#panel.expand.panel}':'@:{lang#panel.shrink.panel}',title)}}",d="<%=i18n(shrink?'@:{lang#panel.expand.panel}':'@:{lang#panel.shrink.panel}',title)%>",a(k(j?"@:{lang#panel.expand.panel}":"@:{lang#panel.shrink.panel}",z))),class:f},u)],u=[t(0,0,"\ue635")],h.push(t("i",{class:"rd-_assets_index_-iconfont rd-_panels_panel_-title-icon","mx5-click":l+"\x1e@:{close}()",title:(o=9,s="{{=i18n('@:{lang#panel.close.panel}',title)}}",d="<%=i18n('@:{lang#panel.close.panel}',title)%>",a(k("@:{lang#panel.close.panel}",z)))},u)),c.push(t("div",i,h)),g=[t("div",n,c)],(c=[]).push(t("div",{style:"width:"+(o=13,s="{{=resizeX?'calc(100% - 2px)':'100%'}}",d="<%=resizeX?'calc(100% - 2px)':'100%'%>",a(q?"calc(100% - 2px)":"100%")),class:"rd-_gallery_mx-style_index_-hp100 rd-_gallery_mx-style_index_-scrollable rd-_panels_panel_-content rd-_panels_panel_-p-scroll","mx5-view":(o=13,s="{{=view}}",d="<%=view%>",a(M))})),o=15,s="{{if !resizeX}}",d="if(!resizeX){",q||(h=[t("div",{class:"rd-_gallery_mx-style_index_-hp100 rd-_gallery_mx-style_index_-unselectable rd-_panels_panel_-hbar",title:(o=16,s="{{=i18n('@:{lang#panel.ew-resize}')}}",d="<%=i18n('@:{lang#panel.ew-resize}')%>",a(k("@:{lang#panel.ew-resize}"))),"mx5-mousedown":l+"\x1e@:{start.resize}({w:1})"})],c.push(...h)),g.push(t("div",{class:"rd-_panels_panel_-content-outer",id:"c_"+(o=12,s="{{=$viewId}}","")+l,style:"height:"+(o=12,s="{{=(shrink?0:fixedSize?`${height}px`:`calc(100vh - ${height}px)`)}}",d="<%=shrink?0:fixedSize?`${height}px`:`calc(100vh - ${height}px)`%>",a(j?0:S?`${$}px`:`calc(100vh - ${$}px)`))},c)),f="rd-_panels_panel_-foot rd-_gallery_mx-style_index_-unselectable"+(o=19,s="{{if shrink||!resizeY}}",""),d="<%if(shrink||!resizeY){%>",!j&&R||(f+=" rd-_gallery_mx-style_index_-none"+(o=19,s="{{/if}}",""),d="<%}%>"),g.push(t("div",{title:(o=19,s="{{=i18n('@:{lang#panel.ns-resize}')}}",d="<%=i18n('@:{lang#panel.ns-resize}')%>",a(k("@:{lang#panel.ns-resize}"))),"mx5-mousedown":l+"\x1e@:{start.resize}({h:1})",class:f})),p="width:"+(o=1,s="{{=width}}",d="<%=width%>",a(m))+"px;"+(o=1,s="{{if left!=null}}",""),d="<%if(left!=null){%>",null!=x?(p+="left:"+(o=1,s="{{=left}}",d="<%=left%>",a(x))+(o=1,s="{{else}}",""),d="<%}else{%>"):(p+="right:"+(o=1,s="{{=right}}",d="<%=right%>",a(y))+(o=1,s="{{/if}}",""),d="<%}%>"),p+="px;"+(o=1,s="{{if top!=null}}",""),d="<%if(top!=null){%>",null!=b?(p+="top:"+(o=1,s="{{=top}}",d="<%=top%>",a(b))+"px"+(o=1,s="{{else}}",""),d="<%}else{%>"):(p+="bottom:"+(o=1,s="{{=bottom}}",d="<%=bottom%>",a(w))+"px"+(o=1,s="{{/if}}",""),d="<%}%>"),p+=";z-index:"+(o=1,s="{{=zIndex}}",d="<%=zIndex%>",a(v)),_.push(t("div",{class:"rd-_panels_panel_-panel",id:"p_"+(o=1,s="{{=$viewId}}","")+l,"mx5-mousedown":l+"\x1e@:{update.z-index}()",style:p},g)),t(l,0,_)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+s+"\r\n\tat line: "+o,t+="\r\n\ttranslate to: "+d+"\r\n\tat file:panels/panel.html"}},init(e){p["@:{add}"](this),this.on("destroy",()=>{p["@:{remove}"](this)}),this["@:{p.close}"]=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom,view:e.view,fixedSize:e.fixedSize,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+d.length})},"@:{drag.move}<mousedown>"(e){let t=a.node("p_"+this.id).style,l=this.get("left"),n=this.get("width"),r=0;null==l&&(r=1,l=this.get("right"));let i=this.get("top"),o=0;null==i&&(o=1,i=this.get("bottom"));let d=r?"right":"left",p=o?"bottom":"top",g=0,c=e.eventTarget;this["@:{drag.drop}"](e,a=>{g||(g=1,s.default["@:{show}"](c));let h=(r?e.pageX-a.pageX:a.pageX-e.pageX)+l;h<0?h=0:h+n>window.innerWidth&&(h=window.innerWidth-n);let u=(o?e.pageY-a.pageY:a.pageY-e.pageY)+i;u<0?u=0:u+18>window.innerHeight&&(u=window.innerHeight-18),t[d]=h+"px",t[p]=u+"px",this.set({[d]:h,[p]:u})},()=>{s.default["@:{hide}"]()})},"@:{start.resize}<mousedown>"(e){let{w:t}=e.params,l=this.get("width"),n=this.get("height"),r=this.get("right"),i=a.node("c_"+this.id);i.classList.add("rd-_panels_panel_-content-outer-disable-anim");let o=i.style,d=a.node("p_"+this.id).style,p=0,g=e.eventTarget;this["@:{drag.drop}"](e,i=>{if(p||(p=1,s.default["@:{show}"](g)),t){let t=i.pageX-e.pageX;t+l<100&&(t=100-l);let a=t+l;d.width=a+"px",(r||0===n)&&(d.right=r-t+"px",this.set({right:r-t})),this.set({width:a})}else{let t=e.pageY-i.pageY+n;o.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{s.default["@:{hide}"](),i.classList.remove("rd-_panels_panel_-content-outer-disable-anim")})},"@:{set.z-index}"(e){a.node("p_"+this.id).style.zIndex=e},"@:{update.z-index}<mousedown>"(){p["@:{top}"](this)},"@:{show}"(){p["@:{top}"](this)},"@:{hide}"(){},"@:{toggle.height}<click>"(){this.digest({shrink:!this.get("shrink")})},"@:{close}<click>"(){let e=this["@:{p.close}"];e&&a.default.toTry(e)}}).merge(o.default)}),define("panels/data/index",["magix","../../designer/service","../../i18n/index","gallery/mx-dropdown/index"],(e,t,l)=>{let n,r;e("gallery/mx-dropdown/index");let i={class:"rd-_assets_index_-text-align-center"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../designer/service");let o=a.default.State;a.default.applyStyle("rd-_panels_data_index_",".rd-_panels_data_index_-padding-4px {\npadding:4px;\n}\n.rd-_panels_data_index_-item-spliter {\nheight:1px;\nline-height:1px;\nmargin:5px 0;\nbackground:rgba(0, 0, 0, 0.2);\nbackground:-webkit-gradient(linear, left top, right top, from(rgba(165, 69, 243, 0)), color-stop(0.5, rgba(125, 118, 132, 0.33)), to(rgba(165, 69, 243, 0)));\n}\n.rd-_panels_data_index_-item-draggable {\nborder:solid 1px #e6e6e6;\nborder-radius:2px;\nmargin:2px 0;\nbackground-color:#fff;\n}\n.rd-_panels_data_index_-opacity-40 {\nopacity:0.4;\n}\n");const d=e("../../i18n/index");t.default=a.default.View.extend({tmpl:(e,t,l,a,s,o,d,p)=>{let g,c,h;try{let u,f,_,m,x,y,b,w,v,k=[],{error:A,canUseBind:z,selected:j,source:S,i18n:$,fields:q,bindFieldsMap:M,url:R}=e;if(c=1,g="{{if error}}",h="if(error){",A)u=[t(0,0,(c=2,g="{{=error}}",h="<%=error%>",a(A)))],k.push(...u);else{if(f=[],c=5,g="{{if canUseBind}}",h="if(canUseBind){",z){if((_=[]).push(t("div",{$:"source","mx5-change":l+"\x1e@:{update.source}()","mx5-view":"gallery/mx-dropdown/index?selected="+(c=6,g="{{=selected}}",h="<%=$eu(selected)%>",s(j))+"&list="+(c=6,g="{{#source}}",h="<%#source,'\x1esource'%>",d(o,S,"\x1esource"))+"&textKey=name&valueKey=id"})),n?_.push(n):_.push(n=t("div",{_:"_",class:"rd-_panels_data_index_-item-spliter"})),c=8,g="{{if !selected}}",h="if(!selected){",j){if(m=[],c=11,g="{{if fields}}",h="if(fields){",q){x=[],c=12,g="{{each fields as field}}",h="for(let $q_c_ganwp=fields.length,$q_key_lccutzgim=0;$q_key_lccutzgim<$q_c_ganwp;$q_key_lccutzgim++){let field=fields[$q_key_lccutzgim];";for(let e=q.length,n=0;n<e;n+=1){let e=q[n];r?w=[r]:(v=[t(0,0,"\ue69c")],w=[r=t("span",{_:"a",class:"rd-_assets_index_-iconfont"},v)]),v=[t(0,0,(c=15,g="{{=field.name}}",h="<%=field.name%>",a(e.name)))],w.push(t("span",0,v)),b="rd-_panels_data_index_-item-draggable"+(c=13,g="{{if bindFieldsMap[field.id]}}",""),h="<%if(bindFieldsMap[field.id]){%>",M[e.id]&&(b+=" rd-_panels_data_index_-opacity-40"+(c=13,g="{{/if}}",""),h="<%}%>"),y=[t("div",{draggable:(c=13,g="{{=!bindFieldsMap[field.id]}}",h="<%=!bindFieldsMap[field.id]%>",!M[e.id]&&"true"),"mx5-dragstart":l+"\x1e@:{drag.field.start}({url:'"+(c=13,g="{{=url}}",h="<%=$eq(url)%>",p(R))+"',field:'"+(c=13,g="{{#field}}",h="<%#field,'\x1efields.'+($q_key_lccutzgim)%>",d(o,e,"\x1efields."+n))+"',id:'"+(c=13,g="{{=selected}}",h="<%=$eq(selected)%>",p(j))+"'})",class:b},w)],x.push(...y)}m.push(...x)}_.push(...m)}else x=[t(0,0,(c=9,g="{{=i18n('@:{lang#data.choose.source}')}}",h="<%=i18n('@:{lang#data.choose.source}')%>",a($("@:{lang#data.choose.source}"))))],m=[t("div",i,x)],_.push(...m);f.push(..._)}else _=[t(0,0,(c=21,g="{{=i18n('@:{lang#data.choose.support.element}')}}",h="<%=i18n('@:{lang#data.choose.support.element}')%>",a($("@:{lang#data.choose.support.element}"))))],f.push(..._);u=[t("div",{class:"rd-_gallery_mx-style_index_-unselectable rd-_panels_data_index_-padding-4px","mx5-contextmenu":l+"\x1e@:{prevent}()"},f)],k.push(...u)}return t(l,0,k)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+g+"\r\n\tat line: "+c,t+="\r\n\ttranslate to: "+h+"\r\n\tat file:panels/data/index.html"}},"@:{bind.event}"(){let e=this["@:{throttle}"](this["@:{update.ui}"],100);o.on("@:{event#stage.select.elements.change}",e),o.on("@:{event#stage.select.element.props.update}",e),o.on("@:{event#history.shift}",e)},assign:()=>!1,"@:{update.ui}"(){let e,t=o.get("@:{stage.select.elements}"),l=!1,n={};if(t&&1==t.length){let r=t[0],{bind:i}=r.props;if(i){let{url:t,fields:r,id:s}=i;if(l=!0,t&&(e=t),r&&(n=a.default.toMap(r,"id")),s){let e=this.get("source"),t=a.default.toMap(e,"id")[s];this.set({selected:t?s:"",fields:t?t.fields:[],url:t?t.url:""})}}}this.digest({canUseBind:l,bindUrl:e,bindFieldsMap:n})},render(){this.digest({error:"\u6b63\u5728\u8f7d\u5165\u6570\u636e\u6e90..."});let e=a.default.mark(this,"@:{render}");this.fetch("@:{get.fields}",(t,l)=>{if(e()){let e=[{name:d.default("@:{lang#select.source}"),id:""},...l.get("data",[])];this.set({error:t,source:e,selected:""}),this["@:{update.ui}"](),this["@:{bind.event}"]()}})},"@:{update.source}<change>"(e){this.digest({url:e.item.url,fields:e.item.fields,selected:e.value})},"@:{drag.field.start}<dragstart>"(e){let t=e.params;o.set({"@:{bind.field.drag.data}":t}),e.dataTransfer.setData("text/plain","fix ff")},"@:{prevent}<contextmenu>"(e){e.preventDefault()}}).merge(s.default)}),define("panels/elements/index",["magix","../../util/converter","../../designer/stage-elements"],(e,t,l)=>{let n={class:"rd-_assets_index_-iconfont rd-_panels_elements_index_-move"},r={class:"rd-_gallery_mx-style_index_-ellipsis"};Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../util/converter"),s=e("../../designer/stage-elements");i.default.applyStyle("rd-_panels_elements_index_","\n.rd-_panels_elements_index_-items {\npadding:5px 2px;\n}\n.rd-_panels_elements_index_-item {\ndisplay:flex;\nalign-items:center;\npadding:0 2px;\ncolor:#333;\nheight:22px;\nline-height:22px;\ncursor:pointer;\nmargin:1px 0;\n}\n.rd-_panels_elements_index_-item:hover {\nbackground:#f0f0f0;\n}\n.rd-_panels_elements_index_-item-selected,\n.rd-_panels_elements_index_-item-selected:hover {\nbackground:#fcb58f;\n}\n.rd-_panels_elements_index_-move {\nmargin:0 4px 0 2px;\nfont-size:12px;\n}\n.rd-_panels_elements_index_-rect {\nbackground:#FA742B;\nopacity:0.4;\n}\n.rd-_panels_elements_index_-item--top {\nbox-shadow:0px -1px #FA742B;\n}\n.rd-_panels_elements_index_-item--bottom {\nbox-shadow:0px 1px #FA742B;\n}\n");let o=i.default.guid("rp_"),d={"@:{init}"(){i.node(o)||document.body.insertAdjacentHTML("beforeend",`<div class="rd-_gallery_mx-style_index_-pa rd-_panels_elements_index_-rect" id="${o}"></div>`)},"@:{show}"(e){let t=i.node(o).style,{props:l}=e,n=a.default["@:{stage.to.real.coord}"](l);t.left=n.x+"px",t.top=n.y+"px",t.width=l.width+"px",t.height=l.height+"px";let r=l.rotate||0;t.transform=`rotate(${r}deg)`},"@:{hide}"(){i.node(o).style.left="-10000px"}};t.default=i.default.View.extend({tmpl:(e,t,l,i,a,s,o)=>{let d,p,g;try{let a,c,h,u,f,_=[],{elements:m,selectedMap:x,drag:y,index:b,onTop:w,i18n:v}=e;a=[],p=2,d="{{for (let i=elements.length;i--;)}}",g="for(let i=elements.length;i--;){";for(let e=m.length;e--;){p=3,d="{{set e=elements[i]}}",g="<%let e=elements[i];%>";let _=m[e];f=[t(0,1,(p=5,d="{{=e.ctrl.icon}}",g="<%=e.ctrl.icon%>",i(_.ctrl.icon)))],u=[t("i",n,f)],f=[t(0,0,(p=7,d="{{=i18n(e.ctrl.title)}}",g="<%=i18n(e.ctrl.title)%>",i(v(_.ctrl.title))))],u.push(t("div",r,f)),h="rd-_panels_elements_index_-item"+(p=4,d="{{if selectedMap[e.id]}}",""),g="<%if(selectedMap[e.id]){%>",x[_.id]&&(h+=" rd-_panels_elements_index_-item-selected"+(p=4,d="{{/if}}",""),g="<%}%>"),h+=(p=4,d="{{if drag&& i==index}}",""),g="<%if(drag&& i==index){%>",y&&e==b&&(h+=" rd-_panels_elements_index_-item--"+(p=4,d="{{=onTop?'top':'bottom'}}",g="<%=onTop?'top':'bottom'%>",i(w?"top":"bottom"))+(p=4,d="{{/if}}",""),g="<%}%>"),c=[t("div",{"mx5-mouseover":l+"\x1e@:{show.rect}({element:'"+(p=4,d="{{#e}}",g="<%#e,'\x1eelements.'+(i)%>",o(s,_,"\x1eelements."+e))+"'})","mx5-mouseout":l+"\x1e@:{hide.rect}()","mx5-click":l+"\x1e@:{select.element}({element:'"+(p=4,d="{{#e}}",g="<%#e,'\x1eelements.'+(i)%>",o(s,_,"\x1eelements."+e))+"'})","mx5-dragstart":l+"\x1e@:{drag.start}({index:"+(p=4,d="{{=i}}",g="<%=i%>",i(e))+"})","mx5-dragover":l+"\x1e@:{drag.over}({index:"+(p=4,d="{{=i}}",g="<%=i%>",i(e))+"})",draggable:"true",class:h},u)],a.push(...c)}return _.push(t("div",{class:"rd-_gallery_mx-style_index_-unselectable rd-_panels_elements_index_-items","mx5-dragend":l+"\x1e@:{drag.end}()"},a)),t(l,0,_)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+d+"\r\n\tat line: "+p,t+="\r\n\ttranslate to: "+g+"\r\n\tat file:panels/elements/index.html"}},init(){d["@:{init}"]();let e=this.render.bind(this);i.State.on("@:{event#history.shift}",e),i.State.on("@:{event#stage.elements.change}",e),i.State.on("@:{event#stage.select.elements.change}",e)},render(){let e=i.State.get("@:{stage.elements}"),t=i.State.get("@:{stage.select.elements.map}");this.digest({selectedMap:t,elements:e})},"@:{show.rect}<mouseover>"(e){if(!i.default.inside(e.relatedTarget,e.eventTarget)){let{element:t}=e.params;d["@:{show}"](t)}},"@:{hide.rect}<mouseout>"(e){i.default.inside(e.relatedTarget,e.eventTarget)||d["@:{hide}"]()},"@:{select.element}<click>"(e){let{element:t}=e.params;s.default["@:{multi.select}"](e,t)},"@:{drag.start}<dragstart>"(e){this["@:{drag.index}"]=e.params.index,this["@:{drag.node}"]=e.eventTarget,e.dataTransfer.effectAllowed="all",e.dataTransfer.setData("text/plain","fix ff")},"@:{drag.over}<dragover>"(e){let t=this;if(t["@:{drag.node}"]!=e.eventTarget){e.dataTransfer.dropEffect="move";let l=e.eventTarget.getBoundingClientRect(),n=l.top+l.height/2>e.pageY,r=e.params.index;t.digest({onTop:n,drag:!0,index:r})}else e.dataTransfer.dropEffect="none",t.digest({drag:!1})},"@:{drag.end}<dragend>"(e){let t=this,l=t.get();if(l.drag){let e=t["@:{drag.index}"],n=l.elements[e];l.elements.splice(l.index+(l.onTop?1:0),0,n),l.index<e?l.elements.splice(e+1,1):l.elements.splice(e,1),t.set({elements:l.elements}),i.State.fire("@:{event#stage.elements.change}")}t.digest({drag:!1})}})}),define("panels/overview/index",["magix","../../gallery/mx-dragdrop/index","../../gallery/mx-pointer/cursor"],(e,t,l)=>{let n={class:"rd-_panels_overview_index_-overview"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("../../gallery/mx-dragdrop/index"),a=e("../../gallery/mx-pointer/cursor");r.default.applyStyle("rd-_panels_overview_index_","\n.rd-_panels_overview_index_-anim {\ntransition:all 0.25s;\n}\n.rd-_panels_overview_index_-anim-size {\ntransition:width, height 0.25s;\n}\n.rd-_panels_overview_index_-overview {\npadding:2px 0;\n}\n.rd-_panels_overview_index_-stage-container {\nbackground:#edeef3;\nposition:relative;\noverflow:hidden;\nbox-shadow:inset 1px 1px 6px 2px #dadada;\n}\n.rd-_panels_overview_index_-stage-viewport {\nposition:absolute;\nbox-shadow:inset 0px 0px 1px 1px #FA742B;\ncursor:move;\n}\n.rd-_panels_overview_index_-item {\nbackground:#fcb58f;\nposition:absolute;\nborder:dotted 1px #fff;\n}\n");let s=[50,240,50,120],o=[180,120];t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g,c=[],{width:h,height:u,centerMargin:f,page:_,pageWidth:m,pageHeight:x,canvasMargin:y,elements:b,ratio:w,left:v,top:k,viewportWidth:A,viewportHeight:z}=e;p=[],a=4,i="{{each elements as {id:eId,props,type}}}",s="for(let $q_c_hlwmzaco=elements.length,$q_key_pekkcdbqp=0;$q_key_pekkcdbqp<$q_c_hlwmzaco;$q_key_pekkcdbqp++){let {id:eId,props:props,type:type}=elements[$q_key_pekkcdbqp];";for(let e=b.length,n=0;n<e;n+=1){let{id:e,props:o,type:d}=b[n];g=[],a=5,i="{{set ew=Math.max(props.width*ratio,1),eh=Math.max(props.height*ratio,1),br=(props.radius?props.radius*ratio:0)+'px'}}",s="<%let ew=Math.max(props.width*ratio,1),eh=Math.max(props.height*ratio,1),br=(props.radius?props.radius*ratio:0)+'px';%>";let c=Math.max(o.width*w,1),h=Math.max(o.height*w,1),u=(o.radius?o.radius*w:0)+"px";a=6,i="{{if type==\\'circle\\'}}",s="if(type=='circle'){","circle"==d&&(a=7,i="{{br='50%'}}",s="<%br='50%'%>",u="50%"),g.push(t("div",{id:(a=9,i="{{=$viewId}}",l+"_"+(a=9,i="{{=eId}}",s="<%=eId%>",r(e))),class:"rd-_panels_overview_index_-anim rd-_panels_overview_index_-item",style:"left:"+(a=9,i="{{=props.x*ratio}}",s="<%=props.x*ratio%>",r(o.x*w))+"px;top:"+(a=9,i="{{=props.y*ratio}}",s="<%=props.y*ratio%>",r(o.y*w))+"px;width:"+(a=9,i="{{=ew}}",s="<%=ew%>",r(c))+"px;height:"+(a=9,i="{{=eh}}",s="<%=eh%>",r(h))+"px;transform:rotate("+(a=9,i="{{=props.rotate}}",s="<%=props.rotate%>",r(o.rotate))+"deg);border-radius:"+(a=9,i="{{=br}}",s="<%=br%>",r(u))})),p.push(...g)}return d=[t("div",{style:"position:relative;background:"+(a=3,i="{{=page.background}}",s="<%=page.background%>",r(_.background))+";width:"+(a=3,i="{{=pageWidth}}",s="<%=pageWidth%>",r(m))+"px;height:"+(a=3,i="{{=pageHeight}}",s="<%=pageHeight%>",r(x))+"px;margin:"+(a=3,i="{{=canvasMargin}}",s="<%=canvasMargin%>",r(y))},p),t("div",{class:"rd-_panels_overview_index_-anim-size rd-_panels_overview_index_-stage-viewport",style:"left:"+(a=12,i="{{=left}}",s="<%=left%>",r(v))+"px;top:"+(a=12,i="{{=top}}",s="<%=top%>",r(k))+"px;width:"+(a=12,i="{{=viewportWidth}}",s="<%=viewportWidth%>",r(A))+"px;height:"+(a=12,i="{{=viewportHeight}}",s="<%=viewportHeight%>",r(z))+"px","mx5-mousedown":l+"\x1e@:{move.viewport}()"})],o=[t("div",{class:"rd-_panels_overview_index_-anim rd-_panels_overview_index_-stage-container",style:"width:"+(a=2,i="{{=width}}",s="<%=width%>",r(h))+"px;height:"+(a=2,i="{{=height}}",s="<%=height%>",r(u))+"px;margin:"+(a=2,i="{{=centerMargin}}",s="<%=centerMargin%>",r(f))},d)],c.push(t("div",n,o)),t(l,0,c)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:panels/overview/index.html"}},init(){let e=r.node("stage"),t=this["@:{throttle}"](this.render);r.State.on("@:{event#history.shift}",t),r.State.on("@:{event#stage.scale.change}",t),r.State.on("@:{event#stage.page.change}",t),r.State.on("@:{event#stage.elements.change}",t),r.State.on("@:{event#stage.select.element.props.change}",t),r.State.on("@:{event#stage.select.element.props.update}",t),e.addEventListener("scroll",this["@:{update.viewport.pos}"].bind(this)),this["@:{update.overview}"]=t},"@:{update.viewport.pos}"(){let e=r.node("stage"),t=this.get("ratio");if(t){let l=this.get("width"),n=this.get("height"),r=this.get("viewportWidth"),i=this.get("viewportHeight");this.digest({left:Math.min(e.scrollLeft*t,l-r),top:Math.min(e.scrollTop*t,n-i)})}},render(){let e=r.default.mark(this,"@:{render}"),t=()=>{if(e()){if(!r.node("stage_canvas"))return void setTimeout(t,20);let e=r.State.get("@:{stage.page}"),l=r.State.get("@:{stage.scale}"),n=r.node("stage"),i=n.scrollWidth,a=n.scrollHeight,d=o[0],p=d/i,g=p*a;g>o[1]&&(d=(p=(g=o[1])/a)*i);let c=p*e.width*l,h=p*e.height*l,u="";for(let e of s)u+=p*e+"px ";let f=`${(o[1]-g)/2}px ${(o[0]-d)/2}px`,_=Math.min(n.offsetWidth,i)*p,m=Math.min(n.offsetHeight,a)*p;this.set({width:d,height:g,page:e,pageWidth:c,pageHeight:h,ratio:p,elements:r.State.get("@:{stage.elements}"),viewportHeight:m,viewportWidth:_,canvasMargin:u,centerMargin:f}),this["@:{update.viewport.pos}"]()}};setTimeout(t,20)},"@:{move.viewport}<mousedown>"(e){let t=this.get("left"),l=this.get("top"),n=this.get("viewportWidth"),i=this.get("viewportHeight"),s=this.get("width"),o=this.get("height"),d=r.node("stage"),p=this.get("ratio");a.default["@:{root.show.by.type}"]("move"),this["@:{drag.drop}"](e,r=>{let a=t+r.pageX-e.pageX,g=l+r.pageY-e.pageY;a<0?a=0:a>s-n&&(a=s-n),g<0?g=0:g>o-i&&(g=o-i),d.scrollLeft=a/p,d.scrollTop=g/p},()=>{a.default["@:{root.hide}"]()})},"$win<resize>"(){this["@:{update.overview}"]()}}).merge(i.default)}),define("panels/props/index",["magix","../../designer/props","../../designer/history","../../util/transform","../../util/bezier","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-font/style","gallery/mx-font/align","gallery/mx-dropdown/index","gallery/mx-picture/index","gallery/mx-field/index","gallery/mx-column/index","./page"],(e,t,l)=>{let n,r,i;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("gallery/mx-dropdown/index"),e("gallery/mx-picture/index"),e("gallery/mx-field/index"),e("gallery/mx-column/index"),e("./page");let a={class:"rd-_gallery_mx-style_index_-unselectable rd-_panels_props_index_-props"},s={class:"rd-_panels_props_index_-props-item"},o={class:"rd-_panels_props_index_-props-item-title"},d={class:"rd-_panels_props_index_-switch"},p={checked:"checked"},g={value:"value"};Object.defineProperty(t,"__esModule",{value:!0});const c=e("magix"),h=e("../../designer/props"),u=e("../../designer/history"),f=e("../../util/transform"),_=e("../../util/bezier");c.default.applyStyle("rd-_panels_props_index_","\n.rd-_panels_props_index_-props {\npadding:4px;\nmin-width:200px;\n}\n.rd-_panels_props_index_-props-item {\nline-height:24px;\ndisplay:flex;\nalign-items:center;\npadding:2px 0;\n}\n.rd-_panels_props_index_-props-item-title {\nwidth:80px;\ntext-align:right;\n}\n.rd-_panels_props_index_-props-item-spliter {\nheight:1px;\nline-height:1px;\nmargin:5px 0;\nbackground:rgba(0, 0, 0, 0.2);\nbackground:-webkit-gradient(linear, left top, right top, from(rgba(165, 69, 243, 0)), color-stop(0.5, rgba(125, 118, 132, 0.33)), to(rgba(165, 69, 243, 0)));\n}\n.rd-_panels_props_index_-ipt {\nwidth:140px;\n}\n.rd-_panels_props_index_-ta {\nheight:90px;\n}\n.rd-_panels_props_index_-dock-top {\nalign-items:flex-start;\n}\n.rd-_panels_props_index_-switch {\ndisplay:flex;\nalign-items:center;\ncursor:pointer;\n}\n.rd-_panels_props_index_-switch-input {\nvisibility:hidden;\nposition:absolute;\n}\n.rd-_panels_props_index_-switch-button {\nwidth:32px;\nheight:16px;\nposition:relative;\n-webkit-user-select:none;\n-moz-user-select:none;\n-ms-user-select:none;\nuser-select:none;\ndisplay:inline-block;\nborder-radius:22px;\nbackground:#ccc;\n}\n.rd-_panels_props_index_-switch-button::before {\ncontent:'';\nwidth:12px;\nheight:12px;\nposition:absolute;\nleft:0;\nmargin:2px;\nborder-radius:50%;\nbackground:#fff;\ntransition:all 0.25s;\n}\n.rd-_panels_props_index_-switch-input:checked + .rd-_panels_props_index_-switch-button {\nbackground:#FA742B;\n}\n.rd-_panels_props_index_-switch-input:checked + .rd-_panels_props_index_-switch-button::before {\nleft:100%;\nmargin-left:-14px;\n}\n.rd-_panels_props_index_-switch-input:disabled + .rd-_panels_props_index_-switch-button {\nbackground:#e6e6e6;\ncursor:not-allowed;\n}\n"),t.default=c.default.View.extend({tmpl:(e,t,l,c,h,u,f,_)=>{let m,x,y;try{let b,w,v,k,A,z,j,S,$,q,M,R=[],{elements:B,i18n:H,props:I}=e;if(x=1,m="{{if elements.length==1}}",y="if(elements.length==1){",1==B.length){x=2,m="{{set e=elements[0]}}",y="<%let e=elements[0];%>";let e=B[0];v=[],A=[t(0,0,(x=5,m="{{=i18n('@:{lang#props.type}')}}",y="<%=i18n('@:{lang#props.type}')%>",c(H("@:{lang#props.type}"))))],k=[t("span",o,A)],A=[t(0,0,(x=6,m="{{=i18n(e.ctrl.title)}}",y="<%=i18n(e.ctrl.title)%>",c(H(e.ctrl.title))))],k.push(t("span",0,A)),v.push(t("li",s,k)),x=8,m="{{each e.ctrl.props as p}}",y="for(let $q_a_rbrjhsafms=e.ctrl.props,$q_c_aocnquns=$q_a_rbrjhsafms.length,$q_key_tbaorp=0;$q_key_tbaorp<$q_c_aocnquns;$q_key_tbaorp++){let p=$q_a_rbrjhsafms[$q_key_tbaorp];";for(let i=e.ctrl.props,a=i.length,s=0;s<a;s+=1){let a=i[s];if(k=[],x=9,m="{{if p.type==props[\\'@:{spliter}\\']}}",y="if(p.type==props['@:{spliter}']){",a.type==I["@:{spliter}"])A=n?[n]:[n=t("li",{_:"_",class:"rd-_panels_props_index_-props-item-spliter"})],k.push(...A);else{A=[],x=12,m="{{set data=e.props[p.key]}}",y="<%let data=e.props[p.key];%>";let n=e.props[a.key];x=13,m="{{if p.read}}",y="if(p.read){",a.read&&(x=14,m="{{data=p.read(data);}}",y="<%data=p.read(data);%>",n=a.read(n)),x=16,m="{{if !p.ifShow||p.ifShow(e.props)}}",y="if(!p.ifShow||p.ifShow(e.props)){",a.ifShow&&!a.ifShow(e.props)||(S=[],$=[t(0,0,(x=19,m="{{=i18n(p.tip)}}",y="<%=i18n(p.tip)%>",c(H(a.tip))))],S.push(t("span",o,$)),x=21,m="{{if p.type==props[\\'@:{label}\\']}}",y="if(p.type==props['@:{label}']){",a.type==I["@:{label}"]?($=[t(0,0,(x=22,m="{{=data}}",y="<%=data%>",c(n)))],S.push(...$)):(x=23,m="{{else if p.type==props[\\'@:{number}\\']}}",y="else if(p.type==props['@:{number}']){",a.type==I["@:{number}"]?(q="gallery/mx-number/index?value="+(x=24,m="{{#data}}",y="<%#data,'\x1eelements.'+(0)+'.props.'+(p.key)%>",f(u,n,"\x1eelements.0.props."+a.key))+(x=24,m="{{=p.max}}",""),y="<%if(($_temp=p.max)!=null){%>",null!=(b=a.max)&&(q+="&max="+(y="<%=$eu($_temp)%>",h(b)),y="<%}%>"),q+=(x=24,m="{{=p.step}}",""),y="<%if(($_temp=p.step)!=null){%>",null!=(b=a.step)&&(q+="&step="+(y="<%=$eu($_temp)%>",h(b)),y="<%}%>"),q+=(x=24,m="{{=p.fixed}}",""),y="<%if(($_temp=p.fixed)!=null){%>",null!=(b=a.fixed)&&(q+="&fixed="+(y="<%=$eu($_temp)%>",h(b)),y="<%}%>"),q+=(x=24,m="{{=p.min}}",""),y="<%if(($_temp=p.min)!=null){%>",null!=(b=a.min)&&(q+="&min="+(y="<%=$eu($_temp)%>",h(b)),y="<%}%>"),$=[t("div",{$:"elements",class:"rd-_gallery_mx-style_index_-input rd-_gallery_mx-style_index_-pr rd-_panels_props_index_-ipt",disabled:(x=24,m="{{=e.props.locked}}",y="<%=e.props.locked%>",b=e.props.locked,b),"mx5-input":l+"\x1e@:{update.prop}({key:'"+(x=24,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'value',element:'"+(x=24,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"',write:'"+(x=24,m="{{#p.write}}",y="<%#p.write,'\x1eelements.'+(0)+'.ctrl.props.'+($q_key_tbaorp)+'.write'%>",f(u,a.write,"\x1eelements.0.ctrl.props."+s+".write"))+"',bezier:'"+(x=24,m="{{#p.bezier}}",y="<%#p.bezier,'\x1eelements.'+(0)+'.ctrl.props.'+($q_key_tbaorp)+'.bezier'%>",f(u,a.bezier,"\x1eelements.0.ctrl.props."+s+".bezier"))+"'})","mx5-view":q})],S.push(...$)):(x=25,m="{{else if p.type==props[\\'@:{color}\\']}}",y="else if(p.type==props['@:{color}']){",a.type==I["@:{color}"]?($=[t("div",{$:"elements",class:"rd-_panels_props_index_-ipt","mx5-input":l+"\x1e@:{update.prop}({key:'"+(x=26,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'color',element:'"+(x=26,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})","mx5-view":"gallery/mx-color/index?clear="+(x=26,m="{{=p.clear}}",y="<%=$eu(p.clear)%>",h(a.clear))+"&color="+(x=26,m="{{#data}}",y="<%#data,'\x1eelements.'+(0)+'.props.'+(p.key)%>",f(u,n,"\x1eelements.0.props."+a.key))+"&align=right&disabled="+(x=26,m="{{=e.props.locked}}",y="<%=$eu(e.props.locked)%>",h(e.props.locked))+"&alpha="+(x=26,m="{{=p.alpha}}",y="<%=$eu(p.alpha)%>",h(a.alpha))})],S.push(...$)):(x=27,m="{{else if p.type==props[\\'@:{boolean}\\']}}",y="else if(p.type==props['@:{boolean}']){",a.type==I["@:{boolean}"]?(M=[t("input",{class:"rd-_panels_props_index_-switch-input",type:"checkbox",checked:(x=29,m="{{=e.props[p.key]}}",y="<%=e.props[p.key]%>",b=e.props[a.key],b),"mx5-change":l+"\x1e@:{update.prop}({key:'"+(x=29,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',native:'checked',element:'"+(x=29,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"',refresh:'"+(x=29,m="{{#p.refresh}}",y="<%#p.refresh,'\x1eelements.'+(0)+'.ctrl.props.'+($q_key_tbaorp)+'.refresh'%>",f(u,a.refresh,"\x1eelements.0.ctrl.props."+s+".refresh"))+"'})"},0,p,1)],r?M.push(r):M.push(r=t("i",{_:"a",class:"rd-_panels_props_index_-switch-button"})),$=[t("label",d,M)],S.push(...$)):(x=32,m="{{else if p.type==props[\\'@:{text.area}\\']}}",y="else if(p.type==props['@:{text.area}']){",a.type==I["@:{text.area}"]?($=[t("textarea",{class:"rd-_gallery_mx-style_index_-textarea rd-_panels_props_index_-ipt rd-_panels_props_index_-ta",disabled:(x=33,m="{{=e.props.locked}}",y="<%=e.props.locked%>",b=e.props.locked,b),"mx5-input":l+"\x1e@:{update.prop}({key:'"+(x=33,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',native:'value',element:'"+(x=33,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})",value:(x=33,m="{{=data}}",y="<%=data%>",c(n))},0,g)],S.push(...$)):(x=34,m="{{else if p.type==props[\\'@:{font.style}\\']}}",y="else if(p.type==props['@:{font.style}']){",a.type==I["@:{font.style}"]?($=[t("div",{$:"elements",class:"rd-_panels_props_index_-ipt","mx5-input":l+"\x1e@:{update.prop}({key:'"+(x=35,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'value',element:'"+(x=35,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})","mx5-view":"gallery/mx-font/style?disabled="+(x=35,m="{{#e.props.locked}}",y="<%#e.props.locked,'\x1eelements.'+(0)+'.props.locked'%>",f(u,e.props.locked,"\x1eelements.0.props.locked"))+"&value="+(x=35,m="{{#data}}",y="<%#data,'\x1eelements.'+(0)+'.props.'+(p.key)%>",f(u,n,"\x1eelements.0.props."+a.key))})],S.push(...$)):(x=36,m="{{else if p.type==props[\\'@:{font.align}\\']}}",y="else if(p.type==props['@:{font.align}']){",a.type==I["@:{font.align}"]?($=[t("div",{$:"elements",class:"rd-_panels_props_index_-ipt","mx5-input":l+"\x1e@:{update.prop}({key:'"+(x=37,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'value',element:'"+(x=37,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})","mx5-view":"gallery/mx-font/align?disabled="+(x=37,m="{{#e.props.locked}}",y="<%#e.props.locked,'\x1eelements.'+(0)+'.props.locked'%>",f(u,e.props.locked,"\x1eelements.0.props.locked"))+"&value="+(x=37,m="{{#data}}",y="<%#data,'\x1eelements.'+(0)+'.props.'+(p.key)%>",f(u,n,"\x1eelements.0.props."+a.key))})],S.push(...$)):(x=38,m="{{else if p.type==props[\\'@:{dropdown}\\']}}",y="else if(p.type==props['@:{dropdown}']){",a.type==I["@:{dropdown}"]?(q="gallery/mx-dropdown/index?"+(x=39,m="{{#e.props.locked}}",""),y="<%if(($_temp=e.props.locked)){%>",(b=e.props.locked)&&(q+="disabled="+(y="<%#$_temp,'\x1eelements.'+(0)+'.props.locked'%>",f(u,b,"\x1eelements.0.props.locked")),y="<%}%>"),q+="&selected="+(x=39,m="{{=data}}",y="<%=$eu(data)%>",h(n))+"&list="+(x=39,m="{{#p.items}}",y="<%#p.items,'\x1eelements.'+(0)+'.ctrl.props.'+($q_key_tbaorp)+'.items'%>",f(u,a.items,"\x1eelements.0.ctrl.props."+s+".items"))+"&textKey=text&valueKey=value",$=[t("div",{$:"elements",class:"rd-_panels_props_index_-ipt","mx5-change":l+"\x1e@:{update.prop}({key:'"+(x=39,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'value',element:'"+(x=39,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})","mx5-view":q})],S.push(...$)):(x=40,m="{{else if p.type==props[\\'@:{image}\\']}}",y="else if(p.type==props['@:{image}']){",a.type==I["@:{image}"]?($=[t("div",{$:"elements",class:"rd-_panels_props_index_-ipt","mx5-change":l+"\x1e@:{update.prop}({key:'"+(x=41,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'src',refresh:'"+(x=41,m="{{#p.refresh}}",y="<%#p.refresh,'\x1eelements.'+(0)+'.ctrl.props.'+($q_key_tbaorp)+'.refresh'%>",f(u,a.refresh,"\x1eelements.0.ctrl.props."+s+".refresh"))+"',element:'"+(x=41,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"',write:'"+(x=41,m="{{#p.write}}",y="<%#p.write,'\x1eelements.'+(0)+'.ctrl.props.'+($q_key_tbaorp)+'.write'%>",f(u,a.write,"\x1eelements.0.ctrl.props."+s+".write"))+"'})","mx5-view":"gallery/mx-picture/index?src="+(x=41,m="{{=data}}",y="<%=$eu(data)%>",h(n))+"&disabled="+(x=41,m="{{#e.props.locked}}",y="<%#e.props.locked,'\x1eelements.'+(0)+'.props.locked'%>",f(u,e.props.locked,"\x1eelements.0.props.locked"))})],S.push(...$)):(x=42,m="{{else if p.type==props[\\'@:{image.reset}\\']}}",y="else if(p.type==props['@:{image.reset}']){",a.type==I["@:{image.reset}"]?(M=[t(0,0,(x=43,m="{{=i18n('@:{lang#elements.image.reset}')}}",y="<%=i18n('@:{lang#elements.image.reset}')%>",c(H("@:{lang#elements.image.reset}"))))],$=[t("button",{class:"rd-_gallery_mx-style_index_-btn rd-_gallery_mx-style_index_-btn-brand",disabled:(x=43,m="{{=e.props.locked}}",y="<%=e.props.locked%>",b=e.props.locked,b),"mx5-click":l+"\x1e@:{update.image.size}({key:'"+(x=43,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',element:'"+(x=43,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})"},M)],S.push(...$)):(x=44,m="{{else if p.type==props[\\'@:{text.input}\\']}}",y="else if(p.type==props['@:{text.input}']){",a.type==I["@:{text.input}"]?($=[t("input",{class:"rd-_gallery_mx-style_index_-input",disabled:(x=45,m="{{=e.props.locked}}",y="<%=e.props.locked%>",b=e.props.locked,b),"mx5-input":l+"\x1e@:{update.prop}({key:'"+(x=45,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',native:'value',element:'"+(x=45,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})"},0,0,1)],S.push(...$)):(x=46,m="{{else if p.type==props[\\'@:{bind.field}\\']}}",y="else if(p.type==props['@:{bind.field}']){",a.type==I["@:{bind.field}"]?($=[t("div",{$:"elements",class:"rd-_panels_props_index_-ipt","mx5-change":l+"\x1e@:{update.prop}({key:'"+(x=47,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'bindField',refresh:1,element:'"+(x=47,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"'})","mx5-view":"gallery/mx-field/index?props="+(x=47,m="{{#e.props}}",y="<%#e.props,'\x1eelements.'+(0)+'.props'%>",f(u,e.props,"\x1eelements.0.props"))+"&disabled="+(x=47,m="{{#e.props.locked}}",y="<%#e.props.locked,'\x1eelements.'+(0)+'.props.locked'%>",f(u,e.props.locked,"\x1eelements.0.props.locked"))})],S.push(...$)):(x=48,m="{{else if p.type==props[\\'@:{column.width}\\']}}",y="else if(p.type==props['@:{column.width}']){",a.type==I["@:{column.width}"]&&(q="gallery/mx-column/index?"+(x=49,m="{{=p.min}}",""),y="<%if(($_temp=p.min)!=null){%>",null!=(b=a.min)&&(q+="min="+(y="<%=$eu($_temp)%>",h(b)),y="<%}%>"),q+=(x=49,m="{{=p.max}}",""),y="<%if(($_temp=p.max)!=null){%>",null!=(b=a.max)&&(q+="&max="+(y="<%=$eu($_temp)%>",h(b)),y="<%}%>"),q+="&columns="+(x=49,m="{{#data}}",y="<%#data,'\x1eelements.'+(0)+'.props.'+(p.key)%>",f(u,n,"\x1eelements.0.props."+a.key))+"&fields="+(x=49,m="{{#e.props.bind.fields}}",y="<%#e.props.bind.fields,'\x1eelements.'+(0)+'.props.bind.fields'%>",f(u,e.props.bind.fields,"\x1eelements.0.props.bind.fields"))+"&disabled="+(x=49,m="{{#e.props.locked}}",y="<%#e.props.locked,'\x1eelements.'+(0)+'.props.locked'%>",f(u,e.props.locked,"\x1eelements.0.props.locked")),$=[t("div",{$:"elements",class:"rd-_panels_props_index_-ipt","mx5-change":l+"\x1e@:{update.prop}({key:'"+(x=49,m="{{=p.key}}",y="<%=$eq(p.key)%>",_(a.key))+"',use:'columns',element:'"+(x=49,m="{{#e}}",y="<%#e,'\x1eelements.'+(0)%>",f(u,e,"\x1eelements.0"))+"',write:'"+(x=49,m="{{#p.write}}",y="<%#p.write,'\x1eelements.'+(0)+'.ctrl.props.'+($q_key_tbaorp)+'.write'%>",f(u,a.write,"\x1eelements.0.ctrl.props."+s+".write"))+"'})","mx5-view":q})],S.push(...$)))))))))))))),j="rd-_panels_props_index_-props-item"+(x=17,m="{{if p.dockTop}}",""),y="<%if(p.dockTop){%>",a.dockTop&&(j+=" rd-_panels_props_index_-dock-top"+(x=17,m="{{/if}}",""),y="<%}%>"),z=[t("li",{class:j},S)],A.push(...z)),k.push(...A)}v.push(...k)}w=[t("ul",a,v)],R.push(...w)}else w=i?[i]:[i=t("div",{_:"b","mx5-view":"panels/props/page"})],R.push(...w);return t(l,0,R)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+m+"\r\n\tat line: "+x,t+="\r\n\ttranslate to: "+y+"\r\n\tat file:panels/props/index.html"}},init(){let e=this["@:{throttle}"](this.render,100);c.State.on("@:{event#stage.select.elements.change}",e),c.State.on("@:{event#stage.select.element.props.change}",e),c.State.on("@:{event#history.shift}",e)},render(){this.digest({scale:c.State.get("@:{stage.scale}"),props:h.default,elements:c.State.get("@:{stage.select.elements}")})},"@:{update.prop}<input,change>"(e){let{key:t,use:l,element:n,refresh:r,native:i,write:a,bezier:s}=e.params;if(l||i){let o,d=n.props,p="width"==t||"height"==t;p&&(o=f.default["@:{get.rect.xy}"](d,d.rotate));let g=i?e.eventTarget[i]:e[l];if(a&&(g=a(g,d,e)),d[t]=g,p){let e=f.default["@:{get.rect.xy}"](d,d.rotate);d.x+=o.x-e.x,d.y+=o.y-e.y,r=!0}s&&_.default(d)}r&&this.render(),c.State.fire("@:{event#stage.select.element.props.update}");let o=c.node(n.id),d=c.Vframe.byNode(o);d&&d.invoke("@:{update}",[n]),u.default["@:{save}"]("@:{history#save.props}"+t,500)},"@:{update.image.size}<click>"(e){let{key:t,element:l}=e.params,n=l.props,r=f.default["@:{get.rect.xy}"](n,n.rotate),i=new Image;i.onload=(()=>{n.width=i.width,n.height=i.height;let e=f.default["@:{get.rect.xy}"](n,n.rotate);n.x+=r.x-e.x,n.y+=r.y-e.y,this.render(),c.State.fire("@:{event#stage.select.element.props.update}");let a=c.node(l.id),s=c.Vframe.byNode(a);s&&s.invoke("@:{update}",[l]),u.default["@:{save}"]("@:{history#save.props}"+t,500)}),i.src=n[t]}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,l)=>{let n;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let r={class:"rd-_gallery_mx-style_index_-unselectable rd-_panels_props_index_-props"},i={class:"rd-_panels_props_index_-props-item"},a={class:"rd-_panels_props_index_-props-item-title"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix"),o=e("../../designer/history"),d=e("../../designer/props");t.default=s.default.View.extend({tmpl:(e,t,l,s,o,d,p,g)=>{let c,h,u;try{let f,_,m,x,y,b,w,v,k=[],{i18n:A,ctrl:z,props:j,page:S}=e;_=[],x=[t(0,0,(h=3,c="{{=i18n('@:{lang#props.type}')}}",u="<%=i18n('@:{lang#props.type}')%>",s(A("@:{lang#props.type}"))))],m=[t("span",a,x)],x=[t(0,0,(h=4,c="{{=i18n(ctrl.title)}}",u="<%=i18n(ctrl.title)%>",s(A(z.title))))],m.push(t("span",0,x)),_.push(t("li",i,m)),h=6,c="{{each ctrl.props as p pi}}",u="for(let $q_a_qwmornhjq=ctrl.props,$q_c_hhydjhbf=$q_a_qwmornhjq.length,pi=0;pi<$q_c_hhydjhbf;pi++){let p=$q_a_qwmornhjq[pi];";for(let e=z.props,r=e.length,i=0;i<r;i+=1){let r=e[i];m=[],h=7,c="{{if p.type==props[\\'@:{spliter}\\']}}",u="if(p.type==props['@:{spliter}']){",r.type==j["@:{spliter}"]?(x=n?[n]:[n=t("li",{_:"_",class:"rd-_panels_props_index_-props-item-spliter"})],m.push(...x)):(h=9,c="{{else if !p.ifShow||p.ifShow(page)}}",u="else if(!p.ifShow||p.ifShow(page)){",(!r.ifShow||r.ifShow(S))&&(b=[],w=[t(0,0,(h=11,c="{{=i18n(p.tip)}}",u="<%=i18n(p.tip)%>",s(A(r.tip))))],b.push(t("span",a,w)),h=12,c="{{if p.type==props[\\'@:{number}\\']}}",u="if(p.type==props['@:{number}']){",r.type==j["@:{number}"]?(v="gallery/mx-number/index?value="+(h=13,c="{{#page[p.key]}}",u="<%#page[p.key],'\x1epage.'+(p.key)%>",p(d,S[r.key],"\x1epage."+r.key))+(h=13,c="{{=p.max}}",""),u="<%if(($_temp=p.max)!=null){%>",null!=(f=r.max)&&(v+="&max="+(u="<%=$eu($_temp)%>",o(f)),u="<%}%>"),v+=(h=13,c="{{=p.step}}",""),u="<%if(($_temp=p.step)!=null){%>",null!=(f=r.step)&&(v+="&step="+(u="<%=$eu($_temp)%>",o(f)),u="<%}%>"),v+=(h=13,c="{{=p.fixed}}",""),u="<%if(($_temp=p.fixed)!=null){%>",null!=(f=r.fixed)&&(v+="&fixed="+(u="<%=$eu($_temp)%>",o(f)),u="<%}%>"),v+=(h=13,c="{{=p.min}}",""),u="<%if(($_temp=p.min)!=null){%>",null!=(f=r.min)&&(v+="&min="+(u="<%=$eu($_temp)%>",o(f)),u="<%}%>"),w=[t("div",{$:"page,ctrl",class:"rd-_gallery_mx-style_index_-input rd-_gallery_mx-style_index_-pr rd-_panels_props_index_-ipt","mx5-input":l+"\x1e@:{update.prop}({key:'"+(h=13,c="{{=p.key}}",u="<%=$eq(p.key)%>",g(r.key))+"',refresh:'"+(h=13,c="{{#p.refresh}}",u="<%#p.refresh,'\x1ectrl.props.'+(pi)+'.refresh'%>",p(d,r.refresh,"\x1ectrl.props."+i+".refresh"))+"',write:'"+(h=13,c="{{#p.write}}",u="<%#p.write,'\x1ectrl.props.'+(pi)+'.write'%>",p(d,r.write,"\x1ectrl.props."+i+".write"))+"',use:'value'})","mx5-view":v})],b.push(...w)):(h=14,c="{{else if p.type==props[\\'@:{color}\\']}}",u="else if(p.type==props['@:{color}']){",r.type==j["@:{color}"]?(v="gallery/mx-color/index?clear="+(h=15,c="{{=p.clear}}",u="<%=$eu(p.clear)%>",o(r.clear))+"&color="+(h=15,c="{{#page[p.key]}}",u="<%#page[p.key],'\x1epage.'+(p.key)%>",p(d,S[r.key],"\x1epage."+r.key))+"&align=right"+(h=15,c="{{=p.alpha}}",""),u="<%if(($_temp=p.alpha)!=null){%>",null!=(f=r.alpha)&&(v+="&alpha="+(u="<%=$eu($_temp)%>",o(f)),u="<%}%>"),w=[t("div",{$:"page,ctrl",class:"rd-_panels_props_index_-ipt","mx5-input":l+"\x1e@:{update.prop}({key:'"+(h=15,c="{{=p.key}}",u="<%=$eq(p.key)%>",g(r.key))+"',use:'color'})","mx5-view":v})],b.push(...w)):(h=16,c="{{else if p.type==props[\\'@:{image}\\']}}",u="else if(p.type==props['@:{image}']){",r.type==j["@:{image}"]?(w=[t("div",{class:"rd-_panels_props_index_-ipt","mx5-change":l+"\x1e@:{update.prop}({key:'"+(h=17,c="{{=p.key}}",u="<%=$eq(p.key)%>",g(r.key))+"',use:'src',refresh:'"+(h=17,c="{{#p.refresh}}",u="<%#p.refresh,'\x1ectrl.props.'+(pi)+'.refresh'%>",p(d,r.refresh,"\x1ectrl.props."+i+".refresh"))+"',write:'"+(h=17,c="{{#p.write}}",u="<%#p.write,'\x1ectrl.props.'+(pi)+'.write'%>",p(d,r.write,"\x1ectrl.props."+i+".write"))+"'})","mx5-view":"gallery/mx-picture/index?src="+(h=17,c="{{=page[p.key]}}",u="<%=$eu(page[p.key])%>",o(S[r.key]))})],b.push(...w)):(h=18,c="{{else if p.type==props[\\'@:{dropdown}\\']}}",u="else if(p.type==props['@:{dropdown}']){",r.type==j["@:{dropdown}"]&&(w=[t("div",{$:"ctrl",class:"rd-_panels_props_index_-ipt","mx5-change":l+"\x1e@:{update.prop}({key:'"+(h=19,c="{{=p.key}}",u="<%=$eq(p.key)%>",g(r.key))+"',use:'value',refresh:'"+(h=19,c="{{#p.refresh}}",u="<%#p.refresh,'\x1ectrl.props.'+(pi)+'.refresh'%>",p(d,r.refresh,"\x1ectrl.props."+i+".refresh"))+"',write:'"+(h=19,c="{{#p.write}}",u="<%#p.write,'\x1ectrl.props.'+(pi)+'.write'%>",p(d,r.write,"\x1ectrl.props."+i+".write"))+"'})","mx5-view":"gallery/mx-dropdown/index?selected="+(h=19,c="{{=page[p.key]}}",u="<%=$eu(page[p.key])%>",o(S[r.key]))+"&list="+(h=19,c="{{#p.items}}",u="<%#p.items,'\x1ectrl.props.'+(pi)+'.items'%>",p(d,r.items,"\x1ectrl.props."+i+".items"))+"&textKey=text&valueKey=value"})],b.push(...w))))),y="rd-_panels_props_index_-props-item"+(h=10,c="{{if p.dockTop}}",""),u="<%if(p.dockTop){%>",r.dockTop&&(y+=" rd-_panels_props_index_-dock-top"+(h=10,c="{{/if}}",""),u="<%}%>"),x=[t("li",{class:y},b)],m.push(...x))),_.push(...m)}return k.push(t("ul",r,_)),t(l,0,k)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+c+"\r\n\tat line: "+h,t+="\r\n\ttranslate to: "+u+"\r\n\tat file:panels/props/page.html"}},init(){let e=this.render.bind(this);s.State.on("@:{event#history.shift}",e)},render(){this.digest({props:d.default,ctrl:s.State.get("@:{stage.page.ctrl}"),page:s.State.get("@:{stage.page}")})},"@:{update.prop}<input,change>"(e){let{key:t,use:l,refresh:n,write:r}=e.params,i=s.State.get("@:{stage.page}");i[t]=e[l],r&&r(e[l],i,e),o.default["@:{save}"]("@:{history#save.page.change}",500),s.State.fire("@:{event#stage.page.change}"),n&&this.render()}})}),define("elements/designer",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","../designer/history","../util/transform","../util/converter","../util/bezier"],(e,t,l)=>{let n,r={style:"position:absolute;pointer-events:none;overflow:visible"};Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../gallery/mx-dragdrop/index"),s=e("../gallery/mx-pointer/cursor"),o=e("../designer/history"),d=e("../util/transform"),p=e("../util/converter"),g=e("../util/bezier");i.default.applyStyle("rd-_elements_designer_","\n.rd-_elements_designer_-cross {\nleft:50%;\ntop:50%;\nposition:absolute;\n}\n.rd-_elements_designer_-cross::before {\ncontent:' ';\nwidth:1px;\nheight:5px;\nposition:absolute;\nbackground:red;\nleft:0;\ntop:-2px;\n}\n.rd-_elements_designer_-cross::after {\ncontent:' ';\nwidth:5px;\nheight:1px;\nposition:absolute;\nbackground:red;\nleft:-2px;\ntop:0;\n}\n.rd-_elements_designer_-normal {\nborder:dotted 1px #ddd6;\n-webkit-user-select:none;\n-moz-user-select:none;\n-ms-user-select:none;\nuser-select:none;\n}\n.rd-_elements_designer_-focus-line {\nborder:solid 1px #FA742B;\n}\n.rd-_elements_designer_-locked-line {\nborder:solid 1px #999;\n}\n.rd-_elements_designer_-svg-ctrl {\nfill:#fff;\nstroke:#FA742B;\npointer-events:all;\nstroke-width:1px;\ncursor:pointer;\ntransition:stroke-width 0.25s;\n}\n.rd-_elements_designer_-svg-ctrl:hover {\nstroke-width:2px;\n}\n.rd-_elements_designer_-svg-path {\nfill:none;\nstroke:#FA742B;\nstroke-width:1px;\n}\n.rd-_elements_designer_-right {\nborder-right:solid 3px #FA742B;\nright:-2px;\n}\n.rd-_elements_designer_-bottom {\nborder-bottom:solid 3px #FA742B;\nbottom:-2px;\n}\n.rd-_elements_designer_-right-bottom {\nborder-right:solid 3px #FA742B;\nborder-bottom:solid 3px #FA742B;\nright:-2px;\nbottom:-2px;\n}\n.rd-_elements_designer_-rotate {\n  cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABvUExURUdwTP///9XV1R0dHf///3Nzc////////////////1ZWVq+vr/T09PX19QQEBP///////8XFxf///////////wYGBv///+jo6P///4aGhqioqMzMzP///2BgYP///////////zExMf///wAAAP///xLps0AAAAAjdFJOUwCxxOdixRDmzSDMv8/Z+tz5wWpXWPk3zALCv8KnyXZVMNuNPnv3CwAAAJ1JREFUKM/NkckOwyAMRFkDBMhC9qWr+//fWCIV1WlzrjoXS36yxmMT8hdqqKoUvRAjMtw22kvecem1GjTuK1vApmI+wQMBbQFy5li+QQRaX4AtRX+vbntAJeRl9HTTx4TiwESs61DXNUPmVQeujzVrQwh43TTxpeRBslVfMUhbiXKWyiAwvnIsMcdyJkfJYdpNvG/ltDm+bjP+8KFP8ggL+zQLGxwAAAAASUVORK5CYII=') 14 14, pointer;\ntop:-3px;\nright:-3px;\nwidth:6px;\nheight:6px;\nborder-radius:50%;\nbackground:#FA742B;\n}\n");const c={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3};let h={};i.State.on("@:{event#stage.select.elements.change}",()=>{for(let e in h){let t=i.Vframe.byId(e);t&&(t.invoke("@:{check.status}"),t.invoke("render"))}});let u=i.default.View.extend({tmpl:(e,t,l,i,a,s,o)=>{let d,p,g;try{let a,c,h,u,f,_,m,x,y,b=[],{element:w,view:v,onlyMove:k,fullscreen:A,selected:z,count:j,i18n:S}=e;p=1,d="{{set {props,ctrl,type}=element}}",g="<%let props=element.props,ctrl=element.ctrl,type=element.type;%>";let $=w.props,q=w.ctrl,M=w.type;b.push(t("div",{$:"element,onlyMove",class:"rd-_gallery_mx-style_index_-unselectable","mx5-view":(p=2,d="{{=view}}",g="<%=view%>",i(v)+"?props="+(p=2,d="{{#props}}",g="<%#props,'\x1eelement.props'%>",o(s,$,"\x1eelement.props"))+"&onlyMove="+(p=2,d="{{#onlyMove}}",g="<%#onlyMove,'\x1eonlyMove'%>",o(s,k,"\x1eonlyMove"))),id:"entity_"+(p=2,d="{{=$viewId}}","")+l})),p=3,d="{{set r=props.rotate%360}}",g="<%let r=props.rotate%360;%>";let R=$.rotate%360;if(u=[],p=5,d="{{if !fullscreen&&!props.locked}}",g="if(!fullscreen&&!props.locked){",!A&&!$.locked){if(f=[],p=6,d="{{if selected}}",g="if(selected){",z){if(_=[],n?_.push(n):_.push(n=t("div",{_:"_",class:"rd-_elements_designer_-cross"})),p=8,d="{{if count==1&&ctrl.modifier&&ctrl.modifier.rotate}}",g="if(count==1&&ctrl.modifier&&ctrl.modifier.rotate){",1==j&&q.modifier&&q.modifier.rotate){if((m=[]).push(t("div",{class:"rd-_elements_designer_-rotate rd-_gallery_mx-style_index_-pa","mx5-mousedown":l+"\x1e@:{start.rotate}()",title:(p=9,d="{{=i18n('@:{lang#press.drag.rotate.element}')}}",g="<%=i18n('@:{lang#press.drag.rotate.element}')%>",i(S("@:{lang#press.drag.rotate.element}")))})),p=10,d="{{if ctrl.modifier}}",g="if(ctrl.modifier){",q.modifier){x=[],p=11,d="{{set height=(Math.min(20,props.height-3)-4)}}",a="",g="<%let height=(Math.min(20,props.height-3)-4);%>";let e=Math.min(20,$.height-3)-4;a+=" "+(p=12,d="{{set width=(Math.min(20,props.width)-4)}}",""),g="<%let width=(Math.min(20,props.width)-4);%>";let n=Math.min(20,$.width)-4;a+=" "+(p=13,d="{{set size=Math.max(Math.min(width,height)-2,0)}}",""),g="<%let size=Math.max(Math.min(width,height)-2,0);%>";let r=Math.max(Math.min(n,e)-2,0);a+=" "+(p=14,d="{{width=Math.min(width,props.width-size-6)}}",""),g="<%width=Math.min(width,props.width-size-6)%>",n=Math.min(n,$.width-r-6),a+=" "+(p=15,d="{{height=Math.min(height,props.height-size-6-3)}}",""),g="<%height=Math.min(height,props.height-size-6-3)%>",e=Math.min(e,$.height-r-6-3),a+=" "+(p=16,d="{{set top=(props.height-height-size+3)/2}}",""),g="<%let top=(props.height-height-size+3)/2;%>";let s=($.height-e-r+3)/2;if(p=17,d="{{if ctrl.modifier.width}}",g="if(ctrl.modifier.width){",q.modifier.width&&(c="height:"+(p=18,d="{{=Math.max(height,0)}}",g="<%=Math.max(height,0)%>",i(Math.max(e,0)))+"px;top:"+(p=18,d="{{=top}}",g="<%=top%>",i(s))+"px;cursor:"+(p=18,d="{{if r<=22.5||r>337.5||(r>157.5&&r<=202.5)}}",""),g="<%if(r<=22.5||r>337.5||(r>157.5&&r<=202.5)){%>",R<=22.5||R>337.5||R>157.5&&R<=202.5?(c+="ew"+(p=18,d="{{else if r<=67.5||(r>202.5&&r<=247.5)}}",""),g="<%}else if(r<=67.5||(r>202.5&&r<=247.5)){%>"):R<=67.5||R>202.5&&R<=247.5?(c+="nwse"+(p=18,d="{{else if r<=112.5||(r>247.5&&r<=292.5)}}",""),g="<%}else if(r<=112.5||(r>247.5&&r<=292.5)){%>"):R<=112.5||R>247.5&&R<=292.5?(c+="ns"+(p=18,d="{{else if r<=157.5||(r>292.5&&r<=337.5)}}",""),g="<%}else if(r<=157.5||(r>292.5&&r<=337.5)){%>"):(R<=157.5||R>292.5&&R<=337.5)&&(c+="nesw"+(p=18,d="{{/if}}",""),g="<%}%>"),c+="-resize",y=[t("div",{class:"rd-_elements_designer_-right rd-_gallery_mx-style_index_-pa",title:(p=18,d="{{=i18n('@:{lang#press.drag.width.element}')}}",g="<%=i18n('@:{lang#press.drag.width.element}')%>",i(S("@:{lang#press.drag.width.element}"))),"mx5-mousedown":l+"\x1e@:{start.resize}({key:'rm'})",style:c})],x.push(...y)),p=21,d="{{if ctrl.modifier.height}}",g="if(ctrl.modifier.height){",q.modifier.height){p=22,d="{{set left=(props.width-width-size)/2}}",g="<%let left=(props.width-width-size)/2;%>";let e=($.width-n-r)/2;c="width:"+(p=23,d="{{=Math.max(width,0)}}",g="<%=Math.max(width,0)%>",i(Math.max(n,0)))+"px;left:"+(p=23,d="{{=left}}",g="<%=left%>",i(e))+"px;cursor:"+(p=23,d="{{if r<=22.5||r>337.5||(r>157.5&&r<=202.5)}}",""),g="<%if(r<=22.5||r>337.5||(r>157.5&&r<=202.5)){%>",R<=22.5||R>337.5||R>157.5&&R<=202.5?(c+="ns"+(p=23,d="{{else if r<=67.5||(r>202.5&&r<=247.5)}}",""),g="<%}else if(r<=67.5||(r>202.5&&r<=247.5)){%>"):R<=67.5||R>202.5&&R<=247.5?(c+="nesw"+(p=23,d="{{else if r<=112.5||(r>247.5&&r<=292.5)}}",""),g="<%}else if(r<=112.5||(r>247.5&&r<=292.5)){%>"):R<=112.5||R>247.5&&R<=292.5?(c+="ew"+(p=23,d="{{else if r<=157.5||(r>292.5&&r<=337.5)}}",""),g="<%}else if(r<=157.5||(r>292.5&&r<=337.5)){%>"):(R<=157.5||R>292.5&&R<=337.5)&&(c+="nwse"+(p=23,d="{{/if}}",""),g="<%}%>"),c+="-resize",y=[t("div",{class:"rd-_elements_designer_-bottom rd-_gallery_mx-style_index_-pa",title:(p=23,d="{{=i18n('@:{lang#press.drag.height.element}')}}",g="<%=i18n('@:{lang#press.drag.height.element}')%>",i(S("@:{lang#press.drag.height.element}"))),"mx5-mousedown":l+"\x1e@:{start.resize}({key:'mb'})",style:c})],x.push(...y)}p=26,d="{{if ctrl.modifier.width&&ctrl.modifier.height}}",g="if(ctrl.modifier.width&&ctrl.modifier.height){",q.modifier.width&&q.modifier.height&&(p=27,d="{{if size==0}}",c="",g="<%if(size==0){%>",0==r&&(c+="display:none;"+(p=27,d="{{/if}}",""),g="<%}%>"),c+="width:"+(p=27,d="{{=size}}",g="<%=size%>",i(r))+"px;height:"+(p=27,d="{{=size}}",g="<%=size%>",i(r))+"px;cursor:"+(p=27,d="{{if r<=22.5||r>337.5||(r>157.5&&r<=202.5)}}",""),g="<%if(r<=22.5||r>337.5||(r>157.5&&r<=202.5)){%>",R<=22.5||R>337.5||R>157.5&&R<=202.5?(c+="nwse"+(p=27,d="{{else if r<=67.5||(r>202.5&&r<=247.5)}}",""),g="<%}else if(r<=67.5||(r>202.5&&r<=247.5)){%>"):R<=67.5||R>202.5&&R<=247.5?(c+="ns"+(p=27,d="{{else if r<=112.5||(r>247.5&&r<=292.5)}}",""),g="<%}else if(r<=112.5||(r>247.5&&r<=292.5)){%>"):R<=112.5||R>247.5&&R<=292.5?(c+="nesw"+(p=27,d="{{else if r<=157.5||(r>292.5&&r<=337.5)}}",""),g="<%}else if(r<=157.5||(r>292.5&&r<=337.5)){%>"):(R<=157.5||R>292.5&&R<=337.5)&&(c+="ew"+(p=27,d="{{/if}}",""),g="<%}%>"),c+="-resize",y=[t("div",{class:"rd-_elements_designer_-right-bottom rd-_gallery_mx-style_index_-pa",title:(p=27,d="{{=i18n('@:{lang#press.drag.width.height.element}')}}",g="<%=i18n('@:{lang#press.drag.width.height.element}')%>",i(S("@:{lang#press.drag.width.height.element}"))),"mx5-mousedown":l+"\x1e@:{start.resize}({key:'rb'})",style:c})],x.push(...y)),m.push(...x)}_.push(...m)}f.push(..._)}u.push(...f)}return c="left:"+(p=4,d="{{=props.x}}",g="<%=props.x%>",i($.x))+"px;top:"+(p=4,d="{{=props.y}}",g="<%=props.y%>",i($.y))+"px;width:"+(p=4,d="{{=props.width}}",g="<%=props.width%>",i($.width))+"px;height:"+(p=4,d="{{=props.height}}",g="<%=props.height%>",i($.height))+"px;"+(p=4,d="{{if r}}",""),g="<%if(r){%>",R&&(c+="transform:rotate("+(p=4,d="{{=r}}",g="<%=r%>",i(R))+"deg);"+(p=4,d="{{/if}}",""),g="<%}%>"),h="rd-_gallery_mx-style_index_-pa rd-_gallery_mx-style_index_-unselectable"+(p=4,d="{{if !fullscreen}}",""),g="<%if(!fullscreen){%>",A||(h+=" rd-_elements_designer_-normal"+(p=4,d="{{/if}}",""),g="<%}%>"),h+=(p=4,d="{{if selected&&!fullscreen&&(type!='bezier'||count>1)}}",""),g="<%if(selected&&!fullscreen&&(type!='bezier'||count>1)){%>",z&&!A&&("bezier"!=M||j>1)&&(h+=" "+(p=4,d="{{if props.locked}}",""),g="<%if(props.locked){%>",$.locked?(h+="rd-_elements_designer_-locked-line"+(p=4,d="{{else}}",""),g="<%}else{%>"):(h+="rd-_elements_designer_-focus-line"+(p=4,d="{{/if}}",""),g="<%}%>"),h+=(p=4,d="{{/if}}",""),g="<%}%>"),b.push(t("div",{id:"mask_"+(p=4,d="{{=element.id}}",g="<%=element.id%>",i(w.id)),style:c,class:h},u)),p=36,d="{{if type==\\'bezier\\'&&selected&&!fullscreen&&count==1}}",g="if(type=='bezier'&&selected&&!fullscreen&&count==1){","bezier"==M&&z&&!A&&1==j&&(f=[t("path",{d:"M"+(p=38,d="{{=props.startX}}",g="<%=props.startX%>",i($.startX))+" "+(p=38,d="{{=props.startY}}",g="<%=props.startY%>",i($.startY))+" L"+(p=38,d="{{=props.ctrl1X}}",g="<%=props.ctrl1X%>",i($.ctrl1X))+" "+(p=38,d="{{=props.ctrl1Y}}",g="<%=props.ctrl1Y%>",i($.ctrl1Y))+" M"+(p=38,d="{{=props.ctrl2X}}",g="<%=props.ctrl2X%>",i($.ctrl2X))+" "+(p=38,d="{{=props.ctrl2Y}}",g="<%=props.ctrl2Y%>",i($.ctrl2Y))+" L"+(p=38,d="{{=props.endX}}",g="<%=props.endX%>",i($.endX))+" "+(p=38,d="{{=props.endY}}",g="<%=props.endY%>",i($.endY)),class:"rd-_elements_designer_-svg-path"},0,0,1),t("circle",{"mx5-mousedown":l+"\x1e@:{start.resize.svg}({key:'start'})",r:"4",cx:(p=39,d="{{=props.startX}}",g="<%=props.startX%>",i($.startX)),cy:(p=39,d="{{=props.startY}}",g="<%=props.startY%>",i($.startY)),class:"rd-_elements_designer_-svg-ctrl"},0,0,1),t("circle",{"mx5-mousedown":l+"\x1e@:{drag.svg.ctrl}({key:'ctrl1'})",r:"4",cx:(p=40,d="{{=props.ctrl1X}}",g="<%=props.ctrl1X%>",i($.ctrl1X)),cy:(p=40,d="{{=props.ctrl1Y}}",g="<%=props.ctrl1Y%>",i($.ctrl1Y)),class:"rd-_elements_designer_-svg-ctrl"},0,0,1),t("circle",{"mx5-mousedown":l+"\x1e@:{start.resize.svg}({key:'end'})",r:"4",cx:(p=41,d="{{=props.endX}}",g="<%=props.endX%>",i($.endX)),cy:(p=41,d="{{=props.endY}}",g="<%=props.endY%>",i($.endY)),class:"rd-_elements_designer_-svg-ctrl"},0,0,1),t("circle",{"mx5-mousedown":l+"\x1e@:{drag.svg.ctrl}({key:'ctrl2'})",r:"4",cx:(p=42,d="{{=props.ctrl2X}}",g="<%=props.ctrl2X%>",i($.ctrl2X)),cy:(p=42,d="{{=props.ctrl2Y}}",g="<%=props.ctrl2Y%>",i($.ctrl2Y)),class:"rd-_elements_designer_-svg-ctrl"},0,0,1)],u=[t("svg",r,f)],b.push(...u)),t(l,0,b)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+d+"\r\n\tat line: "+p,t+="\r\n\ttranslate to: "+g+"\r\n\tat file:elements/designer.html"}},ctor(){h[this.id]=1,this.on("destroy",()=>{delete h[this.id]})},"@:{check.status}"(){let e=i.State.get("@:{stage.select.elements.map}"),t=i.State.get("@:{stage.select.elements}").length,l=this.get().element.id;this.set({selected:i.has(e,l),count:t})},assign(e){this.set(e),this["@:{check.status}"]()},render(){this.digest()},"@:{update}"(e){this.digest({element:e,onlyMove:!1})},"@:{start.rotate}<mousedown>"(e){e.stopPropagation();let t=this.get("element"),l=t.props;i.State.fire("@:{event#stage.toggle.scroll}",{show:1});let n=l.x+l.width/2,r=l.y+l.height/2,a=p.default["@:{real.to.stage.coord}"]({x:e.pageX,y:e.pageY}),d=l.rotate,g=Math.atan2(a.y-r,a.x-n)-d*Math.PI/180,c=!1;this["@:{drag.drop}"](e,o=>{c||s.default["@:{show}"](e.eventTarget),c=!0,a=p.default["@:{real.to.stage.coord}"]({x:o.pageX,y:o.pageY});let d=Math.atan2(a.y-r,a.x-n);d=180*(d-g)/Math.PI,l.rotate=(360+(0|d))%360,this.digest({element:t,onlyMove:!0}),i.State.fire("@:{event#stage.select.element.props.change}")},()=>{s.default["@:{hide}"](),c&&o.default["@:{save}"](),i.State.fire("@:{event#stage.toggle.scroll}")})},"@:{start.resize}<mousedown>"(e){if(e.button)return;e.stopPropagation();let t=this,l=t.get("element"),{props:n,ctrl:r}=l;i.State.fire("@:{event#stage.toggle.scroll}",{show:1});let a=n.rotate||0,{key:p}=e.params;a=(a+360)%360,0==n.width&&(n.width=.01),0==n.height&&(n.height=.01);let g=n.width,h=n.height,u=n.x,f=n.y,_=0,m=0,x=Number.MAX_VALUE,y=Number.MAX_VALUE;for(let e of r.props)"width"==e.key?(i.default.has(e,"max")&&(x=e.max),i.default.has(e,"min")&&(_=e.min)):"height"==e.key&&(i.default.has(e,"max")&&(y=e.max),i.default.has(e,"min")&&(m=e.min));let b=d.default["@:{rotate.rect}"](n,a),w=d.default["@:{get.point.and.opposite}"](b.point,p),{opposite:v,current:k}=w,A=v.index,z=v.point,j=k.point,S=z.x,$=z.y,q=Math.abs(j.x-S),M=Math.abs(j.y-$),R={x:u,y:f,rotate:a,width:g,height:h},B=e.pageX,H=e.pageY,I=!1;t["@:{drag.drop}"](e,r=>{I||s.default["@:{show}"](e.eventTarget);let o={x:1,y:1};I=!0;let p=q>M,g=1,h=r.pageX-B,u=r.pageY-H;0==A||7==A?p&&a>90&&a<270?h=-h:!p&&a>180&&a<360&&(u=-u):0!=A&&1!=A||(p&&a>45&&a<135?h=-h:!p&&a>90&&a<270&&(u=-u)),(g=p?(h+q)/q:(u+M)/M)<0&&(g=0);let f=c[A];1===f?o.x=o.y=g:2===f?o.y=g:3===f&&(o.x=g);let w=d.default["@:{get.new.rect}"](R,o,b,A),v=w.width,k=w.height;v<_?v=_:v>x&&(v=x),k<m?k=m:k>y&&(k=y),v==n.width&&k==n.height||(n.x=w.left,n.y=w.top,n.width=v,n.height=k,t.digest({element:l,onlyMove:!1}),i.State.fire("@:{event#stage.select.element.props.change}"))},()=>{I&&(o.default["@:{save}"](),s.default["@:{hide}"]()),i.State.fire("@:{event#stage.toggle.scroll}")})},"@:{drag.svg.ctrl}<mousedown>"(e){e.stopPropagation();let t=this.get("element"),l=t.props;i.State.fire("@:{event#stage.toggle.scroll}",{show:1});let n=!1,r=e.params.key,a=l[`${r}X`],d=l[`${r}Y`];this["@:{drag.drop}"](e,o=>{n||s.default["@:{show}"](e.eventTarget),n=!0;let p=o.pageX-e.pageX,c=o.pageY-e.pageY;l[`${r}X`]=a+p,l[`${r}Y`]=d+c,g.default(l),this.digest({element:t,onlyMove:!0}),i.State.fire("@:{event#stage.select.element.props.change}")},()=>{s.default["@:{hide}"](),n&&o.default["@:{save}"](),i.State.fire("@:{event#stage.toggle.scroll}")})},"@:{start.resize.svg}<mousedown>"(e){e.stopPropagation();let t=this.get("element"),l=t.props,n=e.params.key,r=l[`${n}X`],a=l[`${n}Y`];i.State.fire("@:{event#stage.toggle.scroll}",{show:1});let d=!1;this["@:{drag.drop}"](e,o=>{d||s.default["@:{show}"](e.eventTarget),d=!0;let p=o.pageX-e.pageX,c=o.pageY-e.pageY;l[`${n}X`]=r+p,l[`${n}Y`]=a+c,g.default(l),this.digest({element:t,onlyMove:!0}),i.State.fire("@:{event#stage.select.element.props.change}")},()=>{s.default["@:{hide}"](),d&&o.default["@:{save}"](),i.State.fire("@:{event#stage.toggle.scroll}")})}});t.default=u.merge(a.default)}),define("elements/index",["magix","./line/designer","./bezier/designer","./rect/designer","./circle/designer","./text/designer","./image/designer","./repeat/designer","./page/designer","./chart-line/designer","./chart-meter/designer","./chart-bar/designer","./chart-pie/designer","./table/designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("./line/designer"),i=e("./bezier/designer"),a=e("./rect/designer"),s=e("./circle/designer"),o=e("./text/designer"),d=e("./image/designer"),p=e("./repeat/designer"),g=e("./page/designer"),c=e("./chart-line/designer"),h=e("./chart-meter/designer"),u=e("./chart-bar/designer"),f=e("./chart-pie/designer"),_=e("./table/designer");let m=[r.default,i.default,a.default,s.default,o.default,d.default,p.default,c.default,h.default,u.default,f.default,_.default],x=n.toMap(m,"type"),y=[r.default,i.default,a.default,s.default,o.default,d.default,p.default,_.default,{spliter:!0},{icon:"&#xe688;",title:"\u56fe\u8868",subs:[c.default,h.default,u.default,f.default]}];t.default={"@:{element.list}":()=>y,"@:{get.page}":()=>g.default,"@:{by.json}"(e){let t={},l=e=>{for(let n of e){let e=x[n.type];if(n.ctrl=e,t[n.id]=n,"layout"==n.type)for(let e of n.props.columns)l(e.elements)}};return l(e),{elements:e,map:t}}}}),define("elements/bezier/designer",["../../designer/props","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../util/converter"),i=e("../designer");t.default=i.default.extend({ctor(){this.set({view:"elements/bezier/index"})}}).static({type:"bezier",title:"@:{lang#elements.bezier}",icon:"&#xe71b;",scales:["x","y","width","height","startX","startY","endX","endY","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","linewidth"],moved:[{key:"x",use:"x"},{key:"y",use:"y"},{key:"ctrl1X",use:"x"},{key:"ctrl1Y",use:"y"},{key:"ctrl2X",use:"x"},{key:"ctrl2Y",use:"y"},{key:"startX",use:"x"},{key:"startY",use:"y"},{key:"endX",use:"x"},{key:"endY",use:"y"}],getProps:(e,t)=>({alpha:1,x:e,y:t,startX:e,startY:t,endX:e+300,endY:t+100,ctrl1X:e+50,ctrl1Y:t+50,ctrl2X:e+250,ctrl2Y:t+50,width:300,height:100,linewidth:1,color:"#000000",locked:!1}),props:[{tip:"@:{lang#props.bezier.start.x}",key:"startX",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{tip:"@:{lang#props.bezier.start.y}",key:"startY",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{tip:"@:{lang#props.bezier.ctrl1.x}",key:"ctrl1X",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{tip:"@:{lang#props.bezier.ctrl1.y}",key:"ctrl1Y",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{tip:"@:{lang#props.bezier.ctrl2.x}",key:"ctrl2X",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{tip:"@:{lang#props.bezier.ctrl2.y}",key:"ctrl2Y",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{tip:"@:{lang#props.bezier.end.x}",key:"endX",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{tip:"@:{lang#props.bezier.end.y}",key:"endY",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],bezier:1,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.width}",key:"linewidth",type:n.default["@:{number}"],read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],min:0,max:20,json:1},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.color}",key:"color",type:n.default["@:{color}"],json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/bezier/index",["magix"],(e,t,l)=>{let n={style:"position:absolute;pointer-events:none;overflow:visible"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d=[],{props:p}=e;return o=[t("path",{d:"M"+(a=2,i="{{=props.startX}}",s="<%=props.startX%>",r(p.startX))+","+(a=2,i="{{=props.startY}}",s="<%=props.startY%>",r(p.startY))+" C"+(a=2,i="{{=props.ctrl1X}}",s="<%=props.ctrl1X%>",r(p.ctrl1X))+" "+(a=2,i="{{=props.ctrl1Y}}",s="<%=props.ctrl1Y%>",r(p.ctrl1Y))+" "+(a=2,i="{{=props.ctrl2X}}",s="<%=props.ctrl2X%>",r(p.ctrl2X))+" "+(a=2,i="{{=props.ctrl2Y}}",s="<%=props.ctrl2Y%>",r(p.ctrl2Y))+" "+(a=2,i="{{=props.endX}}",s="<%=props.endX%>",r(p.endX))+","+(a=2,i="{{=props.endY}}",s="<%=props.endY%>",r(p.endY)),style:"fill:none;stroke:"+(a=2,i="{{=props.color}}",s="<%=props.color%>",r(p.color))+";stroke-width:"+(a=2,i="{{=props.linewidth}}",s="<%=props.linewidth%>",r(p.linewidth))+";opacity:"+(a=2,i="{{=props.alpha}}",s="<%=props.alpha%>",r(p.alpha))},0,0,1)],d.push(t("svg",n,o)),t(l,0,d)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:elements/bezier/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/chart-bar/designer",["../../designer/props","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../util/converter"),i=e("../designer");t.default=i.default.extend({ctor(){this.set({view:"elements/chart-bar/index"})}}).static({type:"chart-bar",title:"@:{lang#elements.chart-bar}",icon:"&#xe603;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.background}",type:n.default["@:{color}"],key:"background",alpha:!0,clear:!0,json:1},{tip:"@:{lang#props.chart.title}",key:"title",type:n.default["@:{text.input}"],json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/chart-bar/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o=[],{props:d}=e;return s="position:absolute;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(d.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(d.y))+"px;height:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(d.height))+"px;opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(d.alpha))+";width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(d.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(d.rotate))+"deg);"+(i=1,r="{{if props.background}}",""),a="<%if(props.background){%>",d.background&&(s+="background:"+(i=1,r="{{=props.background}}",a="<%=props.background%>",n(d.background))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),o.push(t("div",{id:"chart_"+(i=1,r="{{=$viewId}}","")+l,style:s})),t(l,0,o)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/chart-bar/index.html"}},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;let e=this.get("props");this["@:{chart.entity}"]||(this["@:{chart.entity}"]=echarts.init(n.node("chart_"+this.id)),this.on("destroy",()=>{this["@:{chart.entity}"].dispose()}));let t=this["@:{chart.entity}"];t.setOption({title:{text:e.title},tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"bar"},{data:[90,200,600,100,50],type:"bar"}]},!0),t.resize()}})}),define("elements/chart-line/designer",["../../designer/props","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../util/converter"),i=e("../designer");t.default=i.default.extend({ctor(){this.set({view:"elements/chart-line/index"})}}).static({type:"chart-line",title:"@:{lang#elements.chart-line}",icon:"&#xe64b;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.background}",type:n.default["@:{color}"],key:"background",alpha:!0,clear:!0,json:1},{tip:"@:{lang#props.chart.title}",key:"title",type:n.default["@:{text.input}"],json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/chart-line/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o=[],{props:d}=e;return s="position:absolute;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(d.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(d.y))+"px;height:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(d.height))+"px;opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(d.alpha))+";width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(d.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(d.rotate))+"deg);"+(i=1,r="{{if props.background}}",""),a="<%if(props.background){%>",d.background&&(s+="background:"+(i=1,r="{{=props.background}}",a="<%=props.background%>",n(d.background))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),o.push(t("div",{id:"chart_"+(i=1,r="{{=$viewId}}","")+l,style:s})),t(l,0,o)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/chart-line/index.html"}},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;let e=this.get("props");this["@:{chart.entity}"]||(this["@:{chart.entity}"]=echarts.init(n.node("chart_"+this.id)),this.on("destroy",()=>{this["@:{chart.entity}"].dispose()}));let t=this["@:{chart.entity}"];t.setOption({title:{text:e.title},tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"line"},{data:[90,200,600,100,50],type:"line"}]},!0),t.resize()}})}),define("elements/chart-meter/designer",["../../designer/props","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../util/converter"),i=e("../designer");t.default=i.default.extend({ctor(){this.set({view:"elements/chart-meter/index"})}}).static({type:"chart-meter",title:"@:{lang#elements.chart-meter}",icon:"&#xeb94;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,rotate:0,locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.background}",type:n.default["@:{color}"],key:"background",alpha:!0,clear:!0,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/chart-meter/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o=[],{props:d}=e;return s="position:absolute;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(d.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(d.y))+"px;height:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(d.height))+"px;opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(d.alpha))+";width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(d.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(d.rotate))+"deg);"+(i=1,r="{{if props.background}}",""),a="<%if(props.background){%>",d.background&&(s+="background:"+(i=1,r="{{=props.background}}",a="<%=props.background%>",n(d.background))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),o.push(t("div",{id:"chart_"+(i=1,r="{{=$viewId}}","")+l,style:s})),t(l,0,o)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/chart-meter/index.html"}},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;this.get("props");this["@:{chart.entity}"]||(this["@:{chart.entity}"]=echarts.init(n.node("chart_"+this.id)),this.on("destroy",()=>{this["@:{chart.entity}"].dispose()}));let e=this["@:{chart.entity}"];e.setOption({series:[{type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"\u5b8c\u6210\u7387"}]}]},!0),e.resize()}})}),define("elements/chart-pie/designer",["../../designer/props","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../util/converter"),i=e("../designer");t.default=i.default.extend({ctor(){this.set({view:"elements/chart-pie/index"})}}).static({type:"chart-pie",title:"@:{lang#elements.chart-pie}",icon:"&#xe6d4;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.background}",type:n.default["@:{color}"],key:"background",alpha:!0,clear:!0,json:1},{tip:"@:{lang#props.chart.title}",key:"title",type:n.default["@:{text.input}"],json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/chart-pie/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o=[],{props:d}=e;return s="position:absolute;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(d.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(d.y))+"px;height:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(d.height))+"px;opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(d.alpha))+";width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(d.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(d.rotate))+"deg);"+(i=1,r="{{if props.background}}",""),a="<%if(props.background){%>",d.background&&(s+="background:"+(i=1,r="{{=props.background}}",a="<%=props.background%>",n(d.background))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),o.push(t("div",{id:"chart_"+(i=1,r="{{=$viewId}}","")+l,style:s})),t(l,0,o)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/chart-pie/index.html"}},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;let e=this.get("props");this["@:{chart.entity}"]||(this["@:{chart.entity}"]=echarts.init(n.node("chart_"+this.id)),this.on("destroy",()=>{this["@:{chart.entity}"].dispose()}));let t=this["@:{chart.entity}"];t.setOption({title:{text:e.title,x:"center"},series:[{data:[{value:120,name:"pie1"},{vaue:300,name:"pie2"},{value:400,name:"pie3"},{value:220,name:"pie4"},{value:40,name:"pie5"}],type:"pie",name:"test"}]},!0),t.resize()}})}),define("elements/circle/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../i18n/index"),i=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/circle/index"})}}).static({type:"circle",title:"@:{lang#elements.circle}",icon:"&#xe654;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({fillcolor:"",alpha:1,width:150,height:150,x:e,y:t,rotate:0,borderwidth:1,bordertype:"solid",bordercolor:"#000000",locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.border.width}",key:"borderwidth",type:n.default["@:{number}"],min:0,json:1},{tip:"@:{lang#props.border.type}",key:"bordertype",type:n.default["@:{dropdown}"],items:[{text:r.default("@:{lang#props.border.type.solid}"),value:"solid"},{text:r.default("@:{lang#props.border.type.dotted}"),value:"dotted"},{text:r.default("@:{lang#props.border.type.dashed}"),value:"dashed"}],json:1},{tip:"@:{lang#props.bordercolor}",key:"bordercolor",type:n.default["@:{color}"],json:1},{tip:"@:{lang#props.fillcolor}",key:"fillcolor",clear:!0,alpha:!0,type:n.default["@:{color}"],json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/circle/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o=[],{props:d}=e;return s="position:absolute;border-radius:50%;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(d.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(d.y))+"px;"+(i=1,r="{{if props.borderwidth}}",""),a="<%if(props.borderwidth){%>",d.borderwidth&&(s+="border:"+(i=1,r="{{=props.borderwidth}}",a="<%=props.borderwidth%>",n(d.borderwidth))+"px "+(i=1,r="{{=props.bordertype}}",a="<%=props.bordertype%>",n(d.bordertype))+" "+(i=1,r="{{=props.bordercolor}}",a="<%=props.bordercolor%>",n(d.bordercolor))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),s+=(i=1,r="{{if props.fillcolor}}",""),a="<%if(props.fillcolor){%>",d.fillcolor&&(s+="background:"+(i=1,r="{{=props.fillcolor}}",a="<%=props.fillcolor%>",n(d.fillcolor))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),s+="height:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(d.height))+"px;opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(d.alpha))+";width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(d.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(d.rotate))+"deg)",o.push(t("div",{style:s})),t(l,0,o)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/circle/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/image/designer",["../../designer/props","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../util/converter"),i=e("../designer");t.default=i.default.extend({ctor(){this.set({view:"elements/image/index"})}}).static({type:"image",title:"@:{lang#elements.image}",icon:"&#xe650;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({height:100,alpha:1,x:e,y:t,rotate:0,width:200,image:"",locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:r.default["@:{to.show.value}"],write:r.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.image}",key:"image",refresh:!0,type:n.default["@:{image}"],write:(e,t,l)=>(e||(l.width=200,l.height=100),t.width=l.width,t.height=l.height,e),json:1},{tip:"@:{lang#props.image.reset}",type:n.default["@:{image.reset}"],key:"image",ifShow:e=>e.image,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/image/index",["magix"],(e,t,l)=>{let n={style:"display:flex;align-items:center;justify-content:center;height:100%"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g=[],{props:c,i18n:h}=e;return o=[],a=2,i="{{if props.image}}",s="if(props.image){",c.image?(d=[t("img",{style:"width:100%;height:100%",src:(a=3,i="{{=props.image}}",s="<%=props.image%>",r(c.image))},0,0,1)],o.push(...d)):(p=[t(0,0,(a=5,i="{{=i18n('@:{lang#elements.image.select.image}')}}",s="<%=i18n('@:{lang#elements.image.select.image}')%>",r(h("@:{lang#elements.image.select.image}"))))],d=[t("div",n,p)],o.push(...d)),g.push(t("div",{style:"position:absolute;left:"+(a=1,i="{{=props.x}}",s="<%=props.x%>",r(c.x))+"px;top:"+(a=1,i="{{=props.y}}",s="<%=props.y%>",r(c.y))+"px;height:"+(a=1,i="{{=props.height}}",s="<%=props.height%>",r(c.height))+"px;opacity:"+(a=1,i="{{=props.alpha}}",s="<%=props.alpha%>",r(c.alpha))+";width:"+(a=1,i="{{=props.width}}",s="<%=props.width%>",r(c.width))+"px;transform:rotate("+(a=1,i="{{=props.rotate}}",s="<%=props.rotate%>",r(c.rotate))+"deg)"},o)),t(l,0,g)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:elements/image/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/line/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../i18n/index"),i=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/line/index"})}}).static({type:"line",title:"@:{lang#elements.line}",icon:"&#xe601;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({height:1,alpha:1,x:e,y:t,rotate:0,width:200,linetype:"solid",color:"#000000",locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.long}",type:n.default["@:{number}"],key:"width",min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,max:100,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.line.type}",key:"linetype",type:n.default["@:{dropdown}"],items:[{text:r.default("@:{lang#props.border.type.solid}"),value:"solid"},{text:r.default("@:{lang#props.border.type.dotted}"),value:"dotted"},{text:r.default("@:{lang#props.border.type.dashed}"),value:"dashed"}],json:1},{tip:"@:{lang#props.color}",key:"color",type:n.default["@:{color}"],json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/line/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s=[],{props:o}=e;return s.push(t("div",{style:"position:absolute;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(o.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(o.y))+"px;border-top:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(o.height))+"px "+(i=1,r="{{=props.linetype}}",a="<%=props.linetype%>",n(o.linetype))+" "+(i=1,r="{{=props.color}}",a="<%=props.color%>",n(o.color))+";opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(o.alpha))+";width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(o.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(o.rotate))+"deg)"})),t(l,0,s)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/line/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/page/designer",["../../designer/props","../../i18n/index","../../designer/const"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../i18n/index"),i=e("../../designer/const");t.default={title:"@:{lang#elements.page}",getProps:()=>({width:i.default["@:{page.width}"],height:i.default["@:{page.height}"],background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0,scaleType:"auto",paper:"",hor:0,ver:0}),props:[{tip:"@:{lang#props.width}",key:"width",type:n.default["@:{number}"],min:0,refresh:1,write:(e,t)=>(t.paper=e+"x"+t.height,e)},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,refresh:1,write:(e,t)=>(t.paper=t.width+"x"+e,e)},{tip:"@:{lang#props.page.paper.size}",type:n.default["@:{dropdown}"],key:"paper",refresh:1,items:[{text:"\u8bf7\u9009\u62e9",value:""},{text:"A1",value:"2245x3178"},{text:"A2",value:"1587x2245"},{text:"A3",value:"1122x1587"},{text:"A4",value:"793x1122"},{text:"A5",value:"559x793"},{text:"A6",value:"396x559"},{text:"A7",value:"279x396"}],write(e,t){let[l,n]=e.split("x");return t.width=0|l,t.height=0|n,e}},{tip:"@:{lang#props.page.scale}",key:"scaleType",type:n.default["@:{dropdown}"],items:[{text:r.default("@:{lang#props.scale.auto}"),value:"auto"},{text:r.default("@:{lang#props.scale.full}"),value:"full"}]},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.background}",key:"background",type:n.default["@:{color}"]},{tip:"@:{lang#props.background.image}",key:"backgroundImage",type:n.default["@:{image}"],refresh:!0,write:(e,t,l)=>(t.backgroundWidth=l.width,t.backgroundHeight=l.height,e)},{tip:"@:{lang#props.background.repeat}",key:"backgroundRepeat",type:n.default["@:{dropdown}"],items:[{text:r.default("@:{lang#props.full}"),value:"full"},{text:r.default("@:{lang#props.no.repeat}"),value:"no-repeat"},{text:r.default("@:{lang#props.repeat.x}"),value:"repeat-x"},{text:r.default("@:{lang#props.repeat.y}"),value:"repeat-y"},{text:r.default("@:{lang#props.repeat}"),value:"repeat"}],refresh:!0,ifShow:e=>e.backgroundImage},{tip:"@:{lang#props.image.width}",key:"backgroundWidth",type:n.default["@:{number}"],min:0,ifShow(e){let t=e.backgroundImage,l=e.backgroundRepeat;return t&&"full"!==l}},{tip:"@:{lang#props.image.height}",key:"backgroundHeight",type:n.default["@:{number}"],min:0,ifShow(e){let t=e.backgroundImage,l=e.backgroundRepeat;return t&&"full"!=l}},{tip:"@:{lang#props.offset.hor}",key:"hor",type:n.default["@:{number}"],ifShow:e=>e.backgroundImage&&"full"!=e.backgroundRepeat},{tip:"@:{lang#props.offset.ver}",key:"ver",type:n.default["@:{number}"],ifShow:e=>e.backgroundImage&&"full"!=e.backgroundRepeat}]}}),define("elements/rect/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../i18n/index"),i=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/rect/index"})}}).static({type:"rect",title:"@:{lang#elements.rect}",icon:"&#xe6c7;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({fillcolor:"",height:100,alpha:1,x:e,y:t,rotate:0,width:200,borderwidth:1,bordertype:"solid",bordercolor:"#000000",radius:0,locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.border.width}",key:"borderwidth",type:n.default["@:{number}"],min:0,json:1},{tip:"@:{lang#props.border.type}",key:"bordertype",type:n.default["@:{dropdown}"],items:[{text:r.default("@:{lang#props.border.type.solid}"),value:"solid"},{text:r.default("@:{lang#props.border.type.dotted}"),value:"dotted"},{text:r.default("@:{lang#props.border.type.dashed}"),value:"dashed"}],json:1},{tip:"@:{lang#props.bordercolor}",key:"bordercolor",type:n.default["@:{color}"],json:1},{tip:"@:{lang#props.fillcolor}",key:"fillcolor",clear:!0,alpha:!0,type:n.default["@:{color}"],json:1},{tip:"@:{lang#props.border.radius}",key:"radius",type:n.default["@:{number}"],min:0,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/rect/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o=[],{props:d}=e;return s="position:absolute;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(d.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(d.y))+"px;"+(i=1,r="{{if props.borderwidth}}",""),a="<%if(props.borderwidth){%>",d.borderwidth&&(s+="border:"+(i=1,r="{{=props.borderwidth}}",a="<%=props.borderwidth%>",n(d.borderwidth))+"px "+(i=1,r="{{=props.bordertype}}",a="<%=props.bordertype%>",n(d.bordertype))+" "+(i=1,r="{{=props.bordercolor}}",a="<%=props.bordercolor%>",n(d.bordercolor))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),s+=(i=1,r="{{if props.fillcolor}}",""),a="<%if(props.fillcolor){%>",d.fillcolor&&(s+="background:"+(i=1,r="{{=props.fillcolor}}",a="<%=props.fillcolor%>",n(d.fillcolor))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),s+="height:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(d.height))+"px;opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(d.alpha))+";width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(d.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(d.rotate))+"deg);"+(i=1,r="{{if props.radius}}",""),a="<%if(props.radius){%>",d.radius&&(s+="border-radius:"+(i=1,r="{{=props.radius}}",a="<%=props.radius%>",n(d.radius))+"px;"+(i=1,r="{{/if}}",""),a="<%}%>"),o.push(t("div",{style:s})),t(l,0,o)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/rect/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/table/consts",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"@:{default.cell.width}":120,"@:{default.empty.width}":200,"@:{loading.tip.height}":100}}),define("elements/table/designer",["magix","../../designer/props","../../i18n/index","../../util/converter","../designer","../../designer/service","./consts"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("../../designer/props"),i=e("../../i18n/index"),a=e("../../util/converter"),s=e("../designer"),o=e("../../designer/service"),d=e("./consts");let p=s.default.prototype,g=n.default.State,c=(e,t,l)=>{let{bind:n,columns:r}=e,i=g.get("@:{stage.scale}");if(n.fields&&n.fields.length){let a=0;for(let e of n.fields)a+=r[e.id]||d.default["@:{default.cell.width}"]*i;if(e.width=a+1,l||!t)e.loadingHeight=d.default["@:{loading.tip.height}"]*i,e.height=d.default["@:{loading.tip.height}"]*i+e.theadRowHeight+7,e.data={tip:(null==l?void 0:l.msg)||"\u6b63\u5728\u52a0\u8f7d\u6570\u636e..."};else{let l=g.get("@:{stage.page}").height-e.y-e.theadRowHeight-6-1-e.tfootSpacing,n=Math.floor(l/(e.tbodyRowHeight+3));n<1&&(n=1),t.length>n&&(t=t.slice(0,n)),e.height=e.theadRowHeight+e.tbodyRowHeight*t.length+1+3*(t.length+1),e.data={list:t}}}else e.height=e.theadRowHeight+e.tbodyRowHeight+7,e.width=d.default["@:{default.empty.width}"]*i},h=new n.default.Cache,u=s.default.extend({ctor(){this.set({view:"elements/table/dshow"});let e=()=>{let e=this.get("element");this["@:{update}"](e)};g.on("@:{event#stage.page.change}",e),this.on("destroy",()=>{g.off("@:{event#stage.page.change}",e)})},"@:{attach.data}"(e){let{props:t}=e,{bind:l}=t;if(l.url){let e=h.get(l.url);if(e)c(t,e.list,e.error);else{c(t);let e=n.default.mark(this,"@:{attach.data}");this.fetch({name:"@:{get.by.url}",url:l.url},(n,r)=>{let i=r.get("data",[]);h.set(l.url,{list:i,error:n}),c(t,i,n);let a=this.get("element");e()&&(this.digest({element:a}),g.fire("@:{event#stage.select.element.props.update}"))})}}else c(t)},assign(e){this["@:{attach.data}"](e.element),p.assign.call(this,e)},"@:{update}"(e){this["@:{attach.data}"](e),p["@:{update}"].call(this,e)}}).static({type:"table",title:"@:{lang#elements.table}",icon:"&#xe660;",scales:["x","y","theadRowHeight","tbodyRowHeight","theadFontsize","tbodyFontsize","tfootSpacing",(e,t,l)=>{let{columns:n}=e;for(let e in n)n[e]*=t;l&&(l.columns=n)}],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({alpha:1,x:e,y:t,width:200,height:77,locked:!1,cellAlign:"center",tfootSpacing:20,theadFontsize:16,theadRowHeight:40,tbodyRowHeight:30,tbodyFontsize:14,theadRowBackground:"#ffda95",tbodyEvenRowBackground:"#dde09d",tbodyOddRowBackground:"#f2f5cc",bind:{url:"",id:"",fields:[]},columns:{}}),props:[{tip:"@:{lang#props.x}",type:r.default["@:{number}"],key:"x",read:a.default["@:{to.show.value}"],write:a.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:r.default["@:{number}"],key:"y",read:a.default["@:{to.show.value}"],write:a.default["@:{to.real.value}"],json:1},{type:r.default["@:{spliter}"]},{tip:"@:{lang#props.bind.fields}",key:"bind",type:r.default["@:{bind.field}"],json:1,dockTop:1},{tip:"@:{lang#props.table.columns.width}",key:"columns",type:r.default["@:{column.width}"],min:20,max:300,read:e=>{let t={};for(let l in e)t[l]=a.default["@:{to.show.value}"](e[l]);return t},write:e=>{let t={};for(let l in e)t[l]=a.default["@:{to.real.value}"](e[l]);return t},json:1,dockTop:1},{type:r.default["@:{spliter}"]},{tip:"@:{lang#props.table.cell.align}",key:"cellAlign",type:r.default["@:{dropdown}"],items:[{text:i.default("@:{lang#props.table.cell.align.left}"),value:"left"},{text:i.default("@:{lang#props.table.cell.align.center}"),value:"center"},{text:i.default("@:{lang#props.table.cell.align.right}"),value:"right"}],json:1},{tip:"@:{lang#props.table.head.row.height}",min:25,max:100,key:"theadRowHeight",type:r.default["@:{number}"],read:a.default["@:{to.show.value}"],write:a.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.table.body.row.height}",min:25,max:100,key:"tbodyRowHeight",type:r.default["@:{number}"],read:a.default["@:{to.show.value}"],write:a.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.table.foot.spacing}",min:0,key:"tfootSpacing",type:r.default["@:{number}"],read:a.default["@:{to.show.value}"],write:a.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.table.head.font.size}",min:12,max:100,key:"theadFontsize",type:r.default["@:{number}"],read:a.default["@:{to.show.value}"],write:a.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.table.body.font.size}",min:12,max:100,key:"tbodyFontsize",type:r.default["@:{number}"],read:a.default["@:{to.show.value}"],write:a.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.table.head.row.background}",key:"theadRowBackground",type:r.default["@:{color}"],clear:!0,alpha:!0,json:1},{tip:"@:{lang#props.table.body.even.row.background}",key:"tbodyEvenRowBackground",type:r.default["@:{color}"],clear:!0,alpha:!0,json:1},{tip:"@:{lang#props.table.body.odd.row.background}",key:"tbodyOddRowBackground",type:r.default["@:{color}"],clear:!0,alpha:!0,json:1},{tip:"@:{lang#props.alpha}",key:"alpha",type:r.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{type:r.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:r.default["@:{boolean}"],refresh:!0,free:!0}]});t.default=u.merge(o.default)}),define("elements/table/dshow",["magix"],(e,t,l)=>{let n={class:"rd-_assets_index_-table rd-_assets_index_-width-100p"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g,c,h,u,f,_,m,x,y,b=[],{props:w}=e;if(d=[],a=3,i="{{if props.bind&&\n            props.bind.fields&&\n            props.bind.fields.length}}",s="if(props.bind&&\n            props.bind.fields&&\n            props.bind.fields.length){",w.bind&&w.bind.fields&&w.bind.fields.length){c=[],a=8,i="{{each props.bind.fields as field}}",s="for(let $q_a_pdoasyruq=props.bind.fields,$q_c_xnbvcdhnuhc=$q_a_pdoasyruq.length,$q_key_ahyidwn=0;$q_key_ahyidwn<$q_c_xnbvcdhnuhc;$q_key_ahyidwn++){let field=$q_a_pdoasyruq[$q_key_ahyidwn];";for(let e=w.bind.fields,l=e.length,n=0;n<l;n+=1){let l=e[n];_=[t(0,0,(a=10,i="{{=field.name}}",s="<%=field.name%>",r(l.name)))],f=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=10,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;line-height:"+(a=10,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;font-size:"+(a=10,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},_)],u="width:"+(a=9,i="{{=props.columns[field.id]}}",s="<%=props.columns[field.id]%>",r(w.columns[l.id]))+"px;text-align:"+(a=9,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=9,i="{{if props.theadRowBackground}}",""),s="<%if(props.theadRowBackground){%>",w.theadRowBackground&&(u+="background:"+(a=9,i="{{=props.theadRowBackground}}",s="<%=props.theadRowBackground%>",r(w.theadRowBackground))+(a=9,i="{{/if}}",""),s="<%}%>"),h=[t("th",{class:"rd-_assets_index_-table-cell",style:u},f)],c.push(...h)}if(g=[t("tr",0,c)],p=[t("thead",0,g)],g=[],a=15,i="{{if props.data}}",s="if(props.data){",w.data){if(c=[],a=16,i="{{if props.data.tip}}",s="if(props.data.tip){",w.data.tip)m=[t(0,0,(a=20,i="{{=props.data.tip}}",s="<%=props.data.tip%>",r(w.data.tip)))],_=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=19,i="{{=props.loadingHeight}}",s="<%=props.loadingHeight%>",r(w.loadingHeight))+"px;line-height:"+(a=19,i="{{=props.loadingHeight}}",s="<%=props.loadingHeight%>",r(w.loadingHeight))+"px;font-size:"+(a=19,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},m)],f=[t("td",{class:"rd-_assets_index_-table-cell rd-_assets_index_-table-cell-tip",colspan:(a=18,i="{{=props.bind.fields.length}}",s="<%=props.bind.fields.length%>",r(w.bind.fields.length))},_)],h=[t("tr",0,f)],c.push(...h);else{h=[],a=25,i="{{each props.data.list as item i}}",s="for(let $q_a_rjryloqa=props.data.list,$q_c_rjldlaj=$q_a_rjryloqa.length,i=0;i<$q_c_rjldlaj;i++){let item=$q_a_rjryloqa[i];";for(let e=w.data.list,l=e.length,n=0;n<l;n+=1){let l=e[n];_=[],a=27,i="{{each props.bind.fields as field}}",s="for(let $q_a_stqhisxzec=props.bind.fields,$q_c_cmqtyri=$q_a_stqhisxzec.length,$q_key_qyfprvintj=0;$q_key_qyfprvintj<$q_c_cmqtyri;$q_key_qyfprvintj++){let field=$q_a_stqhisxzec[$q_key_qyfprvintj];";for(let e=w.bind.fields,o=e.length,d=0;d<o;d+=1){let o=e[d];y=[t(0,0,(a=30,i="{{=item[field.id]}}",s="<%=item[field.id]%>",r(l[o.id])))],x=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=29,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;line-height:"+(a=29,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;font-size:"+(a=29,i="{{=props.tbodyFontsize}}",s="<%=props.tbodyFontsize%>",r(w.tbodyFontsize))+"px"},y)],u="text-align:"+(a=28,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=28,i="{{if i%2&&props.tbodyOddRowBackground}}",""),s="<%if(i%2&&props.tbodyOddRowBackground){%>",n%2&&w.tbodyOddRowBackground?(u+="background:"+(a=28,i="{{=props.tbodyOddRowBackground}}",s="<%=props.tbodyOddRowBackground%>",r(w.tbodyOddRowBackground))+(a=28,i="{{else if (i%2)==0&&props.tbodyEvenRowBackground}}",""),s="<%}else if((i%2)==0&&props.tbodyEvenRowBackground){%>"):n%2==0&&w.tbodyEvenRowBackground&&(u+="background:"+(a=28,i="{{=props.tbodyEvenRowBackground}}",s="<%=props.tbodyEvenRowBackground%>",r(w.tbodyEvenRowBackground))+(a=28,i="{{/if}}",""),s="<%}%>"),m=[t("td",{class:"rd-_assets_index_-table-cell",style:u},x)],_.push(...m)}f=[t("tr",0,_)],h.push(...f)}c.push(...h)}g.push(...c)}p.push(t("tbody",0,g)),d.push(...p)}else f=[t(0,0,"\u7ed1\u5b9a\u6570\u636e")],h=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=43,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;line-height:"+(a=43,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;font-size:"+(a=43,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},f)],u="text-align:"+(a=42,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=42,i="{{if props.theadRowBackground}}",""),s="<%if(props.theadRowBackground){%>",w.theadRowBackground&&(u+="background:"+(a=42,i="{{=props.theadRowBackground}}",s="<%=props.theadRowBackground%>",r(w.theadRowBackground))+(a=42,i="{{/if}}",""),s="<%}%>"),c=[t("th",{class:"rd-_assets_index_-table-cell",style:u},h)],g=[t("tr",0,c)],p=[t("thead",0,g)],f=[t(0,0,"\u8bf7\u5148\u7ed1\u5b9a\u6570\u636e")],h=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=52,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;line-height:"+(a=52,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;font-size:"+(a=52,i="{{=props.tbodyFontsize}}",s="<%=props.tbodyFontsize%>",r(w.tbodyFontsize))+"px"},f)],u="text-align:"+(a=51,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=51,i="{{if props.tbodyOddRowBackground}}",""),s="<%if(props.tbodyOddRowBackground){%>",w.tbodyOddRowBackground&&(u+="background:"+(a=51,i="{{=props.tbodyOddRowBackground}}",s="<%=props.tbodyOddRowBackground%>",r(w.tbodyOddRowBackground))+(a=51,i="{{/if}}",""),s="<%}%>"),c=[t("td",{class:"rd-_assets_index_-table-cell",style:u},h)],g=[t("tr",0,c)],p.push(t("tbody",0,g)),d.push(...p);return o=[t("table",n,d)],b.push(t("div",{style:"position:absolute;left:"+(a=1,i="{{=props.x}}",s="<%=props.x%>",r(w.x))+"px;top:"+(a=1,i="{{=props.y}}",s="<%=props.y%>",r(w.y))+"px;opacity:"+(a=1,i="{{=props.alpha}}",s="<%=props.alpha%>",r(w.alpha))+";width:"+(a=1,i="{{=props.width}}",s="<%=props.width%>",r(w.width))+"px"},o)),t(l,0,b)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:elements/table/dshow.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/table/index",["magix","../../designer/service"],(e,t,l)=>{let n={class:"rd-_assets_index_-table rd-_assets_index_-width-100p"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("../../designer/service");let a=(e,t,l)=>{let{bind:n,columns:r}=e;if(n.fields&&n.fields.length){let i=0;for(let e of n.fields)i+=r[e.id]||120;e.width=i+1,e.data=l||!t?{tip:(null==l?void 0:l.msg)||"\u6b63\u5728\u52a0\u8f7d\u6570\u636e..."}:{list:t}}else e.width=200};t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g,c,h,u,f,_,m,x,y,b=[],{props:w}=e;if(d=[],a=3,i="{{if props.bind&&\n            props.bind.fields&&\n            props.bind.fields.length}}",s="if(props.bind&&\n            props.bind.fields&&\n            props.bind.fields.length){",w.bind&&w.bind.fields&&w.bind.fields.length){c=[],a=8,i="{{each props.bind.fields as field}}",s="for(let $q_a_qieoym=props.bind.fields,$q_c_giaol=$q_a_qieoym.length,$q_key_ukvjvynsf=0;$q_key_ukvjvynsf<$q_c_giaol;$q_key_ukvjvynsf++){let field=$q_a_qieoym[$q_key_ukvjvynsf];";for(let e=w.bind.fields,l=e.length,n=0;n<l;n+=1){let l=e[n];_=[t(0,0,(a=11,i="{{=field.name}}",s="<%=field.name%>",r(l.name)))],f=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=10,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;line-height:"+(a=10,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;font-size:"+(a=10,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},_)],u="width:"+(a=9,i="{{=props.columns[field.id]}}",s="<%=props.columns[field.id]%>",r(w.columns[l.id]))+"px;text-align:"+(a=9,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=9,i="{{if props.theadRowBackground}}",""),s="<%if(props.theadRowBackground){%>",w.theadRowBackground&&(u+="background:"+(a=9,i="{{=props.theadRowBackground}}",s="<%=props.theadRowBackground%>",r(w.theadRowBackground))+(a=9,i="{{/if}}",""),s="<%}%>"),h=[t("th",{class:"rd-_assets_index_-table-cell",style:u},f)],c.push(...h)}if(g=[t("tr",0,c)],p=[t("thead",0,g)],g=[],a=18,i="{{if props.data}}",s="if(props.data){",w.data){if(c=[],a=19,i="{{if props.data.tip}}",s="if(props.data.tip){",w.data.tip)m=[t(0,0,(a=23,i="{{=props.data.tip}}",s="<%=props.data.tip%>",r(w.data.tip)))],_=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=22,i="{{=props.loadingHeight}}",s="<%=props.loadingHeight%>",r(w.loadingHeight))+"px;line-height:"+(a=22,i="{{=props.loadingHeight}}",s="<%=props.loadingHeight%>",r(w.loadingHeight))+"px;font-size:"+(a=22,i="{{=props.tbodyFontsize}}",s="<%=props.tbodyFontsize%>",r(w.tbodyFontsize))+"px"},m)],f=[t("td",{class:"rd-_assets_index_-table-cell rd-_assets_index_-table-cell-tip",colspan:(a=21,i="{{=props.bind.fields.length}}",s="<%=props.bind.fields.length%>",r(w.bind.fields.length))},_)],h=[t("tr",0,f)],c.push(...h);else{h=[],a=28,i="{{each props.data.list as item i}}",s="for(let $q_a_dqgttapju=props.data.list,$q_c_eqqnfnqd=$q_a_dqgttapju.length,i=0;i<$q_c_eqqnfnqd;i++){let item=$q_a_dqgttapju[i];";for(let e=w.data.list,l=e.length,n=0;n<l;n+=1){let l=e[n];_=[],a=30,i="{{each props.bind.fields as field}}",s="for(let $q_a_yuukvkq=props.bind.fields,$q_c_hqysxddt=$q_a_yuukvkq.length,$q_key_snqoc=0;$q_key_snqoc<$q_c_hqysxddt;$q_key_snqoc++){let field=$q_a_yuukvkq[$q_key_snqoc];";for(let e=w.bind.fields,o=e.length,d=0;d<o;d+=1){let o=e[d];y=[t(0,0,(a=33,i="{{=item[field.id]}}",s="<%=item[field.id]%>",r(l[o.id])))],x=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=32,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;line-height:"+(a=32,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;font-size:"+(a=32,i="{{=props.tbodyFontsize}}",s="<%=props.tbodyFontsize%>",r(w.tbodyFontsize))+"px"},y)],u="text-align:"+(a=31,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=31,i="{{if i%2&&props.tbodyOddRowBackground}}",""),s="<%if(i%2&&props.tbodyOddRowBackground){%>",n%2&&w.tbodyOddRowBackground?(u+="background:"+(a=31,i="{{=props.tbodyOddRowBackground}}",s="<%=props.tbodyOddRowBackground%>",r(w.tbodyOddRowBackground))+(a=31,i="{{else if (i%2)==0&&props.tbodyEvenRowBackground}}",""),s="<%}else if((i%2)==0&&props.tbodyEvenRowBackground){%>"):n%2==0&&w.tbodyEvenRowBackground&&(u+="background:"+(a=31,i="{{=props.tbodyEvenRowBackground}}",s="<%=props.tbodyEvenRowBackground%>",r(w.tbodyEvenRowBackground))+(a=31,i="{{/if}}",""),s="<%}%>"),m=[t("td",{class:"rd-_assets_index_-table-cell",style:u},x)],_.push(...m)}f=[t("tr",0,_)],h.push(...f)}c.push(...h)}g.push(...c)}p.push(t("tbody",0,g)),d.push(...p)}else f=[t(0,0,"\u7ed1\u5b9a\u6570\u636e")],h=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=46,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;line-height:"+(a=46,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;font-size:"+(a=46,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},f)],u="text-align:"+(a=45,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=45,i="{{if props.theadRowBackground}}",""),s="<%if(props.theadRowBackground){%>",w.theadRowBackground&&(u+="background:"+(a=45,i="{{=props.theadRowBackground}}",s="<%=props.theadRowBackground%>",r(w.theadRowBackground))+(a=45,i="{{/if}}",""),s="<%}%>"),c=[t("th",{class:"rd-_assets_index_-table-cell",style:u},h)],g=[t("tr",0,c)],p=[t("thead",0,g)],f=[t(0,0,"\u8bf7\u5148\u7ed1\u5b9a\u6570\u636e")],h=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=55,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;line-height:"+(a=55,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;font-size:"+(a=55,i="{{=props.tbodyFontsize}}",s="<%=props.tbodyFontsize%>",r(w.tbodyFontsize))+"px"},f)],u="text-align:"+(a=54,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=54,i="{{if props.tbodyOddRowBackground}}",""),s="<%if(props.tbodyOddRowBackground){%>",w.tbodyOddRowBackground&&(u+="background:"+(a=54,i="{{=props.tbodyOddRowBackground}}",s="<%=props.tbodyOddRowBackground%>",r(w.tbodyOddRowBackground))+(a=54,i="{{/if}}",""),s="<%}%>"),c=[t("td",{class:"rd-_assets_index_-table-cell",style:u},h)],g=[t("tr",0,c)],p.push(t("tbody",0,g)),d.push(...p);return o=[t("table",n,d)],b.push(t("div",{style:"position:absolute;left:"+(a=1,i="{{=props.x}}",s="<%=props.x%>",r(w.x))+"px;top:"+(a=1,i="{{=props.y}}",s="<%=props.y%>",r(w.y))+"px;opacity:"+(a=1,i="{{=props.alpha}}",s="<%=props.alpha%>",r(w.alpha))+";width:"+(a=1,i="{{=props.width}}",s="<%=props.width%>",r(w.width))+"px"},o)),t(l,0,b)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:elements/table/index.html"}},assign(e){this.set(e)},render(){let e=this.get("props");a(e),this.digest();let t=r.default.mark(this,"@:{render}"),{bind:l}=e;this.fetch({name:"@:{get.by.url}",url:l.url},(l,n)=>{let r=n.get("data",[]);t()&&(a(e,r,l),this.digest({props:e}))})}}).merge(i.default)}),define("elements/table/printer",["magix"],(e,t,l)=>{let n={class:"rd-_assets_index_-table rd-_assets_index_-width-100p"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g,c,h,u,f,_,m,x,y,b=[],{props:w}=e;if(d=[],a=3,i="{{if props.bind&&\n            props.bind.fields&&\n            props.bind.fields.length}}",s="if(props.bind&&\n            props.bind.fields&&\n            props.bind.fields.length){",w.bind&&w.bind.fields&&w.bind.fields.length){c=[],a=8,i="{{each props.bind.fields as field}}",s="for(let $q_a_gnnzlh=props.bind.fields,$q_c_dzgysujo=$q_a_gnnzlh.length,$q_key_acehygaoe=0;$q_key_acehygaoe<$q_c_dzgysujo;$q_key_acehygaoe++){let field=$q_a_gnnzlh[$q_key_acehygaoe];";for(let e=w.bind.fields,l=e.length,n=0;n<l;n+=1){let l=e[n];_=[t(0,0,(a=10,i="{{=field.name}}",s="<%=field.name%>",r(l.name)))],f=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=10,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;line-height:"+(a=10,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;font-size:"+(a=10,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},_)],u="width:"+(a=9,i="{{=props.columns[field.id]}}",s="<%=props.columns[field.id]%>",r(w.columns[l.id]))+"px;text-align:"+(a=9,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=9,i="{{if props.theadRowBackground}}",""),s="<%if(props.theadRowBackground){%>",w.theadRowBackground&&(u+="background:"+(a=9,i="{{=props.theadRowBackground}}",s="<%=props.theadRowBackground%>",r(w.theadRowBackground))+(a=9,i="{{/if}}",""),s="<%}%>"),h=[t("th",{class:"rd-_assets_index_-table-cell",style:u},f)],c.push(...h)}if(g=[t("tr",0,c)],p=[t("thead",0,g)],g=[],a=15,i="{{if props.data}}",s="if(props.data){",w.data){if(c=[],a=16,i="{{if props.data.tip}}",s="if(props.data.tip){",w.data.tip)m=[t(0,0,(a=20,i="{{=props.data.tip}}",s="<%=props.data.tip%>",r(w.data.tip)))],_=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=19,i="{{=props.loadingHeight}}",s="<%=props.loadingHeight%>",r(w.loadingHeight))+"px;line-height:"+(a=19,i="{{=props.loadingHeight}}",s="<%=props.loadingHeight%>",r(w.loadingHeight))+"px;font-size:"+(a=19,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},m)],f=[t("td",{class:"rd-_assets_index_-table-cell rd-_assets_index_-table-cell-tip",colspan:(a=18,i="{{=props.bind.fields.length}}",s="<%=props.bind.fields.length%>",r(w.bind.fields.length))},_)],h=[t("tr",0,f)],c.push(...h);else{h=[],a=25,i="{{each props.data.list as item i}}",s="for(let $q_a_zgdncehjf=props.data.list,$q_c_lcmfcygorz=$q_a_zgdncehjf.length,i=0;i<$q_c_lcmfcygorz;i++){let item=$q_a_zgdncehjf[i];";for(let e=w.data.list,l=e.length,n=0;n<l;n+=1){let l=e[n];_=[],a=27,i="{{each props.bind.fields as field}}",s="for(let $q_a_buzfdultr=props.bind.fields,$q_c_swizxb=$q_a_buzfdultr.length,$q_key_zeratq=0;$q_key_zeratq<$q_c_swizxb;$q_key_zeratq++){let field=$q_a_buzfdultr[$q_key_zeratq];";for(let e=w.bind.fields,o=e.length,d=0;d<o;d+=1){let o=e[d];y=[t(0,0,(a=30,i="{{=item[field.id]}}",s="<%=item[field.id]%>",r(l[o.id])))],x=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=29,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;line-height:"+(a=29,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;font-size:"+(a=29,i="{{=props.tbodyFontsize}}",s="<%=props.tbodyFontsize%>",r(w.tbodyFontsize))+"px"},y)],u="text-align:"+(a=28,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=28,i="{{if i%2&&props.tbodyOddRowBackground}}",""),s="<%if(i%2&&props.tbodyOddRowBackground){%>",n%2&&w.tbodyOddRowBackground?(u+="background:"+(a=28,i="{{=props.tbodyOddRowBackground}}",s="<%=props.tbodyOddRowBackground%>",r(w.tbodyOddRowBackground))+(a=28,i="{{else if (i%2)==0&&props.tbodyEvenRowBackground}}",""),s="<%}else if((i%2)==0&&props.tbodyEvenRowBackground){%>"):n%2==0&&w.tbodyEvenRowBackground&&(u+="background:"+(a=28,i="{{=props.tbodyEvenRowBackground}}",s="<%=props.tbodyEvenRowBackground%>",r(w.tbodyEvenRowBackground))+(a=28,i="{{/if}}",""),s="<%}%>"),m=[t("td",{class:"rd-_assets_index_-table-cell",style:u},x)],_.push(...m)}f=[t("tr",0,_)],h.push(...f)}c.push(...h)}g.push(...c)}p.push(t("tbody",0,g)),d.push(...p)}else f=[t(0,0,"\u7ed1\u5b9a\u6570\u636e")],h=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=43,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;line-height:"+(a=43,i="{{=props.theadRowHeight}}",s="<%=props.theadRowHeight%>",r(w.theadRowHeight))+"px;font-size:"+(a=43,i="{{=props.theadFontsize}}",s="<%=props.theadFontsize%>",r(w.theadFontsize))+"px"},f)],u="text-align:"+(a=42,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=42,i="{{if props.theadRowBackground}}",""),s="<%if(props.theadRowBackground){%>",w.theadRowBackground&&(u+="background:"+(a=42,i="{{=props.theadRowBackground}}",s="<%=props.theadRowBackground%>",r(w.theadRowBackground))+(a=42,i="{{/if}}",""),s="<%}%>"),c=[t("th",{class:"rd-_assets_index_-table-cell",style:u},h)],g=[t("tr",0,c)],p=[t("thead",0,g)],f=[t(0,0,"\u8bf7\u5148\u7ed1\u5b9a\u6570\u636e")],h=[t("div",{class:"rd-_assets_index_-text-pre-hidden",style:"height:"+(a=52,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;line-height:"+(a=52,i="{{=props.tbodyRowHeight}}",s="<%=props.tbodyRowHeight%>",r(w.tbodyRowHeight))+"px;font-size:"+(a=52,i="{{=props.tbodyFontsize}}",s="<%=props.tbodyFontsize%>",r(w.tbodyFontsize))+"px"},f)],u="text-align:"+(a=51,i="{{=props.cellAlign}}",s="<%=props.cellAlign%>",r(w.cellAlign))+";"+(a=51,i="{{if props.tbodyOddRowBackground}}",""),s="<%if(props.tbodyOddRowBackground){%>",w.tbodyOddRowBackground&&(u+="background:"+(a=51,i="{{=props.tbodyOddRowBackground}}",s="<%=props.tbodyOddRowBackground%>",r(w.tbodyOddRowBackground))+(a=51,i="{{/if}}",""),s="<%}%>"),c=[t("td",{class:"rd-_assets_index_-table-cell",style:u},h)],g=[t("tr",0,c)],p.push(t("tbody",0,g)),d.push(...p);return o=[t("table",n,d)],b.push(t("div",{style:"position:absolute;left:"+(a=1,i="{{=props.x}}",s="<%=props.x%>",r(w.x))+"px;top:"+(a=1,i="{{=props.y}}",s="<%=props.y%>",r(w.y))+"px;opacity:"+(a=1,i="{{=props.alpha}}",s="<%=props.alpha%>",r(w.alpha))+";width:"+(a=1,i="{{=props.width}}",s="<%=props.width%>",r(w.width))+"px"},o)),t(l,0,b)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:elements/table/dshow.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/repeat/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../../designer/props"),r=e("../../i18n/index"),i=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/repeat/index"})}}).static({type:"repeat",title:"@:{lang#elements.repeat}",icon:"&#xe78f;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height","imageWidth","imageHeight"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({height:100,alpha:1,x:e,y:t,rotate:0,width:200,radius:0,image:"",repeat:"repeat",imageWidth:0,imageHeight:0,hor:0,ver:0,locked:!1}),props:[{tip:"@:{lang#props.x}",type:n.default["@:{number}"],key:"x",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:n.default["@:{number}"],key:"y",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:n.default["@:{number}"],key:"width",min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:n.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:n.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.alpha}",key:"alpha",type:n.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.border.radius}",key:"radius",type:n.default["@:{number}"],min:0,json:1},{tip:"@:{lang#props.image}",key:"image",type:n.default["@:{image}"],refresh:!0,write:(e,t,l)=>(t.imageWidth=i.default["@:{to.real.value}"](l.width),t.imageHeight=i.default["@:{to.real.value}"](l.height),e),json:1},{tip:"@:{lang#props.image.width}",key:"imageWidth",type:n.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],ifShow:e=>e.image,json:1},{tip:"@:{lang#props.image.height}",key:"imageHeight",type:n.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],ifShow:e=>e.image,json:1},{tip:"@:{lang#props.offset.hor}",key:"hor",type:n.default["@:{number}"],ifShow:e=>e.image,json:1},{tip:"@:{lang#props.offset.ver}",key:"ver",type:n.default["@:{number}"],ifShow:e=>e.image,json:1},{tip:"@:{lang#props.background.repeat}",key:"repeat",type:n.default["@:{dropdown}"],ifShow:e=>e.image,items:[{text:r.default("@:{lang#props.repeat}"),value:"repeat"},{text:r.default("@:{lang#props.repeat.x}"),value:"repeat-x"},{text:r.default("@:{lang#props.repeat.y}"),value:"repeat-y"}],json:1},{type:n.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:n.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/repeat/index",["magix"],(e,t,l)=>{let n={style:"display:flex;align-items:center;justify-content:center;height:100%"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g,c=[],{props:h,i18n:u}=e;return d=[],a=2,i="{{if !props.image}}",s="if(!props.image){",h.image||(g=[t(0,0,(a=3,i="{{=i18n('@:{lang#elements.repeat.select.image}')}}",s="<%=i18n('@:{lang#elements.repeat.select.image}')%>",r(u("@:{lang#elements.repeat.select.image}"))))],p=[t("div",n,g)],d.push(...p)),o="position:absolute;left:"+(a=1,i="{{=props.x}}",s="<%=props.x%>",r(h.x))+"px;top:"+(a=1,i="{{=props.y}}",s="<%=props.y%>",r(h.y))+"px;height:"+(a=1,i="{{=props.height}}",s="<%=props.height%>",r(h.height))+"px;opacity:"+(a=1,i="{{=props.alpha}}",s="<%=props.alpha%>",r(h.alpha))+";width:"+(a=1,i="{{=props.width}}",s="<%=props.width%>",r(h.width))+"px;transform:rotate("+(a=1,i="{{=props.rotate}}",s="<%=props.rotate%>",r(h.rotate))+"deg);"+(a=1,i="{{if props.radius}}",""),s="<%if(props.radius){%>",h.radius&&(o+="border-radius:"+(a=1,i="{{=props.radius}}",s="<%=props.radius%>",r(h.radius))+"px;"+(a=1,i="{{/if}}",""),s="<%}%>"),o+=(a=1,i="{{if props.image}}",""),s="<%if(props.image){%>",h.image&&(o+="background-image:url("+(a=1,i="{{=props.image}}",s="<%=props.image%>",r(h.image))+");background-size:"+(a=1,i="{{=props.imageWidth}}",s="<%=props.imageWidth%>",r(h.imageWidth))+"px "+(a=1,i="{{=props.imageHeight}}",s="<%=props.imageHeight%>",r(h.imageHeight))+"px;background-repeat:"+(a=1,i="{{=props.repeat}}",s="<%=props.repeat%>",r(h.repeat))+";background-position:"+(a=1,i="{{=props.hor}}",s="<%=props.hor%>",r(h.hor))+"% "+(a=1,i="{{=props.ver}}",s="<%=props.ver%>",r(h.ver))+"%"+(a=1,i="{{/if}}",""),s="<%}%>"),c.push(t("div",{style:o},d)),t(l,0,c)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:elements/repeat/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/text/designer",["../designer","../../designer/props","../../util/converter","../../i18n/index"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("../designer"),r=e("../../designer/props"),i=e("../../util/converter"),a=e("../../i18n/index");t.default=n.default.extend({ctor(){this.set({view:"elements/text/index"})}}).static({type:"text",title:"@:{lang#elements.text}",icon:"&#xe6bc;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height","fontsize","letterspacing"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({background:"",height:25,alpha:1,text:"",letterspacing:0,x:e,y:t,rotate:0,width:200,forecolor:"#000000",fontsize:14,fontfamily:"Microsoft YaHei",locked:!1,style:{bold:!1,underline:!1,italic:!1},align:{h:"center",v:"center"}}),props:[{tip:"@:{lang#props.x}",type:r.default["@:{number}"],key:"x",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.y}",type:r.default["@:{number}"],key:"y",read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.width}",type:r.default["@:{number}"],key:"width",min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.height}",key:"height",type:r.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.rotate}",type:r.default["@:{number}"],key:"rotate",min:-360,max:360,json:1},{type:r.default["@:{spliter}"]},{tip:"@:{lang#props.font.size}",key:"fontsize",type:r.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.font.family}",key:"fontfamily",type:r.default["@:{dropdown}"],items:[{value:"SimSun",text:a.default("@:{lang#font.simsun}")},{value:"SimHei",text:a.default("@:{lang#font.simhei}")},{value:"Microsoft YaHei",text:a.default("@:{lang#font.yahei}")},{value:"Microsoft JhengHei",text:a.default("@:{lang#font.jhei}")},{value:"KaiTi",text:a.default("@:{lang#font.kaiti}")},{value:"LiSu",text:a.default("@:{lang#font.lisu}")},{value:"YouYuan",text:a.default("@:{lang#font.youyuan}")},{value:"Arial",text:"Arial"},{value:"Times New Roman",text:"Times New Roman"},{value:"Tahoma",text:"Tahoma"},{value:"webdings",text:"webdings"},{value:"Arial Black",text:"Arial Black"},{value:"Arial Narrow",text:"Arial Narrow"},{value:"Arial Unicode MS",text:"Arial Unicode MS"}],json:1},{tip:"@:{lang#props.alpha}",key:"alpha",type:r.default["@:{number}"],step:.1,fixed:1,min:0,max:1,json:1},{tip:"@:{lang#props.letter.spacing}",key:"letterspacing",type:r.default["@:{number}"],min:0,read:i.default["@:{to.show.value}"],write:i.default["@:{to.real.value}"],json:1},{tip:"@:{lang#props.background}",key:"background",clear:!0,alpha:!0,type:r.default["@:{color}"],json:1},{tip:"@:{lang#props.forecolor}",key:"forecolor",type:r.default["@:{color}"],json:1},{tip:"@:{lang#props.font.style}",key:"style",type:r.default["@:{font.style}"],json:1},{tip:"@:{lang#props.font.align}",key:"align",type:r.default["@:{font.align}"],json:1},{tip:"@:{lang#props.text.content}",key:"text",type:r.default["@:{text.area}"],dockTop:!0,json:1},{type:r.default["@:{spliter}"]},{tip:"@:{lang#props.locked}",key:"locked",type:r.default["@:{boolean}"],refresh:!0,free:!0}]})}),define("elements/text/index",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o,d,p=[],{props:g,i18n:c}=e;return i=2,r="{{if props.text}}",d="",a="<%if(props.text){%>",g.text?(d+=" "+(i=3,r="{{=props.text}}",a="<%=props.text%>",n(g.text))+" "+(i=4,r="{{else}}",""),a="<%}else{%>"):(d+=" "+(i=5,r="{{=i18n('@:{lang#elements.text.content}')}}",a="<%=i18n('@:{lang#elements.text.content}')%>",n(c("@:{lang#elements.text.content}")))+" "+(i=6,r="{{/if}}",""),a="<%}%>"),o=[t(0,0,d)],s="position:absolute;left:"+(i=1,r="{{=props.x}}",a="<%=props.x%>",n(g.x))+"px;top:"+(i=1,r="{{=props.y}}",a="<%=props.y%>",n(g.y))+"px;display:flex;color:"+(i=1,r="{{=props.forecolor}}",a="<%=props.forecolor%>",n(g.forecolor))+";"+(i=1,r="{{if props.background}}",""),a="<%if(props.background){%>",g.background&&(s+="background:"+(i=1,r="{{=props.background}}",a="<%=props.background%>",n(g.background))+";"+(i=1,r="{{/if}}",""),a="<%}%>"),s+="font-size:"+(i=1,r="{{=props.fontsize}}",a="<%=props.fontsize%>",n(g.fontsize))+"px;height:"+(i=1,r="{{=props.height}}",a="<%=props.height%>",n(g.height))+"px;letter-spacing:"+(i=1,r="{{=props.ls}}",a="<%=props.ls%>",n(g.ls))+"px;opacity:"+(i=1,r="{{=props.alpha}}",a="<%=props.alpha%>",n(g.alpha))+";"+(i=1,r="{{if props.style.bold}}",""),a="<%if(props.style.bold){%>",g.style.bold&&(s+="font-weight:bold;"+(i=1,r="{{/if}}",""),a="<%}%>"),s+=(i=1,r="{{if props.style.italic}}",""),a="<%if(props.style.italic){%>",g.style.italic&&(s+="font-style:italic;"+(i=1,r="{{/if}}",""),a="<%}%>"),s+=(i=1,r="{{if props.style.underline}}",""),a="<%if(props.style.underline){%>",g.style.underline&&(s+="text-decoration:underline;"+(i=1,r="{{/if}}",""),a="<%}%>"),s+="align-items:"+(i=1,r="{{=props.align.v}}",a="<%=props.align.v%>",n(g.align.v))+";justify-content:"+(i=1,r="{{=props.align.h}}",a="<%=props.align.h%>",n(g.align.h))+";overflow:hidden;width:"+(i=1,r="{{=props.width}}",a="<%=props.width%>",n(g.width))+"px;transform:rotate("+(i=1,r="{{=props.rotate}}",a="<%=props.rotate%>",n(g.rotate))+"deg);font-family:"+(i=1,r="{{=props.fontfamily}}",a="<%=props.fontfamily%>",n(g.fontfamily)),p.push(t("div",{style:s},o)),t(l,0,p)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:elements/text/index.html"}},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,l)=>{let n,r={class:"rd-_designer_axis_-y-help-line-text"},i={class:"rd-_designer_axis_-x-help-line-text"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../gallery/mx-dragdrop/index"),o=e("../gallery/mx-pointer/cursor"),d=e("./history");a.default.applyStyle("rd-_designer_axis_","\n.rd-_designer_axis_-axis-x {\nheight:20px;\nborder-bottom:1px solid #ccc;\noverflow:hidden;\nwidth:100%;\nbackground:#fff;\nz-index:200;\nposition:relative;\n}\n.rd-_designer_axis_-axis-x-line {\nposition:absolute;\ntop:0;\nbackground:#FA742B;\nwidth:1px;\nz-index:200;\ndisplay:none;\npointer-events:none;\n}\n.rd-_designer_axis_-axis-y-line {\nposition:absolute;\nleft:0;\nbackground:#FA742B;\nheight:1px;\nz-index:200;\ndisplay:none;\npointer-events:none;\n}\n.rd-_designer_axis_-axis-y {\nfloat:left;\nwidth:20px;\nborder-right:solid 1px #ccc;\noverflow:hidden;\nbackground:#fff;\nz-index:200;\nposition:relative;\n}\n.rd-_designer_axis_-axis-corner {\nposition:absolute;\nleft:0;\ntop:0;\nwidth:20px;\nheight:20px;\nbackground:#fff;\nborder-bottom:solid 1px #ccc;\nborder-right:solid 1px #ccc;\nz-index:201;\n}\n.rd-_designer_axis_-axis-x-tip {\ncursor:default;\nposition:absolute;\nleft:5px;\nfont-size:10px;\ntop:22px;\n}\n.rd-_designer_axis_-axis-y-tip {\ncursor:default;\nposition:absolute;\ntop:2px;\nfont-size:10px;\nleft:24px;\n}\n.rd-_designer_axis_-y-axis-help,\n.rd-_designer_axis_-x-axis-help {\nposition:relative;\nz-index:100;\n}\n.rd-_designer_axis_-x-axis-help {\ntop:20px;\n}\n.rd-_designer_axis_-y-axis-help {\nleft:20px;\n}\n.rd-_designer_axis_-x-axis-help-line {\nwidth:4px;\nborder-left:solid 1px #FA742B;\nposition:absolute;\npointer-events:none;\n}\n.rd-_designer_axis_-y-axis-help-line {\nheight:1px;\nbackground:#FA742B;\nposition:absolute;\npointer-events:none;\n}\n.rd-_designer_axis_-x-help-line-icon {\nposition:absolute;\nleft:-15px;\ntop:4px;\nfont-size:10px;\ncolor:#666;\ncursor:pointer;\npointer-events:all;\n}\n.rd-_designer_axis_-x-help-line-text {\nposition:absolute;\nleft:4px;\ntop:2px;\nfont-size:10px;\ncolor:#666;\ncursor:default;\n}\n.rd-_designer_axis_-y-help-line-icon {\nposition:absolute;\nleft:4px;\ntop:-15px;\nfont-size:10px;\ncolor:#666;\ncursor:pointer;\npointer-events:all;\n}\n.rd-_designer_axis_-y-help-line-text {\nposition:absolute;\nleft:4px;\ntop:2px;\nfont-size:10px;\ncolor:#666;\ncursor:default;\n}\n.rd-_designer_axis_-y-help-line-move {\nposition:absolute;\nwidth:25px;\ntop:-1px;\nheight:3px;\nleft:30px;\noverflow:hidden;\nbackground:#FA742B;\npointer-events:all;\ncursor:ns-resize;\n}\n.rd-_designer_axis_-x-help-line-move {\nposition:absolute;\nwidth:3px;\nleft:-2px;\nheight:25px;\ntop:20px;\noverflow:hidden;\nbackground:#FA742B;\npointer-events:all;\ncursor:ew-resize;\n}\n");let p={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}},g=a.default.View.extend({tmpl:(e,t,l,a,s,o,d,p)=>{let g,c,h;try{let s,o,d,u,f,_,m,x,y,b,w=[],{sTop:v,yHelpers:k,yStart:A,scale:z,vWidth:j,i18n:S,sLeft:$,xHelpers:q,xStart:M,vHeight:R,width:B,step:H,space:I,hbar:T,barColor:F,bar:O,xEnd:Y,height:P,yEnd:X}=e;c=1,g="{{let temp,current}}",h="<%let temp,current%>",s=[],c=3,g="{{each yHelpers as yHelp}}",h="for(let $q_c_ybsnqvcwd=yHelpers.length,$q_key_qggldezlq=0;$q_key_qggldezlq<$q_c_ybsnqvcwd;$q_key_qggldezlq++){let yHelp=yHelpers[$q_key_qggldezlq];";for(let e=k.length,n=0;n<e;n+=1){let e=k[n];c=4,g="{{current=Math.abs(yStart)+yHelp.mm*scale+20}}",h="<%current=Math.abs(yStart)+yHelp.mm*scale+20%>",b=Math.abs(A)+e.mm*z+20,u=[t(0,0,"\ue600")],d=[t("i",{class:"rd-_assets_index_-iconfont rd-_designer_axis_-y-help-line-icon",title:(c=6,g="{{=i18n('@:{lang#axis.delete.line}')}}",h="<%=i18n('@:{lang#axis.delete.line}')%>",a(S("@:{lang#axis.delete.line}"))),"mx5-click":l+"\x1e@:{delete.help.line}({type:'y',id:'"+(c=6,g="{{=yHelp.id}}",h="<%=$eq(yHelp.id)%>",p(e.id))+"'})"},u)],u=[t(0,0,(c=7,g="{{=yHelp.mm}}",h="<%=yHelp.mm%>",a(e.mm)))],d.push(t("span",r,u),t("span",{class:"rd-_designer_axis_-y-help-line-move","mx5-mousedown":l+"\x1e@:{drag.help.line}({type:'y',id:'"+(c=8,g="{{=yHelp.id}}",h="<%=$eq(yHelp.id)%>",p(e.id))+"',c:"+(c=8,g="{{=current}}",h="<%=current%>",a(b))+"})",title:(c=8,g="{{=i18n('@:{lang#axis.move.line}')}}",h="<%=i18n('@:{lang#axis.move.line}')%>",a(S("@:{lang#axis.move.line}")))})),o=[t("div",{class:"rd-_designer_axis_-y-axis-help-line",style:"width:"+(c=5,g="{{=vWidth}}",h="<%=vWidth%>",a(j))+"px;top:"+(c=5,g="{{=current}}",h="<%=current%>",a(b))+"px"},d)],s.push(...o)}w.push(t("div",{class:"rd-_designer_axis_-y-axis-help",style:"top:-"+(c=2,g="{{=sTop}}",h="<%=sTop%>",a(v))+"px",id:(c=2,g="{{=$viewId}}",l+"_y_help"),"mx5-contextmenu":l+"\x1e@:{prevent}()"},s)),s=[],c=13,g="{{each xHelpers as xHelp}}",h="for(let $q_c_uetylzv=xHelpers.length,$q_key_mnkluywc=0;$q_key_mnkluywc<$q_c_uetylzv;$q_key_mnkluywc++){let xHelp=xHelpers[$q_key_mnkluywc];";for(let e=q.length,n=0;n<e;n+=1){let e=q[n];c=14,g="{{current=Math.abs(xStart)+xHelp.mm*scale}}",h="<%current=Math.abs(xStart)+xHelp.mm*scale%>",b=Math.abs(M)+e.mm*z,u=[t(0,0,"\ue600")],d=[t("i",{class:"rd-_assets_index_-iconfont rd-_designer_axis_-x-help-line-icon",title:(c=16,g="{{=i18n('@:{lang#axis.delete.line}')}}",h="<%=i18n('@:{lang#axis.delete.line}')%>",a(S("@:{lang#axis.delete.line}"))),"mx5-click":l+"\x1e@:{delete.help.line}({type:'x',id:'"+(c=16,g="{{=xHelp.id}}",h="<%=$eq(xHelp.id)%>",p(e.id))+"'})"},u)],u=[t(0,0,(c=17,g="{{=xHelp.mm}}",h="<%=xHelp.mm%>",a(e.mm)))],d.push(t("span",i,u),t("span",{class:"rd-_designer_axis_-x-help-line-move","mx5-mousedown":l+"\x1e@:{drag.help.line}({type:'x',id:'"+(c=18,g="{{=xHelp.id}}",h="<%=$eq(xHelp.id)%>",p(e.id))+"',c:"+(c=18,g="{{=current}}",h="<%=current%>",a(b))+"})",title:(c=18,g="{{=i18n('@:{lang#axis.move.line}')}}",h="<%=i18n('@:{lang#axis.move.line}')%>",a(S("@:{lang#axis.move.line}")))})),o=[t("div",{class:"rd-_designer_axis_-x-axis-help-line",style:"height:"+(c=15,g="{{=vHeight}}",h="<%=vHeight%>",a(R))+"px;left:"+(c=15,g="{{=current}}",h="<%=current%>",a(b))+"px"},d)],s.push(...o)}w.push(t("div",{class:"rd-_designer_axis_-x-axis-help",style:"left:-"+(c=12,g="{{=sLeft}}",h="<%=sLeft%>",a($))+"px",id:(c=12,g="{{=$viewId}}",l+"_x_help"),"mx5-contextmenu":l+"\x1e@:{prevent}()"},s)),u=[],c=26,g="{{for (let i=0;i<xStart;i+=step)}}",h="for(let i=0;i<xStart;i+=step){";for(let e=0;e<M;e+=H)f=[],c=27,g="{{if i}}",h="if(i){",e&&(_=[],c=28,g="{{temp=i/scale}}",h="<%temp=i/scale%>",c=29,g="{{if temp%space===0}}",h="if(temp%space===0){",(y=e/z)%I==0?(m=[t("rect",{width:"1",height:(c=30,g="{{=hbar}}",h="<%=hbar%>",a(T)),x:(c=30,g="{{=xStart-i}}",h="<%=xStart-i%>",a(M-e)),y:(c=30,g="{{=20-hbar-1}}",h="<%=20-hbar-1%>",a(20-T-1)),style:"fill:"+(c=30,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],x=[t(0,0,(c=31,g="{{=-temp}}",h="<%=-temp%>",a(-y)))],m.push(t("text",{x:(c=31,g="{{=xStart-i+2}}",h="<%=xStart-i+2%>",a(M-e+2)),y:"14",style:"font-size:10px;fill:#999"},x)),_.push(...m)):(m=[t("rect",{width:"1",height:(c=33,g="{{=bar}}",h="<%=bar%>",a(O)),x:(c=33,g="{{=xStart-i}}",h="<%=xStart-i%>",a(M-e)),y:(c=33,g="{{=20-bar-1}}",h="<%=20-bar-1%>",a(20-O-1)),style:"fill:"+(c=33,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],_.push(...m)),f.push(..._)),u.push(...f);c=37,g="{{for (let i=0;i<xEnd;i+=step)}}",h="for(let i=0;i<xEnd;i+=step){";for(let e=0;e<Y;e+=H)f=[],c=38,g="{{temp=i/scale}}",h="<%temp=i/scale%>",c=39,g="{{if temp%space===0}}",h="if(temp%space===0){",(y=e/z)%I==0?(_=[t("rect",{width:"1",height:(c=40,g="{{=hbar}}",h="<%=hbar%>",a(T)),x:(c=40,g="{{=xStart+i}}",h="<%=xStart+i%>",a(M+e)),y:(c=40,g="{{=20-hbar-1}}",h="<%=20-hbar-1%>",a(20-T-1)),style:"fill:"+(c=40,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],m=[t(0,0,(c=41,g="{{=temp}}",h="<%=temp%>",a(y)))],_.push(t("text",{x:(c=41,g="{{=xStart+i+2}}",h="<%=xStart+i+2%>",a(M+e+2)),y:"14",style:"font-size:10px;fill:#999"},m)),f.push(..._)):(_=[t("rect",{width:"1",height:(c=43,g="{{=bar}}",h="<%=bar%>",a(O)),x:(c=43,g="{{=xStart+i}}",h="<%=xStart+i%>",a(M+e)),y:(c=43,g="{{=20-bar-1}}",h="<%=20-bar-1%>",a(20-O-1)),style:"fill:"+(c=43,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],f.push(..._)),u.push(...f);d=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+(c=25,g="{{=width}}",h="<%=width%>",a(B))+" 19",style:"cursor:default;position:absolute;width:"+(c=25,g="{{=width}}",h="<%=width%>",a(B))+"px;height:19px"},u)],o=[t("div",{style:"width:"+(c=24,g="{{=width}}",h="<%=width%>",a(B))+"px;height:100%"},d)],s=[t("div",{class:"rd-_designer_axis_-axis-x",id:(c=23,g="{{=$viewId}}",l+"_x")},o)],d=[t(0,0,"-")],o=[t("span",{class:"rd-_designer_axis_-axis-x-tip",id:(c=50,g="{{=$viewId}}",l+"_x_tip")},d)],s.push(t("div",{class:"rd-_designer_axis_-axis-x-line",id:(c=49,g="{{=$viewId}}",l+"_x_line"),style:"height:"+(c=49,g="{{=vHeight+20}}",h="<%=vHeight+20%>",a(R+20))+"px"},o)),w.push(t("div",{"mx5-mousemove":l+"\x1e@:{show.x.line}()","mx5-mouseout":l+"\x1e@:{hide.x.line}()","mx5-click":l+"\x1e@:{add.x.help.line}()"},s)),u=[],c=57,g="{{for (let i=0;i<yStart;i+=step)}}",h="for(let i=0;i<yStart;i+=step){";for(let e=0;e<A;e+=H)f=[],c=58,g="{{if i}}",h="if(i){",e&&(_=[],c=59,g="{{temp=i/scale}}",h="<%temp=i/scale%>",c=60,g="{{if temp%space===0}}",h="if(temp%space===0){",(y=e/z)%I==0?(m=[t("rect",{width:(c=61,g="{{=hbar}}",h="<%=hbar%>",a(T)),height:"1",x:(c=61,g="{{=20-hbar}}",h="<%=20-hbar%>",a(20-T)),y:(c=61,g="{{=yStart-i}}",h="<%=yStart-i%>",a(A-e)),style:"fill:"+(c=61,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],x=[t(0,0,(c=62,g="{{=-temp}}",h="<%=-temp%>",a(-y)))],m.push(t("text",{x:"14",y:(c=62,g="{{=yStart-i+2}}",h="<%=yStart-i+2%>",a(A-e+2)),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+(c=62,g="{{=yStart-i}}",h="<%=yStart-i%>",a(A-e))+")"},x)),_.push(...m)):(m=[t("rect",{width:(c=64,g="{{=bar}}",h="<%=bar%>",a(O)),height:"1",x:(c=64,g="{{=20-bar}}",h="<%=20-bar%>",a(20-O)),y:(c=64,g="{{=yStart-i}}",h="<%=yStart-i%>",a(A-e)),style:"fill:"+(c=64,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],_.push(...m)),f.push(..._)),u.push(...f);c=68,g="{{for (let i=0;i<yEnd;i+=step)}}",h="for(let i=0;i<yEnd;i+=step){";for(let e=0;e<X;e+=H)f=[],c=69,g="{{temp=i/scale}}",h="<%temp=i/scale%>",c=70,g="{{if temp%space===0}}",h="if(temp%space===0){",(y=e/z)%I==0?(_=[t("rect",{width:(c=71,g="{{=hbar}}",h="<%=hbar%>",a(T)),height:"1",x:(c=71,g="{{=20-hbar}}",h="<%=20-hbar%>",a(20-T)),y:(c=71,g="{{=yStart+i}}",h="<%=yStart+i%>",a(A+e)),style:"fill:"+(c=71,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],m=[t(0,0,(c=72,g="{{=temp}}",h="<%=temp%>",a(y)))],_.push(t("text",{x:"14",y:(c=72,g="{{=yStart+i}}",h="<%=yStart+i%>",a(A+e)),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+(c=72,g="{{=yStart+i-2}}",h="<%=yStart+i-2%>",a(A+e-2))+")"},m)),f.push(..._)):(_=[t("rect",{width:(c=74,g="{{=bar}}",h="<%=bar%>",a(O)),height:"1",x:(c=74,g="{{=20-bar}}",h="<%=20-bar%>",a(20-O)),y:(c=74,g="{{=yStart+i}}",h="<%=yStart+i%>",a(A+e)),style:"fill:"+(c=74,g="{{=barColor}}",h="<%=barColor%>",a(F))},0,0,1)],f.push(..._)),u.push(...f);return d=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+(c=56,g="{{=height}}",h="<%=height%>",a(P)),style:"cursor:default;position:absolute;width:19px;height:"+(c=56,g="{{=height}}",h="<%=height%>",a(P))+"px"},u)],o=[t("div",{style:"height:"+(c=55,g="{{=height}}",h="<%=height%>",a(P))+"px"},d)],s=[t("div",{class:"rd-_designer_axis_-axis-y",style:"height:"+(c=54,g="{{=vHeight}}",h="<%=vHeight%>",a(R))+"px",id:(c=54,g="{{=$viewId}}",l+"_y")},o)],d=[t(0,0,"-")],o=[t("span",{class:"rd-_designer_axis_-axis-y-tip",id:(c=81,g="{{=$viewId}}",l+"_y_tip")},d)],s.push(t("div",{class:"rd-_designer_axis_-axis-y-line",id:(c=80,g="{{=$viewId}}",l+"_y_line"),style:"width:"+(c=80,g="{{=vWidth+20}}",h="<%=vWidth+20%>",a(j+20))+"px"},o)),w.push(t("div",{"mx5-mousemove":l+"\x1e@:{show.y.line}()","mx5-mouseout":l+"\x1e@:{hide.y.line}()","mx5-click":l+"\x1e@:{add.y.help.line}()"},s)),n?w.push(n):w.push(n=t("div",{_:"_",class:"rd-_designer_axis_-axis-corner"})),t(l,0,w)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+g+"\r\n\tat line: "+c,t+="\r\n\ttranslate to: "+h+"\r\n\tat file:designer/axis.html"}},init(e){let t=a.node(e.scroll);t.addEventListener("scroll",()=>{this["@:{sync.scroll}"]()},{passive:!0}),this["@:{scroll.node}"]=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let l=this["@:{throttle}"](this.render);a.State.on("@:{event#history.shift}",l),a.State.on("@:{event#stage.scale.change}",l),a.State.on("@:{event#stage.page.change}",l),a.State.on("@:{event#stage.elements.change}",l),a.State.on("@:{event#stage.select.element.props.change}",l),a.State.on("@:{event#stage.select.element.props.update}",l)},async"@:{rerender}"(){if(this["@:{can.render}"]){let e=this["@:{scroll.node}"],t=a.State.get("@:{stage.scale}"),l=Math.max(e.scrollWidth,window.innerWidth)+500,n=Math.max(e.scrollHeight,window.innerHeight)+300,r=0,i=0,s=20,o=0,d=0,g=10,c=10,h=a.node("stage_canvas"),u=a.node("stage_outer"),f=h.getBoundingClientRect(),_=u.getBoundingClientRect();i=l-(r=Math.round(f.left-_.left)+s),d=n-(o=Math.round(f.top-_.top)),g=e.offsetHeight,c=e.offsetWidth;let m=p[t],x=a.default.mark(this,"@{render}");await this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:l,scale:t,space:m.space,step:m.step,height:n,xStart:r,xEnd:i,yStart:o,vHeight:g,vWidth:c,yEnd:d}),x()&&(this["@:{x.axis}"]=a.node(this.id+"_x"),this["@:{y.axis}"]=a.node(this.id+"_y"),this["@:{x.line}"]=a.node(this.id+"_x_line"),this["@:{y.line}"]=a.node(this.id+"_y_line"),this["@:{x.line.tip}"]=a.node(this.id+"_x_tip"),this["@:{y.line.tip}"]=a.node(this.id+"_y_tip"),this["@:{x.axis.help}"]=a.node(this.id+"_x_help"),this["@:{y.axis.help}"]=a.node(this.id+"_y_help"))}},"@:{sync.scroll}"(){let e=this["@:{x.axis}"],t=this["@:{y.axis}"],l=this["@:{y.axis.help}"],n=this["@:{x.axis.help}"],r=this["@:{scroll.node}"],i=r.scrollTop,a=r.scrollLeft;e&&(e.scrollLeft=a),t&&(t.scrollTop=i),n&&(n.style.left=-a+"px"),l&&(l.style.top=-i+"px"),this.set({sLeft:a,sTop:i})},render(){this.set({xHelpers:a.State.get("@:{stage.x.help.lines}"),yHelpers:a.State.get("@:{stage.y.help.lines}")});let e=()=>{a.node("stage_canvas")?(this["@:{can.render}"]=1,this["@:{rerender}"]()):setTimeout(e,30)};setTimeout(e,0)},"@:{show.x.line}<mousemove>"(e){let t=this["@:{x.axis}"],l=e.pageX,n=this.get("xStart"),r=this["@:{x.line}"].style;r.display="block",r.left=l+"px";let i=l-n+t.scrollLeft,a=this.get("scale");this["@:{x.line.tip}"].innerHTML=(i/a).toFixed(0)},"@:{hide.x.line}<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||(this["@:{x.line}"].style.display="none")},"@:{show.y.line}<mousemove>"(e){let t=this.root.getBoundingClientRect(),l=e.pageY-t.top,n=this.get("yStart"),r=this["@:{y.axis}"],i=this["@:{y.line}"].style;i.display="block",i.top=l+"px";let a=l-n-20+r.scrollTop,s=this.get("scale");this["@:{y.line.tip}"].innerHTML=(a/s).toFixed(0)},"@:{hide.y.line}<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||(this["@:{y.line}"].style.display="none")},"@:{add.x.help.line}<click>"(e){let t=(e.pageX-this.get("xStart")+this["@:{x.axis}"].scrollLeft)/this.get("scale")|0,l=this.get("xHelpers");l.push({mm:t,id:a.default.guid("x_")}),this.digest({xHelpers:l}),d.default["@:{save}"]()},"@:{add.y.help.line}<click>"(e){let t=this.root.getBoundingClientRect(),l=(e.pageY-t.top-this.get("yStart")-20+this["@:{y.axis}"].scrollTop)/this.get("scale")|0,n=this.get("yHelpers");n.push({mm:l,id:a.default.guid("x_")}),this.digest({yHelpers:n}),d.default["@:{save}"]()},"@:{delete.help.line}<click>"(e){let{type:t,id:l}=e.params,n=t+"Helpers",r=this.get(n);for(let e=r.length;e--;){if(r[e].id==l){r.splice(e,1);break}}this.digest({[n]:r}),d.default["@:{save}"]()},"@:{drag.help.line}<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:l,id:n,c:r}=e.params,i=l+"Helpers",a=this.get(i);for(let e of a)if(e.id==n){t=e;break}if(t){let n=this.get(l+"Start"),s=0;this["@:{drag.drop}"](e,d=>{let p;s||(s=1,o.default["@:{show}"](e.eventTarget)),p="x"==l?d.pageX-e.pageX+r:d.pageY-e.pageY+r-20,t.mm=(p-n)/this.get("scale")|0,this.digest({[i]:a})},()=>{s&&(o.default["@:{hide}"](),d.default["@:{save}"]())})}},"@:{prevent}<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){setTimeout(()=>{this["@:{rerender}"]()},0)}});t.default=g.merge(s.default)}),define("designer/const",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"@:{history.max.count}":50,"@:{stage.scale}":1,"@:{page.width}":1280,"@:{page.height}":800}}),define("designer/content",["magix"],(e,t,l)=>{let n={class:"rd-_gallery_mx-style_index_-dialog-header"},r={class:"rd-_gallery_mx-style_index_-dialog-body",style:"word-break:break-all"},i={value:"value"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("rd-_designer_content_",".rd-_designer_content_-content-area {\nwidth:100%;\nheight:500px;\n}\n"),t.default=a.default.View.extend({tmpl:(e,t,l,a)=>{let s,o,d;try{let p,g,c=[],{i18n:h,body:u}=e;return g=[t(0,0,(o=2,s="{{=i18n('@:{lang#save.content.title}')}}",d="<%=i18n('@:{lang#save.content.title}')%>",a(h("@:{lang#save.content.title}"))))],p=[t("h5",0,g)],c.push(t("div",n,p)),p=[t("textarea",{class:"rd-_designer_content_-content-area rd-_gallery_mx-style_index_-textarea",value:(o=5,s="{{=body}}",d="<%=body%>",a(u))},0,i)],c.push(t("div",r,p)),t(l,0,c)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+s+"\r\n\tat line: "+o,t+="\r\n\ttranslate to: "+d+"\r\n\tat file:designer/content.html"}},render(){let e=a.State.get("@:{stage.elements}"),t=a.State.get("@:{stage.page}"),l=[];for(let t of e){let e={type:t.type,props:{}};for(let l of t.ctrl.props)l.json&&(l.read?e.props[l.key]=l.read(t.props[l.key]):e.props[l.key]=t.props[l.key]);l.push(e)}let n={page:t,elements:l};this.digest({body:JSON.stringify(n,null,4)})}})}),define("designer/contextmenu",["magix","../i18n/index"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("../i18n/index");let i={spliter:!0},a={id:0,text:"@:{lang#menu.select.all}",short:" (Ctrl+A)"},s={id:1,text:"@:{lang#menu.copy}",short:" (Ctrl+C)"},o={id:14,text:"@:{lang#menu.cut}",short:" (Ctrl+X)"},d={id:2,text:"@:{lang#menu.paste}",short:" (Ctrl+V)"},p={id:5,text:"@:{lang#menu.move.up}"},g={id:6,text:"@:{lang#menu.move.down}"},c={id:3,text:"@:{lang#menu.to.top}"},h={id:4,text:"@:{lang#menu.to.bottom}"},u={id:7,text:"@:{lang#menu.delete}",short:" (Delete)"},f={},_=e=>t=>{e["@:{menu@u.id}"]||(e["@:{menu@u.id}"]=n.default.guid("_m"));let l=t+e["@:{menu@u.id}"];if(!f[l]){let t=[];for(let l of e)l.spliter?t.push(l):t.push({id:l.id,text:r.default(l.text)+(l.short||"")});f[l]=t}return f[l]};t.default={allId:a.id,pasteId:d.id,topId:c.id,upId:p.id,bottomId:h.id,downId:g.id,cutId:o.id,copyId:s.id,deleteId:u.id,singleElement:_([s,o,u,i,p,c,i,g,h]),multipleElement:_([s,o,u]),stage:_([a,d])}}),define("designer/header",["magix","../elements/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-dialog/index"],(e,t,l)=>{let n,r,i,a,s,o,d,p,g,c,h,u,f={class:"rd-_assets_index_-m-center rd-_gallery_mx-style_index_-fl"},_={class:"rd-_assets_index_-m-center rd-_assets_index_-ml100 rd-_gallery_mx-style_index_-fl rd-_gallery_mx-style_index_-unselectable"},m={class:"rd-_designer_header_-header-item rd-_designer_header_-header-item-has-subs rd-_gallery_mx-style_index_-pr"},x={class:"rd-_assets_index_-iconfont rd-_designer_header_-header-item-icon"},y={class:"rd-_designer_header_-header-item-text"},b={class:"rd-_designer_header_-header-item-more"},w={class:"rd-_assets_index_-m-center rd-_assets_index_-mr30 rd-_gallery_mx-style_index_-fr rd-_gallery_mx-style_index_-unselectable"};Object.defineProperty(t,"__esModule",{value:!0});const v=e("magix"),k=e("../elements/index"),A=e("../gallery/mx-dragdrop/index"),z=e("../gallery/mx-pointer/select"),j=e("../gallery/mx-pointer/cursor"),S=e("../gallery/mx-dialog/index");v.default.applyStyle("rd-_designer_header_","\n.rd-_designer_header_-header-item,\n.rd-_designer_header_-sub-item {\nwidth:50px;\nheight:40px;\ndisplay:grid;\ngrid-template-rows:20px 20px;\njustify-items:center;\nalign-items:center;\ncursor:pointer;\nmargin:0 2px;\n}\n.rd-_designer_header_-header-item-has-subs {\ngrid-template-columns:40px 10px;\n}\n.rd-_designer_header_-sub-item {\nfloat:left;\nborder-radius:2px;\n}\n.rd-_designer_header_-sub-item:hover {\nbackground:#bd361b;\n}\n.rd-_designer_header_-header-item-more {\ndisplay:none;\nposition:absolute;\ncursor:default;\ntop:100%;\nleft:0;\nbackground:#e64e30;\nwidth:264px;\npadding:4px;\n}\n.rd-_designer_header_-header-item:hover {\nbackground:#e64e30;\n}\n.rd-_designer_header_-header-item:hover .rd-_designer_header_-header-item-more {\ndisplay:block;\n}\n.rd-_designer_header_-header-item-icon {\ngrid-column:1/2;\ngrid-row:1/2;\nalign-self:flex-end;\n}\n.rd-_designer_header_-header-item-text {\nfont-size:12px;\nfont-weight:normal;\nline-height:12px;\ngrid-column:1/2;\ngrid-row:2/3;\n}\n.rd-_designer_header_-header-item-arrow {\nfont-size:10px;\nmargin-left:-10px;\ngrid-row:1/3;\ngrid-column:2/3;\n}\n.rd-_designer_header_-header-item-spliter {\nheight:30px;\nwidth:1px;\nbackground:-webkit-gradient(linear, left top, left bottom, from(#fff4), color-stop(0.3, #fff), color-stop(0.7, #fff), to(#fff4));\nmargin:2px 12px;\nfloat:left;\n}\n");let $=["requestFullscreen","webkitRequestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],q=v.default.View.extend({tmpl:(e,t,l,v,k,A,z)=>{let j,S,$;try{let k,q,M,R,B,H,I,T,F,O=[],{i18n:Y,elements:P}=e;n?k=[n]:(q=[t(0,0,"\ue679")],k=[n=t("i",{_:"_",class:"rd-_assets_index_-iconfont rd-_gallery_mx-style_index_-mr10"},q)]),k.push(t(0,0,(S=3,j="{{=i18n('@:{lang#site.name}')}}",$="<%=i18n('@:{lang#site.name}')%>",v(Y("@:{lang#site.name}"))+"\u2122"))),O.push(t("div",f,k)),k=[],S=6,j="{{each elements as e}}",$="for(let $q_c_vkjodggsm=elements.length,$q_key_rvlpvbuk=0;$q_key_rvlpvbuk<$q_c_vkjodggsm;$q_key_rvlpvbuk++){let e=elements[$q_key_rvlpvbuk];";for(let e=P.length,n=0;n<e;n+=1){let e=P[n];if(q=[],S=7,j="{{if e.spliter}}",$="if(e.spliter){",e.spliter)M=r?[r]:[r=t("div",{_:"a",class:"rd-_designer_header_-header-item-spliter"})],q.push(...M);else{if(M=[],S=10,j="{{if e.subs}}",$="if(e.subs){",e.subs){H=[t(0,1,(S=12,j="{{=e.icon}}",$="<%=e.icon%>",v(e.icon)))],B=[t("i",x,H)],H=[t(0,0,(S=13,j="{{=i18n(e.title)}}",$="<%=i18n(e.title)%>",v(Y(e.title))))],B.push(t("b",y,H)),i?B.push(i):(H=[t(0,0,"\ue73a")],B.push(i=t("i",{_:"b",class:"rd-_assets_index_-iconfont rd-_designer_header_-header-item-arrow"},H))),H=[],S=16,j="{{each e.subs as es}}",$="for(let $q_a_zcedijdl=e.subs,$q_c_xlnpehti=$q_a_zcedijdl.length,$q_key_xkhrfmg=0;$q_key_xkhrfmg<$q_c_xlnpehti;$q_key_xkhrfmg++){let es=$q_a_zcedijdl[$q_key_xkhrfmg];";for(let r=e.subs,i=r.length,a=0;a<i;a+=1){let e=r[a];F=[t(0,1,(S=18,j="{{=es.icon}}",$="<%=es.icon%>",v(e.icon)))],T=[t("i",x,F)],F=[t(0,0,(S=19,j="{{=i18n(es.title)}}",$="<%=i18n(es.title)%>",v(Y(e.title))))],T.push(t("b",y,F)),I=[t("div",{class:"rd-_designer_header_-sub-item","mx5-mousedown":l+"\x1e@:{add.element}({ctrl:'"+(S=17,j="{{#es}}",$="<%#es,'\x1eelements.'+($q_key_rvlpvbuk)+'.subs.'+($q_key_xkhrfmg)%>",z(A,e,"\x1eelements."+n+".subs."+a))+"',hide:true})"},T)],H.push(...I)}B.push(t("div",b,H)),R=[t("div",m,B)],M.push(...R)}else H=[t(0,1,(S=26,j="{{=e.icon}}",$="<%=e.icon%>",v(e.icon)))],B=[t("i",x,H)],H=[t(0,0,(S=27,j="{{=i18n(e.title)}}",$="<%=i18n(e.title)%>",v(Y(e.title))))],B.push(t("b",y,H)),R=[t("div",{class:"rd-_designer_header_-header-item rd-_gallery_mx-style_index_-pr","mx5-mousedown":l+"\x1e@:{add.element}({ctrl:'"+(S=25,j="{{#e}}",$="<%#e,'\x1eelements.'+($q_key_rvlpvbuk)%>",z(A,e,"\x1eelements."+n))+"'})"},B)],M.push(...R);q.push(...M)}k.push(...q)}return O.push(t("div",_,k)),a?k=[a]:(q=[t(0,0,"\u8054\u7cfbQQ:84685009")],k=[a=t("div",{_:"c",style:"font-size:14px;margin-right:20px"},q)]),s?q=[s]:(M=[t(0,0,"\ue72e")],q=[s=t("i",{_:"d",class:"rd-_assets_index_-iconfont"},M)]),o?q.push(o):(M=[t(0,0,"\u5927\u5c4f")],q.push(o=t("b",{_:"e",class:"rd-_designer_header_-header-item-text"},M))),k.push(t("div",{class:"rd-_designer_header_-header-item","mx5-click":l+"\x1e@:{preview}()"},q)),d?q=[d]:(M=[t(0,0,"\ue6b0")],q=[d=t("i",{_:"f",class:"rd-_assets_index_-iconfont"},M)]),p?q.push(p):(M=[t(0,0,"\u4fdd\u5b58")],q.push(p=t("b",{_:"g",class:"rd-_designer_header_-header-item-text"},M))),k.push(t("div",{class:"rd-_designer_header_-header-item","mx5-click":l+"\x1e@:{save}()"},q)),g?q=[g]:(M=[t(0,0,"\ue764")],q=[g=t("i",{_:"h",class:"rd-_assets_index_-iconfont"},M)]),c?q.push(c):(M=[t(0,0,"\u5c55\u793a")],q.push(c=t("b",{_:"i",class:"rd-_designer_header_-header-item-text"},M))),k.push(t("div",{class:"rd-_designer_header_-header-item","mx5-click":l+"\x1e@:{display}()"},q)),h?q=[h]:(M=[t(0,0,"\ue70f")],q=[h=t("i",{_:"j",class:"rd-_assets_index_-iconfont"},M)]),u?q.push(u):(M=[t(0,0,"\u6253\u5370")],q.push(u=t("b",{_:"k",class:"rd-_designer_header_-header-item-text"},M))),k.push(t("div",{class:"rd-_designer_header_-header-item","mx5-click":l+"\x1e@:{print}()"},q)),O.push(t("div",w,k)),t(l,0,O)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+j+"\r\n\tat line: "+S,t+="\r\n\ttranslate to: "+$+"\r\n\tat file:designer/header.html"}},render(){this.digest({elements:k.default["@:{element.list}"]()})},"@:{add.element}<mousedown>"(e){let{ctrl:t,hide:l}=e.params,n=e.eventTarget.parentNode,r=!1,i=null;v.State.set({"@:{memory.cache.element.ctrl}":t});let a=t.getProps(0,0),{width:s,height:o}=a,d=v.State.get("@:{stage.scale}");s*=d,o*=d,z.default["@:{init}"](),j.default["@:{root.show.by.type}"]("move"),this["@:{drag.drop}"](e,e=>{r||l&&(n.style.display="none"),v.State.fire("@:{event#toolbox.drag.element.move}",{width:s,height:o,node:A.default["@:{from.point}"](e.clientX,e.clientY),pageX:e.pageX-s/2,pageY:e.pageY-o/2}),r=!0},e=>{l&&(n.style.display=""),z.default["@:{hide}"](),j.default["@:{root.hide}"](),r?e&&(i=A.default["@:{from.point}"](e.clientX,e.clientY),v.State.fire("@:{event#toolbox.drag.element.drop}",{node:i,pageX:e.pageX-s/2,pageY:e.pageY-o/2})):v.State.fire("@:{event#toolbox.add.element}",{pageX:50*Math.random()|0,pageY:50*Math.random()|0})})},"@:{preview}<click>"(){let e=v.node("stage_outer");for(let t of $)if(e[t]){e[t]();break}},"@:{save}<click>"(){this.mxDialog("designer/content",{width:800})},"@:{display}<click>"(){window.open("./display.html")},"@:{print}<click>"(){window.open("./print.html")},"$doc<webkitfullscreenchange,mozfullscreenchange,fullscreenchange>"(e){let t=document,l=t.fullscreenElement||t.webkitCurrentFullScreenElement||t.mozFullScreenElement||null;v.State.fire("@:{event#preview}",{fullscreen:!0,full:!!l})}});t.default=q.merge(S.default,A.default)}),define("designer/history",["magix","./const"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("./const");let i=[],a=[],s=null,o=-1,d="",p=null,g=()=>JSON.stringify({page:n.State.get("@:{stage.page}"),scale:n.State.get("@:{stage.scale}"),elements:n.State.get("@:{stage.elements}"),select:n.State.get("@:{stage.select.elements}"),xLines:n.State.get("@:{stage.x.help.lines}"),yLines:n.State.get("@:{stage.y.help.lines}")}),c=e=>{let t=JSON.parse(e),l=n.State.get("@:{stage.scale}"),r=t.scale||l;n.State.fire("@:{event#history.shift}",{json:t,scale:l!==r})};t.default={"@:{save.default}"(){p||(p=g())},"@:{query.status}":()=>({canRedo:a.length,canUndo:i.length}),"@:{clear}"(){i.length=0,a.length=0},"@:{undo}"(){if(i.length>0){let e=i.pop();a.push(e);let t=i[i.length-1]||p;c(t)}},"@:{redo}"(){let e=a.pop();e&&(i.push(e),c(e))},"@:{save}"(e="_save",t=0){let l=g();e!=d&&(s&&(i.push(s),s=null),d=e),a.length=0;let c=e=>{i.push(e),i.length>r.default["@:{history.max.count}"]&&(p=i.shift()),n.State.fire("@:{event#history.status.change}")};t?(s=l,clearTimeout(o),o=setTimeout(()=>{c(s),s=null},t)):c(l)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./header","./toolbar","./axis","./stage"],(e,t,l)=>{let n;e("./header"),e("./toolbar"),e("./axis"),e("./stage"),Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("../elements/index"),a=e("../gallery/mx-dialog/index"),s=e("./const"),o=e("./history"),d=e("../panels/index");let p=i.default["@:{get.page}"]();r.default.applyStyle("rd-_designer_index_","\n.rd-_designer_index_-header {\nbackground:#FA742B;\nheight:40px;\nline-height:40px;\nfont-size:16px;\npadding:0 10px;\ncolor:#fff;\nposition:relative;\nz-index:202;\n}\n.rd-_designer_index_-toolbar {\npadding:0 26px;\nbackground:#fafafa;\ncolor:#333;\nheight:26px;\nposition:relative;\nz-index:201;\nborder-bottom:solid 1px #eee;\n}\n.rd-_designer_index_-stage {\nwidth:calc(100% - 20px);\noverflow:scroll;\nheight:calc(100% - 85px);\nbackground-color:#edeef3;\ntransition:all 0.3s;\nmargin-left:20px;\n-webkit-overflow-scrolling:touch;\n}\n.rd-_designer_index_-stage-deactive {\nbox-shadow:inset 1px 1px 6px 2px #dadada;\n}\n");t.default=r.default.View.extend({tmpl:(e,t,l)=>{try{if(!n){let e=[];e.push(t("div",{"mx5-view":"designer/header",class:"rd-_designer_index_-header"}),t("div",{"mx5-view":"designer/toolbar",class:"rd-_designer_index_-toolbar rd-_gallery_mx-style_index_-unselectable"}),t("div",{"mx5-view":"designer/axis?scroll=stage",class:"rd-_gallery_mx-style_index_-pr rd-_gallery_mx-style_index_-unselectable"}),t("div",{"mx5-view":"designer/stage",id:"stage",class:"rd-_designer_index_-stage rd-_designer_index_-stage-deactive rd-_gallery_mx-style_index_-scrollable"})),n=t(l,0,e)}return n}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: undefined\r\n\tat line: "+void 0,t+="\r\n\ttranslate to: undefined\r\n\tat file:designer/index.html"}},init(){r.State.on("@:{event#history.shift}",e=>{(e=>{let t=r.State.get("@:{stage.page}"),l=r.State.get("@:{stage.elements}"),n=r.State.get("@:{stage.select.elements}"),a=r.State.get("@:{stage.x.help.lines}"),s=r.State.get("@:{stage.y.help.lines}"),{elements:o,map:d}=i.default["@:{by.json}"](e.elements);l.length=0,l.push(...o),a.length=0,e.xLines&&a.push(...e.xLines),s.length=0,e.yLines&&s.push(...e.yLines);let p={};if(n.length=0,e.select)for(let t of e.select){let e=d[t.id];e&&(p[e.id]=1,n.push(e))}Object.assign(t,e.page),r.State.set({"@:{stage.scale}":e.scale||1,"@:{stage.select.elements.map}":p})})(e.json)}),r.State.set({"@:{stage.page.ctrl}":p,"@:{stage.page}":p.getProps(),"@:{stage.scale}":s.default["@:{stage.scale}"],"@:{stage.elements}":[],"@:{stage.select.elements}":[],"@:{stage.select.elements.map}":{},"@:{stage.x.help.lines}":[],"@:{stage.y.help.lines}":[]}),o.default["@:{save.default}"]()},async render(){let e=r.default.mark(this,"@{render}");await this.digest(),e()&&d.default["@:{open.panels}"]()},"$doc<dragover>"(e){e.preventDefault()}}).merge(a.default)}),define("designer/keys",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:46,BACKSPACE:8,TAB:9,C:67,V:86,A:65,N:78,X:88,Z:90,Y:89}}),define("designer/props",[],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"@:{number}":2,"@:{color}":4,"@:{spliter}":8,"@:{boolean}":16,"@:{font.style}":32,"@:{font.align}":64,"@:{text.area}":128,"@:{image}":256,"@:{dropdown}":512,"@:{image.reset}":1024,"@:{text.input}":2048,"@:{bind.field}":4096,"@:{column.width}":8192,"@:{label}":16384}}),define("designer/service",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");let r=n.default.Service.extend((e,t)=>{let l=e.get("method")||"GET";fetch(e.get("url"),{method:l,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(l=>{e.set("data",l.data),t()}).catch(e=>{t({msg:e.message})})});r.add([{name:"@:{get.images}",url:n.default.config("getImageUrl"),cache:18e5},{name:"@:{get.fields}",url:n.default.config("getFieldUrl"),cache:18e5},{name:"@:{get.by.url}",cache:18e5}]),t.default={fetch:(e,t)=>(new r).all(e,t),save:(e,t)=>(new r).save(e,t)}}),define("designer/stage-clipboard",["magix","./stage-elements","./stage-select"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("./stage-elements"),i=e("./stage-select");let a=e=>{if(Array.isArray(e)){let t=[];for(let l of e)t.push(a(l));e=t}else if("Object"==n.default.type(e)){let t={};for(let l in e)t[l]=a(e[l]);e=t}return e};t.default={"@:{has.elements}"(){return(this["@:{copy.list}"]||[]).length},"@:{get.copy.list}"(){return this["@:{copy.list}"]||[]},"@:{copy.elements}"(){let e=[],t=n.State.get("@:{stage.select.elements}");for(let l of t)e.push(l);this["@:{copy.list}"]=e},"@:{cut.elements}"(){let e=n.State.get("@:{stage.select.elements}");1==e.length&&e[0].props.locked||(this["@:{copy.elements}"](),this["@:{is.cut}"]=!0)},"@:{paste.elements}"(e){let t=this,l=t["@:{copy.list}"],s=n.State.get("@:{stage.elements}"),o=!1;if(l){o=!0;let d=[],p=0,g=0,c=0,h=e=>{for(let t of s)if(t.props.x==e.x&&t.props.y==e.y)return 1;return 0},u=({props:t,ctrl:l})=>{if(0===p)if(e)g=e.x-t.x,c=e.y-t.y;else{let e={x:t.x,y:t.y};for(;h(e);)e.x+=20,e.y+=20;for(e.x+t.width<0&&(e.x=-t.width/2),e.y+t.height<0&&(e.y=-t.height/2);h(e);)e.x-=4,e.y-=4;g=e.x-t.x,c=e.y-t.y}for(let e of l.moved)t[e.key]=t[e.key]+("x"==e.use?g:c);t.locked=!1};for(let e of l){let l=a(e);u(l),p++,l.id=n.default.guid("e_"),s.push(l),d.push(l),t["@:{is.cut}"]&&r.default["@:{delete.element.by.id}"](e.id,!0)}t["@:{is.cut}"]&&(delete t["@:{is.cut}"],delete t["@:{copy.list}"]),n.State.fire("@:{event#stage.elements.change}"),i.default["@:{set.all}"](d)}return o}}}),define("designer/stage-elements",["magix","./stage-select","./history","../gallery/mx-pointer/cursor","../util/transform"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("./stage-select"),i=e("./history"),a=e("../gallery/mx-pointer/cursor"),s=e("../util/transform");let o=(e,t)=>{let l=e.start,n=e.end,r=t.start,i=t.end,a=((n.x-l.x)*(r.y-l.y)-(n.y-l.y)*(r.x-l.x))*((n.x-l.x)*(i.y-l.y)-(n.y-l.y)*(i.x-l.x)),s=((i.x-r.x)*(l.y-r.y)-(i.y-r.y)*(l.x-r.x))*((i.x-r.x)*(n.y-r.y)-(i.y-r.y)*(n.x-r.x));return a<0&&s<0};t.default={"@:{add.element}"(e,t){let l=n.State.get("@:{memory.cache.element.ctrl}");if(l){let i=n.State.get("@:{stage.elements}"),a=l.getProps(e.pageX,e.pageY),s=n.State.get("@:{stage.scale}"),o={};for(let e of l.scales)"Function"==n.default.type(e)?e(a,s,o):o[e]=a[e]*s;let d=o.x-a.x,p=o.y-a.y;for(let e of l.moved)"x"==e.use?o[e.key]-=d:o[e.key]-=p;for(let e in o)a[e]=o[e];let g={id:n.default.guid("e_"),ctrl:l,type:l.type,props:a};return i.push(g),t&&r.default["@:{set}"](g),i}},"@:{multi.select}"(e,t){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!t.props.locked){let e=n.State.get("@:{stage.select.elements}"),l=!1;for(let n=e.length;n--;){let r=e[n];r.id==t.id&&(l=!0),r.props.locked&&e.splice(n,1)}if(l&&e.length>1)return void(r.default["@:{remove}"](t)&&i.default["@:{save}"]());r.default["@:{add}"](t)&&i.default["@:{save}"]()}}else r.default["@:{set}"](t)&&i.default["@:{save}"]()},"@:{select.or.move.elements}"(e,t){let{element:l}=e.params,s=n.State.get("@:{stage.select.elements}");if(void 0===e.button||0==e.button)if(e.shiftKey||e.ctrlKey||e.metaKey)this["@:{multi.select}"](e,l);else{a.default["@:{show.by.type}"]("move");let o=[],d=!1;for(let{id:e,ctrl:t,props:n}of s){l.id==e&&(d=!0);let r={};for(let e of t.moved)r[e.key]=n[e.key];o.push(r)}if(!d){r.default["@:{set}"](l)&&i.default["@:{save}"](),o.length=0;let e={};for(let t of l.ctrl.moved)e[t.key]=l.props[t.key];o.push(e),s.length=0,s.push(l)}let p=!1;n.State.fire("@:{event#stage.toggle.scroll}",{show:1}),t["@:{drag.drop}"](e,t=>{let l=t.pageX-e.pageX,r=t.pageY-e.pageY,i=0;for(let e of s){let t=o[i++];if(!e.props.locked){p=!0;for(let n of e.ctrl.moved)e.props[n.key]=t[n.key]+("x"==n.use?l:r);let i=n.Vframe.byNode(n.node(e.id));i&&i.invoke("assign",[{element:e}])&&i.invoke("render")}}n.State.fire("@:{event#stage.select.element.props.change}")},()=>{p&&i.default["@:{save}"](),a.default["@:{hide}"](),n.State.fire("@:{event#stage.toggle.scroll}")})}else{let e=!1;for(let t of s)if(t.id===l.id){e=!0;break}e||r.default["@:{set}"](l)&&i.default["@:{save}"]()}},"@:{delete.select.elements}"(){let e=n.State.get("@:{stage.select.elements}"),t=n.State.get("@:{stage.elements}"),l=!1;if(e.length){let i=n.toMap(e,"id");for(let e=t.length;e--;)i[t[e].id]&&(l=!0,t.splice(e,1));l&&r.default["@:{set}"]()}return l},"@:{get.elements.location}"(){let e,t,l=n.State.get("@:{stage.elements}"),r=[];for(let n of l){if((e=n.props).locked)continue;t=e.rotate||0;let l={x:e.x,y:e.y,width:e.width,height:e.height},i=s.default["@:{rotate.rect}"](l,t),a=i.point[0],o=i.point[2],d=i.point[6],p=i.point[4],g=a,c=a,h=a,u=a;for(let e of[o,d,p])e.x<g.x&&(g=e),e.x>h.x&&(h=e),e.y<c.y&&(c=e),e.y>u.y&&(u=e);r.push({element:n,left:g,top:c,right:h,bottom:u,points:[a,o,d,p],lines:[{start:a,end:o},{start:o,end:p},{start:p,end:d},{start:d,end:a}]})}return r},"@:{get.intersect.elements}"(e,t,l){let n,r=[],i=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}];for(let a of e)if(n=!1,l&&l[a.element.id])l&&r.push(a.element);else{for(let e of a.points)if(e.x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height){r.push(a.element),n=!0;break}if(!n)for(let e of a.lines){for(let t of i)if(o(e,t)){n=!0,r.push(a.element);break}if(n)break}}return r},"@:{delete.element.by.id}"(e,t){let l=n.State.get("@:{stage.elements}");for(let t=l.length;t--;){e==l[t].id&&l.splice(t,1)}t||r.default["@:{set.all}"]()},"@:{select.all}"(){let e=n.State.get("@:{stage.select.elements.map}"),t=n.State.get("@:{stage.elements}"),l=[];for(let e of t)e.props.locked||l.push(e);r.default["@:{set.all}"](l),r.default["@:{has.changed}"](e)&&i.default["@:{save}"]()},"@:{move.element}"(e,t){let l=n.State.get("@:{stage.elements}"),r=-1;for(let e=l.length;e--;){if(l[e].id===t.id){l.splice(r=e,1);break}}return 3==e?l.push(t):4==e?l.unshift(t):5==e?l.splice(r+1,0,t):6==e&&(0===r&&(r=1),l.splice(r-1,0,t)),!0},"@:{handle.key.tab}"(e){let t=n.State.get("@:{stage.select.elements}"),l=n.State.get("@:{stage.elements}"),i=t.length,a=t[0];if(0===i||i>1)a=l[e.shiftKey?0:l.length-1],r.default["@:{set}"](a);else{let t,n;for(let e=l.length;e--;){let r=l[e];if(r.id==a.id){t=l[e-1];break}n=r}let i=null;e.shiftKey?(t||(t=l[l.length-1]),i=t):(n||(n=l[0]),i=n),i.id!=a.id&&r.default["@:{set}"](i)}}}}),define("designer/stage-select",["magix"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix");t.default={"@:{set}"(e){let t=n.State.get("@:{stage.select.elements}"),l=t.length;if(l||e){let r=l>1?null:t[0];t.length=0;let i=!1;if(e?(t.push(e),i=e!=r):l&&(i=!0),i)return n.State.set({"@:{stage.select.elements.map}":n.toMap(t,"id")}),n.State.fire("@:{event#stage.select.elements.change}"),!0}},"@:{add}"(e){let t=n.State.get("@:{stage.select.elements}"),l=!1;for(let n of t)if(n.id===e.id){l=!0;break}if(!l)return t.push(e),n.State.set({"@:{stage.select.elements.map}":n.toMap(t,"id")}),n.State.fire("@:{event#stage.select.elements.change}"),!0},"@:{remove}"(e){let t=n.State.get("@:{stage.select.elements}"),l=!1,r=-1;for(let n of t)if(r++,n.id===e.id){l=!0;break}if(l)return t.splice(r,1),n.State.set({"@:{stage.select.elements.map}":n.toMap(t,"id")}),n.State.fire("@:{event#stage.select.elements.change}"),!0},"@:{set.all}"(e){let t=n.State.get("@:{stage.select.elements}");t.length=0,e&&t.push.apply(t,e),n.State.set({"@:{stage.select.elements.map}":n.toMap(t,"id")}),n.State.fire("@:{event#stage.select.elements.change}")},"@:{has.changed}"(e){let t=n.State.get("@:{stage.select.elements.map}"),l=0;for(let n in e)if(!t[n]){l=1;break}if(!l)for(let n in t)if(!e[n]){l=1;break}return l}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-select","./stage-clipboard","../util/converter","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-menu/index","./contextmenu"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("../gallery/mx-dragdrop/index"),i=e("./history"),a=e("./keys"),s=e("./stage-elements"),o=e("./stage-select"),d=e("./stage-clipboard"),p=e("../util/converter"),g=e("../gallery/mx-pointer/select"),c=e("../gallery/mx-pointer/cursor"),h=e("../gallery/mx-menu/index"),u=e("./contextmenu");n.default.applyStyle("rd-_designer_stage_",".rd-_designer_stage_-stage-outer {\noutline:0;\ndisplay:flex;\nposition:relative;\n}\n.rd-_designer_stage_-stage-workaround {\npadding:50px 240px 50px 120px;\n}\n.rd-_designer_stage_-fullscreen .rd-_designer_stage_-stage-workaround {\npadding:0;\n}\n.rd-_designer_stage_-stage-canvas {\nbackground:#fff;\nbox-shadow:0 3px 6px 0 rgba(0, 0, 0, 0.3);\n}\n"),t.default=n.default.View.extend({tmpl:(e,t,l,n,r,i,a)=>{let s,o,d;try{let r,p,g,c,h,u,f=[],{fullscreen:_,rx:m,ry:x,marginTop:y,marginLeft:b,page:w,scale:v,elements:k}=e;h=[],o=4,s="{{each elements as e}}",d="for(let $q_c_pfsrvrcbci=elements.length,$q_key_kweays=0;$q_key_kweays<$q_c_pfsrvrcbci;$q_key_kweays++){let e=elements[$q_key_kweays];";for(let e=k.length,r=0;r<e;r+=1){let e=k[r];u=[t("div",{$:"elements,scale,fullscreen",id:(o=5,s="{{=e.id}}",d="<%=e.id%>",n(e.id)),"mx5-view":"elements/"+(o=5,s="{{=e.type}}",d="<%=e.type%>",n(e.type))+"/designer?element="+(o=5,s="{{#e}}",d="<%#e,'\x1eelements.'+($q_key_kweays)%>",a(i,e,"\x1eelements."+r))+"&scale="+(o=5,s="{{#scale}}",d="<%#scale,'\x1escale'%>",a(i,v,"\x1escale"))+"&fullscreen="+(o=5,s="{{#fullscreen}}",d="<%#fullscreen,'\x1efullscreen'%>",a(i,_,"\x1efullscreen")),"mx5-mousedown":l+"\x1e@:{element.start.drag}({element:'"+(o=5,s="{{#e}}",d="<%#e,'\x1eelements.'+($q_key_kweays)%>",a(i,e,"\x1eelements."+r))+"'})"})],h.push(...u)}return c="width:"+(o=3,s="{{=page.width*scale}}",d="<%=page.width*scale%>",n(w.width*v))+"px;height:"+(o=3,s="{{=page.height*scale}}",d="<%=page.height*scale%>",n(w.height*v))+"px;background:"+(o=3,s="{{=page.background}}",d="<%=page.background%>",n(w.background))+";"+(o=3,s="{{if page.backgroundImage}}",""),d="<%if(page.backgroundImage){%>",w.backgroundImage&&(c+="background-image:url("+(o=3,s="{{=page.backgroundImage}}",d="<%=page.backgroundImage%>",n(w.backgroundImage))+");background-repeat:"+(o=3,s="{{=page.backgroundRepeat=='full'?'no-repeat':page.backgroundRepeat}}",d="<%=page.backgroundRepeat=='full'?'no-repeat':page.backgroundRepeat%>",n("full"==w.backgroundRepeat?"no-repeat":w.backgroundRepeat))+";background-size:"+(o=3,s="{{if page.backgroundRepeat=='full'}}",""),d="<%if(page.backgroundRepeat=='full'){%>","full"==w.backgroundRepeat?(c+="100% 100%"+(o=3,s="{{else}}",""),d="<%}else{%>"):(c+=(o=3,s="{{=page.backgroundWidth*scale}}",d="<%=page.backgroundWidth*scale%>",n(w.backgroundWidth*v)+"px "+(o=3,s="{{=page.backgroundHeight*scale}}",d="<%=page.backgroundHeight*scale%>",n(w.backgroundHeight*v))+"px;background-position:"+(o=3,s="{{=page.hor}}",d="<%=page.hor%>",n(w.hor))+"% "+(o=3,s="{{=page.ver}}",d="<%=page.ver%>",n(w.ver))+"%"+(o=3,s="{{/if}}","")),d="<%}%>"),c+=(o=3,s="{{/if}}",""),d="<%}%>"),g=[t("div",{class:"rd-_designer_stage_-stage-canvas rd-_gallery_mx-style_index_-pr",id:"stage_canvas",style:c},h)],p=[t("div",{class:"rd-_designer_stage_-stage-workaround",style:(o=2,s="{{fullscreen}}",d="<%fullscreen%>",_&&"transform:scaleX("+(o=2,s="{{=rx}}",d="<%=rx%>",n(m))+") scaleY("+(o=2,s="{{=ry}}",d="<%=ry%>",n(x))+");transform-origin:0 0;margin:"+(o=2,s="{{=marginTop}}",d="<%=marginTop%>",n(y))+"px 0 0 "+(o=2,s="{{=marginLeft}}",d="<%=marginLeft%>",n(b))+"px;")},g)],r="rd-_designer_stage_-stage-outer"+(o=1,s="{{if fullscreen}}",""),d="<%if(fullscreen){%>",_&&(r+=" rd-_designer_stage_-fullscreen"+(o=1,s="{{/if}}",""),d="<%}%>"),f.push(t("div",{id:"stage_outer","mx5-contextmenu":l+"\x1e@:{prevent}()","mx5-mousedown":l+"\x1e@:{stage.start.drag}()",tabindex:"0","mx5-focusin":l+"\x1e@:{stage.active}()","mx5-focusout":l+"\x1e@:{stage.deactive}()","mx5-keydown":l+"\x1e@:{stage.keydown}()",class:r},p),t("div",{id:"pole_"+(o=10,s="{{=$viewId}}","")+l,style:"margin-top:-"+(o=10,s="{{=page.height*scale+100}}",d="<%=page.height*scale+100%>",n(w.height*v+100))+"px;display:none"})),t(l,0,f)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+s+"\r\n\tat line: "+o,t+="\r\n\ttranslate to: "+d+"\r\n\tat file:designer/stage.html"}},init(){let e=e=>{if(e.node){if(!n.default.inside(e.node,n.node("stage_outer")))return;{let t=p.default["@:{real.to.stage.coord}"]({x:e.pageX,y:e.pageY});e.pageX=t.x,e.pageY=t.y}}else e.pageX+=this.root.scrollLeft,e.pageY+=this.root.scrollTop;s.default["@:{add.element}"](e,!0)&&(n.State.fire("@:{event#stage.elements.change}"),i.default["@:{save}"]())},t=e=>{let t=n.State.get("@:{stage.elements}");e?this.digest({elements:t}):this.set({elements:t})},l=0,r=e=>{let t=n.State.get("@:{stage.elements}");if(e.step||e.fullscreen){if(e.fullscreen){let t=n.State.get("@:{stage.page}");if(e.full){let r=screen.width/t.width,i=screen.height/t.height,a=Math.min(r,i),s=0,o=0;"auto"==t.scaleType?(s=a,o=a):(s=r,o=i);let d=(screen.height-o*t.height)/2,p=(screen.width-s*t.width)/2,g=n.State.get("@:{stage.scale}");1!=g?(e.step=1/g,l=g):l=0,n.State.set({"@:{stage.scale}":1}),this.set({rx:s,ry:o,marginTop:d,marginLeft:p})}else 0!=l&&(e.step=l,n.State.set({"@:{stage.scale}":l}));this.set({fullscreen:e.full})}if(e.step)for(let{props:l,ctrl:r}of t)if(r.scales)for(let t of r.scales)"Function"==n.default.type(t)?t(l,e.step):l[t]*=e.step}this.set({elements:t}),this.render()};n.State.on("@:{event#preview}",r),n.State.on("@:{event#history.shift}",r),n.State.on("@:{event#stage.scale.change}",r),n.State.on("@:{event#stage.page.change}",r),n.State.on("@:{event#toolbox.add.element}",e),n.State.on("@:{event#toolbox.drag.element.drop}",e),n.State.on("@:{event#stage.elements.change}",t),n.State.on("@:{event#stage.toggle.scroll}",e=>{let t=this.root,l=n.node("pole_"+this.id).style;e.show?(l.width=t.scrollWidth+"px",l.height=t.scrollHeight+"px",l.display="block"):l.display="none"}),n.State.on("@:{event#toolbox.drag.element.move}",e=>{n.default.inside(e.node,n.node("stage_outer"))?g.default["@:{update}"](e.pageX,e.pageY,e.width,e.height):g.default["@:{hide}"]()}),t()},render(){let e=n.State.get("@:{stage.page}");this.digest({scale:n.State.get("@:{stage.scale}"),page:e})},"@:{element.start.drag}<mousedown>"(e){this.get("fullscreen")||s.default["@:{select.or.move.elements}"](e,this)},"@:{stage.start.drag}<mousedown>"(e){if(this.get("fullscreen"))return;let t=e.target;if("stage_canvas"==t.id||n.default.inside(n.node("stage_canvas"),t)){let t=null,l=0,r=n.State.get("@:{stage.select.elements.map}");if(e.shiftKey){t={};let e=n.State.get("@:{stage.select.elements}");for(let n of e)t[n.id]=1,l++}else o.default["@:{set}"]();this["@:{last.intereset.count}"]=l,g.default["@:{init}"]();let a=0,d=s.default["@:{get.elements.location}"]();this["@:{drag.drop}"](e,l=>{a||(a=1,c.default["@:{show.by.type}"]("default"));let n=Math.abs(e.pageX-l.pageX),r=Math.abs(e.pageY-l.pageY),i=Math.min(e.pageX,l.pageX),h=Math.min(e.pageY,l.pageY);g.default["@:{update}"](i,h,n,r);let u=p.default["@:{real.to.stage.coord}"]({x:i,y:h});if(u.width=n,u.height=r,d.length){let e=s.default["@:{get.intersect.elements}"](d,u,t),l=e.length;l!==this["@:{last.intereset.count}"]&&(this["@:{last.intereset.count}"]=l,o.default["@:{set.all}"](e))}},()=>{a&&(g.default["@:{hide}"](),c.default["@:{hide}"]()),o.default["@:{has.changed}"](r)&&i.default["@:{save}"]()})}},"@:{stage.keydown}<keydown>"(e){if(!this.get("fullscreen"))if(e.metaKey||e.ctrlKey)e.keyCode==a.default.Z?(e.preventDefault(),e.shiftKey?i.default["@:{redo}"]():i.default["@:{undo}"]()):e.keyCode==a.default.Y?(e.preventDefault(),i.default["@:{redo}"]()):e.keyCode==a.default.A?(e.preventDefault(),s.default["@:{select.all}"]()):e.keyCode==a.default.X?(e.preventDefault(),d.default["@:{cut.elements}"]()):e.keyCode==a.default.C?(e.preventDefault(),d.default["@:{copy.elements}"]()):e.keyCode==a.default.V&&(e.preventDefault(),d.default["@:{paste.elements}"]());else if(e.keyCode==a.default.TAB)e.preventDefault(),s.default["@:{handle.key.tab}"](e);else if(e.keyCode==a.default.DELETE||e.keyCode==a.default.BACKSPACE)e.preventDefault(),s.default["@:{delete.select.elements}"]()&&(n.State.fire("@:{event#stage.elements.change}"),i.default["@:{save}"]());else{let t=e.shiftKey?10:1;t*=n.State.get("@:{stage.scale}");let l=n.State.get("@:{stage.select.elements}");if(l.length){let r=!1,s=0,o="";for(let i of l)if(!i.props.locked&&(e.keyCode==a.default.UP?(r=!0,s=-t,o="y"):e.keyCode==a.default.DOWN?(r=!0,s=t,o="y"):e.keyCode==a.default.LEFT?(r=!0,s=-t,o="x"):e.keyCode==a.default.RIGHT&&(r=!0,s=t,o="x"),r)){let e=n.Vframe.byNode(n.node(i.id));if(e){for(let e of i.ctrl.moved)e.use==o&&(i.props[e.key]+=s);e.invoke("assign",[{element:i}])&&e.invoke("render")}}r&&(e.preventDefault(),n.State.fire("@:{event#stage.select.element.props.change}"),i.default["@:{save}"]("@:{history#move.element.by.keyboard}",500))}}},"@:{prevent}<contextmenu>"(e){if(e.preventDefault(),n.default.inside(e.target,n.node("stage_canvas"))){let t=n.default.config("lang"),l=u.default.stage(t),r={},a=n.State.get("@:{stage.elements}"),o=n.State.get("@:{stage.select.elements}"),g=d.default["@:{has.elements}"]();r[u.default.allId]=!a.length,r[u.default.pasteId]=!g;let c=o.length,f=o[0];if(1==c){l=u.default.singleElement(t);let e=a[a.length-1],n=a[0],i=e.id==f.id,s=n.id==f.id,o=f.props.locked;r[u.default.cutId]=o,r[u.default.upId]=o||i,r[u.default.topId]=o||i,r[u.default.bottomId]=o||s,r[u.default.downId]=o||s}else c>1&&(l=u.default.multipleElement(t));h.default.show(this,e,{list:l,disabled:r,picked(t){if(t.id==u.default.allId)s.default["@:{select.all}"]();else if(t.id==u.default.copyId)d.default["@:{copy.elements}"]();else if(t.id==u.default.pasteId){let t=p.default["@:{real.to.stage.coord}"]({x:e.pageX,y:e.pageY});d.default["@:{paste.elements}"](t)&&i.default["@:{save}"]()}else t.id==u.default.cutId?d.default["@:{cut.elements}"]():t.id==u.default.deleteId?s.default["@:{delete.select.elements}"]()&&(n.State.fire("@:{event#stage.elements.change}"),i.default["@:{save}"]()):t.id>=3&&t.id<=6&&s.default["@:{move.element}"](t.id,f)&&(n.State.fire("@:{event#stage.elements.change}"),i.default["@:{save}"]())}})}},"@:{stage.active}<focusin>"(){this.root.classList.remove("rd-_designer_index_-stage-deactive")},"@:{stage.deactive}<focusout>"(){this.root.classList.add("rd-_designer_index_-stage-deactive")}}).merge(r.default)}),define("designer/toolbar-align",["magix","./history"],(e,t,l)=>{let n;Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("./history");let a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p=[],{elements:g,i18n:c}=e;a=1,i="{{set c=elements.length}}",s="<%let c=elements.length;%>";let h=g.length;return n?p.push(n):p.push(n=t("i",{_:"_",class:"rd-_designer_toolbar_-toolbar-spliter"})),d=[t(0,0,"\ue70b")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=3,i="{{if c<2}}",""),s="<%if(c<2){%>",h<2&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=3,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=3,i="{{=i18n('@:{lang#align.left}')}}",s="<%=i18n('@:{lang#align.left}')%>",r(c("@:{lang#align.left}"))),"mx5-click":l+"\x1e@:{align.elements}({to:'left'})",class:o},d)),d=[t(0,0,"\ue711")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=5,i="{{if c<2}}",""),s="<%if(c<2){%>",h<2&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=5,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=5,i="{{=i18n('@:{lang#align.center}')}}",s="<%=i18n('@:{lang#align.center}')%>",r(c("@:{lang#align.center}"))),"mx5-click":l+"\x1e@:{align.elements}({to:'center'})",class:o},d)),d=[t(0,0,"\ue70c")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=7,i="{{if c<2}}",""),s="<%if(c<2){%>",h<2&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=7,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=7,i="{{=i18n('@:{lang#align.right}')}}",s="<%=i18n('@:{lang#align.right}')%>",r(c("@:{lang#align.right}"))),"mx5-click":l+"\x1e@:{align.elements}({to:'right'})",class:o},d)),d=[t(0,0,"\ue70d")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=9,i="{{if c<2}}",""),s="<%if(c<2){%>",h<2&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=9,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=9,i="{{=i18n('@:{lang#align.top}')}}",s="<%=i18n('@:{lang#align.top}')%>",r(c("@:{lang#align.top}"))),"mx5-click":l+"\x1e@:{align.elements}({to:'top'})",class:o},d)),d=[t(0,0,"\ue712")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=11,i="{{if c<2}}",""),s="<%if(c<2){%>",h<2&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=11,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=11,i="{{=i18n('@:{lang#align.middle}')}}",s="<%=i18n('@:{lang#align.middle}')%>",r(c("@:{lang#align.middle}"))),"mx5-click":l+"\x1e@:{align.elements}({to:'middle'})",class:o},d)),d=[t(0,0,"\ue70e")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=13,i="{{if c<2}}",""),s="<%if(c<2){%>",h<2&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=13,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=13,i="{{=i18n('@:{lang#align.bottom}')}}",s="<%=i18n('@:{lang#align.bottom}')%>",r(c("@:{lang#align.bottom}"))),"mx5-click":l+"\x1e@:{align.elements}({to:'bottom'})",class:o},d)),t(l,0,p)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:designer/toolbar-align.html"}},init(){let e=this.render.bind(this);r.State.on("@:{event#history.shift}",e),r.State.on("@:{event#stage.select.elements.change}",e)},render(){this.digest({elements:r.State.get("@:{stage.select.elements}")})},"@:{align.elements}<click>"(e){if(e.eventTarget.classList.contains("rd-_designer_toolbar_-toolbar-item-disabled"))return;let{to:t}=e.params,l=r.State.get("@:{stage.select.elements}"),n=s,o=a,d=a,p=s,g=a,c=a;for(let e of l){let l=r.node("mask_"+e.id).getBoundingClientRect();if("right"==t)l.right>n&&(n=l.right);else if("left"==t)l.left<o&&(o=l.left);else if("top"==t)l.top<d&&(d=l.top);else if("bottom"==t)l.bottom>p&&(p=l.bottom);else if("middle"==t){let e=(l.bottom-l.top)/2;l.top+e<g&&(g=l.top+e)}else if("center"==t){let e=(l.right-l.left)/2;l.left+e<c&&(c=l.left+e)}}let h=0;for(let e of l){let l,i=r.node("mask_"+e.id).getBoundingClientRect(),a=0,s="";if("right"==t?0!=(l=n-i.right)&&(h=1,a=1,s="x"):"left"==t?0!=(l=o-i.left)&&(h=1,a=1,s="x"):"top"==t?0!=(l=d-i.top)&&(h=1,a=1,s="y"):"bottom"==t?0!=(l=p-i.bottom)&&(h=1,a=1,s="y"):"middle"==t?0!=(l=g-(i.top+(i.bottom-i.top)/2))&&(h=1,a=1,s="y"):"center"==t&&0!=(l=c-(i.left+(i.right-i.left)/2))&&(h=1,a=1,s="x"),a){let t=r.Vframe.byNode(r.node(e.id));if(t){for(let t of e.ctrl.moved)t.use==s&&(e.props[t.key]+=l);t.invoke("assign",[{element:e}])&&t.invoke("render")}}}h&&(r.State.fire("@:{event#stage.select.element.props.change}"),i.default["@:{save}"]())}})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,l)=>{let n;Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("./stage-elements"),a=e("./history");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p=[],{elements:g,i18n:c}=e;a=1,i="{{set c=elements.length}}",s="<%let c=elements.length;%>";let h=g.length;return n?p.push(n):p.push(n=t("i",{_:"_",class:"rd-_designer_toolbar_-toolbar-spliter"})),d=[t(0,0,"\ue600")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=3,i="{{if c<1}}",""),s="<%if(c<1){%>",h<1&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=3,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=3,i="{{=i18n('@:{lang#menu.delete}')}}",s="<%=i18n('@:{lang#menu.delete}')%>",r(c("@:{lang#menu.delete}"))+"(Delete)"),"mx5-click":l+"\x1e@:{remove.elements}()",class:o},d)),t(l,0,p)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:designer/toolbar-del.html"}},init(){let e=this.render.bind(this);r.State.on("@:{event#history.shift}",e),r.State.on("@:{event#stage.select.elements.change}",e)},render(){this.digest({elements:r.State.get("@:{stage.select.elements}")})},"@:{remove.elements}<click>"(e){e.eventTarget.classList.contains("rd-_designer_toolbar_-toolbar-item-disabled")||i.default["@:{delete.select.elements}"]()&&(r.State.fire("@:{event#stage.elements.change}"),a.default["@:{save}"]())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("./history");t.default=n.default.View.extend({tmpl:(e,t,l,n)=>{let r,i,a;try{let s,o,d=[],{status:p,i18n:g}=e;return o=[t(0,0,"\ue682")],s="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(i=1,r="{{if !status.canUndo}}",""),a="<%if(!status.canUndo){%>",p.canUndo||(s+=" rd-_designer_toolbar_-toolbar-item-disabled"+(i=1,r="{{/if}}",""),a="<%}%>"),d.push(t("i",{title:(i=1,r="{{=i18n('@:{lang#undo}')}}",a="<%=i18n('@:{lang#undo}')%>",n(g("@:{lang#undo}"))),"mx5-click":l+"\x1e@:{do.exec}({s:'-',b:"+(i=1,r="{{=status.canUndo}}",a="<%=status.canUndo%>",n(p.canUndo))+"})",class:s},o)),o=[t(0,0,"\ue682")],s="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item rd-_assets_index_-flipx"+(i=2,r="{{if !status.canRedo}}",""),a="<%if(!status.canRedo){%>",p.canRedo||(s+=" rd-_designer_toolbar_-toolbar-item-disabled"+(i=2,r="{{/if}}",""),a="<%}%>"),d.push(t("i",{title:(i=2,r="{{=i18n('@:{lang#redo}')}}",a="<%=i18n('@:{lang#redo}')%>",n(g("@:{lang#redo}"))),"mx5-click":l+"\x1e@:{do.exec}({s:'+',b:"+(i=2,r="{{=status.canRedo}}",a="<%=status.canRedo%>",n(p.canRedo))+"})",class:s},o)),t(l,0,d)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+r+"\r\n\tat line: "+i,t+="\r\n\ttranslate to: "+a+"\r\n\tat file:designer/toolbar-do.html"}},init(){let e=this.render.bind(this);n.State.on("@:{event#history.shift}",e),n.State.on("@:{event#history.status.change}",e)},render(){this.digest({status:r.default["@:{query.status}"]()})},"@:{do.exec}<click>"(e){let{s:t,b:l}=e.params;l&&("-"==t?r.default["@:{undo}"]():r.default["@:{redo}"]())}})}),define("designer/toolbar-layer",["magix","./history","./stage-elements"],(e,t,l)=>{let n;Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("./history"),a=e("./stage-elements");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p,g=[],{elements:c,top:h,i18n:u,bottom:f}=e;a=1,i="{{set c=elements.length}}",o="",s="<%let c=elements.length;%>";let _=c.length;o+=" "+(a=2,i="{{set e=elements[0]}}",""),s="<%let e=elements[0];%>";let m=c[0];return n?g.push(n):g.push(n=t("i",{_:"_",class:"rd-_designer_toolbar_-toolbar-spliter"})),p=[t(0,0,"\ue632")],d="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=4,i="{{if c!=1||e.props.locked||top.id==e.id}}",""),s="<%if(c!=1||e.props.locked||top.id==e.id){%>",(1!=_||m.props.locked||h.id==m.id)&&(d+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=4,i="{{/if}}",""),s="<%}%>"),g.push(t("i",{title:(a=4,i="{{=i18n('@:{lang#menu.move.up}')}}",s="<%=i18n('@:{lang#menu.move.up}')%>",r(u("@:{lang#menu.move.up}"))),"mx5-click":l+"\x1e@:{move.element}({to:5})",class:d},p)),p=[t(0,0,"\ue607")],d="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=5,i="{{if c!=1||e.props.locked||top.id==e.id}}",""),s="<%if(c!=1||e.props.locked||top.id==e.id){%>",(1!=_||m.props.locked||h.id==m.id)&&(d+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=5,i="{{/if}}",""),s="<%}%>"),g.push(t("i",{title:(a=5,i="{{=i18n('@:{lang#menu.to.top}')}}",s="<%=i18n('@:{lang#menu.to.top}')%>",r(u("@:{lang#menu.to.top}"))),"mx5-click":l+"\x1e@:{move.element}({to:3})",class:d},p)),p=[t(0,0,"\ue632")],d="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item rd-_assets_index_-r180"+(a=6,i="{{if c!=1||e.props.locked||bottom.id==e.id}}",""),s="<%if(c!=1||e.props.locked||bottom.id==e.id){%>",(1!=_||m.props.locked||f.id==m.id)&&(d+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=6,i="{{/if}}",""),s="<%}%>"),g.push(t("i",{title:(a=6,i="{{=i18n('@:{lang#menu.move.down}')}}",s="<%=i18n('@:{lang#menu.move.down}')%>",r(u("@:{lang#menu.move.down}"))),"mx5-click":l+"\x1e@:{move.element}({to:6})",class:d},p)),p=[t(0,0,"\ue607")],d="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item rd-_assets_index_-r180"+(a=7,i="{{if c!=1||e.props.locked||bottom.id==e.id}}",""),s="<%if(c!=1||e.props.locked||bottom.id==e.id){%>",(1!=_||m.props.locked||f.id==m.id)&&(d+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=7,i="{{/if}}",""),s="<%}%>"),g.push(t("i",{title:(a=7,i="{{=i18n('@:{lang#menu.to.bottom}')}}",s="<%=i18n('@:{lang#menu.to.bottom}')%>",r(u("@:{lang#menu.to.bottom}"))),"mx5-click":l+"\x1e@:{move.element}({to:4})",class:d},p)),t(l,0,g)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:designer/toolbar-layer.html"}},init(){let e=this.render.bind(this);r.State.on("@:{event#history.shift}",e),r.State.on("@:{event#stage.elements.change}",e),r.State.on("@:{event#stage.select.elements.change}",e)},render(){let e=r.State.get("@:{stage.elements}");this.digest({top:e[e.length-1],bottom:e[0],elements:r.State.get("@:{stage.select.elements}")})},"@:{move.element}<click>"(e){if(e.eventTarget.classList.contains("rd-_designer_toolbar_-toolbar-item-disabled"))return;let{to:t}=e.params,l=this.get("elements")[0];a.default["@:{move.element}"](t,l)&&(r.State.fire("@:{event#stage.elements.change}"),i.default["@:{save}"]())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),r=e("../panels/index");t.default=n.default.View.extend({tmpl:(e,t,l,n,r,i,a,s)=>{let o,d,p;try{let r,i,a,g=[],{panels:c,i18n:h}=e;d=1,o="{{each panels as p}}",p="for(let $q_c_gipvwjvu=panels.length,$q_key_upsduqit=0;$q_key_upsduqit<$q_c_gipvwjvu;$q_key_upsduqit++){let p=panels[$q_key_upsduqit];";for(let e=c.length,u=0;u<e;u+=1){let e=c[u];a=[t(0,1,(d=2,o="{{=p.icon}}",p="<%=p.icon%>",n(e.icon)))],i="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(d=2,o="{{if p.opened}}",""),p="<%if(p.opened){%>",e.opened&&(i+=" rd-_designer_toolbar_-toolbar-item-active"+(d=2,o="{{/if}}",""),p="<%}%>"),r=[t("i",{"mx5-click":l+"\x1e@:{toggle.panel}({id:'"+(d=2,o="{{=p.id}}",p="<%=$eq(p.id)%>",s(e.id))+"'})",title:(d=2,o="{{=i18n(p.opened?'@:{lang#panel.close.panel}':'@:{lang#panel.open.panel}',p.title)}}",p="<%=i18n(p.opened?'@:{lang#panel.close.panel}':'@:{lang#panel.open.panel}',p.title)%>",n(h(e.opened?"@:{lang#panel.close.panel}":"@:{lang#panel.open.panel}",e.title))),class:i},a)],g.push(...r)}return t(l,0,g)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+o+"\r\n\tat line: "+d,t+="\r\n\ttranslate to: "+p+"\r\n\tat file:designer/toolbar-panels.html"}},init(){n.State.on("@:{event#panel.change}",()=>{this.render()})},render(){this.digest({panels:r.default["@:{support.panels}"]()})},"@:{toggle.panel}<click>"(e){let{id:t}=e.params;r.default["@:{toggle.panel}"](t)}})}),define("designer/toolbar-scale",["magix","./history"],(e,t,l)=>{let n={class:"rd-_designer_toolbar_-toolbar-text"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("./history");t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d=[],{i18n:p,scale:g}=e;return o=[t(0,0,"\ue602")],d.push(t("i",{class:"rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item","mx5-click":l+"\x1e@:{scale}({s:'-'})",title:(a=1,i="{{=i18n('@:{lang#zoom.out}')}}",s="<%=i18n('@:{lang#zoom.out}')%>",r(p("@:{lang#zoom.out}")))},o)),o=[t(0,0,(a=2,i="{{=scale*100}}",s="<%=scale*100%>",r(100*g)+"%"))],d.push(t("b",n,o)),o=[t(0,0,"\ue699")],d.push(t("i",{class:"rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item","mx5-click":l+"\x1e@:{scale}({s:'+'})",title:(a=3,i="{{=i18n('@:{lang#zoom.in}')}}",s="<%=i18n('@:{lang#zoom.in}')%>",r(p("@:{lang#zoom.in}")))},o)),t(l,0,d)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:designer/toolbar-scale.html"}},init(){let e=this.render.bind(this);r.State.on("@:{event#stage.scale.change}",e),r.State.on("@:{event#history.shift}",e)},render(){this.digest({scale:r.State.get("@:{stage.scale}")})},"@:{scale}<click>"(e){let{s:t}=e.params,l=this.get("scale"),n=l;"+"==t?(l+=.5)>5&&(l=5):(l-=.5)<.5&&(l=.5),n!=l&&(r.State.set({"@:{stage.scale}":l}),r.State.fire("@:{event#stage.scale.change}",{step:l/n}),i.default["@:{save}"]())}})}),define("designer/toolbar-space",["magix","./history"],(e,t,l)=>{let n;Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),i=e("./history");let a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;t.default=r.default.View.extend({tmpl:(e,t,l,r)=>{let i,a,s;try{let o,d,p=[],{elements:g,bezier:c,i18n:h}=e;a=1,i="{{set c=elements.length}}",s="<%let c=elements.length;%>";let u=g.length;return n?p.push(n):p.push(n=t("i",{_:"_",class:"rd-_designer_toolbar_-toolbar-spliter"})),d=[t(0,0,"\ue604")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=3,i="{{if c<2||bezier}}",""),s="<%if(c<2||bezier){%>",(u<2||c)&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=3,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=3,i="{{=i18n('@:{lang#same.width}')}}",s="<%=i18n('@:{lang#same.width}')%>",r(h("@:{lang#same.width}"))),"mx5-click":l+"\x1e@:{same.elements}({to:'width'})",class:o},d)),d=[t(0,0,"\ue605")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=5,i="{{if c<2||bezier}}",""),s="<%if(c<2||bezier){%>",(u<2||c)&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=5,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=5,i="{{=i18n('@:{lang#same.height}')}}",s="<%=i18n('@:{lang#same.height}')%>",r(h("@:{lang#same.height}"))),"mx5-click":l+"\x1e@:{same.elements}({to:'height'})",class:o},d)),d=[t(0,0,"\ue608")],o="rd-_assets_index_-iconfont rd-_designer_toolbar_-toolbar-item"+(a=7,i="{{if c<3}}",""),s="<%if(c<3){%>",u<3&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=7,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=7,i="{{=i18n('@:{lang#same.hor.space}')}}",s="<%=i18n('@:{lang#same.hor.space}')%>",r(h("@:{lang#same.hor.space}"))),"mx5-click":l+"\x1e@:{avg.elements}({to:'hor'})",class:o},d)),d=[t(0,0,"\ue608")],o="rd-_assets_index_-iconfont rd-_assets_index_-r90 rd-_designer_toolbar_-toolbar-item"+(a=9,i="{{if c<3}}",""),s="<%if(c<3){%>",u<3&&(o+=" rd-_designer_toolbar_-toolbar-item-disabled"+(a=9,i="{{/if}}",""),s="<%}%>"),p.push(t("i",{title:(a=9,i="{{=i18n('@:{lang#same.ver.space}')}}",s="<%=i18n('@:{lang#same.ver.space}')%>",r(h("@:{lang#same.ver.space}"))),"mx5-click":l+"\x1e@:{avg.elements}({to:'ver'})",class:o},d)),t(l,0,p)}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: "+i+"\r\n\tat line: "+a,t+="\r\n\ttranslate to: "+s+"\r\n\tat file:designer/toolbar-space.html"}},init(){let e=this.render.bind(this);r.State.on("@:{event#history.shift}",e),r.State.on("@:{event#stage.select.elements.change}",e)},render(){let e=r.State.get("@:{stage.select.elements}"),t=!1;for(let l of e)if("bezier"==l.type){t=!0;break}this.digest({elements:e,bezier:t})},"@:{same.elements}<click>"(e){if(e.eventTarget.classList.contains("rd-_designer_toolbar_-toolbar-item-disabled"))return;let{to:t}=e.params,l=r.State.get("@:{stage.select.elements}"),n=s,o=s,d=a,p=a;for(let e of l){let t=e.props;t.width>n&&(n=t.width),t.width<d&&(d=t.width),t.height>o&&(o=t.height),t.height<p&&(p=t.height)}let g=0;for(let i of l){let l,a=i.props,s=0;if("width"==t?(l=e.shiftKey?d:n,a.width!=l&&(s=1,g=1,a.width=l)):(l=e.shiftKey?p:o,a.height!=l&&(s=1,g=1,a.height=l)),s){let e=r.Vframe.byNode(r.node(i.id));e&&e.invoke("assign",[{element:i}])&&e.invoke("render")}}g&&(r.State.fire("@:{event#stage.select.element.props.change}"),i.default["@:{save}"]())},"@:{avg.elements}<click>"(e){if(e.eventTarget.classList.contains("rd-_designer_toolbar_-toolbar-item-disabled"))return;let t,l,n,o,d,{to:p}=e.params,g=r.State.get("@:{stage.select.elements}"),c=s,h=a,u=s,f=a,_=a,m=s,x=a,y=s,b=[],w=e.shiftKey;for(let e of g){let i,a=e.props,s=a.x+a.width/2,d=a.y+a.height/2;if(s>c&&(c=s),s<h&&(h=s),d>u&&(u=d),d<f&&(f=d),w){i=r.node("mask_"+e.id).getBoundingClientRect();let{left:a,top:s,right:d,bottom:p}=i;a<x&&(x=a,l=i),d>y&&(y=d,n=i),s<_&&(_=s,t=i),p>m&&(m=p,o=i)}b.push({m:e,mx:s,my:d,bound:i})}d=w?"ver"==p?(e,t)=>e.bound.top-t.bound.top:(e,t)=>e.bound.left-t.bound.left:"ver"==p?(e,t)=>e.my-t.my:(e,t)=>e.mx-t.mx,b=b.sort(d);let v=0;if(w){let e=0,i=0,a=b.length;if("ver"==p){t!=o&&a--;for(let l of b)l.bound!=t&&l.bound!=o&&(e+=l.bound.height);i=(o.top-t.bottom-e)/a}else{l!=n&&a--;for(let t of b)t.bound!=l&&t.bound!=n&&(e+=t.bound.width);i=(n.left-l.right-e)/a}let s,d=0;for(let e of b){let a,g,c=0;if("ver"==p){if(e.bound!=t&&e.bound!=o){c=1,d+=g=s.bound.bottom+d+i-e.bound.top,a="y"}}else if(e.bound!=l&&e.bound!=n){c=1,d+=g=s.bound.right+d+i-e.bound.left,a="x"}if(c){v=1;let t=e.m,l=r.Vframe.byNode(r.node(t.id));if(l){for(let e of t.ctrl.moved)e.use==a&&(t.props[e.key]+=g);l.invoke("assign",[{element:t}])&&l.invoke("render")}}s=e}}else{let e=b[0],t=1,l=b.length-1,n=l,i=e.m,a=(u-f)/n,s=(c-h)/n;for(let e=t;e<l;e++){let t=b[e].m,l=0,n="",o=0;if("ver"==p){let e=i.props.y+i.props.height/2;e+=a,e-=t.props.height/2,t.props.y!=e&&(l=1,o=e-t.props.y,n="y")}else{let e=i.props.x+i.props.width/2;e+=s,e-=t.props.width/2,t.props.x!=e&&(l=1,o=e-t.props.x,n="x")}if(l){v=1;let e=r.Vframe.byNode(r.node(t.id));if(e){for(let e of t.ctrl.moved)e.use==n&&(t.props[e.key]+=o);e.invoke("assign",[{element:t}])&&e.invoke("render")}}i=t}}v&&(r.State.fire("@:{event#stage.select.element.props.change}"),i.default["@:{save}"]())}})}),define("designer/toolbar",["magix","./toolbar-do","./toolbar-align","./toolbar-space","./toolbar-layer","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,l)=>{let n;e("./toolbar-do"),e("./toolbar-align"),e("./toolbar-space"),e("./toolbar-layer"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels"),Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix");r.default.applyStyle("rd-_designer_toolbar_","\n.rd-_designer_toolbar_-toolbar-container {\nheight:22px;\n}\n.rd-_designer_toolbar_-toolbar-item {\ncursor:pointer;\nheight:22px;\nwidth:22px;\nmargin:0 2px;\ndisplay:inline-flex;\nalign-items:center;\njustify-content:center;\nborder-radius:2px;\n}\n.rd-_designer_toolbar_-toolbar-item:hover {\nbackground:#e6e6e6;\ncolor:#333;\n}\n.rd-_designer_toolbar_-toolbar-item-active,\n.rd-_designer_toolbar_-toolbar-item-active:hover {\nbackground:#c4c4c4;\n}\n.rd-_designer_toolbar_-toolbar-spliter {\nheight:16px;\nwidth:1px;\nbackground:#eee;\nmargin:3px 12px;\nfloat:left;\n}\n.rd-_designer_toolbar_-toolbar-item-disabled {\ncolor:#aaa;\ncursor:not-allowed;\n}\n.rd-_designer_toolbar_-toolbar-item-disabled:hover {\ncolor:#aaa;\nbackground:transparent;\n}\n.rd-_designer_toolbar_-toolbar-text {\nfont-weight:normal;\nfont-size:14px;\nwidth:40px;\ndisplay:inline-block;\ntext-align:center;\n}\n"),t.default=r.default.View.extend({tmpl:(e,t,l)=>{try{if(!n){let e,r=[];e=[t("div",{class:"rd-_designer_toolbar_-toolbar-container","mx5-view":"designer/toolbar-do"}),t("div",{class:"rd-_designer_toolbar_-toolbar-container","mx5-view":"designer/toolbar-align"}),t("div",{class:"rd-_designer_toolbar_-toolbar-container","mx5-view":"designer/toolbar-space"}),t("div",{class:"rd-_designer_toolbar_-toolbar-container","mx5-view":"designer/toolbar-layer"}),t("div",{class:"rd-_designer_toolbar_-toolbar-container","mx5-view":"designer/toolbar-del"})],r.push(t("div",{class:"rd-_assets_index_-m-center rd-_gallery_mx-style_index_-fl rd-_gallery_mx-style_index_-hp100"},e)),e=[t("div",{class:"rd-_designer_toolbar_-toolbar-container","mx5-view":"designer/toolbar-scale"}),t("i",{class:"rd-_designer_toolbar_-toolbar-spliter"}),t("div",{class:"rd-_designer_toolbar_-toolbar-container","mx5-view":"designer/toolbar-panels"})],r.push(t("div",{class:"rd-_assets_index_-m-center rd-_gallery_mx-style_index_-fr rd-_gallery_mx-style_index_-hp100"},e)),n=t(l,0,r)}return n}catch(e){let t="render view error:"+(e.message||e);throw t+="\r\n\tsrc art: undefined\r\n\tat line: "+void 0,t+="\r\n\ttranslate to: undefined\r\n\tat file:designer/toolbar.html"}},render(){this.digest()}})});