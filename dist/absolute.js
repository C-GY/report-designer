(function(e,t){if(!e.seajs){var i=e.seajs={version:"2.2.3"},a=i.data={},l=O("Object"),s=O("String"),o=Array.isArray||O("Array"),r=O("Function"),n=O("Undefined"),p=0,d=a.events={};i.on=function(e,t){return(d[e]||(d[e]=[])).push(t),i},i.off=function(e,t){if(!e&&!t)return d=a.events={},i;var l=d[e];if(l)if(t)for(var s=l.length-1;s>=0;s--)l[s]===t&&l.splice(s,1);else delete d[e];return i};var c,h=i.emit=function(e,t){var a,l=d[e];if(l)for(l=l.slice();a=l.shift();)a(t);return i},u=/[^?#]*\//,f=/\/\.\//g,g=/\/[^\/]+\/\.\.\//,x=/([^:\/])\/\//g,_=/^([^\/:]+)(\/.+)$/,m=/{([^{]+)}/g,b=/^\/\/.|:\//,y=/^.*?\/\/.*?\//,w=document,v=W(w.URL),k=w.scripts,A=w.getElementById("seajsnode")||k[k.length-1],S=W(((c=A).hasAttribute?c.src:c.getAttribute("src",4))||v);i.resolve=function(e,t){if(!e)return"";var i,l,o;e=function(e){var t=a.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(m,function(e,i){return s(t[i])?t[i]:e})),e}(e=function(e){var t,i=a.paths;return i&&(t=e.match(_))&&s(i[t[1]])&&(e=i[t[1]]+t[2]),e}(e=function(e){var t=a.alias;return t&&s(t[e])?t[e]:e}(e))),l=(i=e).length-1;var n=G(e="#"===(o=i.charAt(l))?i.substring(0,l):".js"===i.substring(l-2)||i.indexOf("?")>0||".css"===i.substring(l-3)||"/"===o?i:i+".js",t);return n=function(e){var t=a.map,i=e;if(t)for(var l=0,s=t.length;l<s;l++){var o=t[l];if((i=r(o)?o(e)||e:e.replace(o[0],o[1]))!==e)break}return i}(n)};var z,M,T=w.head||w.getElementsByTagName("head")[0]||w.documentElement,E=T.getElementsByTagName("base")[0],I=/\.css(?:\?|$)/i,C=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;i.request=function(e,t,i,l){var s=I.test(e),o=w.createElement(s?"link":"script");i&&(o.charset=i),n(l)||o.setAttribute("crossorigin",l),function(e,t,i,l){var s="onload"in e;function o(){e.onload=e.onerror=e.onreadystatechange=null,i||a.debug||T.removeChild(e),e=null,t()}!i||!C&&s?s?(e.onload=o,e.onerror=function(){h("error",{uri:l,node:e}),o()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&o()}:setTimeout(function(){!function e(t,i){var a,l=t.sheet;if(C)l&&(a=!0);else if(l)try{l.cssRules&&(a=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(a=!0)}setTimeout(function(){a?i():e(t,i)},20)}(e,t)},1)}(o,t,s,e),s?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),z=o,E?T.insertBefore(o,E):T.appendChild(o),z=null};var N,L=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,j=/\\\\/g,Y=i.cache={},D={},R={},X={},V=P.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};P.prototype.resolve=function(){for(var e=this.dependencies,t=[],i=0,a=e.length;i<a;i++)t[i]=P.resolve(e[i],this.uri);return t},P.prototype.load=function(){if(!(this.status>=V.LOADING)){this.status=V.LOADING;var e=this.resolve();h("load",e);for(var t,i=this._remain=e.length,a=0;a<i;a++)(t=P.get(e[a])).status<V.LOADED?t._waitings[this.uri]=(t._waitings[this.uri]||0)+1:this._remain--;if(0!==this._remain){var l={};for(a=0;a<i;a++)(t=Y[e[a]]).status<V.FETCHING?t.fetch(l):t.status===V.SAVED&&t.load();for(var s in l)l.hasOwnProperty(s)&&l[s]()}else this.onload()}},P.prototype.onload=function(){this.status=V.LOADED,this.callback&&this.callback();var e,t,i=this._waitings;for(e in i)i.hasOwnProperty(e)&&((t=Y[e])._remain-=i[e],0===t._remain&&t.onload());delete this._waitings,delete this._remain},P.prototype.fetch=function(e){var t=this.uri;this.status=V.FETCHING;var l={uri:t};h("fetch",l);var s=l.requestUri||t;function o(){i.request(l.requestUri,l.onRequest,l.charset,l.crossorigin)}s&&!R[s]?D[s]?X[s].push(this):(D[s]=!0,X[s]=[this],h("request",l={uri:t,requestUri:s,onRequest:function(){delete D[s],R[s]=!0,N&&(P.save(t,N),N=null);var e,i=X[s];delete X[s];for(;e=i.shift();)e.load()},charset:r(a.charset)?a.charset(s):a.charset,crossorigin:r(a.crossorigin)?a.crossorigin(s):a.crossorigin}),l.requested||(e?e[l.requestUri]=o:o())):this.load()},P.prototype.exec=function(){var e=this;if(e.status>=V.EXECUTING)return e.exports;e.status=V.EXECUTING;var t=e.uri;function i(e){return P.get(i.resolve(e)).exec()}i.resolve=function(e){return P.resolve(e,t)},i.async=function(e,a){return P.use(e,a,t+"_async_"+H()),i};var a=e.factory,l=r(a)?a(i,e.exports={},e):a;return void 0===l&&(l=e.exports),delete e.factory,e.exports=l,e.status=V.EXECUTED,h("exec",e),l},P.resolve=function(e,t){var a={id:e,refUri:t};return h("resolve",a),a.uri||i.resolve(a.id,t)},P.define=function(e,t,i){var a,l,s=arguments.length;1===s?(i=e,e=void 0):2===s&&(i=t,o(e)?(t=e,e=void 0):t=void 0),!o(t)&&r(i)&&(a=i.toString(),l=[],a.replace(j,"").replace(L,function(e,t,i){i&&l.push(i)}),t=l);var n={id:e,uri:P.resolve(e),deps:t,factory:i};if(!n.uri&&w.attachEvent){var p=function(){if(z)return z;if(M&&"interactive"===M.readyState)return M;for(var e=T.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var i=e[t];if("interactive"===i.readyState)return M=i}}();p&&(n.uri=p.src)}h("define",n),n.uri?P.save(n.uri,n):N=n},P.save=function(e,t){var i=P.get(e);i.status<V.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=V.SAVED)},P.get=function(e,t){return Y[e]||(Y[e]=new P(e,t))},P.use=function(t,i,a){var l=P.get(a,o(t)?t:[t]);l.callback=function(){for(var t=[],a=l.resolve(),s=0,o=a.length;s<o;s++)t[s]=Y[a[s]].exec();i&&i.apply(e,t),delete l.callback},l.load()},P.preload=function(e){var t=a.preload,i=t.length;i?P.use(t,function(){t.splice(0,i),P.preload(e)},a.cwd+"_preload_"+H()):e()},i.use=function(e,t){return P.preload(function(){P.use(e,t,a.cwd+"_use_"+H())}),i},P.define.cmd={},e.define=P.define,i.Module=P,a.fetchedList=R,a.cid=H,i.require=function(e){var t=P.get(P.resolve(e));return t.status<V.EXECUTING&&(t.onload(),t.exec()),t.exports};var B,F;a.base=(S.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",S])[1],a.dir=S,a.cwd=v,a.charset="utf-8",a.history={},a.preload=(B=[],F=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(F+=" "+w.cookie).replace(/(seajs-\w+)=1/g,function(e,t){B.push(t)}),B),i.config=function(e){for(var t in e){var s=e[t],r=a[t];if(a.history[t]=a.history[t]||[],a.history[t].push(U(s)),r&&l(r))for(var n in s)r[n]=s[n];else o(r)?s=r.concat(s):"base"===t&&("/"!==s.slice(-1)&&(s+="/"),s=G(s)),a[t]=s}return h("config",e),i}}function O(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function H(){return p++}function W(e){return e.match(u)[0]}function G(e,t){var i,l=e.charAt(0);if(b.test(e))i=e;else if("."===l)i=function(e){for(e=e.replace(f,"/");e.match(g);)e=e.replace(g,"/");return e=e.replace(x,"$1/")}((t?W(t):a.cwd)+e);else if("/"===l){var s=a.cwd.match(y);i=s?s[0]+e.substring(1):e}else i=a.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function P(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function U(e){if(l(e)){var t={};for(var i in e)t[i]=e[i];return t}return e}})(this),define("magix5",()=>{let e=0,t=[],i=window,a=document,l=setTimeout,s=encodeURIComponent;function o(){}let r=JSON.stringify,n=a.body,p=Date.now,d="prototype",c=Object[d].toString,h=e=>c.call(e).slice(8,-1),u=e=>"Object"==h(e),f=Array.isArray,g=t=>(t||"mx_")+e++,x=e=>a.getElementById(e),_=(e,t)=>e.innerHTML=t,m=g(),b={rootId:g(),defaultView:m,error(e){throw e}},y=e=>!e||"object"!=typeof e,w=(e,t,i)=>{if(e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},{assign:v,keys:k,hasOwnProperty:A}=Object,S=a.head,z=a.createElement("div"),M=z.getAttribute,T=(e,t)=>M.call(e,t),E=(e,t)=>{t&&!E[e]&&(E[e]=1,_(z,`<style>${t}`),S.appendChild(z.firstChild))},I=(e,i,a,l,s)=>{for(s of(i=i||t,f(e)||(e=[e]),f(i)||(i=[i]),e))try{l=s&&s.apply(a,i)}catch(e){b.error(e)}return l},C=(e,t)=>e&&A.call(e,t),N=(e,t)=>{let i,a;if(y(t))"\x1e"==(i=t+"")[0]&&e.has(i)&&(t=e.get(i));else for(i in t)a=t[i],a=N(e,a),t[i]=a;return t},L=(e,t)=>t.a-e.a||t.b-e.b;function j(e,t,i,a){(a=this).a=[],a.b=t||5,a.c=a.b+(e||20),a.d=i}v(j[d],{get(t){let i=this.a["\x1e"+t];return i&&(i.a++,i.b=e++,i=i.c),i},set(t,i){let a=this,l=a.a,s="\x1e"+t,o=l[s],r=a.b;if(!o){if(l.length>=a.c)for(l.sort(L);r--;)(o=l.pop()).a>0&&a.del(o.o);o={d:t},l.push(o),l[s]=o}o.c=i,o.a=1,o.b=e++},del(e){e="\x1e"+e;let t=this.a,i=t[e],a=this.d;i&&(i.a=-1,i.c="",delete t[e],a&&I(a,i.d))},has(e){return C(this.a,"\x1e"+e)}});let Y,D={bubbles:!0,cancelable:!0},R=[],X=(e,t,i,a,l,s)=>{let o={a:a,b:i,c:t,d:e,e(e){a?I(i,e,s):i(e)}};R.push(o),e.addEventListener(t,o.e,l)},V=(e,t,i,a,l)=>{for(let s,o=R.length;o--;)if((s=R[o]).c==t&&s.a==a&&s.d==e&&s.b===i){R.splice(o,1),e.removeEventListener(t,s.e,l);break}},B=new j,F=e=>{let t,i,a,l,s,o=B.get(e);if(!o){if(l={},-1==(s=e.indexOf("?")))t=e;else if(t=e.substring(0,s),e=e.substring(s+1))for(s of e.split("&"))[i,a]=s.split("="),l[i]=decodeURIComponent(a||"");B.set(e,o={a:t,b:l})}return{path:o.a,params:v({},o.b)}},O=new j,H=(e,t,i)=>(O.has(e)?i=O.get(e):(i=I(Function(`return ${e}`)),e.indexOf("\x1e")>-1?N(t,i):O.set(e,i)),i),W=(e,t)=>{if(e){let i=[];m==e?(Y||(Y=Oe.extend()),t(Y)):seajs.use(e,(...e)=>{for(let t of e)i.push(t&&t.__esModule&&t.default||t);t&&t(...i)})}else t()};function G(){}let P=(e,t,i,a,l)=>(G[d]=t[d],l=new G,v(l,i),v(e,a),l.constructor=e,e[d]=l,e),U=e=>e;let q,K={fire(e,t){let i,a,l=this,s=l["\x1e"+e],o=0;if(t||(t={}),t.type=e,s)for(i=s.length;o<i;o++)(a=s[o]).f?(a.x=1,I(a.f,t,l),a.x=""):a.x||(s.splice(o--,1),i--);return(s=l[`on${e}`])&&I(s,t,l),l},on(e,t){let i="\x1e"+e;return(this[i]||(this[i]=[])).push({f:t}),this},off(e,t){let i,a="\x1e"+e,l=this,s=l[a];if(t){if(s)for(i of s)if(i.f==t){i.f="";break}}else delete l[a],delete l[`on${e}`];return l}},Z={},J=(e,t,i,a)=>{t.indexOf("\x1e")>0&&(a=Z[e])&&N(a.a.a,i)},Q=(e,t)=>{C(Z,e)||(Z[e]=t,te.fire("add",{vframe:t}))},$=(e,t,i)=>{for(t=e.c;t.length;)(i=t.shift()).r||e.invoke(i.n,i.a),delete t[i.k]},ee=e=>e.b||(e.b=g());function te(e,t){let i=this,a=ee(e);i.id=a,i.root=e,i.pId=t,i.b={},i.d=1,i.c=[],Q(a,i)}v(te,{all:()=>Z,byId:e=>Z[e],byNode:e=>Z[e.b]},K),v(te[d],{mountView(e,t){let i,a,l,s,o,r=this,{id:n,root:p,pId:d}=r;!r.e&&p&&(r.e=1,r.f=p.innerHTML),r.unmountView(),p&&e&&(i=F(e),l=i.path,r.path=e,s=i.params,J(d,e,s),r.g=l,v(s,t),a=r.d,W(l,e=>{if(a==r.d){if(!e)return b.error(Error(`${n} cannot load:${l}`));o=Fe(e),l=new e(n,p,r,s,o),r.a=l,Re(l),I(l.init,s,l),l.g(),l.tmpl||(r.e=0,l.h||l.endUpdate())}}))},unmountView(){let e=this,{a:t,root:i}=e;e.c=[],t&&(e.unmountZone(),e.a=0,t.d>0&&(t.d=0,t.fire("destroy"),t.off("destroy"),Re(t,1),t.owner=t.root=null),t.d--,i&&e.e&&_(i,e.f)),e.d++},mountVframe(e,t,i){let a,l=this,s=l.id,o=l.b,r=ee(e);return(a=Z[r])||(C(o,r)||(l.h=0),o[r]=r,a=new te(e,s)),a.mountView(t,i),a},mountZone(e){let t,i=this,a=(e=e||i.root).querySelectorAll("[mx-view]");for(t of a)t.a||(t.a=1,i.mountVframe(t,T(t,"mx-view")))},unmountVframe(e,t){let i,a;var l,s;e=e?this.b[t?e:e.b]:this.id,(i=Z[e])&&(i.unmountView(),a=i.pId,(s=Z[l=e])&&(delete Z[l],s.root.a=0,te.fire("remove",{vframe:s}),s.id=s.root=s.pId=s.b=null),(i=Z[a])&&C(i.b,e)&&(delete i.b[e],i.h=0))},unmountZone(e){let t,i,a,l=this;for(t in l.b)(a=e?(i=Z[t])&&w(i.root,e):1)&&l.unmountVframe(t,1)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Z[t.pId];return t},children(e){return(e=this).h||(e.h=k(e.b))},invoke(e,t){let i,a,l,s,o,r=this.c;return(a=this.a)&&a.h?i=(l=a[e])&&I(l,t,a):((s=r[o="\x1e"+e])&&(s.r=t===s.a),s={n:e,a:t,k:o},r.push(s),r[o]=s),i}});let ie=new j(30,10),ae=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,le={},se={},oe=(e,i)=>{let a,l,s,o,r,p,d,c,h=[],u=e,f=T(e,`mx-${i}`),g=0;if(f&&((r=ie.get(f))||(r={v:(r=f.match(ae)||t)[1],n:r[2],i:r[3]},ie.set(f,r)),r=v({},r,{r:f})),r&&!r.v||se[i]){if(!(c=u.c)){for(d=[u];u!=n&&(u=u.parentNode);){if(Z[l=u.b]||(l=u.c)){c=l;break}d.push(u)}if(c)for(f of d)f.c=c}if(c){u=e.b,Z[u]&&(g=c=u);do{if((a=Z[c])&&(p=a.a)){if(o=(s=p.i)[i])for(u=o.length;u--;)s={r:l=o[u],v:c,n:l},l?!g&&e.matches(l)&&h.push(s):g&&h.unshift(s);if(p.tmpl&&!g)break;g=0}}while(a&&(c=a.pId))}}return r&&h.push(r),h},re=e=>{let t,i,a,l,s,o,r,p,{target:d,type:c}=e,h=[];for(;d!=n&&!(e.cancelBubble||(i=d.d)&&i[c]);){if(h.push(d),(t=oe(d,c)).length){h=[];for(let{v:i,r:n,n:h,i:u}of t){if(r!=i){if(r&&e.cancelBubble)break;r=i}if(!(l=(a=Z[i])&&a.a))break;l.h&&(o=l[s=h+"\x1e"+c])&&(e.eventTarget=d,p=u?H(u,l.a):{},e.params=p,I(o,e,l))}}d=d.parentNode||n}for(r of h)(i=r.d||(r.d={}))[c]=1},ne=(e,t,i)=>{let a=0|le[e],l=i?-1:1;a&&i!==a||(i?V:X)(n,e,re),le[e]=a+l,t&&(se[e]=(0|se[e])+l)};let pe={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},de=/[&<>"'\`]/g,ce=e=>""+(null==e?"":e),he=e=>`&${pe[e]};`,ue=e=>ce(e).replace(de,he),fe={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},ge=e=>fe[e],xe=/[!')(*]/g,_e=e=>s(ce(e)).replace(xe,ge),me=/[\\'"]/g,be=e=>ce(e).replace(me,"\\$&"),ye=(e,t,i)=>(e.has(t)||(i="\x1e"+e.size,e.set(t,i),e.set(i,t)),e.get(t)),we=(e,t)=>{let i,a,l=e.j,s=e.k,o=e.id,r=Z[o],n={a:[]},p=e.e,d=e.a,c=i=>{t.a<t.length?we(e,t):(n=t.slice(),t.a=t.length=0,i&&e.fire("domready"),I(n))};if(t.a=t.length,e.k=0,e.j={},s&&e.d>0&&(i=e.tmpl)){for(a of(e.fire("dompatch"),a=i(p,ve,o,ce,_e,d,ye,be,f),Ie(e.root,e.l,a,n,r,l),e.l=a,n.a))a.g();i&&e.endUpdate(),c(1)}else c()},ve=(e,t,i,a)=>{let l;if(e){t=t||{};let s,o,r,n,p,d,c="",h={},u="<"+e,f="",g=[];if(i)for(n of i)r=n.a,n.b==Se&&(r=r?ue(r):" "),f+=r,d&&n.b==Se&&d.b==Se?d.a+=n.a:(n.d&&(h[n.d]=(h[n.d]||0)+1),n.e&&(s=1),d=n,g.push(n));for(o in t)!1!==(r=t[o])&&null!=r?(!0===r&&(t[o]=r=""),"id"==o?c=r:"mx-view"==o&&r&&!c?c=F(r).path:"mxs"==o?c||(c=r):"mxv"==o&&(s=1),"value"==o&&"textarea"==e?f=r:C(Ae,o)||(u+=` ${o}="${ue(r)}"`)):delete t[o];p=u,l={a:u+=a?"/>":`>${f}</${e}>`,c:f,d:c,b:e,e:s||C(ke,e),f:p,g:t,h:g,i:h,j:a}}else l={b:t?"\x1e":Se,a:i+""};return l},ke={input:{value:1,checked:1},textarea:{value:1},option:{selected:1}},Ae={mxs:1,mxv:1};let Se=e;let ze="http://www.w3.org/",Me={svg:`${ze}2000/svg`,math:`${ze}1998/Math/MathML`},Te=(e,t,i,a)=>{let l,s,o=0,r=ke[t.b],n=i.g,p=t.g;if(a){if(t)for(l in p)C(r,l)||C(n,l)||(o=1,e.removeAttribute(l));for(l in n)C(r,l)||C(Ae,l)||(s=n[l],t&&p[l]===s||(o=1,e.setAttribute(l,s)))}for(l in r)s=C(n,l)?"value"!=l||n[l]:"value"==l&&"",e[l]!=s&&(o=1,e[l]=s);return o&&delete e.d,o},Ee=(e,t,i)=>{let l,s=e.b;return s==Se?l=a.createTextNode(e.a):(l=a.createElementNS(Me[s]||t.namespaceURI,s),Te(l,0,e,1)&&(i.b=1),_(l,e.c)),l},Ie=(e,t,i,a,l,s)=>{if(t){if(t.e||t.c!=i.c){let o,r,n,p,d,c,h=t.h,u=i.h,f=h.length,g=u.length,x=i.i,m=e.childNodes,b={},y=0;for(o=f;o--;)(d=(n=h[o]).d)&&(d=b[d]||(b[d]=[])).push(m[o]);for(o=0;o<g;o++)if(p=u[o],n=h[y++],(d=b[p.d])&&(d=d.pop())){if(d!=m[o]){for(r=y,c=1;r<f;r++,c++)if((n=h[r])&&m[o+c]==d){h.splice(r,1),y--;break}e.insertBefore(d,m[o])}x[n.d]&&x[n.d]--,Ce(d,e,n,p,a,l,s)}else n?b[n.d]&&x[n.d]?(f++,a.b=1,e.insertBefore(Ee(p,e,a),m[o]),y--):Ce(m[o],e,n,p,a,l,s):("\x1e"==p.b?_(e,p.a):e.appendChild(Ee(p,e,a)),a.b=1);for(o=g;o<f;o++)1==(r=m[g]).nodeType&&l.unmountZone(r),e.removeChild(r)}}else a.b=1,_(e,i.c)},Ce=(e,t,i,a,l,s,o)=>{let r=i.g,n=a.g,p=i.b;if(i.e||i.a!=a.a)if(p==a.b){if(p==Se)l.b=1,e.nodeValue=a.a;else if("\x1e"==p)l.b=1,_(t,a.a);else if(!r.mxs||r.mxs!=n.mxs){let t,d,c,h,u,f,g,x=n["mx-view"],_=a.c,m=i.f!=a.f,b=C(ke,p)||m,y=Z[e.b],w=x&&F(x);if(b&&(b=Te(e,i,a,m))&&(l.b=1),x&&y&&y.g==w.path&&(h=y.a)){if(f=_!=i.c,g=x!=y.path,c=r.mxv,!f&&!g&&c)for(c of u=c.split(","))if("#"==c||C(o,c)){g=1;break}(g||f||b)&&((c=h.h&&h.m)?(u=w.params,J(y.pId,x,u),y.path=x,I(c,u,h)&&l.a.push(h),t=!h.tmpl):(d=1,t=1))}else t=1,d=y;d&&(l.b=1,y.unmountVframe(0,1)),t&&!a.j&&Ie(e,i,a,l,s,o)}}else"\x1e"==i.b?_(t,a.a):(s.unmountZone(e),t.replaceChild(Ee(a,t,l),e)),l.b=1},Ne={},Le=v({get:e=>e?Ne[e]:Ne,set(e){v(Ne,e)}},K),je=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Ye=(e,t,i)=>(e.a?i=e:((i=function(e){I(i.a,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i),De=(e,t,i,a,l)=>{a=e[t],e[t]=e[i]=function(...e){(l=this).d>0&&(l.d++,l.fire("rendercall"),I(a,e,l))}},Re=(e,t)=>{let i,{n:a,i:l,o:s,id:o}=e;for(i in a)ne(i,l[i],t);for(i of(a=t?V:X,s))a(i.a,i.b,i.c,o,i.d,e)},Xe={win:i,doc:a},Ve=(e,t,i)=>{let a,l,s,o,r={};for(l of e)for(a in l)s=l[a],o=r[a],"ctor"!=a?(je.test(a)&&(o?s=Ye(o,s):s.b=1),r[a]=s):i.push(s);for(a in r)C(t,a)||(t[a]=r[a])};function Be(...e){let t=this.a||(this.a=[]);return Ve(e,this[d],t),this}let Fe=e=>{if(!e["\x1e"]){e["\x1e"]=[];let t,i,a,l,s,o,r,n,p,c,h,u=e[d],f={},g=[],x={};for(r in(i=u.mixins)&&Ve(i,u,e["\x1e"]),u)if(t=u[r],i=r.match(je)){if([,o,a,l,h]=i,c={},h)for(n of h=h.split(","))c[n]=!0;for(n of l=l.split(",")){if(s=Xe[a],p=1,o){if(s){g.push({c:t,a:s,b:n,d:c});continue}p=2,(s=x[n])||(s=x[n]=[]),s[a]||(s[a]=1,s.push(a))}f[n]=f[n]|p,(s=u[n=a+"\x1e"+n])?s.b&&(t.b?u[n]=Ye(t,s):C(u,r)&&(u[n]=t)):u[n]=t}}De(u,"render","g"),u.n=f,u.o=g,u.i=x,u.m=u.assign}return e["\x1e"]};function Oe(e,t,i,a,l){(l=this).root=t,l.owner=i,l.id=e,l.c={},l.d=1,l.k=1,l.e={id:e},l.a=new Map,l.f=[],l.j={},(e=Oe.a)&&I(e,a,l)}function He(){this.id=g("b"),this.a={}}v(Oe,{merge:Be,extend:function e(t,i){let a=this,l=(t=t||{}).ctor,s=[];function o(e,t,i,l,r,n,p,d){a.call(p=this,e,t,i,l,r),(n=o.a)&&I(n,l,p),(d=s.concat(r)).length&&I(d,l,p)}return l&&s.push(l),o.merge=Be,o.extend=e,P(o,a,t,i)}}),v(Oe[d],K,{init:o,render:o,beginUpdate(e,t){(t=this).d>0&&t.h&&t.owner.unmountZone(e)},endUpdate(e,t,i,a){(t=this).d>0&&(a=t.h,t.h=1,(i=t.owner).mountZone(e),a||l(t.wrapAsync($),0,i))},wrapAsync(e,t){let i=this,a=i.d;return(...l)=>{if(a>0&&a==i.d)return e.apply(t||i,l)}},get(e,t){return t=this.e,e&&(t=t[e]),t},set(e,t){let i,a,l,s=this,o=s.e,r=s.j,n=s.k;for(l in e)i=e[l],a=o[l],y(i)&&a===i||C(t,l)||(r[l]=1,n=1),o[l]=i;return s.k=n,s},digest(e,t,i){let a=this.set(e,t),l=a.f;i&&l.push(i),l.a||we(a,l)},snapshot(){return this.p=r(this.e),this},altered(){let e=this;if(e.p)return e.p!=r(e.e)},translate(e){return N(this.e,e)},parse(e){return H(e,this.a)}}),v(He[d],{get(e,t){let i,a=this.a;if(e){let t,i=f(e)?e.slice():(e+"").split(".");for(;(t=i.shift())&&a;)a=a[t];t&&(a=void 0)}return void 0!==t&&(i=h(t))!=h(a)&&(a=t),a},set(e,t){u(e)||(e={[e]:t}),v(this.a,e)}});let We=(e,t,i)=>a=>{(i=e[t])&&(delete e[t],I(i,a,i.a))},Ge=(e,t,i,a,l,s)=>{let o=[],r=null,n=0;return function(d,c){let h;n++;let u,f=this,g=f.b,x=g.a;if(o[d+1]=f,c?(r=c,h=1):s.has(x)||(x&&s.set(x,f),g.b=p(),(u=g.c)&&I(u,f,f),h=1),!i.a){let t=n==a;t&&(i.b=0,2==l&&(o[0]=r,I(e,o,i))),1==l&&I(e,[c||null,f,t,d],i)}h&&t.fire("end",{bag:f,error:c})}},Pe=(e,t,i,a,l)=>{if(e.a)return e;if(e.b)return e.enqueue(Pe.bind(e,e,t,i,a,l));e.b=1,f(t)||(t=[t]);let s=e.constructor,o=0,r=s.d,n=Ge(i,s,e,t.length,a,s.c);for(let e of t)if(e){let t,[i,a]=s.get(e,l),p=i.b.a,d=n.bind(i,o++);p&&r[p]?r[p].push(d):a?(p&&((t=[d]).a=i,r[p]=t,d=We(r,p)),s.e(i,d)):d()}return e};function Ue(){let e=this;e.id=g("s"),e.f=[]}v(Ue[d],{all(e,t){return Pe(this,e,t,2)},save(e,t){return Pe(this,e,t,2,1)},one(e,t){return Pe(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,i=this;i.b||i.a||(i.b=1,l(()=>{i.b=0,i.a||(t=i.f.shift())&&I(t,i.g=e)},0))},destroy(e){(e=this).a=1,e.f=0}});let qe=(e,t,i)=>[r(t),r(e)].join("\x1e"),Ke=v({add(e){let t,i=this.h;for(t of(f(e)||(e=[e]),e))if(t){let{name:e,cache:a}=t;t.cache=0|a,i[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,a=new He;a.set(t),a.b={c:t.after,a:i&&qe(t,e)},u(e)&&a.set(e);let l=t.before;return l&&I(l,a,a),this.fire("begin",{bag:a}),a},meta(e){return this.h[e.name||e]||e},get(e,t){let i,a,l=this;return t||(i=l.cached(e)),i||(i=l.create(e),a=1),[i,a]},cached(e){let t,i,a=this,l=a.c,s=a.meta(e),o=0|e.cache||s.cache;if(o&&(i=qe(s,e)),i){let e=a.d[i];e?t=e.a:(t=l.get(i))&&p()-t.b.b>o&&(l.del(i),t=0)}return t}},K);Ue.extend=((e,t,i)=>{function a(){Ue.call(this)}return a.e=e,a.c=new j(t,i),a.d={},a.h={},P(a,Ue,null,Ke)}),v(o[d],K),o.extend=function e(t,i){let a=this,l=t&&t.ctor;function s(...e){a.apply(this,e),l&&l.apply(this,e)}return s.extend=e,P(s,a,t,i)};let Ze={config:(e,t)=>(t=b,e&&(t=u(e)?v(t,e):t[e]),t),boot(e){v(b,e),((e,t)=>(q||(e=b.rootId,(t=x(e))||(t=n),q=new te(t)),q))().mountView(b.defaultView)},toMap:(e,t)=>{let i,a={};if(e)for(i of e)a[t&&i?i[t]:i]=t?i:1+(0|a[i]);return a},toTry:I,toUrl:(e,t,i)=>{let a,l,o,r=[];for(l in t)a=t[l]+"",(!i||a||C(i,l))&&(a=s(a),r.push(o=l+"="+a));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+r.join("&")),e},parseUrl:F,mix:v,has:C,keys:k,inside:w,applyStyle:E,guid:g,Cache:j,use:W,dispatch:(e,t,i)=>{let a=new Event(t,D);v(a,i),e.dispatchEvent(a)},type:h,View:Oe,State:Le,Vframe:te,Service:Ue,Event:K,guard:U,node:x};return Ze.default=Ze,Ze});let Designer={init(e){let t=document.getElementById("boot").src.replace(/\/[^\/]+$/,"/");seajs.config({paths:{designer:t+"designer",i18n:t+"i18n",gallery:t+"gallery",util:t+"util",panels:t+"panels",elements:t+"elements"},alias:{magix:"magix5"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("p_",'body,h5,input,p,textarea,ul{margin:0;padding:0}ul{list-style-type:none;list-style-image:none}a{background-color:transparent}a:active,a:hover{outline-width:0}a:focus{outline:1px dotted}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.5}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h5{font-size:14px}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;cursor:pointer}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}a:focus,button:focus,input:focus,textarea:focus{outline:none;resize:none}a{color:#fa742b;text-decoration:none}a:focus,a:hover{color:#bd361b}a:active,a:focus,a:hover,a:visited{outline:0;text-decoration:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:pa;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.p_{font-family:pa;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pa{margin-right:10px}.pb{height:100%}.pc{text-align:center}.pd{float:left}.pe{float:right}.pf{position:absolute}.pg{position:relative}html .ph{display:none}.pi:after,.pi:before{content:" ";display:table}.pi:after{clear:both}.pj{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pk::-webkit-scrollbar,.pk::-webkit-scrollbar-corner{height:8px;width:8px;background:#fafafa}.pk::-webkit-scrollbar-thumb{background:silver}.pk::-webkit-scrollbar-thumb:hover{background:#949494}.pl{word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.pl,.pm{white-space:nowrap}.pm{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pm:focus,.pm:hover{background-color:#a0a0a0;color:#333}.pn{background-color:#fa742b;color:#fff}.pn:focus,.pn:hover{background-color:#bd361b;color:#fff}.pm[disabled]{background-color:#fbfbfb}.pm[disabled]:hover{border-color:#e6e6e6}.po{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143;background:#fff}.pp{padding:18px 25px}.pq{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6;background:#fff}.pr{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.pr:after,.pr:before{content:""}.pr:after,.pr:before,.ps{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:p_ 1s ease-in-out infinite both;animation:p_ 1s ease-in-out infinite both}.pr:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.ps{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}::-webkit-input-placeholder{color:#999}:-ms-input-placeholder{color:#999}::-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(243,123,99,.6)}::selection{background-color:rgba(243,123,99,.6)}.pt,.pu{caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none;transition:border-color .25s}.pt:hover,.pu:hover{border-color:#ccc}.pt:focus,.pu:focus,.pv,.pv:hover{border-color:#fa742b!important}.pu{height:auto}.pt[disabled],.pu[disabled]{background-color:#fbfbfb}.pt[disabled]:hover,.pu[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}@font-face{font-family:pb;src:url(//at.alicdn.com/t/font_890516_7vcaz4nqbcg.eot);src:url(//at.alicdn.com/t/font_890516_7vcaz4nqbcg.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_7vcaz4nqbcg.woff2) format("woff2"),url(//at.alicdn.com/t/font_890516_7vcaz4nqbcg.woff) format("woff"),url(//at.alicdn.com/t/font_890516_7vcaz4nqbcg.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_7vcaz4nqbcg.svg#iconfont) format("svg")}.pw{font-family:pb;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app,body,html{height:100%;overflow:hidden}body{min-width:900px}.px{font-size:12px}.py{margin-right:2px}.pz{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pA{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.pB{margin-left:100px}.pC{margin-right:50px}.pD{display:flex;align-items:center}.pE{position:-webkit-sticky;position:sticky;top:0}');let a=navigator.language.toLowerCase();try{let e=window.localStorage;e&&(a=e.getItem("l.lang")||a)}catch(e){}t.config(e),t.config({lang:a});let l=i.default;t.View.merge({ctor(){this.set({i18n:l})},_du(e,t){t=t||150;let i,a=Date.now();return(...l)=>{let s=Date.now();clearTimeout(i),s-a>t?(a=s,e.apply(this,l)):i=setTimeout(()=>{e.apply(this,l)},t-(s-a))}}}),document.title=l("_k"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",error(e){setTimeout(()=>{throw e},0)}})})}};define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,i)=>{let a,l,s,o,r,n,p,d,c,h,u,f,g={class:"paI"},x={xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},_={class:"paA pg"},m={class:"paN"};const b=e("magix"),y=e("../mx-dragdrop/index"),w=e("../mx-monitor/index");b.default.applyStyle("pg",'.paz{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.paz:hover{border-color:#ccc}.paA,.paB{background:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.paB{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.paC{padding:3px 4px}.paB:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.paD{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.paE-bottom{top:100%;margin-top:4px}.paE-top{bottom:100%;margin-bottom:4px}.paF{width:176px}.paG{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.paH:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.paI{margin:5px 0;height:150px}.paJ{position:relative;float:left;width:148px;height:148px}.paK{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.paL{width:18px;height:148px;position:relative;float:left;margin-left:10px}.paM{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.paN{height:25px}.paO{width:80px}.paP,.paO{margin-right:5px;vertical-align:middle}.paP{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.paQ{position:absolute;right:5px;top:4px;font-size:12px;opacity:.2}.paQ:hover{opacity:.5}.paA{width:174px;height:12px;margin-bottom:5px}.paR{height:100%}.paS{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.paT{cursor:not-allowed;background-color:#fbfbfb}.paT:hover{border-color:#e6e6e6}.paT:hover .paQ{opacity:.1}.paT .paB{opacity:.4}.paT .paQ{opacity:.1}');let v=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],k=(e,t,i)=>{let a,l,s,o,r;e=e%360/60,a=l=s=i-(r=i*t);let n=255*(a+=[r,o=r*(1-Math.abs(e%2-1)),0,0,o,r][e=~~e]),p=255*(l+=[o,r,r,o,0,0][e]),d=255*(s+=[0,0,o,r,r,o][e]);return{r:n,g:p,b:d,hex:"#"+(16777216|d|p<<8|n<<16).toString(16).slice(1)}};t.default=b.default.View.extend({tmpl:(e,t,i,b,y,w,v,k)=>{let A,S,z,M,T,E,I,C,N,L,j=[],{disabled:Y,id:D,text:R,textWidth:X,color:V,clear:B,i18n:F,placement:O,align:H,renderUI:W,shortcuts:G,alpha:P,current:U}=e;if(S=[],R&&(T=[t(0,0,R)],M="",X&&(M+="width:"+b(X)+"px"),z=[t("div",{class:"paC pj","mx-click":i+"\x1e_bt()",style:M},T)],S.push(...z)),z=[t(0,0,"picker")],M="",V&&(M+="background:"+b(V)+";"),R||(M+="width:100%"),S.push(t("div",{class:"paB pj","mx-click":i+"\x1e_bt()",style:M},z)),B&&V&&(T=[t(0,0,"\ue67f")],z=[t("i",{class:"p_ paQ","mx-click":i+"\x1e_bu()",title:b(F("_ah"))},T)],S.push(...z)),z=[],W){T=[],E=[];for(let e=0,a=G,l=a.length;e<l;e++){let l=a[e];I=[t("li",{class:"paG",id:"sc_"+b(l)+"_"+b(D),style:"background:#"+b(l),"mx-click":i+"\x1e_bq({color:'#"+k(l)+"'})"})],E.push(...I)}T.push(t("ul",{class:"paF pi",id:"scs_"+b(D)},E)),L=a?[a]:[a=t("stop",{mxs:"pn:_",offset:"0%","stop-color":"#000000","stop-opacity":"1"})],l?L.push(l):L.push(l=t("stop",{mxs:"pn:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),N=[t("lineargradient",{id:"gb_"+b(D),x1:"0%",y1:"100%",x2:"0%",y2:"0%"},L)],L=s?[s]:[s=t("stop",{mxs:"pn:b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})],l?L.push(l):L.push(l=t("stop",{mxs:"pn:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),N.push(t("lineargradient",{id:"gw_"+b(D),x1:"0%",y1:"100%",x2:"100%",y2:"100%"},L)),C=[t("defs",0,N),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+b(D)+")"}),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+b(D)+")"})],I=[t("svg",x,C),t("div",{class:"paK",id:"ci_"+b(D)})],E=[t("div",{class:"paJ",id:"cz_"+b(D),"mx-mousedown":i+"\x1e_bm()"},I)],L=o?[o]:[o=t("stop",{mxs:"pn:c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"})],r?L.push(r):L.push(r=t("stop",{mxs:"pn:d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"})),n?L.push(n):L.push(n=t("stop",{mxs:"pn:e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"})),p?L.push(p):L.push(p=t("stop",{mxs:"pn:f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"})),d?L.push(d):L.push(d=t("stop",{mxs:"pn:g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"})),c?L.push(c):L.push(c=t("stop",{mxs:"pn:h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"})),h?L.push(h):L.push(h=t("stop",{mxs:"pn:i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"})),u?L.push(u):L.push(u=t("stop",{mxs:"pn:j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"})),f?L.push(f):L.push(f=t("stop",{mxs:"pn:k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})),N=[t("lineargradient",{id:"ghsv_"+b(D),x1:"0%",y1:"100%",x2:"0%",y2:"0%"},L)],C=[t("defs",0,N),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+b(D)+")"})],I=[t("svg",x,C),t("div",{class:"paM",id:"si_"+b(D)})],E.push(t("div",{class:"paL","mx-mousedown":i+"\x1e_bn()"},I)),T.push(t("div",g,E)),P&&(C=[t("div",{class:"paS",id:"ai_"+b(D)})],I=[t("div",{class:"paR pg",id:"at_"+b(D),"mx-mousedown":i+"\x1e_bo()"},C)],E=[t("div",_,I)],T.push(...E)),E=[t("span",{class:"paP",id:"bc_"+b(D)}),t("input",{class:"pt paO",readonly:!0,id:"v_"+b(D),value:b(U)},0,1)],I=[t(0,0,"\u786e\u5b9a")],E.push(t("button",{mxs:"pn:l",class:"pm pn",type:"button","mx-click":i+"\x1e_bp();"},I)),T.push(t("div",m,E)),z.push(...T)}return S.push(t("div",{id:"bd_"+b(D),class:"paD paE-"+b(O),style:b(H)+":-1px"},z)),A="paz",Y&&(A+=" paT"),j.push(t("div",{"mx-contextmenu":i+"\x1e_B()",id:"root_"+b(D),class:A},S)),t(i,0,j)},mixins:[y.default],init(e){this.set({shortcuts:v}),w.default._bc(),this.on("destroy",()=>{w.default._at(this),w.default._bd()}),this.assign(e)},assign(e){return this._a_=e.color,this._be=e.alpha+""=="true",this._bf={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"}),!0},render(){this.digest({alpha:this._be,color:this._a_,current:this._a_})},_bi(e,t){let i=this,a=i._bf;a.h=e.h,a.s=e.s,a.v=e.v;let l=k(e.h,e.s,e.v).hex,s=b.default.node("cz_"+i.id),o=s.clientWidth,r=k(e.h,1,1);if(s.style.background=r.hex,i._bg=l,i._bh(),!t){let e=b.node("scs_"+i.id).querySelector('li[class$="paH"]');e&&e.classList.remove("paH");let t=b.node("si_"+i.id),l=t.clientHeight/2,s=Math.round(a.h*o/360-l),r=b.node("ci_"+i.id),n=r.clientWidth/2;t.style.top=s+"px",s=Math.round((1-a.v)*o-n);let p=Math.round(a.s*o-n);r.style.left=p+"px",r.style.top=s+"px"}let n=b.node("sc_"+l.substr(1,6)+"_"+i.id);n&&n.classList.add("paH")},_bl(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let a=parseInt(e.substr(3,2),16);isNaN(a)&&(a=255);let l=parseInt(e.substr(5,2),16);isNaN(l)&&(l=255);let s=((e,t,i)=>{let a,l,s,o;return e/=255,t/=255,i/=255,{h:a=(a=0==(o=(s=Math.max(e,t,i))-Math.min(e,t,i))?null:s==e?(t-i)/o+(t<i?6:0):s==t?(i-e)/o+2:(e-t)/o+4)%6*60,s:l=0===o?0:o/s,v:s}})(i,a,l),o=parseInt(e.substr(7,2),16);isNaN(o)&&(o=255),t._bj=("0"+o.toString(16)).slice(-2),t._bi(s),t._be&&t._bk(o)},_bk(e){let t=b.node("ai_"+this.id);e/=255,e*=b.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},_bh(){let e=this,t=b.node("bc_"+e.id),i=e._bg;e._be&&(b.node("at_"+e.id).style.background="linear-gradient(to right, "+i+"00 0%,"+i+" 100%)",i+=e._bj),t.style.background=i,b.node("v_"+e.id).value=i},"_B<contextmenu>"(e){e.preventDefault()},"_bm<mousedown>"(e){let t=this,i=b.node("cz_"+t.id).clientWidth,a=b.node("ci_"+t.id).clientWidth/2,l=e.eventTarget.getBoundingClientRect(),s=e.pageX-l.left-window.pageXOffset,o=e.pageY-l.top-window.pageYOffset,r=s/i,n=(i-o)/i;t._bi({h:t._bf.h,s:r,v:n});let p=b.node("ci_"+t.id),d=getComputedStyle(p),c=d.left,h=d.top,u=parseInt(c,10),f=parseInt(h,10),g=e;t._x(e,e=>{let l=e.pageY-g.pageY,s=e.pageX-g.pageX;(l+=f)<=-a?l=-a:l>=i-a&&(l=i-a),(s+=u)<=-a?s=-a:s>=i-a&&(s=i-a),p.style.left=s+"px",p.style.top=l+"px";let o=(s+a)/i,r=(i-(l+a))/i;t._bi({h:t._bf.h,s:o,v:r})})},"_bn<mousedown>"(e){let t=this,i=e.eventTarget,a=b.node("si_"+t.id),l=b.node("cz_"+t.id).clientWidth,s=a.clientHeight/2,o=i.getBoundingClientRect(),r=(e.pageY-o.top-window.scrollY)/l*360;t._bi({h:r,s:t._bf.s,v:t._bf.v});let n=parseInt(getComputedStyle(a).top,10);t._x(e,i=>{let o=i.pageY-e.pageY;(o+=n)<=-s?o=-s:o>=l-s&&(o=l-s),a.style.top=o+"px";let r=(o+s)/l*360;t._bi({h:r,s:t._bf.s,v:t._bf.v},!0)})},"_bo<mousedown>"(e){let t=e.eventTarget,i=this,a=b.node("ai_"+i.id),l=b.node("at_"+i.id).clientWidth,s=a.clientWidth/2,o=t.getBoundingClientRect(),r=(e.pageX-o.left)/l*255|0;i._bj=("0"+r.toString(16)).slice(-2),i._bk(r),i._bh();let n=getComputedStyle(a),p=parseInt(n.left,10);i._x(e,t=>{let o=t.pageX-e.pageX;(o+=p)<=-s?o=-s:o>=l-s&&(o=l-s),a.style.left=o+"px";let r=Math.round((o+s)/l*255);i._bj=("0"+r.toString(16)).slice(-2),i._bh()})},"_bp<click>"(){let e=this;e._z();let t=b.node("v_"+e.id).value;t!=e._a_&&(e.digest({color:t,current:t}),b.default.dispatch(e.root,"input",{color:e._a_=t}))},"_bq<click>"(e){this._bl(e.params.color),e.eventTarget.classList.add("paH")},_br(e){return b.default.inside(e,this.root)},_y(){let e=b.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",w.default._au(this),b.node("root_"+this.id).classList.add("pv"),this._bs||(this.digest({renderUI:!0},null,()=>{this._bl(this._a_)}),this._bs=1))},_z(){let e=b.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(b.node("root_"+this.id).classList.remove("pv"),e.style.display="none",w.default._at(this))},"_bt<click>"(){if(this.get("disabled"))return;let e=b.node("bd_"+this.id);"none"==getComputedStyle(e).display?this._y():this._z()},"_bu<click>"(){if(this.get("disabled"))return;let e=this;if(e._bs){let t=b.node("v_"+e.id).value;e._z(),e.digest({color:"",current:t})}else e.digest({color:""});b.default.dispatch(e.root,"input",{color:e._a_=""})}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,i)=>{let a={class:"po"},l={class:"pp",style:"word-break:break-all;"},s={class:"pq pi"};const o=e("magix"),r=e("../../i18n/index");t.default=o.default.View.extend({tmpl:(e,t,i)=>{let o,r,n=[],{title:p,body:d,i18n:c}=e;return r=[t(0,0,p)],o=[t("h5",0,r)],n.push(t("div",a,o)),o=[t(0,0,d)],n.push(t("div",l,o)),r=[t(0,0,c("_aj"))],o=[t("button",{"mx-click":i+"\x1e_bp();",class:"pm pn pe",type:"button"},r)],n.push(t("div",s,o)),t(i,0,n)},init(e){this._bv=e.dialog,this._bw=e.body,this._bx=e.title||r.default("_ai"),this._by=e.enterCallback},render(){this.digest({body:this._bw,title:this._bx})},"_bp<click>"(){let e=this;e._bv.close(),e._by&&o.default.toTry(e._by)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,i)=>{let a={class:"po"},l={class:"pp",style:"word-break:break-all;"},s={class:"pq pi"};const o=e("magix"),r=e("../../i18n/index");t.default=o.default.View.extend({tmpl:(e,t,i)=>{let o,r,n=[],{title:p,body:d,i18n:c}=e;return r=[t(0,0,p)],o=[t("h5",0,r)],n.push(t("div",a,o)),o=[t(0,0,d)],n.push(t("div",l,o)),r=[t(0,0,c("_ak"))],o=[t("button",{type:"button","mx-click":i+"\x1e_bA()",class:"pm pe"},r)],r=[t(0,0,c("_aj"))],o.push(t("button",{type:"button","mx-click":i+"\x1e_bp()",class:"pm pn pa pe"},r)),n.push(t("div",s,o)),t(i,0,n)},init(e){let t=this;t._bv=e.dialog,t._bw=e.body,t._bx=e.title||r.default("_ai"),t._by=e.enterCallback,t._bz=e.cancelCallback},render(){this.digest({body:this._bw,title:this._bx})},"_bp<click>"(){let e=this;e._bv.close(),e._by&&o.default.toTry(e._by)},"_bA<click>"(){let e=this;e._bv.close(),e._bz&&o.default.toTry(e._bz)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,i)=>{let a;const l=e("magix");e("./alert"),e("./confirm"),l.default.applyStyle("ph",".paU{position:absolute}.paV{position:relative;background-color:#fff;border-radius:2px;border:1px solid #e6e6e6}.paW{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.paW:focus,.paW:hover{opacity:.5}.paX{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.paY{-webkit-filter:blur(3px);filter:blur(3px)}.paZ{-webkit-animation:pc .3s;animation:pc .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.pb_{position:absolute;right:10px;top:0;width:1px;height:0}.pba{padding:80px 0}@-webkit-keyframes pc{0%{opacity:0}to{opacity:.2}}@keyframes pc{0%{opacity:0}to{opacity:.2}}.pbb{-webkit-animation:pd .2s;animation:pd .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd{0%{opacity:.2}to{opacity:0}}@keyframes pd{0%{opacity:.2}to{opacity:0}}.pbc{margin-bottom:50px;min-height:60px}.pbd{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.pbe{-webkit-animation:pe .3s;animation:pe .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.pbf{-webkit-animation:pf .2s;animation:pf .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let s=500,o=[];t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,o,r,n,p,d=[],{removeClass:c,zIndex:h,id:u,left:f,top:g,width:x,closable:_}=e;return s="paX",c||(s+=" paZ"),d.push(t("div",{style:"z-index:"+l(h-1),id:"mask_"+l(u),class:s})),r=[t("input",{id:"focus_"+l(u),class:"pb_"},0,1)],n=[t(0,0,"\ue67f")],r.push(t("span",{class:"p_ paW "+l(_?"":"ph"),"mx-click":i+"\x1e_bD()"},n)),a?n=[a]:(p=[t("span",{class:"ps"})],n=[a=t("div",{mxs:"pq:_",class:"pr pba"},p)]),r.push(t("div",{class:"paV pbc",id:"cnt_"+l(u)},n)),s="paU",c||(s+=" pbe"),o=[t("div",{id:"body_"+l(u),style:"left:"+l(f)+"px;top:"+l(g)+"px;width:"+l(x)+"px;",class:s},r)],d.push(t("div",{class:"pbd",style:"z-index:"+l(h)+";"},o)),t(i,0,d)},init(e){let t=this,i=l.default.node("app"),a=t.root;t.on("destroy",()=>{(e=>{for(let t,i=o.length-1;i>=0;i--)if((t=o[i]).id==e.id){o.splice(i,1);break}})(t),500==(s-=2)&&i.classList.remove("paY"),l.default.dispatch(a,"close"),a.parentNode.removeChild(a)}),l.default.has(e,"closable")||(e.closable=!0),t.set(e),500==s&&i.classList.add("paY"),s+=2,o.push(t)},render(){let e=this;e.digest({zIndex:s},null,()=>{let t=e.get();setTimeout(e.wrapAsync(()=>{e.root.style.display="block",l.default.node("focus_"+e.id).focus()}),30),e.owner.mountVframe(l.default.node("cnt_"+e.id),t.view,t),setTimeout(e.wrapAsync(()=>{e.digest({removeClass:!0})}),300)})},_bB(e){let t=l.default.node("cnt_"+this.id);l.default.Vframe.byNode(t).invoke("fire",["unload",e])},_bC(){let e,t=this.id;(e=l.default.node("body_"+t)).classList.add("pbf"),(e=l.default.node("mask_"+t)).classList.add("pbb")},"_bD<click>"(){l.default.dispatch(this.root,"dlg_close")},"$doc<keyup>"(e){if(27==e.keyCode){let e=o[o.length-1];e==this&&e.get("closable")&&l.default.dispatch(this.root,"dlg_close")}}},{_bF(e,t){let i=l.default.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+i+'" style="display:none" />');let a,s=l.default.node(i),o=e.owner.mountVframe(s,"gallery/mx-dialog/index",t);return s.addEventListener("dlg_close",()=>{if(!s._bE&&!a){let e=()=>{s._bE=1,o.invoke("_bC"),setTimeout(()=>{o.unmountVframe()},200)},t={p:0,prevent(){a=1},resolve(){t.p=1,a=0,e()},reject(){t.p=1,a=0}};o.invoke("_bB",[t]),a||t.p||e()}}),s},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,a,l){this.mxDialog("gallery/mx-dialog/"+(l||"confirm"),{body:e,cancelCallback:i,enterCallback:t,title:a,modal:!0,width:300,closable:!1,left:(window.innerWidth-300)/2,top:Math.max((window.innerHeight-220)/2,0)})},mxDialog(e,t){let i,a,s=this,o={view:e};return l.default.use(e,s.wrapAsync(r=>{let n="$dlg_"+e;s[n]||(s[n]=1,l.default.mix(o,r.dialogOptions),l.default.mix(o,t),o.width||(o.width=500),o.left||(o.left=(window.innerWidth-o.width)/2),o.top||(o.top=100),o.dialog={close(){i&&l.default.dispatch(i,"dlg_close")}},(i=s._bF(s,o)).addEventListener("close",()=>{delete s[n],a&&a()}))})),{close(){i&&l.default.dispatch(i,"dlg_close")},whenClose(e){a=e}}}})}),define("gallery/mx-dragdrop/index",[],(e,t,i)=>{let a=window.getComputedStyle,l=e=>{(e=window.getSelection)&&e().removeAllRanges()},s=e=>{e.preventDefault()},o=["mousemove","touchmove","pointermove"],r=["mouseup","touchend","pointercancel","touchcancel"],n=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];t.default={ctor(){let e=this;e.on("destroy",()=>{e._bG()})},_bG(e){let t=this,i=t._bH;if(i){let a;for(a of(delete t._bH,o))document.removeEventListener(a,t._bI);for(a of r)document.removeEventListener(a,t._bJ);for(a of n)document.removeEventListener(a,s);window.removeEventListener("blur",t._bJ);let l=i._bK;i._bL&&l(e)}},_x(e,t,i){let a=this;if(a._bG(),e){l(),a._bH={_bK:i,_bL:!!i};let e,p=!!t;for(e of(a._bM=0,a._bJ=(e=>{a._bM=1,a._bG(e)}),a._bI=(e=>{p&&t(e)}),o))document.addEventListener(e,a._bI);for(e of r)document.addEventListener(e,a._bJ);for(e of n)document.addEventListener(e,s,{passive:!1});window.addEventListener("blur",a._bJ)}},_J(e,t){let i=null;if(document.elementFromPoint)for(!s._bN&&a&&(s._bN=!0,s._bO=null!==document.elementFromPoint(-1,-1)),s._bO&&(e+=window.pageXOffset,t+=window.pageYOffset),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},_bP:l}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,i)=>{let a,l={class:"pbn"};const s=e("magix"),o=e("../mx-monitor/index");s.default.applyStyle("pi",'.pbg{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.pbg:hover{border-color:#ccc}.pbh{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.pbi{cursor:not-allowed;background-color:#fbfbfb}.pbi:hover{border-color:#e6e6e6}.pbi .pbh{cursor:not-allowed}.pbj{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.pbk .pbj{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}.pbg[tabindex="0"]:focus,.pbk,.pbk:hover{border-color:#fa742b}.pbl{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.pbm{color:#999}.pbn{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pbk .pbn{display:block}.pbo{overflow:auto;max-height:196px;padding:2px 0}.pbp{padding:0 2px;margin:2px 0}.pbq{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.pbq:hover{color:#333;background-color:#f0f0f0}.pbr,.pbr:active,.pbr:focus,.pbr:hover{color:#fff;background-color:#fa742b}'),t.default=s.default.View.extend({tmpl:(e,t,i,s,o,r,n)=>{let p,d,c,h,u,f,g,x,_,m,b=[],{disabled:y,id:w,selectedText:v,selected:k,emptyText:A,rList:S,list:z,textKey:M,valueKey:T}=e;if(c=[],u=[t(0,0,v)],d="pbl",""!==k&&k!=A||(d+=" pbm"),h=[t("span",{class:d},u)],a?h.push(a):(u=[t(0,0,"\ue692")],h.push(a=t("span",{mxs:"pr:_",class:"p_ pbj"},u))),c.push(t("div",{class:"pbh","mx-click":i+"\x1e_bt()",title:s(v)},h)),S){g=[];for(let e=0,a=z,l=a.length;e<l;e++){let l=a[e];x=[];let o=l,c=l;M&&T&&(f="",o=l[M],f+=" ",c=l[T]);let h=c+""==k+"";m=[t(0,0,o)],d="pbq pl",h&&(d+=" pbr"),_=[t("span",{"mx-click":i+"\x1e_bQ({item:'"+n(r,l)+"'})",class:d},m)],x.push(t("li",{title:s(o),active:null!=(p=h)&&p,class:"pbp"},_)),g.push(...x)}u=[t("ul",{class:"pbo",id:"list_"+s(w)},g)],h=[t("div",l,u)],c.push(...h)}return d="pbg",y&&(d+=" pbi"),b.push(t("div",{id:"dd_"+s(w),class:d},c)),t(i,0,b)},init(e){o.default._bc(),this.on("destroy",()=>{o.default._at(this),o.default._bd()}),this.assign(e)},assign(e){let t=e.selected,i=e.textKey||"",a=e.valueKey||"",l=e.emptyText||"",o=e.disabled+""=="true",r=e.list||[];r=r.slice();let n=s.default.toMap(r,a);if(l)if(i&&a){if(!n[""]){let e={};e[i]=l,e[a]="",r.unshift(e),n[""]=e}}else n[l]||(r.unshift(l),n[l]=l);t||!l||i||a||(t=l),t&&n[t]||(t=n[t]||r[0],i&&a&&(t=t[a]));let p=i&&a?n[t][i]:t;return this.set({selected:t,selectedText:p,list:r,textKey:i,valueKey:a,emptyText:l,disabled:o}),!0},render(){this.digest()},_br(e){return s.default.inside(e,this.root)},_y(){let e=this,t=s.default.node("dd_"+e.id);if(!t.classList.contains("pbk")){t.classList.add("pbk");let i=()=>{let i=(t=s.default.node("list_"+e.id)).querySelector("li[active]");i&&i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded()};e.get("rList")?i():e.digest({rList:!0},null,i),o.default._au(e)}},_z(){let e=this,t=s.default.node("dd_"+e.id);t.classList.contains("pbk")&&(t.classList.remove("pbk"),o.default._at(e))},"_bt<click>"(){let e=this,t=s.default.node("dd_"+e.id);t.classList.contains("pbk")?e._z():t.classList.contains("pbi")||e._y()},"_bQ<click>"(e){let t=this;t._z();let i=t.get("valueKey"),a=t.get("textKey"),l=t.get("selected"),o=e.params.item,r=o,n=o;a&&i&&(n=o[a],r=o[i]),l!==r&&(t.digest({selected:r,selectedText:n}),s.default.dispatch(t.root,"change",{item:o,value:i?o[i]:o,text:a?o[a]:o}))}})}),define("gallery/mx-font/align",["magix"],(e,t,i)=>{const a=e("magix");a.default.applyStyle("pj",".pbs{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbt{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbt:hover{background:#ccc}.pbu,.pbu:hover{background:#fa742b;color:#fff}.pbv,.pbv .pbt{cursor:not-allowed;opacity:.7}.pbv .pbt,.pbv .pbt:hover{background:#e9e9e9}.pbv .pbu,.pbv .pbu:hover{background:#fb955d}"),t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,o,r=[],{disabled:n,i18n:p,value:d}=e;return o=[t(0,0,"\ue687")],l="pd pbt pw","flex-start"==d.h&&(l+=" pbu"),s=[t("li",{title:a(p("_al")),"mx-click":i+"\x1e_as({type:'h',v:'flex-start'})",class:l},o)],o=[t(0,0,"\ue68a")],l="pd pbt pw","center"==d.h&&(l+=" pbu"),s.push(t("li",{title:a(p("_am")),"mx-click":i+"\x1e_as({type:'h',v:'center'})",class:l},o)),o=[t(0,0,"\ue686")],l="pd pbt pw","flex-end"==d.h&&(l+=" pbu"),s.push(t("li",{title:a(p("_an")),"mx-click":i+"\x1e_as({type:'h',v:'flex-end'})",class:l},o)),o=[t(0,0,"\ue614")],l="pd pbt pw","flex-start"==d.v&&(l+=" pbu"),s.push(t("li",{title:a(p("_ao")),"mx-click":i+"\x1e_as({type:'v',v:'flex-start'})",class:l},o)),o=[t(0,0,"\ue613")],l="pd pbt pw","center"==d.v&&(l+=" pbu"),s.push(t("li",{title:a(p("_ap")),"mx-click":i+"\x1e_as({type:'v',v:'center'})",class:l},o)),o=[t(0,0,"\ue612")],l="pd pbt pw","flex-end"==d.v&&(l+=" pbu"),s.push(t("li",{title:a(p("_aq")),"mx-click":i+"\x1e_as({type:'v',v:'flex-end'})",class:l},o)),l="pj pbs",n&&(l+=" pbv"),r.push(t("ul",{class:l},s)),t(i,0,r)},init(e){this.assign(e)},assign(e){return this._bR=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_as<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bR,{type:l,v:s}=e.params;i[l]=s,t._bR=i,t.digest({value:i}),a.default.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-font/style",["magix"],(e,t,i)=>{const a=e("magix");a.default.applyStyle("pj",".pbs{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbt{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbt:hover{background:#ccc}.pbu,.pbu:hover{background:#fa742b;color:#fff}.pbv,.pbv .pbt{cursor:not-allowed;opacity:.7}.pbv .pbt,.pbv .pbt:hover{background:#e9e9e9}.pbv .pbu,.pbv .pbu:hover{background:#fb955d}"),t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,o,r=[],{disabled:n,i18n:p,value:d}=e;return o=[t(0,0,"\ue749")],l="pd pbt pw",d.bold&&(l+=" pbu"),s=[t("li",{title:a(p("_ar")),"mx-click":i+"\x1e_as({key:'bold'})",class:l},o)],o=[t(0,0,"\ue65f")],l="pd pbt pw",d.italic&&(l+=" pbu"),s.push(t("li",{title:a(p("_as")),"mx-click":i+"\x1e_as({key:'italic'})",class:l},o)),o=[t(0,0,"\ue62e")],l="pd pbt pw",d.underline&&(l+=" pbu"),s.push(t("li",{title:a(p("_at")),"mx-click":i+"\x1e_as({key:'underline'})",class:l},o)),l="pj pbs",n&&(l+=" pbv"),r.push(t("ul",{class:l},s)),t(i,0,r)},init(e){this.assign(e)},assign(e){return this._bR=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_as<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bR,{key:l}=e.params;i[l]=!i[l],t._bR=i,t.digest({value:i}),a.default.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,i)=>{let a,l={class:"pbx pj"};const s=e("magix"),o=e("../mx-monitor/index");s.default.applyStyle("pk",".pbw{z-index:400}.pbx{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.pby{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 8px;margin:2px}.pbz{color:#fff;background-color:#fa742b}.pbA{height:1px;background:#eee;margin:4px 0}.pbB{color:#ccc;cursor:not-allowed}"),t.default=s.default.View.extend({tmpl:(e,t,i,s,o,r,n)=>{let p,d,c,h,u,f,g=[],{width:x,id:_,list:m,disabled:b,textKey:y}=e;d=[];for(let e=0,l=m,o=l.length;e<o;e++){let o=l[e];c=[],o.spliter?(h=a?[a]:[a=t("li",{mxs:"pu:_",class:"pbA"})],c.push(...h)):(f=[t(0,0,o[y])],u="pl pby ",b[o.id]&&(u+=" pbB"),h=[t("li",{"mx-mouseover":i+"\x1e_bZ({d:"+s(b[o.id]||0)+"})","mx-mouseout":i+"\x1e_bZ({d:"+s(b[o.id]||0)+"});","mx-click":i+"\x1e_bQ({item:'"+n(r,o)+"',d:"+s(b[o.id]||0)+"})",title:s(o[y]),class:u},f)],c.push(...h)),d.push(...c)}return p=[t("ul",l,d)],g.push(t("div",{style:"width:"+s(x)+"px;position:absolute;left:-10000px;top:-10000px",class:"pbw",id:"cnt_"+s(_),"mx-contextmenu":i+"\x1e_B()"},p)),t(i,0,g)},init(e){let t=this;t.assign(e),o.default._bc(),t.on("destroy",()=>{o.default._at(t),o.default._bd()})},assign(e){let t=this,i=e.width||140,a=e.valueKey||"id",l=e.textKey||"text";return t._bS=e.list,t._bT=i,t._bU=a,t._bV=l,t._bW=e.disabled||{},t._bX=e.picked,!0},render(){let e=this;e.digest({disabled:e._bW,list:e._bS,width:e._bT,valueKey:e._bU,textKey:e._bV})},_br(e){return s.default.inside(e,this.root)},_y(e){let t=this;if(!t._bY){t._bY=1;let i=s.node("cnt_"+t.id),a=i.clientWidth,l=i.clientHeight,r=e.pageX,n=e.pageY;r+a>window.innerWidth&&(r-=a)<0&&(r=0),n+l>window.innerHeight&&(n-=l)<0&&(n=0),i.style.left=r+"px",i.style.top=n+"px",o.default._au(t)}},_z(){let e=this;if(e._bY){e._bY=!1,s.node("cnt_"+e.id).style.left="-10000px",o.default._at(e)}},"_bZ<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!s.default.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("pbz")},"_bQ<click>"(e){if(e.params.d)return;this._z();let t=this._bX;t&&t(e.params.item)},"_B<contextmenu>"(e){e.preventDefault()}},{show(e,t,i){let a="ctx_"+e.id,l=s.node(a),o=l&&s.default.Vframe.byNode(l);o?(o.invoke("assign",[i]),o.invoke("render"),o.invoke("_y",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${a}"></div>`),(o=e.owner.mountVframe(s.node(a),"gallery/mx-menu/index",i)).invoke("_y",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,i)=>{let a=0,l=[],s=["mousedown","keyup","touchstart","pointerstart"],o=e=>{for(let t=l.length;t--;){let i=l[t];if(i._c_)l.splice(t,1);else{let t=i._ca;"resize"!=e.type&&t._br(e.target)||t._z()}}},r=e=>{let t=l[e.id];t&&(t._c_=!0),delete l[e.id]};t.default={_au(e){r(e);let t={_ca:e};l.push(t),l[e.id]=t},_at:r,_bc(){if(!a){for(let e of s)document.addEventListener(e,o);window.addEventListener("resize",o)}a++},_bd(){if(a>0&&!--a){for(let e of s)document.removeEventListener(e,o);window.removeEventListener("resize",o)}}}}),define("gallery/mx-number/index",["magix"],(e,t,i)=>{const a=e("magix");a.default.applyStyle("pl",'.pbC{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.pbD,.pbE{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.pbD:hover,.pbE:hover{background-color:#f0f0f0}.pbE{top:1px}.pbD{bottom:1px}.pbF:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.pbD:after{border-top:4px solid #ccc}.pbE:after{border-bottom:4px solid #ccc}.pbD.pbG,.pbE.pbG{cursor:not-allowed;border-color:transparent}.pbD.pbG:hover,.pbE.pbG:hover{background-color:transparent}'),t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{id:o,disabled:r}=e;return s.push(t("input",{class:"pbC",id:"ipt_"+a(o),"mx-focusin":i+"\x1e_ct()","mx-focusout":i+"\x1e_cv()","mx-change":i+"\x1e_cs()","mx-keydown":i+"\x1e_cA()",disabled:r,autocomplete:"off","mx-input":i+"\x1e_cB()"},0,1)),l="pbE pbF pj",r&&(l+=" pbG"),s.push(t("span",{"mx-click":i+"\x1e_co({i:1})","mx-mousedown":i+"\x1e_cz({i:1})","mx-contextmenu":i+"\x1e_B()",class:l})),l="pbD pbF pj",r&&(l+=" pbG"),s.push(t("span",{"mx-click":i+"\x1e_co()","mx-mousedown":i+"\x1e_cz()","mx-contextmenu":i+"\x1e_B()",class:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){let t=this,i=e.value;void 0===i&&(i=""),""!==i&&(i=+i);let l=t._cb!==i,s=t._cc;return t._cb=i,t._cd=+e.step||1,t._ce=e.empty+""=="true",t._cf=e.format+""=="true",t._cc=t.root.hasAttribute("disabled"),t._cg=a.default.has(e,"max")?+e.max:Number.MAX_VALUE,t._ch=a.default.has(e,"min")?+e.min:-Number.MAX_VALUE,t._ci=+e.ratio||10,t._cj=e.fixed||0,l||s!=t._cc},render(){let e=this;e.digest({disabled:e._cc},null,()=>{e._ck()})},_ck(){let e=this,t=e._cb;""!==t&&(t=e._cl(t),e._cf&&(t=t.toFixed(e._cj))),e._cm=a.node("ipt_"+e.id),e._cm.value=t},_cl(e){let t=this;if((e=+e)||0===e){let i=t._cg,a=t._ch;e>i?e=i:e<a&&(e=a),e=+e.toFixed(t._cj)}return isNaN(e)?t._ce?"":0:e},_cn(e,t){let i=this;if(""!==e||!i._ce)return(e=i._cl(e))!==i._cb&&(t||(i._cm.value=e),a.default.dispatch(i.root,"input",{value:i._cb=e})),i._cb;a.default.dispatch(i.root,"input",{value:i._cb=e})},_co(e,t){let i=this._cb;""===i&&(i=0);let a=this._cd,l=i;t&&(a*=this._ci),e?l+=a:l-=a,this._cn(l)},_cp(){let e=this._cm;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},_cr(){let e=this;e.root.classList.add("pv"),a.default.has(e,"_cq")||(e._cq=e._cb)},"_cs<change>"(e){e.stopPropagation()},"_ct<focusin>"(){this._cr()},"_cv<focusout>"(e){let t=this;t._cu||(t.root.classList.remove("pv"),t._ck(),t._cq!=t._cb&&a.default.dispatch(t.root,"change",{value:t._cb}),delete t._cq)},"_co<click>"(e){let t=this;t._cc||t._cw||(t._co(e.params.i,e.shiftKey),t._cp())},"_cz<mousedown>"(e){let t=this;if(!t._cc){t._cu=!0,t._cr();let i=e.params.i;t._cx=setTimeout(t.wrapAsync(()=>{t._cy=setInterval(t.wrapAsync(()=>{t._cw=!0,t._co(i),t._cp()}),50)}),300)}},"_cA<keydown>"(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();let t=this;if(!t._cc){let i=e.eventTarget.value;if(""===i)t._cb="";else{let e=Number(i);(e||0===e)&&e!=t._cb&&(t._cb=e)}t._co(38==e.keyCode,e.shiftKey)}}},"_B<contextmenu>"(e){e.preventDefault()},"_cB<input>"(e){e.stopPropagation();let t=e.eventTarget;this._cn(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e._cx),clearInterval(e._cy),delete e._cu,setTimeout(e.wrapAsync(()=>{delete e._cw}),0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,i)=>{let a={class:"pbI"};const l=e("magix"),s=e("../mx-dialog/index");l.default.applyStyle("pm",".pbH{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer;margin:4px 0}.pbI{line-height:92px;text-align:center;color:#999}.pbJ{min-height:500px}.pbK{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.pbK:hover{border-color:#999}.pbL{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.pbM{width:100px;margin:0 5px;height:25px}.pbN{margin:30px 0}.pbO{font-size:16px}.pbP{position:absolute;right:3px;top:2px;opacity:.2}.pbP:hover{opacity:.5}"),t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,o,r,n,p=[],{src:d,i18n:c}=e;return s=[],d?(n=[t(0,0,"\ue67f")],r=[t("i",{class:"p_ pbP","mx-click":i+"\x1e_cE()",title:l(c("_au"))},n)],o=[t("div",{class:"pbL",style:"background-image:url('"+l(d)+"')"},r)],s.push(...o)):(r=[t(0,0,c("_av"))],o=[t("div",a,r)],s.push(...o)),p.push(t("div",{class:"pbH pg","mx-click":i+"\x1e_cD()"},s)),t(i,0,p)},mixins:[s.default],init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()},"_cD<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,done(t){e.digest(t),e._cC(t)}})},_cC(e){l.default.dispatch(this.root,"change",e)},"_cE<click>"(e){e.stopPropagation(),this.digest({src:""}),this._cC({src:"",width:0,height:0})}})}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,i)=>{let a={class:"po pE"},l={class:"pp pi pbJ"},s={class:"pc pbN pbO"},o={class:"pc pbM pl"};const r=e("magix"),n=e("../../designer/service"),p=e("../../i18n/index");t.default=r.default.View.extend({mixins:[n.default],tmpl:(e,t,i,r,n,p,d,c)=>{let h,u,f,g,x,_=[],{i18n:m,error:b,list:y}=e;if(u=[t(0,0,m("_ax"))],h=[t("h5",0,u)],_.push(t("div",a,h)),h=[],b)f=[t(0,0,b.msg)],u=[t("div",s,f)],h.push(...u);else{u=[];for(let e=0,a=y,l=a.length;e<l;e++){let l=a[e];x=[t("div",{class:"pbL",style:"background-image:url('"+r(l.src)+"')"})],g=[t("div",{class:"pbK","mx-click":i+"\x1e_cG({src:'"+c(l.src)+"'})"},x)],x=[t(0,0,l.title)],g.push(t("div",o,x)),f=[t("div",{class:"pd",title:r(l.title)},g)],u.push(...f)}h.push(...u)}return _.push(t("div",l,h)),t(i,0,_)},init(e){this._bv=e.dialog,this._cF=e.done},render(){this.fetch(["_ah"],(e,t)=>{this.digest({error:e,list:t.get("data",[])})})},"_cG<click>"(e){let t=this,i=new Image,a=t._cF,l=e.params.src;i.onerror=t.wrapAsync(()=>{t.alert(p.default("_aw"))}),i.onload=t.wrapAsync(()=>{let e=i.width,s=i.height;t._bv.close(),a({src:l,width:e,height:s})}),i.src=l}})}),define("gallery/mx-pointer/cursor",["magix"],(e,t,i)=>{const a=e("magix"),l=a.default.guid("cursor_");a.default.applyStyle("pn",".pbQ{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}");const s=document.body;t.default={_y(e){let t=getComputedStyle(e);this._aw(t.cursor)},_aw(e){let t=a.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbQ" id="${l}"/>`),t=a.node(l)),t.style.cursor=e,t.style.display="block"},_z(){let e=a.node(l);e&&(e.style.display="none")},_I(e){s.style.cursor=e},_K(){s.style.cursor="auto"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,i)=>{const a=e("magix");a.default.applyStyle("po",".pbR{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000;pointer-events:none}");let l=a.default.guid("de_");t.default={_aH(e){let t=a.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbR pw" id="${l}"/>`),t=a.node(l)),t.innerHTML=e},_y(e){let t=a.node(l).style;t.left=e.pageX+10+"px",t.top=e.pageY+18+"px"},_z(){let e=a.node(l).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,i)=>{const a=e("magix");a.default.applyStyle("pp",".pbS{position:absolute;border:1px dashed #fa742b;display:none;pointer-events:none}");let l=a.default.guid("set_");t.default={_H(){a.node(l)||document.body.insertAdjacentHTML("beforeend",`<div id="${l}" class="pbS"></div>`)},_aH(e,t,i,s){let o=a.node(l).style;o.left=e+"px",o.top=t+"px",o.width=i+"px",o.height=s+"px",o.display="block"},_z(){a.node(l).style.display="none"}}}),define("gallery/mx-runner/fx",["magix","./index"],(e,t,i)=>{const a=e("magix"),l=e("./index");let s=e=>e,o=Date.now,r=function(e,t){let i=this;i._cH&&!t||(t=t||s,i._cH=((e,a)=>e+(a-e)*t(i._cI/i._cJ))),i._cK=[],i._cL=e};a.default.mix(r.prototype,{_cQ(e,t){let i=this;i._c_||(i._cK.push({_cM:e,_cN:t}),i._cO||i._cP())},_cP(){let e=this,t=e._cK.shift();t?(e._cJ=t._cM,e._cR=t._cN,e._cS=o(),e._cO||l.default._cT(e._cL,e._cO=(t=>{e._cI=Date.now()-e._cS,e._cI>e._cJ&&(e._cI=e._cJ,t=1);try{e._cR(e._cH)}catch(e){t=e}t&&e._cP()}))):e._cU()},_cU(){let e=this;e._cO&&(l.default._cV(e._cO),delete e._cO)},destroy(){this._cU(),this._cK=[],this._c_=1}}),t.default={_cX(e,t){let i=new r(e,t);return this.capture(a.default.guid("_cW"),i),i}}}),define("gallery/mx-runner/index",["magix"],(e,t,i)=>{const a=e("magix");let l=window.requestAnimationFrame||(e=>setTimeout(e,16)),s=window.cancelAnimationFrame||clearTimeout,o=Date.now;t.default={_cK:[],_cT(e,t){this._cK.push({i:e||15,f:t,n:o()}),this._cP()},_cV(e){let t=this._cK;for(let i,a=0;a<t.length;a++)if(!(i=t[a]).r&&i.f==e){i.r=1;break}},_cP(){let e=this;if(!e._cY){let t=()=>{let i=e._cK;for(let e,t,l=0;l<i.length;l++)(e=i[l]).r?i.splice(l--,1):(t=o())-e.n>=e.i&&(e.n=t,a.default.toTry(e.f));i.length?e._cY=l(t):(s(e._cY),delete e._cY)};e._cY=l(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,i)=>{const a=e("magix"),l=e("./zh-cn"),s={"zh-cn":l.default,zh:l.default},o=a.default.has,r=/\{(\d+)\}/g;t.default=((e,...t)=>{let i=(a.default.config("lang")||navigator.language).toLowerCase();o(s,i)||(i="zh-cn");let l=s[i],n=o(l,e)?l[e]:e;return t.length&&(n=n.replace(r,(e,i,a)=>(i|=0,t.length>i?(a=t[i],o(l,a)?l[a]:a):e))),n})}),define("i18n/zh-cn",[],(e,t,i)=>{t.default={_k:"\u7269\u8054\u7f51\u8bbe\u8ba1\u5668",_ai:"\u63d0\u793a",_aj:"\u786e\u5b9a",_ak:"\u53d6\u6d88",_w:"\u653e\u5927",_v:"\u7f29\u5c0f",__:"\u5220\u9664\u8f85\u52a9\u7ebf",_a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",_r:"\u64a4\u9500(Ctrl+Z)",_s:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",_ay:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",_az:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",_aA:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",_aB:"\u5143\u7d20",_aC:"\u5c5e\u6027",_aD:"\u6570\u636e\u6e90",_aE:"\u6982\u89c8\u56fe",_u:"\u6253\u5f00{0}\u9762\u677f",_t:"\u5173\u95ed{0}\u9762\u677f",_aF:"\u5c55\u5f00{0}\u9762\u677f",_aG:"\u6298\u53e0{0}\u9762\u677f",_B:"\u6309\u4e0b\u62d6\u52a8\u65cb\u8f6c\u5143\u7d20",_C:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6",_D:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u9ad8\u5ea6",_E:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6\u548c\u9ad8\u5ea6",_aH:"\u7c7b\u578b\uff1a",_W:"X\u5750\u6807\uff1a",_X:"Y\u5750\u6807\uff1a",_G:"\u5bbd\uff1a",_H:"\u9ad8\uff1a",_Y:"\u65cb\u8f6c\u89d2\u5ea6\uff1a",_L:"\u80cc\u666f\u989c\u8272\uff1a",_ab:"\u6587\u5b57\u989c\u8272\uff1a",_b:"\u5168\u9009",_e:"\u7c98\u8d34",_c:"\u590d\u5236",_d:"\u526a\u5207",_j:"\u5220\u9664",_f:"\u4e0a\u79fb\u4e00\u5c42",_h:"\u79fb\u81f3\u9876\u5c42",_g:"\u4e0b\u79fb\u4e00\u5c42",_i:"\u79fb\u81f3\u5e95\u5c42",_l:"\u5de6\u5bf9\u9f50",_n:"\u53f3\u5bf9\u9f50",_o:"\u4e0a\u5bf9\u9f50",_q:"\u4e0b\u5bf9\u9f50",_p:"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50",_m:"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50",_aw:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",_au:"\u6e05\u9664\u56fe\u7247",_av:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",_ax:"\u56fe\u7247\u5e93",_ah:"\u6e05\u9664\u989c\u8272",_Z:"\u5b57\u53f7\uff1a",_I:"\u5168\u5c4f\u663e\u793a\uff1a",_M:"\u80cc\u666f\u56fe\u7247\uff1a",_N:"\u5e73\u94fa\u65b9\u5f0f\uff1a",_O:"\u62c9\u4f38\u94fa\u6ee1",_P:"\u539f\u59cb\u5c3a\u5bf8",_Q:"\u6a2a\u5411\u5e73\u94fa",_R:"\u5782\u76f4\u5e73\u94fa",_S:"\u53cc\u5411\u5e73\u94fa",_J:"\u81ea\u9002\u5e94",_K:"\u5168\u5c4f\u94fa\u6ee1",_af:"\u9501\u5b9a\u7f16\u8f91\uff1a",_V:"\u6587\u672c",_ag:"\u8bf7\u8f93\u5165\u6587\u5b57",_F:"\u9875\u9762",_a_:"\u900f\u660e\u5ea6\uff1a",_aa:"\u5b57\u95f4\u8ddd\uff1a",_ae:"\u5185\u5bb9\uff1a",_ac:"\u6837\u5f0f\uff1a",_ad:"\u6392\u5217\uff1a",_ar:"\u52a0\u7c97",_as:"\u659c\u4f53",_at:"\u4e0b\u5212\u7ebf",_al:"\u6c34\u5e73\u5c45\u5de6",_am:"\u6c34\u5e73\u5c45\u4e2d",_an:"\u6c34\u5e73\u5c45\u53f3",_ao:"\u5782\u76f4\u5c45\u4e0a",_ap:"\u5782\u76f4\u5c45\u4e2d",_aq:"\u5782\u76f4\u5c45\u4e0b",_T:"\u56fe\u7247\u5bbd\uff1a",_U:"\u56fe\u7247\u9ad8\uff1a",_x:"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u5bbd\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u5bbd\u5ea6)\u540c\u6b65\u5bbd\u5ea6",_y:"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u9ad8\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u9ad8\u5ea6)\u540c\u6b65\u9ad8\u5ea6",_A:"\u5782\u76f4\u5747\u5206\u6392\u5217",_z:"\u6c34\u5e73\u5747\u5206\u6392\u5217"}}),define("util/converter",["magix"],(e,t,i)=>{const a=e("magix");t.default={_aG({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e-=i.left,y:t-=i.top}},_cZ({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e+=i.left,y:t+=i.top}},_ba:e=>e/a.State.get("_c")|0,_bb:e=>e*a.State.get("_c")}}),define("util/transform",[],(e,t,i)=>{const a={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7};t.default={_az({x:e,y:t,width:i,height:a},l){let s=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/2,o=i?Math.round(180*Math.atan(a/i)/Math.PI):0,r=180-l-o,n=o-l,p=90-l,d=l,c=i/2,h=a/2,u=e+c,f=t+h,g={x:u+s*Math.cos(r*Math.PI/180),y:f-s*Math.sin(r*Math.PI/180)},x={x:u+h*Math.cos(p*Math.PI/180),y:f-h*Math.sin(p*Math.PI/180)},_={x:u+s*Math.cos(n*Math.PI/180),y:f-s*Math.sin(n*Math.PI/180)},m={x:u+c*Math.cos(d*Math.PI/180),y:f+c*Math.sin(d*Math.PI/180)},b={x:u-s*Math.cos(r*Math.PI/180),y:f+s*Math.sin(r*Math.PI/180)},y={x:u-h*Math.sin(d*Math.PI/180),y:f+h*Math.cos(d*Math.PI/180)},w={x:u-s*Math.cos(n*Math.PI/180),y:f+s*Math.sin(n*Math.PI/180)},v={x:u-c*Math.cos(d*Math.PI/180),y:f-c*Math.sin(d*Math.PI/180)},k=Math.min(g.x,_.x,b.x,w.x),A=Math.max(g.x,_.x,b.x,w.x),S=Math.min(g.y,_.y,b.y,w.y),z=Math.max(g.y,_.y,b.y,w.y);return{point:[g,x,_,m,b,y,w,v],width:A-k,height:z-S,left:k,right:A,top:S,bottom:z}},_aY(e,t){let i={},l={},s=a[t],o=0,r=s-4;return r<0&&(r=s+4),{current:{index:s,point:l=e[s]},opposite:{index:o=r,point:i=e.slice(r,r+1)[0]}}},_dx(e,t){let{x:i,y:a,width:l,height:s,scale:o}=e,r={x:0,y:0},n=l*(o.x-1),p=s*(o.y-1),d=l+n,c=s+p,h=i-n/2,u=a-p/2;if(t){let e=[{x:i,y:a},{x:i+l,y:a},{x:i+l,y:a+s},{x:i,y:a+s}],o=[{x:h,y:u},{x:h+d,y:u},{x:h+d,y:u+c},{x:h,y:u+c}];r.x=e[t].x-o[t].x,r.y=e[t].y-o[t].y}return{x:h+r.x,y:u+r.y,width:d,height:c}},_aZ(e,t,i,a){let l=this._dx({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),s=l.width,o=l.height,r=this._az(l,e.rotate),n=i.point[a].x-r.point[a].x+r.left,p=i.point[a].y-r.point[a].y+r.top;return{left:n+r.width/2-s/2,top:p+r.height/2-o/2,width:s,height:o}},_dv({x:e,y:t,width:i,height:a},l){if(0==i)return{x:e,y:t};let s=e+i/2,o=t+a/2,r=Math.sqrt(i*i/2/2+a*a/2/2),n=180*Math.atan(a/i)/Math.PI+l+180;return{x:s+r*Math.cos(n*Math.PI/180),y:o+r*Math.sin(n*Math.PI/180)}}}}),define("panels/index",["magix"],(e,t,i)=>{const a=e("magix");let l=[{title:"_aB",icon:"&#xe629;",width:100,height:270,left:25,top:90,show:!1,resizeY:!0,id:"p-elements",view:"panels/elements/index"},{title:"_aC",icon:"&#xe7a1;",width:240,height:120,right:10,top:90,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"},{title:"_aD",icon:"&#xe609;",width:200,height:120,show:!1,right:260,top:90,id:"p-data",view:"panels/data/index"},{title:"_aE",icon:"&#xe7ad;",width:180,height:124,show:!0,left:25,bottom:10,id:"p-overview",view:"panels/overview/index",fixedSize:!0}],s=a.default.toMap(l,"id");t.default={_Y(){for(let e of l)e.show&&this._dh(e.id,!0);a.State.fire("_n")},_dh(e,t){let i=s[e];if(!i.opened){if(i.opened=1,i.eId)a.node(i.eId).style.display="block";else{i.eId=a.default.guid("panel_");let e=a.node(a.default.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${i.eId}"></div>`);let t=a.Vframe.byNode(e);i.close=(()=>{this._di(i.id)}),t.mountVframe(a.node(i.eId),"panels/panel",i)}if(!t){a.State.fire("_n"),a.Vframe.byNode(a.node(i.eId)).invoke("_y")}}},_di(e){let t=s[e];if(t.opened){t.opened=0;let e=a.node(t.eId);e.style.display="none",a.State.fire("_n"),a.Vframe.byNode(e).invoke("_z")}},_aS(e){s[e].opened?this._di(e):this._dh(e)},_aR:()=>l}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,i)=>{let a={class:"pcf pj pi"},l={class:"pw px py"},s={class:"pe pD pb"};const o=e("magix"),r=e("../gallery/mx-pointer/cursor"),n=e("../gallery/mx-dragdrop/index");o.default.applyStyle("ps",".pce{background:hsla(0,0%,100%,.93);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.pcf{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.pcg{padding:0 5px;cursor:move;width:calc(100% - 36px)}.pch{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.pch:hover{background:#e64e30}.pci{overflow:hidden;transition:height .25s}.pcj{transition:none}.pck{width:calc(100% - 2px);overflow:auto;float:left}.pcl{width:2px;float:right;cursor:ew-resize}.pcm,.pcl{background:#fafafa}.pcm{height:2px;cursor:ns-resize}.pcn{scroll-behavior:smooth}.pcn::-webkit-scrollbar,.pcn::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}");let p=[],d={_au(e){p.push(e)},_at(e){for(let t=p.length;t--;)if(p[t]==e){p.splice(t,1);break}this._dn()},_dn(){for(let e=p.length;e--;)p[e]._do(300+e)},_dp(e){if(p[p.length-1]!=e){for(let t=p.length;t--;)if(p[t]==e){p.splice(t,1);break}p.push(e),this._dn()}}};t.default=o.default.View.extend({tmpl:(e,t,i,o)=>{let r,n,p,d,c,h,u=[],{width:f,left:g,right:x,top:_,bottom:m,zIndex:b,id:y,i18n:w,icon:v,title:k,shrink:A,fixedSize:S,height:z,resizeX:M,view:T,resizeY:E}=e;return c=[t(0,1,v)],d=[t("i",l,c),t(0,0,w(k))],p=[t("div",{class:"pcg pd",title:o(w("_ay")),"mx-mousedown":i+"\x1e_dr()"},d)],c=[t(0,0,"\ue73a")],h="pw pch",A&&(h+=" pz"),d=[t("i",{"mx-click":i+"\x1e_dt()",title:o(w(A?"_aF":"_aG",k)),class:h},c)],c=[t(0,0,"\ue635")],d.push(t("i",{class:"pw pch","mx-click":i+"\x1e_bD()",title:o(w("_t",k))},c)),p.push(t("div",s,d)),n=[t("div",a,p)],(p=[]).push(t("div",{style:"width:"+o(M?"calc(100% - 2px)":"100%"),class:"pck pk pcn pb","mx-view":o(T)})),M||(d=[t("div",{class:"pcl pj pb",title:o(w("_az")),"mx-mousedown":i+"\x1e_b_({w:1})"})],p.push(...d)),n.push(t("div",{class:"pci",id:"c_"+o(y),style:"height:"+o(A?0:S?`${z}px`:`calc(100vh - ${z}px)`)},p)),h="pcm pj",!A&&E||(h+=" ph"),n.push(t("div",{title:o(w("_aA")),"mx-mousedown":i+"\x1e_b_({h:1})",class:h})),r="width:"+o(f)+"px;",r+=null!=g?"left:"+o(g):"right:"+o(x),r+="px;",r+=null!=_?"top:"+o(_)+"px":"bottom:"+o(m)+"px",r+=";z-index:"+o(b)+";",u.push(t("div",{class:"pce",id:"p_"+o(y),"mx-mousedown":i+"\x1e_ds()",style:r},n)),t(i,0,u)},mixins:[n.default],init(e){d._au(this),this.on("destroy",()=>{d._at(this)}),this._dq=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom,view:e.view,fixedSize:e.fixedSize,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+p.length})},"_dr<mousedown>"(e){let t=o.node("p_"+this.id).style,i=this.get("left"),a=this.get("width"),l=0;null==i&&(l=1,i=this.get("right"));let s=this.get("top"),n=0;null==s&&(n=1,s=this.get("bottom"));let p=l?"right":"left",d=n?"bottom":"top",c=0,h=e.eventTarget;this._x(e,o=>{c||(c=1,r.default._y(h));let u=(l?e.pageX-o.pageX:o.pageX-e.pageX)+i;u<0?u=0:u+a>window.innerWidth&&(u=window.innerWidth-a);let f=(n?e.pageY-o.pageY:o.pageY-e.pageY)+s;f<0?f=0:f+18>window.innerHeight&&(f=window.innerHeight-18),t[p]=u+"px",t[d]=f+"px",this.set({[p]:u,[d]:f})},()=>{r.default._z()})},"_b_<mousedown>"(e){let{w:t}=e.params,i=this.get("width"),a=this.get("height"),l=this.get("right"),s=o.node("c_"+this.id);s.classList.add("pcj");let n=s.style,p=o.node("p_"+this.id).style,d=0,c=e.eventTarget;this._x(e,s=>{if(d||(d=1,r.default._y(c)),t){let t=s.pageX-e.pageX;t+i<100&&(t=100-i);let o=t+i;p.width=o+"px",(l||0===a)&&(p.right=l-t+"px",this.set({right:l-t})),this.set({width:o})}else{let t=e.pageY-s.pageY+a;n.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{r.default._z(),s.classList.remove("pcj")})},_do(e){o.node("p_"+this.id).style.zIndex=e},"_ds<mousedown>"(){d._dp(this)},_y(){d._dp(this)},_z(){},"_dt<click>"(){this.digest({shrink:!this.get("shrink")})},"_bD<click>"(){let e=this._dq;e&&o.default.toTry(e)}})}),define("panels/data/index",["magix"],(e,t,i)=>{const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i)=>{let a=[];return a.push(t(0,0,"data source panel")),t(i,0,a)},render(){this.digest()}})}),define("panels/elements/index",["magix","../../util/converter","../../designer/stage-elements"],(e,t,i)=>{let a={class:"pw pbW"},l={class:"pl"};const s=e("magix"),o=e("../../util/converter"),r=e("../../designer/stage-elements");s.default.applyStyle("pq",".pbT{padding:5px 2px}.pbU{display:flex;align-items:center;padding:0 2px;color:#333;height:22px;line-height:22px;cursor:pointer;margin:1px 0}.pbU:hover{background:#f0f0f0}.pbV,.pbV:hover{background:#fcb58f}.pbW{margin:0 4px 0 2px;font-size:12px}.pbX{border:2px solid #fa742b}.pbY-top{box-shadow:0 -1px #fa742b}.pbY-bottom{box-shadow:0 1px #fa742b}");let n=s.default.guid("rp_"),p={_H(){s.node(n)||document.body.insertAdjacentHTML("beforeend",`<div class="pf pbX" id="${n}"></div>`)},_y(e){let t=s.node(n).style,{props:i}=e,a=o.default._cZ(i);t.left=a.x+"px",t.top=a.y+"px",t.width=i.width+"px",t.height=i.height+"px",t.borderWidth=2*s.State.get("_c")+"px";let l=i.rotate||0;t.transform=`rotate(${l}deg)`},_z(){s.node(n).style.left="-10000px"}};t.default=s.default.View.extend({tmpl:(e,t,i,s,o,r,n)=>{let p,d,c,h,u,f=[],{elements:g,selectedMap:x,drag:_,index:m,onTop:b,i18n:y}=e;p=[];for(let e=g.length;e--;){let o=g[e];u=[t(0,1,o.ctrl.icon)],h=[t("i",a,u)],u=[t(0,0,y(o.ctrl.title))],h.push(t("div",l,u)),c="pbU",x[o.id]&&(c+=" pbV"),_&&e==m&&(c+=" pbY-"+s(b?"top":"bottom")),d=[t("div",{"mx-mouseover":i+"\x1e_d_({element:'"+n(r,o)+"'})","mx-mouseout":i+"\x1e_da()","mx-click":i+"\x1e_db({element:'"+n(r,o)+"'})","mx-dragstart":i+"\x1e_de({index:"+s(e)+"})","mx-dragover":i+"\x1e_df({index:"+s(e)+"})",draggable:"true",class:c},h)],p.push(...d)}return f.push(t("div",{class:"pbT pj","mx-dragend":i+"\x1e_dg()"},p)),t(i,0,f)},init(){p._H();let e=this.render.bind(this);s.State.on("__",e),s.State.on("_i",e),s.State.on("_l",e)},render(){let e=s.State.get("_N"),t=s.State.get("_W");this.digest({selectedMap:t,elements:e})},"_d_<mouseover>"(e){if(!s.default.inside(e.relatedTarget,e.eventTarget)){let{element:t}=e.params;p._y(t)}},"_da<mouseout>"(e){s.default.inside(e.relatedTarget,e.eventTarget)||p._z()},"_db<click>"(e){let{element:t}=e.params;r.default._av(e,t)},"_de<dragstart>"(e){this._dc=e.params.index,this._dd=e.eventTarget,e.dataTransfer.effectAllowed="all",e.dataTransfer.setData("text/plain","fix ff")},"_df<dragover>"(e){let t=this;if(e.preventDefault(),t._dd!=e.eventTarget){e.dataTransfer.dropEffect="move";let i=e.eventTarget.getBoundingClientRect(),a=i.top+i.height/2>e.pageY,l=e.params.index;t.digest({onTop:a,drag:!0,index:l})}else e.dataTransfer.dropEffect="none",t.digest({drag:!1})},"_dg<dragend>"(e){let t=this,i=t.get();if(i.drag){let e=t._dc,a=i.elements[e];i.elements.splice(i.index+(i.onTop?1:0),0,a),i.index<e?i.elements.splice(e+1,1):i.elements.splice(e,1),t.set({elements:i.elements}),s.State.fire("_i")}t.digest({drag:!1})}})}),define("panels/overview/index",["magix","../../gallery/mx-dragdrop/index"],(e,t,i)=>{let a={class:"pca"};const l=e("magix"),s=e("../../gallery/mx-dragdrop/index");l.default.applyStyle("pr",".pbZ{transition:all .25s}.pc_{transition:width,height .25s}.pca{padding:2px 0}.pcb{background:#edeef3;position:relative;overflow:hidden;box-shadow:inset 1px 1px 6px 2px #dadada}.pcc{position:absolute;box-shadow:inset 0 0 1px 1px #fa742b;cursor:move}.pcd{background:#fcb58f;position:absolute;border:1px dotted #fff}");let o=[50,240,50,120],r=[180,120],n=window.requestIdleCallback||(e=>{setTimeout(e,500)}),p=window.cancelIdleCallback||clearTimeout;t.default=l.default.View.extend({mixins:[s.default],tmpl:(e,t,i,l)=>{let s,o,r,n,p=[],{width:d,height:c,centerMargin:h,page:u,pageWidth:f,pageHeight:g,canvasMargin:x,elements:_,ratio:m,id:b,left:y,top:w,viewportWidth:v,viewportHeight:k}=e;r=[];for(let e=0,i=_,a=i.length;e<a;e++){let{id:a,props:s}=i[e],o=Math.max(s.width*m,1),p=Math.max(s.height*m,1);n=[t("div",{id:l(b)+"_"+l(a),class:"pcd pbZ",style:"left:"+l(s.x*m)+"px;top:"+l(s.y*m)+"px;width:"+l(o)+"px;height:"+l(p)+"px;transform:rotate("+l(s.rotate)+"deg);"})],r.push(...n)}return o=[t("div",{style:"position:relative;background:"+l(u.background)+";width:"+l(f)+"px;height:"+l(g)+"px;margin:"+l(x)},r),t("div",{class:"pcc pc_",style:"left:"+l(y)+"px;top:"+l(w)+"px;width:"+l(v)+"px;height:"+l(k)+"px;","mx-mousedown":i+"\x1e_dm()"})],s=[t("div",{class:"pcb pbZ",style:"width:"+l(d)+"px;height:"+l(c)+"px;margin:"+l(h)},o)],p.push(t("div",a,s)),t(i,0,p)},init(){let e=l.node("stage"),t=this._dj.bind(this);l.State.on("__",t),l.State.on("_a",t),l.State.on("_b",t),l.State.on("_i",t),l.State.on("_k",t),l.State.on("_m",t),e.addEventListener("scroll",this._dk.bind(this))},_dj(){p(this._dl),this._dl=n(this.render.bind(this))},_dk(){let e=l.node("stage"),t=this.get("ratio");if(t){let i=this.get("width"),a=this.get("height"),l=this.get("viewportWidth"),s=this.get("viewportHeight");this.digest({left:Math.min(e.scrollLeft*t,i-l),top:Math.min(e.scrollTop*t,a-s)})}},render(){let e=l.State.get("_d"),t=l.State.get("_c"),i=l.node("stage"),a=i.scrollWidth,s=i.scrollHeight,n=r[0],p=n/a,d=p*s;d>r[1]&&(n=(p=(d=r[1])/s)*a);let c=p*e.width*t,h=p*e.height*t,u="";for(let e of o)u+=p*e+"px ";let f=`${(r[1]-d)/2}px ${(r[0]-n)/2}px`,g=Math.min(i.offsetWidth,a)*p,x=Math.min(i.offsetHeight,s)*p;this.set({width:n,height:d,page:e,pageWidth:c,pageHeight:h,ratio:p,elements:l.State.get("_N"),viewportHeight:x,viewportWidth:g,canvasMargin:u,centerMargin:f}),this._dk()},"_dm<mousedown>"(e){let t=this.get("left"),i=this.get("top"),a=this.get("viewportWidth"),s=this.get("viewportHeight"),o=this.get("width"),r=this.get("height"),n=l.node("stage"),p=this.get("ratio");this._x(e,l=>{let d=t+l.pageX-e.pageX,c=i+l.pageY-e.pageY;d<0?d=0:d>o-a&&(d=o-a),c<0?c=0:c>r-s&&(c=r-s),n.scrollLeft=d/p,n.scrollTop=c/p})},"$win<resize>"(){this._dj()}})}),define("panels/props/index",["magix","../../designer/props","../../designer/history","../../util/transform","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-font/style","gallery/mx-font/align","./page"],(e,t,i)=>{let a,l,s;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("./page");let o={class:"pco"},r={class:"pcp"},n={class:"pcq"},p={class:"pcv"};const d=e("magix"),c=e("../../designer/props"),h=e("../../designer/history"),u=e("../../util/transform");d.default.applyStyle("pt",'.pco{padding:4px;min-width:200px}.pcp{line-height:28px;display:flex;align-items:center}.pcq{width:80px;text-align:right}.pcr{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.pcs{width:140px}.pct{height:90px}.pcu{align-items:flex-start}.pcv{display:flex;align-items:center;cursor:pointer}.pcw{visibility:hidden;position:absolute}.pcx{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.pcx:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.pcw:checked+.pcx{background:#fa742b}.pcw:checked+.pcx:before{left:100%;margin-left:-14px}.pcw:disabled+.pcx{background:#e6e6e6;cursor:not-allowed}'),t.default=d.default.View.extend({tmpl:(e,t,i,d,c,h,u,f)=>{let g,x,_,m,b,y,w,v,k,A,S,z=[],{elements:M,i18n:T,props:E}=e;if(1==M.length){let e=M[0];_=[],b=[t(0,0,T("_aH"))],m=[t("span",n,b)],b=[t(0,0,T(e.ctrl.title))],m.push(t("span",0,b)),_.push(t("li",r,m));for(let s=0,o=e.ctrl.props,r=o.length;s<r;s++){let r=o[s];if(m=[],r.type==E._aa)b=a?[a]:[a=t("li",{mxs:"pC:_",class:"pcr"})],m.push(...b);else{b=[];let a=e.props[r.key];r.read&&(a=r.read(a)),r.ifShow&&!r.ifShow(e.props)||(v=[],k=[t(0,0,T(r.tip))],v.push(t("span",n,k)),r.type==E._Z?(A="gallery/mx-number/index?value="+u(h,a),null!=(g=r.max)&&(A+="&max="+c(g)),null!=(g=r.step)&&(A+="&step="+c(g)),null!=(g=r.fixed)&&(A+="&fixed="+c(g)),null!=(g=r.min)&&(A+="&min="+c(g)),k=[t("div",{mxv:"elements",class:"pcs pt pg","param-@#disabled":u(h,e.props.locked),"mx-input":i+"\x1e_dw({key:'"+f(r.key)+"',use:'value',element:'"+u(h,e)+"',write:'"+u(h,r.write)+"'})","mx-view":A})],v.push(...k)):r.type==E._a_?(k=[t("div",{mxv:"elements",class:"pcs","mx-input":i+"\x1e_dw({key:'"+f(r.key)+"',use:'color',element:'"+u(h,e)+"'})","mx-view":"gallery/mx-color/index?clear="+c(r.clear)+"&color="+u(h,a)+"&align=right&disabled="+c(e.props.locked)+"&alpha="+c(r.alpha)})],v.push(...k)):r.type==E._ab?(S=[t("input",{class:"pcw",type:"checkbox",checked:e.props[r.key],"mx-change":i+"\x1e_dw({key:'"+f(r.key)+"',native:'checked',element:'"+u(h,e)+"',refresh:'"+u(h,r.refresh)+"'})"},0,1)],l?S.push(l):S.push(l=t("i",{mxs:"pC:a",class:"pcx"})),k=[t("label",p,S)],v.push(...k)):r.type==E._ae?(k=[t("textarea",{class:"pu pcs pct","@#disabled":u(h,e.props.locked),"mx-input":i+"\x1e_dw({key:'"+f(r.key)+"',native:'value',element:'"+u(h,e)+"'})",value:d(a)})],v.push(...k)):r.type==E._ac?(k=[t("div",{mxv:"elements",class:"pcs","mx-input":i+"\x1e_dw({key:'"+f(r.key)+"',use:'value',element:'"+u(h,e)+"'})","mx-view":"gallery/mx-font/style?disabled="+u(h,e.props.locked)+"&value="+u(h,a)})],v.push(...k)):r.type==E._ad&&(k=[t("div",{mxv:"elements",class:"pcs","mx-input":i+"\x1e_dw({key:'"+f(r.key)+"',use:'value',element:'"+u(h,e)+"'})","mx-view":"gallery/mx-font/align?disabled="+u(h,e.props.locked)+"&value="+u(h,a)})],v.push(...k)),w="pcp",r.dockTop&&(w+=" pcu"),y=[t("li",{class:w},v)],b.push(...y)),m.push(...b)}_.push(...m)}x=[t("ul",o,_)],z.push(...x)}else x=s?[s]:[s=t("div",{mxs:"pC:b","mx-view":"panels/props/page"})],z.push(...x);return t(i,0,z)},init(){let e=this._du(this.render.bind(this),100);d.State.on("_l",e),d.State.on("_k",e),d.State.on("__",e)},render(){this.digest({scale:d.State.get("_c"),props:c.default,elements:d.State.get("_O")})},"_dw<input,change>"(e){let{key:t,use:i,element:a,refresh:l,native:s,write:o}=e.params;if(i||s){let r,n=a.props,p="width"==t||"height"==t;p&&(r=u.default._dv(n,n.rotate));let d=s?e.eventTarget[s]:e[i];if(o&&(d=o(d,n)),n[t]=d,p){let e=u.default._dv(n,n.rotate);n.x+=r.x-e.x,n.y+=r.y-e.y,l=!0}}l&&(this.render(),d.State.fire("_m"));let r=d.node(a.id),n=d.Vframe.byNode(r);n&&n.invoke("_aH",[a]),h.default._t("_a"+t,500)}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{let a;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let l={class:"pco"},s={class:"pcp"},o={class:"pcq"};const r=e("magix"),n=e("../../designer/history"),p=e("../../designer/props");t.default=r.default.View.extend({tmpl:(e,t,i,r,n,p,d,c)=>{let h,u,f,g,x,_,m,b,y=[],{i18n:w,ctrl:v,props:k,page:A}=e;u=[],g=[t(0,0,w("_aH"))],f=[t("span",o,g)],g=[t(0,0,w(v.title))],f.push(t("span",0,g)),u.push(t("li",s,f));for(let e=0,l=v.props,s=l.length;e<s;e++){let s=l[e];f=[],s.type==k._aa?(g=a?[a]:[a=t("li",{mxs:"pD:_",class:"pcr"})],f.push(...g)):s.ifShow&&!s.ifShow(A)||(_=[],m=[t(0,0,w(s.tip))],_.push(t("span",o,m)),s.type==k._Z?(b="gallery/mx-number/index?value="+d(p,A[s.key]),null!=(h=s.max)&&(b+="&max="+n(h)),b+="&step="+n(s.step),null!=(h=s.fixed)&&(b+="&fixed="+n(h)),null!=(h=s.min)&&(b+="&min="+n(h)),m=[t("div",{mxv:"page,ctrl",class:"pcs pt pg","mx-input":i+"\x1e_dw({key:'"+c(s.key)+"',use:'value'})","mx-view":b})],_.push(...m)):s.type==k._a_?(m=[t("div",{mxv:"page,ctrl",class:"pcs","mx-input":i+"\x1e_dw({key:'"+c(s.key)+"',use:'color'})","mx-view":"gallery/mx-color/index?clear="+n(s.clear)+"&color="+d(p,A[s.key])+"&align=right&alpha="+n(s.alpha)})],_.push(...m)):s.type==k._af?(m=[t("div",{class:"pcs","mx-change":i+"\x1e_dw({key:'"+c(s.key)+"',use:'src',refresh:'"+d(p,s.refresh)+"',write:'"+d(p,s.write)+"'})","mx-view":"gallery/mx-picture/index?src="+n(A[s.key])})],_.push(...m)):s.type==k._ag&&(m=[t("div",{mxv:"ctrl",class:"pcs","mx-change":i+"\x1e_dw({key:'"+c(s.key)+"',use:'value'})","mx-view":"gallery/mx-dropdown/index?selected="+n(A[s.key])+"&list="+d(p,s.items)+"&textKey=text&valueKey=value"})],_.push(...m)),x="pcp",s.dockTop&&(x+=" pcu"),g=[t("li",{class:x},_)],f.push(...g)),u.push(...f)}return y.push(t("ul",l,u)),t(i,0,y)},init(){let e=this.render.bind(this);r.State.on("__",e)},render(){this.digest({props:p.default,ctrl:r.State.get("_X"),page:r.State.get("_d")})},"_dw<input,change>"(e){let{key:t,use:i,refresh:a,write:l}=e.params,s=r.State.get("_d");s[t]=e[i],l&&l(s,e),n.default._t("_b",500),r.State.fire("_b"),a&&this.render()}})}),define("elements/designer",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","../designer/history","../util/transform","../util/converter"],(e,t,i)=>{let a;const l=e("magix"),s=e("../gallery/mx-dragdrop/index"),o=e("../gallery/mx-pointer/cursor"),r=e("../designer/history"),n=e("../util/transform"),p=e("../util/converter");l.default.applyStyle("pf",'.par{left:50%;top:50%;position:absolute}.par:before{width:1px;height:5px;left:0;top:-2px}.par:after,.par:before{content:" ";position:absolute;background:red}.par:after{width:5px;height:1px;left:-2px;top:0}.pas{border:1px dotted hsla(0,0%,86.7%,.4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pat{border:1px solid #fa742b}.pau{border:1px solid #999}.pav{border-right:3px solid #fa742b;right:-2px}.paw,.pax{border-bottom:3px solid #fa742b;bottom:-2px}.pax{border-right:3px solid #fa742b;right:-2px}.pay{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABvUExURUdwTP///9XV1R0dHf///3Nzc////////////////1ZWVq+vr/T09PX19QQEBP///////8XFxf///////////wYGBv///+jo6P///4aGhqioqMzMzP///2BgYP///////////zExMf///wAAAP///xLps0AAAAAjdFJOUwCxxOdixRDmzSDMv8/Z+tz5wWpXWPk3zALCv8KnyXZVMNuNPnv3CwAAAJ1JREFUKM/NkckOwyAMRFkDBMhC9qWr+//fWCIV1WlzrjoXS36yxmMT8hdqqKoUvRAjMtw22kvecem1GjTuK1vApmI+wQMBbQFy5li+QQRaX4AtRX+vbntAJeRl9HTTx4TiwESs61DXNUPmVQeujzVrQwh43TTxpeRBslVfMUhbiXKWyiAwvnIsMcdyJkfJYdpNvG/ltDm+bjP+8KFP8ggL+zQLGxwAAAAASUVORK5CYII=") 14 14,pointer;top:-3px;right:-3px;width:6px;height:6px;border-radius:50%;background:#fa742b}');const d={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3};let c={};l.State.on("_l",()=>{for(let e in c){let t=l.Vframe.byId(e);t&&(t.invoke("_aW"),t.invoke("render"))}}),t.default=l.default.View.extend({tmpl:(e,t,i,l,s,o,r)=>{let n,p,d,c,h,u,f,g=[],{element:x,view:_,id:m,scale:b,onlyMove:y,fullscreen:w,selected:v,count:k,i18n:A}=e,S=x.props;g.push(t("div",{mxv:"element,scale,onlyMove",class:"pj","mx-view":l(_)+"?props="+r(o,S)+"&scale="+r(o,b)+"&onlyMove="+r(o,y),id:"entity_"+l(m)}));let z=S.rotate%360;if(c=[],!w&&!S.locked){if(h=[],v){if(u=[],a?u.push(a):u.push(a=t("div",{mxs:"pl:_",class:"par"})),1==k){f=[t("div",{class:"pay pf","mx-mousedown":i+"\x1e_aX()",title:l(A("_B"))})],n="";let e=Math.min(20,S.height-3)-4;n+=" ";let a=Math.min(20,S.width)-4;n+=" ";let s=Math.max(Math.min(a,e)-2,0);n+=" ",a=Math.min(a,S.width-s-6),n+=" ",e=Math.min(e,S.height-s-6-3),n+=" ";let o=(S.height-e-s+3)/2;p="height:"+l(Math.max(e,0))+"px;top:"+l(o)+"px;cursor:",z<=22.5||z>337.5||z>157.5&&z<=202.5?p+="ew":z<=67.5||z>202.5&&z<=247.5?p+="nwse":z<=112.5||z>247.5&&z<=292.5?p+="ns":(z<=157.5||z>292.5&&z<=337.5)&&(p+="nesw"),p+="-resize",f.push(t("div",{class:"pf pav",title:l(A("_C")),"mx-mousedown":i+"\x1e_b_({key:'rm'})",style:p}));let r=(S.width-a-s)/2;p="width:"+l(Math.max(a,0))+"px;left:"+l(r)+"px;cursor:",z<=22.5||z>337.5||z>157.5&&z<=202.5?p+="ns":z<=67.5||z>202.5&&z<=247.5?p+="nesw":z<=112.5||z>247.5&&z<=292.5?p+="ew":(z<=157.5||z>292.5&&z<=337.5)&&(p+="nwse"),p+="-resize",f.push(t("div",{class:"pf paw",title:l(A("_D")),"mx-mousedown":i+"\x1e_b_({key:'mb'})",style:p})),p="",0==s&&(p+="display:none;"),p+="width:"+l(s)+"px;height:"+l(s)+"px;cursor:",z<=22.5||z>337.5||z>157.5&&z<=202.5?p+="nwse":z<=67.5||z>202.5&&z<=247.5?p+="ns":z<=112.5||z>247.5&&z<=292.5?p+="nesw":(z<=157.5||z>292.5&&z<=337.5)&&(p+="ew"),p+="-resize;",f.push(t("div",{class:"pf pax",title:l(A("_E")),"mx-mousedown":i+"\x1e_b_({key:'rb'})",style:p})),u.push(...f)}h.push(...u)}c.push(...h)}return p="left:"+l(S.x)+"px;top:"+l(S.y)+"px;width:"+l(S.width)+"px;height:"+l(S.height)+"px;",z&&(p+="transform:rotate("+l(z)+"deg);"),d="pf pj",w||(d+=" pas"),v&&!w&&(d+=" ",S.locked?d+="pau":d+="pat"),g.push(t("div",{id:"mask_"+l(x.id),style:p,class:d},c)),t(i,0,g)},mixins:[s.default],ctor(e){this.assign(e),c[this.id]=1,this.on("destroy",()=>{delete c[this.id]})},_aW(){let e=l.State.get("_W"),t=l.State.get("_O").length,i=this.get().element.id;this.set({selected:l.has(e,i),count:t})},assign(e){return this.set(e),this._aW(),!0},render(){this.digest()},_aH(e){this.digest({element:e})},"_aX<mousedown>"(e){e.stopPropagation();let t=this.get("element"),i=t.props;l.State.fire("_j",{show:1});let a=i.x+i.width/2,s=i.y+i.height/2,n=p.default._aG({x:e.pageX,y:e.pageY}),d=i.rotate,c=Math.atan2(n.y-s,n.x-a)-d*Math.PI/180,h=!1;this._x(e,r=>{h||o.default._y(e.eventTarget),h=!0,n=p.default._aG({x:r.pageX,y:r.pageY});let d=Math.atan2(n.y-s,n.x-a);d=180*(d-c)/Math.PI,i.rotate=(360+(0|d))%360,this.digest({element:t}),l.State.fire("_k")},()=>{o.default._z(),h&&r.default._t(),l.State.fire("_j")})},"_b_<mousedown>"(e){if(e.button)return;e.stopPropagation();let t=this,i=t.get("element"),{props:a,ctrl:s}=i;l.State.fire("_j",{show:1});let p=a.rotate||0,{key:c}=e.params;p=(p+360)%360,0==a.width&&(a.width=.01),0==a.height&&(a.height=.01);let h=a.width,u=a.height,f=a.x,g=a.y,x=0,_=0,m=Number.MAX_VALUE,b=Number.MAX_VALUE;for(let e of s.props)"width"==e.key?(l.default.has(e,"max")&&(m=e.max),l.default.has(e,"min")&&(x=e.min)):"height"==e.key&&(l.default.has(e,"max")&&(b=e.max),l.default.has(e,"min")&&(_=e.min));let y=n.default._az(a,p),w=n.default._aY(y.point,c),{opposite:v,current:k}=w,A=v.index,S=v.point,z=k.point,M=S.x,T=S.y,E=Math.abs(z.x-M),I=Math.abs(z.y-T),C={x:f,y:g,rotate:p,width:h,height:u},N=e.pageX,L=e.pageY,j=!1;t._x(e,s=>{j||o.default._y(e.eventTarget);let r={x:1,y:1};j=!0;let c=E>I,h=1,u=s.pageX-N,f=s.pageY-L;0==A||7==A?c&&p>90&&p<270?u=-u:!c&&p>180&&p<360&&(f=-f):0!=A&&1!=A||(c&&p>45&&p<135?u=-u:!c&&p>90&&p<270&&(f=-f)),(h=c?(u+E)/E:(f+I)/I)<0&&(h=0);let g=d[A];1===g?r.x=r.y=h:2===g?r.y=h:3===g&&(r.x=h);let w=n.default._aZ(C,r,y,A),v=w.width,k=w.height;v<x?v=x:v>m&&(v=m),k<_?k=_:k>b&&(k=b),v==a.width&&k==a.height||(a.x=w.left,a.y=w.top,a.width=v,a.height=k,t.digest({element:i}),l.State.fire("_k"))},()=>{j&&r.default._t(),o.default._z(),l.State.fire("_j")})}})}),define("elements/index",["magix","./text/designer","./page/designer"],(e,t,i)=>{const a=e("magix"),l=e("./text/designer"),s=e("./page/designer");let o=[l.default],r=a.toMap(o,"type"),n=[l.default,{spliter:!0},{icon:"&#xe629;",title:"\u56fe\u8868",subs:[l.default,l.default,l.default,l.default,l.default,l.default,l.default,l.default]}];t.default={_F:()=>n,_U:()=>s.default,_V(e){let t={},i=e=>{for(let a of e){let e=r[a.type];if(a.ctrl=e,t[a.id]=a,"layout"==a.role)for(let e of a.props.columns)i(e.elements)}};return i(e),{elements:e,map:t}}}}),define("elements/page/designer",["../../designer/props","../../i18n/index","../../designer/const"],(e,t,i)=>{const a=e("../../designer/props"),l=e("../../i18n/index"),s=e("../../designer/const");t.default={title:"_F",getProps:()=>({width:s.default._D,height:s.default._E,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0,scaleType:"auto"}),props:[{tip:"_G",key:"width",type:a.default._Z,min:0},{tip:"_H",key:"height",type:a.default._Z,min:0},{tip:"_I",key:"scaleType",type:a.default._ag,items:[{text:l.default("_J"),value:"auto"},{text:l.default("_K"),value:"full"}]},{type:a.default._aa},{tip:"_L",key:"background",type:a.default._a_},{tip:"_M",key:"backgroundImage",type:a.default._af,refresh:!0,write:(e,t,i)=>(t.backgroundWidth=i.width,t.backgroundHeight=i.height,e)},{tip:"_N",key:"backgroundRepeat",type:a.default._ag,items:[{text:l.default("_O"),value:"full"},{text:l.default("_P"),value:"no-repeat"},{text:l.default("_Q"),value:"repeat-x"},{text:l.default("_R"),value:"repeat-y"},{text:l.default("_S"),value:"repeat"}],refresh:!0,ifShow:e=>e.backgroundImage},{tip:"_T",key:"backgroundWidth",type:a.default._Z,min:0,ifShow(e){let t=e.backgroundImage,i=e.backgroundRepeat;return t&&("repeat"==i||"repeat-x"==i||"repeat-y"==i)}},{tip:"_U",key:"backgroundHeight",type:a.default._Z,min:0,ifShow(e){let t=e.backgroundImage,i=e.backgroundRepeat;return t&&("repeat"==i||"repeat-x"==i||"repeat-y"==i)}}]}}),define("elements/text/designer",["../designer","../../designer/props","../../util/converter"],(e,t,i)=>{const a=e("../designer"),l=e("../../designer/props"),s=e("../../util/converter");t.default=a.default.extend({ctor(){this.set({view:"elements/text/index"})}},{type:"text",role:"text",title:"_V",icon:"&#xe6bc;",getProps:(e,t)=>({background:"",height:25,alpha:1,text:"",ls:0,x:e,y:t,rotate:0,width:200,forecolor:"#000000",fontsize:14,locked:!1,style:{bold:!1,underline:!1,italic:!1},align:{h:"flex-start",v:"flex-start"}}),props:[{tip:"_W",type:l.default._Z,key:"x",read:s.default._ba,write:s.default._bb},{tip:"_X",type:l.default._Z,key:"y",read:s.default._ba,write:s.default._bb},{tip:"_G",type:l.default._Z,key:"width",min:0,read:s.default._ba,write:s.default._bb},{tip:"_H",key:"height",type:l.default._Z,min:0,read:s.default._ba,write:s.default._bb},{tip:"_Y",type:l.default._Z,key:"rotate",min:-360,max:360},{type:l.default._aa},{tip:"_Z",key:"fontsize",type:l.default._Z,min:0},{tip:"_a_",key:"alpha",type:l.default._Z,step:.1,fixed:1,min:0,max:1},{tip:"_aa",key:"ls",type:l.default._Z,min:0},{tip:"_L",key:"background",clear:!0,alpha:!0,type:l.default._a_},{tip:"_ab",key:"forecolor",type:l.default._a_},{tip:"_ac",key:"style",type:l.default._ac},{tip:"_ad",key:"align",type:l.default._ad},{tip:"_ae",key:"text",type:l.default._ae,dockTop:!0},{type:l.default._aa},{tip:"_af",key:"locked",type:l.default._ab,refresh:!0,free:!0}]})}),define("elements/text/index",["magix"],(e,t,i)=>{const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,o,r=[],{props:n,scale:p,i18n:d}=e;return o="",n.text?o+=" "+n.text+" ":o+=" "+d("_ag")+" ",s=[t(0,0,o)],l="position:absolute;left:"+a(n.x)+"px;top:"+a(n.y)+"px;display:flex;color:"+a(n.forecolor)+";",n.background&&(l+="background:"+a(n.background)+";"),l+="font-size:"+a(n.fontsize*p)+"px;height:"+a(n.height)+"px;letter-spacing:"+a(n.ls*p)+"px;opacity:"+a(n.alpha)+";",n.style.bold&&(l+="font-weight:bold;"),n.style.italic&&(l+="font-style:italic;"),n.style.underline&&(l+="text-decoration:underline;"),l+="align-items:"+a(n.align.v)+";justify-content:"+a(n.align.h)+";overflow:hidden;width:"+a(n.width)+"px;transform:rotate("+a(n.rotate)+"deg);",r.push(t("div",{style:l},s)),t(i,0,r)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,i)=>{let a,l={class:"pT"},s={class:"pR"};const o=e("magix"),r=e("../gallery/mx-dragdrop/index"),n=e("../gallery/mx-pointer/cursor"),p=e("./history");o.default.applyStyle("pa",".pF{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.pG{top:0;width:1px}.pG,.pH{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.pH{left:0;height:1px}.pI{float:left;overflow:hidden;z-index:200;position:relative}.pJ,.pI{width:20px;border-right:1px solid #ccc;background:#fff}.pJ{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.pK{left:5px;top:22px}.pK,.pL{cursor:default;position:absolute;font-size:10px}.pL{top:2px;left:24px}.pM,.pN{position:relative;z-index:100}.pM{top:20px}.pN{left:20px}.pO{width:4px;border-left:1px solid #fa742b}.pO,.pP{position:absolute;pointer-events:none}.pP{height:1px;background:#fa742b}.pQ{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.pR{top:2px;cursor:default}.pR,.pS{position:absolute;left:4px;font-size:10px;color:#666}.pS{top:-15px;cursor:pointer;pointer-events:all}.pT{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.pU{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.pV,.pU{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.pV{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let d={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};t.default=o.default.View.extend({tmpl:(e,t,i,o,r,n,p,d)=>{let c,h,u,f,g,x,_,m,b,y,w=[],{sTop:v,id:k,yHelpers:A,yStart:S,scale:z,vWidth:M,i18n:T,sLeft:E,xHelpers:I,xStart:C,vHeight:N,width:L,step:j,space:Y,hbar:D,barColor:R,bar:X,xEnd:V,height:B,yEnd:F}=e;c=[];for(let e=0,a=A,s=a.length;e<s;e++){let s=a[e];y=Math.abs(S)+s.mm*z+20,f=[t(0,0,"\ue600")],u=[t("i",{class:"pw pS",title:o(T("__")),"mx-click":i+"\x1e_w({type:'y',id:'"+d(s.id)+"'})"},f)],f=[t(0,0,s.mm)],u.push(t("span",l,f),t("span",{class:"pU","mx-mousedown":i+"\x1e_A({type:'y',id:'"+d(s.id)+"',c:"+o(y)+"})",title:o(T("_a"))})),h=[t("div",{class:"pP",style:"width:"+o(M)+"px;top:"+o(y)+"px;"},u)],c.push(...h)}w.push(t("div",{class:"pN",style:"top:-"+o(v)+"px",id:o(k)+"_y_help","mx-contextmenu":i+"\x1e_B()"},c)),c=[];for(let e=0,a=I,l=a.length;e<l;e++){let l=a[e];y=Math.abs(C)+l.mm*z,f=[t(0,0,"\ue600")],u=[t("i",{class:"pw pQ",title:o(T("__")),"mx-click":i+"\x1e_w({type:'x',id:'"+d(l.id)+"'})"},f)],f=[t(0,0,l.mm)],u.push(t("span",s,f),t("span",{class:"pV","mx-mousedown":i+"\x1e_A({type:'x',id:'"+d(l.id)+"',c:"+o(y)+"})",title:o(T("_a"))})),h=[t("div",{class:"pO",style:"height:"+o(N)+"px;left:"+o(y)+"px;"},u)],c.push(...h)}w.push(t("div",{class:"pM",style:"left:-"+o(E)+"px",id:o(k)+"_x_help","mx-contextmenu":i+"\x1e_B()"},c)),f=[];for(let e=0;e<C;e+=j)g=[],e&&(x=[],(b=e/z)%Y==0?(_=[t("rect",{width:"1",height:o(D),x:o(C-e),y:o(20-D-1),style:"fill:"+o(R)+";"},0,1)],m=[t(0,0,-b)],_.push(t("text",{x:o(C-e+2),y:"14",style:"font-size:10px;fill:#999;"},m)),x.push(..._)):(_=[t("rect",{width:"1",height:o(X),x:o(C-e),y:o(20-X-1),style:"fill:"+o(R)+";"},0,1)],x.push(..._)),g.push(...x)),f.push(...g);for(let e=0;e<V;e+=j)g=[],(b=e/z)%Y==0?(x=[t("rect",{width:"1",height:o(D),x:o(C+e),y:o(20-D-1),style:"fill:"+o(R)+";"},0,1)],_=[t(0,0,b)],x.push(t("text",{x:o(C+e+2),y:"14",style:"font-size:10px;fill:#999;"},_)),g.push(...x)):(x=[t("rect",{width:"1",height:o(X),x:o(C+e),y:o(20-X-1),style:"fill:"+o(R)+";"},0,1)],g.push(...x)),f.push(...g);u=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+o(L)+" 19",style:"cursor:default;"},f)],h=[t("div",{style:"width:"+o(L)+"px;height:100%"},u)],c=[t("div",{class:"pF",id:o(k)+"_x"},h)],u=[t(0,0,"-")],h=[t("span",{class:"pK",id:o(k)+"_x_tip"},u)],c.push(t("div",{class:"pG",id:o(k)+"_x_line",style:"height:"+o(N+20)+"px"},h)),w.push(t("div",{"mx-mousemove":i+"\x1e_p()","mx-mouseout":i+"\x1e_q()","mx-click":i+"\x1e_u()"},c)),f=[];for(let e=0;e<S;e+=j)g=[],e&&(x=[],(b=e/z)%Y==0?(_=[t("rect",{width:o(D),height:"1",x:o(20-D),y:o(S-e),style:"fill:"+o(R)+";"},0,1)],m=[t(0,0,-b)],_.push(t("text",{x:"14",y:o(S-e+2),style:"font-size:10px;fill:#999;",transform:"rotate(-90,13,"+o(S-e)+")"},m)),x.push(..._)):(_=[t("rect",{width:o(X),height:"1",x:o(20-X),y:o(S-e),style:"fill:"+o(R)+";"},0,1)],x.push(..._)),g.push(...x)),f.push(...g);for(let e=0;e<F;e+=j)g=[],(b=e/z)%Y==0?(x=[t("rect",{width:o(D),height:"1",x:o(20-D),y:o(S+e),style:"fill:"+o(R)+";"},0,1)],_=[t(0,0,b)],x.push(t("text",{x:"14",y:o(S+e),style:"font-size:10px;fill:#999;;",transform:"rotate(-90,13,"+o(S+e-2)+")"},_)),g.push(...x)):(x=[t("rect",{width:o(X),height:"1",x:o(20-X),y:o(S+e),style:"fill:"+o(R)+";"},0,1)],g.push(...x)),f.push(...g);return u=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+o(B),style:"cursor:default"},f)],h=[t("div",{style:"height:"+o(B)+"px;"},u)],c=[t("div",{class:"pI",style:"height:"+o(N)+"px;",id:o(k)+"_y"},h)],u=[t(0,0,"-")],h=[t("span",{class:"pL",id:o(k)+"_y_tip"},u)],c.push(t("div",{class:"pH",id:o(k)+"_y_line",style:"width:"+o(M+20)+"px"},h)),w.push(t("div",{"mx-mousemove":i+"\x1e_r()","mx-mouseout":i+"\x1e_s()","mx-click":i+"\x1e_v()"},c)),a?w.push(a):w.push(a=t("div",{mxs:"p_:_",class:"pJ"})),t(i,0,w)},mixins:[r.default],init(e){let t=o.node(e.scroll);t.addEventListener("scroll",()=>{this.__()},{passive:!0}),this._a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let i=this.render.bind(this);o.State.on("__",i),o.State.on("_a",i),o.State.on("_b",i)},_m(){if(this._b){let e=this._a,t=o.State.get("_c"),i=o.State.get("_d"),{width:a,height:l}=i,s=Math.max(a*t,window.innerWidth)+500,r=Math.max(l*t,window.innerHeight)+300,n=0,p=0,c=20,h=0,u=0,f=10,g=10,x=o.node("stage_canvas"),_=o.node("stage_outer"),m=x.getBoundingClientRect(),b=_.getBoundingClientRect();p=s-(n=Math.round(m.left-b.left)+c),u=r-(h=Math.round(m.top-b.top)),f=e.offsetHeight,g=e.offsetWidth;let y=d[t];this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:s,scale:t,space:y.space,step:y.step,height:r,xStart:n,xEnd:p,yStart:h,vHeight:f,vWidth:g,yEnd:u},null,()=>{this._e=o.node(this.id+"_x"),this._f=o.node(this.id+"_y"),this._g=o.node(this.id+"_x_line"),this._h=o.node(this.id+"_y_line"),this._i=o.node(this.id+"_x_tip"),this._j=o.node(this.id+"_y_tip"),this._k=o.node(this.id+"_x_help"),this._l=o.node(this.id+"_y_help")})}},__(){let e=this._e,t=this._f,i=this._l,a=this._k,l=this._a,s=l.scrollTop,o=l.scrollLeft;e&&(e.scrollLeft=o),t&&(t.scrollTop=s),a&&(a.style.left=-o+"px"),i&&(i.style.top=-s+"px"),this.set({sLeft:o,sTop:s})},render(){this.set({xHelpers:o.State.get("_n"),yHelpers:o.State.get("_o")});let e=()=>{o.node("stage_canvas")?(this._b=1,this._m()):setTimeout(e,30)};setTimeout(e,0)},"_p<mousemove>"(e){let t=this._e,i=e.pageX,a=this.get("xStart"),l=this._g.style;l.display="block",l.left=i+"px";let s=i-a+t.scrollLeft,o=this.get("scale");this._i.innerHTML=(s/o).toFixed(0)},"_q<mouseout>"(e){o.default.inside(e.relatedTarget,e.eventTarget)||(this._g.style.display="none")},"_r<mousemove>"(e){let t=this.root.getBoundingClientRect(),i=e.pageY-t.top,a=this.get("yStart"),l=this._f,s=this._h.style;s.display="block",s.top=i+"px";let o=i-a-20+l.scrollTop,r=this.get("scale");this._j.innerHTML=(o/r).toFixed(0)},"_s<mouseout>"(e){o.default.inside(e.relatedTarget,e.eventTarget)||(this._h.style.display="none")},"_u<click>"(e){let t=(e.pageX-this.get("xStart")+this._e.scrollLeft)/this.get("scale")|0,i=this.get("xHelpers");i.push({mm:t,id:o.default.guid("x_")}),this.digest({xHelpers:i}),p.default._t()},"_v<click>"(e){let t=this.root.getBoundingClientRect(),i=(e.pageY-t.top-this.get("yStart")-20+this._f.scrollTop)/this.get("scale")|0,a=this.get("yHelpers");a.push({mm:i,id:o.default.guid("x_")}),this.digest({yHelpers:a}),p.default._t()},"_w<click>"(e){let{type:t,id:i}=e.params,a=t+"Helpers",l=this.get(a);for(let e=l.length;e--;){if(l[e].id==i){l.splice(e,1);break}}this.digest({[a]:l}),p.default._t()},"_A<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:a,c:l}=e.params,s=i+"Helpers",o=this.get(s);for(let e of o)if(e.id==a){t=e;break}if(t){let a=this.get(i+"Start"),r=0;this._x(e,p=>{let d;r||(r=1,n.default._y(e.eventTarget)),d="x"==i?p.pageX-e.pageX+l:p.pageY-e.pageY+l-20,t.mm=(d-a)/this.get("scale")|0,this.digest({[s]:o})},()=>{r&&(n.default._z(),p.default._t())})}},"_B<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){setTimeout(()=>{this._m()},0)}})}),define("designer/const",[],(e,t,i)=>{t.default={_C:50,_c:1,_D:900,_E:500}}),define("designer/contextmenu",["magix","../i18n/index"],(e,t,i)=>{const a=e("magix"),l=e("../i18n/index");let s={spliter:!0},o={id:0,text:"_b",short:" (Ctrl+A)"},r={id:1,text:"_c",short:" (Ctrl+C)"},n={id:14,text:"_d",short:" (Ctrl+X)"},p={id:2,text:"_e",short:" (Ctrl+V)"},d={id:5,text:"_f"},c={id:6,text:"_g"},h={id:3,text:"_h"},u={id:4,text:"_i"},f={id:7,text:"_j",short:" (Delete)"},g={},x=e=>t=>{e["@{menu@u.id}"]||(e["@{menu@u.id}"]=a.default.guid("_m"));let i=t+e["@{menu@u.id}"];if(!g[i]){let t=[];for(let i of e)i.spliter?t.push(i):t.push({id:i.id,text:l.default(i.text)+(i.short||"")});g[i]=t}return g[i]};t.default={allId:o.id,pasteId:p.id,topId:h.id,upId:d.id,bottomId:u.id,downId:c.id,cutId:n.id,copyId:r.id,deleteId:f.id,singleElement:x([r,n,f,s,d,h,s,c,u]),multipleElement:x([r,n,f]),stage:x([o,p])}}),define("designer/header",["magix","../elements/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor"],(e,t,i)=>{let a,l,s,o,r,n,p={class:"pD pd"},d={class:"pD pd pB pj"},c={class:"pW pY pg"},h={class:"pw pa_"},u={class:"paa"},f={class:"pZ"};const g=e("magix"),x=e("../elements/index"),_=e("../gallery/mx-dragdrop/index"),m=e("../gallery/mx-pointer/select"),b=e("../gallery/mx-pointer/cursor");g.default.applyStyle("pb",".pW,.pX{width:60px;height:40px;display:grid;grid-template-rows:20px 20px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.pY{grid-template-columns:50px 10px}.pX{float:left;border-radius:2px}.pX:hover{background:#bd361b}.pZ{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.pZ,.pW:hover{background:#e64e30}.pW:hover .pZ{display:block}.pa_{grid-column:1/2;grid-row:1/2;align-self:flex-end}.paa{font-size:12px;font-weight:400;line-height:12px;grid-column:1/2;grid-row:2/3}.pab{font-size:10px;margin-left:-10px;grid-row:1/3;grid-column:2/3}.pac{height:30px;width:1px;background:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,.27)),color-stop(.3,#fff),color-stop(.7,#fff),to(hsla(0,0%,100%,.27)));margin:2px 12px;float:left}");let y=["requestFullscreen","webkitRequestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];t.default=g.default.View.extend({tmpl:(e,t,i,g,x,_,m)=>{let b,y,w,v,k,A,S,z,M,T=[],{i18n:E,elements:I}=e;a?b=[a]:(y=[t(0,0,"\ue64b")],b=[a=t("i",{mxs:"pa:_",class:"pw pa"},y)]),b.push(t(0,0,E("_k")+"\u2122")),T.push(t("div",p,b)),b=[];for(let e=0,a=I,o=a.length;e<o;e++){let o=a[e];if(y=[],o.spliter)w=l?[l]:[l=t("div",{mxs:"pa:a",class:"pac"})],y.push(...w);else{if(w=[],o.subs){A=[t(0,1,o.icon)],k=[t("i",h,A)],A=[t(0,0,E(o.title))],k.push(t("b",u,A)),s?k.push(s):(A=[t(0,0,"\ue73a")],k.push(s=t("i",{mxs:"pa:b",class:"pab pw"},A))),A=[];for(let e=0,a=o.subs,l=a.length;e<l;e++){let l=a[e];M=[t(0,1,l.icon)],z=[t("i",h,M)],M=[t(0,0,E(l.title))],z.push(t("b",u,M)),S=[t("div",{class:"pX","mx-mousedown":i+"\x1e_L({ctrl:'"+m(_,l)+"',hide:true})"},z)],A.push(...S)}k.push(t("div",f,A)),v=[t("div",c,k)],w.push(...v)}else A=[t(0,1,o.icon)],k=[t("i",h,A)],A=[t(0,0,E(o.title))],k.push(t("b",u,A)),v=[t("div",{class:"pW pg","mx-mousedown":i+"\x1e_L({ctrl:'"+m(_,o)+"'})"},k)],w.push(...v);y.push(...w)}b.push(...y)}return T.push(t("div",d,b)),o?T.push(o):(r?y=[r]:(w=[t(0,0,"\ue64a")],y=[r=t("i",{class:"pw"},w)]),n?y.push(n):(w=[t(0,0,"\u9884\u89c8")],y.push(n=t("b",{class:"paa"},w))),b=[t("div",{class:"pW","mx-click":i+"\x1e_M()"},y)],w=[t(0,0,"\ue6b0")],y=[t("i",{class:"pw"},w)],w=[t(0,0,"\u4fdd\u5b58")],y.push(t("b",u,w)),b.push(t("div",{class:"pW"},y)),T.push(o=t("div",{mxs:"pa:c",class:"pD pe pC pj"},b))),t(i,0,T)},mixins:[_.default],render(){this.digest({elements:x.default._F()})},"_L<mousedown>"(e){let{ctrl:t,hide:i}=e.params,a=e.eventTarget.parentNode,l=!1,s=null;g.State.set({_G:t});let o=t.getProps(0,0),{width:r,height:n}=o,p=g.State.get("_c");r*=p,n*=p,m.default._H(),b.default._I("move"),this._x(e,e=>{l||i&&(a.style.display="none"),g.State.fire("_c",{width:r,height:n,node:_.default._J(e.clientX,e.clientY),pageX:e.pageX-r/2,pageY:e.pageY-n/2}),l=!0},e=>{i&&(a.style.display=""),m.default._z(),b.default._K(),l?e&&(s=_.default._J(e.clientX,e.clientY),g.State.fire("_e",{node:s,pageX:e.pageX-r/2,pageY:e.pageY-n/2})):g.State.fire("_d",{pageX:50*Math.random()|0,pageY:50*Math.random()|0})})},"_M<click>"(){let e=g.node("stage_outer");for(let t of y)if(e[t]){e[t]();break}},"$doc<webkitfullscreenchange,mozfullscreenchange,fullscreenchange>"(e){let t=document,i=t.fullscreenElement||t.webkitCurrentFullScreenElement||t.mozFullScreenElement||null;g.State.fire("_f",{fullscreen:!0,full:!!i})}})}),define("designer/history",["magix","./const"],(e,t,i)=>{const a=e("magix"),l=e("./const");let s=[],o=[],r=null,n=-1,p="",d=null,c=()=>JSON.stringify({page:a.State.get("_d"),scale:a.State.get("_c"),elements:a.State.get("_N"),select:a.State.get("_O"),xLines:a.State.get("_n"),yLines:a.State.get("_o")}),h=e=>{let t=JSON.parse(e),i=a.State.get("_c"),l=t.scale||i;a.State.fire("_g",{json:t}),a.State.fire("__",{scale:i!==l})};t.default={_P(){d||(d=c())},_Q:()=>({canRedo:o.length,canUndo:s.length}),_R(){s.length=0,o.length=0},_S(){if(s.length>0){let e=s.pop();o.push(e);let t=s[s.length-1]||d;h(t)}},_T(){let e=o.pop();e&&(s.push(e),h(e))},_t(e="_save",t=0){let i=c();e!=p&&(r&&(s.push(r),r=null),p=e),o.length=0;let h=e=>{s.push(e),s.length>l.default._C&&(d=s.shift()),a.State.fire("_h")};t?(r=i,clearTimeout(n),n=setTimeout(()=>{h(r),r=null},t)):h(i)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./header","./toolbar","./axis","./stage"],(e,t,i)=>{let a,l,s,o;e("./header"),e("./toolbar"),e("./axis"),e("./stage");const r=e("magix"),n=e("../elements/index"),p=e("../gallery/mx-dialog/index"),d=e("./const"),c=e("./history"),h=e("../panels/index");let u=n.default._U();r.default.applyStyle("pc",".pad{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.pad,.pae{position:relative}.pae{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.paf{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 85px);background-color:#edeef3;transition:all .3s;margin-left:20px}.pag{box-shadow:inset 1px 1px 6px 2px #dadada}");t.default=r.default.View.extend({tmpl:(e,t,i)=>{let r=[];return a?r.push(a):r.push(a=t("div",{mxs:"pb:_","mx-view":"designer/header",class:"pad"})),l?r.push(l):r.push(l=t("div",{mxs:"pb:a","mx-view":"designer/toolbar",class:"pae pj"})),s?r.push(s):r.push(s=t("div",{mxs:"pb:b","mx-view":"designer/axis?scroll=stage",class:"pj pg"})),o?r.push(o):r.push(o=t("div",{mxs:"pb:c","mx-view":"designer/stage",id:"stage",class:"paf pk pag"})),t(i,0,r)},mixins:[p.default],init(){r.State.on("_g",e=>{(e=>{let t=r.State.get("_d"),i=r.State.get("_N"),a=r.State.get("_O"),l=r.State.get("_n"),s=r.State.get("_o"),{elements:o,map:p}=n.default._V(e.elements);i.length=0,i.push(...o),l.length=0,e.xLines&&l.push(...e.xLines),s.length=0,e.yLines&&s.push(...e.yLines);let d={};if(a.length=0,e.select)for(let t of e.select){let e=p[t.id];e&&(d[e.id]=1,a.push(e))}r.default.mix(t,e.page),r.State.set({_c:e.scale||1,_W:d})})(e.json)}),r.State.set({_X:u,_d:u.getProps(),_c:d.default._c,_N:[],_O:[],_W:{},_n:[],_o:[]}),c.default._P()},render(){this.digest(null,null,()=>{h.default._Y()})}})}),define("designer/keys",[],(e,t,i)=>{t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:8,TAB:9,C:67,V:86,A:65,N:78,X:88,Z:90,Y:89}}),define("designer/props",[],(e,t,i)=>{t.default={_Z:2,_a_:4,_aa:8,_ab:16,_ac:32,_ad:64,_ae:128,_af:256,_ag:512}}),define("designer/service",["magix"],(e,t,i)=>{const a=e("magix");let l=a.default.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set("data",i.data),t()}).catch(e=>{t({msg:e.message})})});l.add([{name:"_ah",url:a.default.config("getBackgroundImageUrl")}]),t.default={ctor(){let e=this;e.on("rendercall",()=>{delete e._ai})},request(e){e=e||a.default.guid("r");let t=new l;return this.capture(e,t,!0),t},fetch(e,t){let i=JSON.stringify(e);this.request(i).all(e,t)},save(e,t){let i=this,a=JSON.stringify(e);i.lock(a,()=>{i.request(a+"_request").save(e,t)})},lock(e,t){this._ai||(this._ai={});let i=this._ai;i[e]||(i[e]=t,t())},unlock(e){let t=this._ai;t&&delete t[e]}}}),define("designer/stage-clipboard",["magix","./stage-elements","./stage-select"],(e,t,i)=>{const a=e("magix"),l=e("./stage-elements"),s=e("./stage-select");let o=e=>{if(Array.isArray(e)){let t=[];for(let i of e)t.push(o(i));e=t}else if("Object"==a.default.type(e)){let t={};for(let i in e)t[i]=o(e[i]);e=t}return e};t.default={_ak(){return(this._aj||[]).length},_al(){return this._aj||[]},_am(){let e=[],t=a.State.get("_O");for(let i of t)e.push(i);this._aj=e},_ao(){let e=a.State.get("_O");1==e.length&&e[0].props.locked||(this._am(),this._an=!0)},_ar(e){let t=this,i=t._aj,r=a.State.get("_N"),n=!1;if(i){n=!0;let p=[],d=0,c=0,h=0,u=e=>{for(let t of r)if(t.props.x==e.x&&t.props.y==e.y)return 1;return 0},f=t=>{if(0===d)if(e)c=t.x-e.x,h=t.y-e.y,t.x=e.x,t.y=e.y;else{let e=t.x,i=t.y;for(;u(t);)t.x+=20,t.y+=20;for(t.x+t.width<0&&(t.x=-t.width/2),t.y+t.height<0&&(t.y=-t.height/2);u(t);)t.x-=4,t.y-=4;c=e-t.x,h=i-t.y}else t.x-=c,t.y-=h};for(let e of i){let i=o(e),s=i.props;f(s),s.locked=!1,d++,i.id=a.default.guid("e_"),r.push(i),p.push(i),t._an&&l.default._ap(e.id,!0)}t._an&&(delete t._an,delete t._aj),a.State.fire("_i"),s.default._aq(p)}return n}}}),define("designer/stage-elements",["magix","./stage-select","./history","../gallery/mx-pointer/cursor","../util/transform"],(e,t,i)=>{const a=e("magix"),l=e("./stage-select"),s=e("./history"),o=e("../gallery/mx-pointer/cursor"),r=e("../util/transform");let n=(e,t)=>{let i=e.start,a=e.end,l=t.start,s=t.end,o=((a.x-i.x)*(l.y-i.y)-(a.y-i.y)*(l.x-i.x))*((a.x-i.x)*(s.y-i.y)-(a.y-i.y)*(s.x-i.x)),r=((s.x-l.x)*(i.y-l.y)-(s.y-l.y)*(i.x-l.x))*((s.x-l.x)*(a.y-l.y)-(s.y-l.y)*(a.x-l.x));return o<0&&r<0};t.default={_L(e,t){let i=a.State.get("_G");if(i){let s=a.State.get("_N"),o=i.getProps(e.pageX,e.pageY),r=a.State.get("_c");o.width*=r,o.height*=r;let n={id:a.default.guid("e_"),ctrl:i,type:i.type,props:o};return s.push(n),t&&l.default._as(n),s}},_av(e,t){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!t.props.locked){let e=a.State.get("_O"),i=!1;for(let a=e.length;a--;){let l=e[a];l.id==t.id&&(i=!0),l.props.locked&&e.splice(a,1)}if(i&&e.length>1)return void(l.default._at(t)&&s.default._t());l.default._au(t)&&s.default._t()}}else l.default._as(t)&&s.default._t()},_ax(e,t){let{element:i}=e.params,r=a.State.get("_O");if(void 0===e.button||0==e.button)if(e.shiftKey||e.ctrlKey||e.metaKey)this._av(e,i);else{o.default._aw("move");let n=[],p=!1;for(let e of r)i.id==e.id&&(p=!0),n.push({x:e.props.x,y:e.props.y});p||(l.default._as(i)&&s.default._t(),n.length=0,n.push({x:i.props.x,y:i.props.y}),r.length=0,r.push(i));let d=!1;a.State.fire("_j",{show:1}),t._x(e,t=>{let i=t.pageX-e.pageX,l=t.pageY-e.pageY,s=0;for(let e of r){let t=n[s++];if(!e.props.locked){d=!0,e.props.x=t.x+i,e.props.y=t.y+l;let s=a.Vframe.byNode(a.node(e.id));s&&s.invoke("assign",[{element:e}])&&s.invoke("render")}}a.State.fire("_k")},()=>{d&&s.default._t(),o.default._z(),a.State.fire("_j")})}else{let e=!1;for(let t of r)if(t.id===i.id){e=!0;break}e||l.default._as(i)&&s.default._t()}},_ay(){let e=a.State.get("_O"),t=a.State.get("_N"),i=!1;if(e.length){let s=a.toMap(e,"id");for(let e=t.length;e--;)s[t[e].id]&&(i=!0,t.splice(e,1));i&&l.default._as()}return i},_aA(){let e,t,i=a.State.get("_N"),l=[];for(let a of i){if((e=a.props).locked)continue;t=e.rotate||0;let i={x:e.x,y:e.y,width:e.width,height:e.height},s=r.default._az(i,t),o=s.point[0],n=s.point[2],p=s.point[6],d=s.point[4],c=o,h=o,u=o,f=o;for(let e of[n,p,d])e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.y<h.y&&(h=e),e.y>f.y&&(f=e);l.push({element:a,left:c,top:h,right:u,bottom:f,points:[o,n,p,d],lines:[{start:o,end:n},{start:n,end:d},{start:d,end:p},{start:p,end:o}]})}return l},_aB(e,t,i){let a,l=[],s=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}];for(let o of e)if(a=!1,i&&i[o.element.id])i&&l.push(o.element);else{for(let e of o.points)if(e.x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height){l.push(o.element),a=!0;break}if(!a)for(let e of o.lines){for(let t of s)if(n(e,t)){a=!0,l.push(o.element);break}if(a)break}}return l},_ap(e,t){let i=a.State.get("_N");for(let t=i.length;t--;){e==i[t].id&&i.splice(t,1)}t||l.default._aq()},_aD(){let e=a.State.get("_W"),t=a.State.get("_N"),i=[];for(let e of t)e.props.locked||i.push(e);l.default._aq(i),l.default._aC(e)&&s.default._t()},_aE(e,t){let i=a.State.get("_N"),l=-1;for(let e=i.length;e--;){if(i[e].id===t.id){i.splice(l=e,1);break}}return 3==e?i.push(t):4==e?i.unshift(t):5==e?i.splice(l+1,0,t):6==e&&(0===l&&(l=1),i.splice(l-1,0,t)),!0},_aF(e){let t=a.State.get("_O"),i=a.State.get("_N"),s=t.length,o=t[0];if(0===s||s>1)o=i[e.shiftKey?0:i.length-1],l.default._as(o);else{let t,a;for(let e=i.length;e--;){let l=i[e];if(l.id==o.id){t=i[e-1];break}a=l}let s=null;e.shiftKey?(t||(t=i[i.length-1]),s=t):(a||(a=i[0]),s=a),s.id!=o.id&&l.default._as(s)}}}}),define("designer/stage-select",["magix"],(e,t,i)=>{const a=e("magix");t.default={_as(e){let t=a.State.get("_O"),i=t.length;if(i||e){let l=i>1?null:t[0];t.length=0;let s=!1;if(e?(t.push(e),s=e!=l):i&&(s=!0),s)return a.State.set({_W:a.toMap(t,"id")}),a.State.fire("_l"),!0}},_au(e){let t=a.State.get("_O"),i=!1;for(let a of t)if(a.id===e.id){i=!0;break}if(!i)return t.push(e),a.State.set({_W:a.toMap(t,"id")}),a.State.fire("_l"),!0},_at(e){let t=a.State.get("_O"),i=!1,l=-1;for(let a of t)if(l++,a.id===e.id){i=!0;break}if(i)return t.splice(l,1),a.State.set({_W:a.toMap(t,"id")}),a.State.fire("_l"),!0},_aq(e){let t=a.State.get("_O");t.length=0,e&&t.push.apply(t,e),a.State.set({_W:a.toMap(t,"id")}),a.State.fire("_l")},_aC(e){let t=a.State.get("_W"),i=0;for(let a in e)if(!t[a]){i=1;break}if(!i)for(let a in t)if(!e[a]){i=1;break}return i}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-select","./stage-clipboard","../util/converter","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-menu/index","./contextmenu"],(e,t,i)=>{const a=e("magix"),l=e("../gallery/mx-dragdrop/index"),s=e("./history"),o=e("./keys"),r=e("./stage-elements"),n=e("./stage-select"),p=e("./stage-clipboard"),d=e("../util/converter"),c=e("../gallery/mx-pointer/select"),h=e("../gallery/mx-pointer/cursor"),u=e("../gallery/mx-menu/index"),f=e("./contextmenu");a.default.applyStyle("pd",".pah{outline:0;display:flex;position:relative}.pai{padding:50px 240px 50px 120px}.paj .pai{padding:0}.pak{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o)=>{let r,n,p,d,c,h,u=[],{fullscreen:f,rx:g,ry:x,marginTop:_,marginLeft:m,page:b,scale:y,elements:w,id:v}=e;c=[];for(let e=0,l=w,r=l.length;e<r;e++){let r=l[e];h=[t("div",{mxv:"elements,scale,fullscreen",id:a(r.id),"mx-view":"elements/"+a(r.type)+"/designer?element="+o(s,r)+"&scale="+o(s,y)+"&fullscreen="+o(s,f),"mx-mousedown":i+"\x1e_aI({element:'"+o(s,r)+"'})"})],c.push(...h)}return p="width:"+a(b.width*y)+"px;height:"+a(b.height*y)+"px;background:"+a(b.background)+";",b.backgroundImage&&(p+="background-image:url("+a(b.backgroundImage)+");background-repeat:"+a("full"==b.backgroundRepeat?"no-repeat":b.backgroundRepeat)+";background-size:","full"==b.backgroundRepeat?p+="100% 100%":p+=a(b.backgroundWidth*y)+"px "+a(b.backgroundHeight*y)+"px;"),d=[t("div",{class:"pak pg",id:"stage_canvas",style:p},c)],p="",f&&(p+="transform:scaleX("+a(g)+") scaleY("+a(x)+");transform-origin:0 0;margin:"+a(_)+"px 0 0 "+a(m)+"px;"),n=[t("div",{class:"pai",style:p},d)],r="pah",f&&(r+=" paj"),u.push(t("div",{id:"stage_outer","mx-contextmenu":i+"\x1e_B()","mx-mousedown":i+"\x1e_aK()",tabindex:"0","mx-focusin":i+"\x1e_aM()","mx-focusout":i+"\x1e_aN()","mx-keydown":i+"\x1e_aL()",class:r},n),t("div",{id:"pole_"+a(v),style:"margin-top:-"+a(b.height*y+100)+"px;display:none;"})),t(i,0,u)},mixins:[l.default],init(){let e=e=>{if(e.node){if(!a.default.inside(e.node,a.node("stage_outer")))return;{let t=d.default._aG({x:e.pageX,y:e.pageY});e.pageX=t.x,e.pageY=t.y}}else e.pageX+=this.root.scrollLeft,e.pageY+=this.root.scrollTop;r.default._L(e,!0)&&(a.State.fire("_i"),s.default._t())},t=e=>{let t=a.State.get("_N");e?this.digest({elements:t}):this.set({elements:t})},i=0,l=e=>{if(e.step||e.fullscreen){let t=a.State.get("_N");if(e.fullscreen){let t=a.State.get("_d");if(e.full){let l=screen.width/t.width,s=screen.height/t.height,o=Math.min(l,s),r=0,n=0;"auto"==t.scaleType?(r=o,n=o):(r=l,n=s);let p=(screen.height-n*t.height)/2,d=(screen.width-r*t.width)/2,c=a.State.get("_c");1!=c?(e.step=1/c,i=c):i=0,a.State.set({_c:1}),this.set({rx:r,ry:n,marginTop:p,marginLeft:d})}else 0!=i&&(e.step=i,a.State.set({_c:i}));this.set({fullscreen:e.full})}if(e.step)for(let{props:i}of t)i.x*=e.step,i.y*=e.step,i.width*=e.step,i.height*=e.step;this.set({elements:t})}this.render()};a.State.on("_f",l),a.State.on("__",l),a.State.on("_a",l),a.State.on("_b",l),a.State.on("_d",e),a.State.on("_e",e),a.State.on("_i",t),a.State.on("_j",e=>{let t=this.root,i=a.node("pole_"+this.id).style;e.show?(i.width=t.scrollWidth+"px",i.height=t.scrollHeight+"px",i.display="block"):i.display="none"}),a.State.on("_c",e=>{a.default.inside(e.node,a.node("stage_outer"))?c.default._aH(e.pageX,e.pageY,e.width,e.height):c.default._z()}),t()},render(){let e=a.State.get("_d");this.digest({scale:a.State.get("_c"),page:e})},"_aI<mousedown>"(e){this.get("fullscreen")||r.default._ax(e,this)},"_aK<mousedown>"(e){if(this.get("fullscreen"))return;let t=e.target;if("stage_canvas"==t.id||a.default.inside(a.node("stage_canvas"),t)){let t=null,i=0,l=a.State.get("_W");if(e.shiftKey){t={};let e=a.State.get("_O");for(let a of e)t[a.id]=1,i++}else n.default._as();this._aJ=i,c.default._H();let o=0,p=r.default._aA();this._x(e,i=>{o||(o=1,h.default._aw("default"));let a=Math.abs(e.pageX-i.pageX),l=Math.abs(e.pageY-i.pageY),s=Math.min(e.pageX,i.pageX),u=Math.min(e.pageY,i.pageY);c.default._aH(s,u,a,l);let f=d.default._aG({x:s,y:u});if(f.width=a,f.height=l,p.length){let e=r.default._aB(p,f,t),i=e.length;i!==this._aJ&&(this._aJ=i,n.default._aq(e))}},()=>{o&&(c.default._z(),h.default._z()),n.default._aC(l)&&s.default._t()})}},"_aL<keydown>"(e){if(!this.get("fullscreen"))if(e.metaKey||e.ctrlKey)e.keyCode==o.default.Z?(e.preventDefault(),e.shiftKey?s.default._T():s.default._S()):e.keyCode==o.default.Y?(e.preventDefault(),s.default._T()):e.keyCode==o.default.A?(e.preventDefault(),r.default._aD()):e.keyCode==o.default.X?(e.preventDefault(),p.default._ao()):e.keyCode==o.default.C?(e.preventDefault(),p.default._am()):e.keyCode==o.default.V&&(e.preventDefault(),p.default._ar());else if(e.keyCode==o.default.TAB)e.preventDefault(),r.default._aF(e);else if(e.keyCode==o.default.DELETE)e.preventDefault(),r.default._ay()&&(a.State.fire("_i"),s.default._t());else{let t=e.shiftKey?10:1;t*=a.State.get("_c");let i=a.State.get("_O");if(i.length){let l=!1;for(let s of i)if(!s.props.locked&&(e.keyCode==o.default.UP?(l=!0,s.props.y-=t):e.keyCode==o.default.DOWN?(l=!0,s.props.y+=t):e.keyCode==o.default.LEFT?(l=!0,s.props.x-=t):e.keyCode==o.default.RIGHT&&(l=!0,s.props.x+=t),l)){let e=a.Vframe.byNode(a.node(s.id));e&&e.invoke("assign",[{element:s}])&&e.invoke("render")}l&&(e.preventDefault(),a.State.fire("_k"),s.default._t("__",500))}}},"_B<contextmenu>"(e){if(e.preventDefault(),a.default.inside(e.target,a.node("stage_canvas"))){let t=a.default.config("lang"),i=f.default.stage(t),l={},o=a.State.get("_N"),n=a.State.get("_O"),c=p.default._ak();l[f.default.allId]=!o.length,l[f.default.pasteId]=!c;let h=n.length,g=n[0];if(1==h){i=f.default.singleElement(t);let e=o[o.length-1],a=o[0],s=e.id==g.id,r=a.id==g.id,n=g.props.locked;l[f.default.cutId]=n,l[f.default.upId]=n||s,l[f.default.topId]=n||s,l[f.default.bottomId]=n||r,l[f.default.downId]=n||r}else h>1&&(i=f.default.multipleElement(t));u.default.show(this,e,{list:i,disabled:l,picked(t){if(t.id==f.default.allId)r.default._aD();else if(t.id==f.default.copyId)p.default._am();else if(t.id==f.default.pasteId){let t=d.default._aG({x:e.pageX,y:e.pageY});p.default._ar(t)&&s.default._t()}else t.id==f.default.cutId?p.default._ao():t.id==f.default.deleteId?r.default._ay()&&(a.State.fire("_i"),s.default._t()):t.id>=3&&t.id<=6&&r.default._aE(t.id,g)&&(a.State.fire("_i"),s.default._t())}})}},"_aM<focusin>"(e){this.root.classList.remove("pag")},"_aN<focusout>"(){this.root.classList.add("pag")}})}),define("designer/toolbar-align",["magix","./history"],(e,t,i)=>{let a;const l=e("magix"),s=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,o,r=[],{elements:n,i18n:p}=e,d=n.length;return a?r.push(a):r.push(a=t("i",{mxs:"pd:_",class:"pao"})),o=[t(0,0,"\ue70b")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_l")),"mx-click":i+"\x1e_aO({to:'left'})",class:s},o)),o=[t(0,0,"\ue711")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_m")),"mx-click":i+"\x1e_aO({to:'center'})",class:s},o)),o=[t(0,0,"\ue70c")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_n")),"mx-click":i+"\x1e_aO({to:'right'})",class:s},o)),o=[t(0,0,"\ue70d")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_o")),"mx-click":i+"\x1e_aO({to:'top'})",class:s},o)),o=[t(0,0,"\ue712")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_p")),"mx-click":i+"\x1e_aO({to:'middle'})",class:s},o)),o=[t(0,0,"\ue70e")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_q")),"mx-click":i+"\x1e_aO({to:'bottom'})",class:s},o)),t(i,0,r)},init(){let e=this.render.bind(this);l.State.on("__",e),l.State.on("_l",e)},render(){this.digest({elements:l.State.get("_O")})},"_aO<click>"(e){if(e.eventTarget.classList.contains("pap"))return;let{to:t}=e.params,i=l.State.get("_O"),a=-Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,n=-Number.MAX_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER;for(let e of i){let i=l.node("mask_"+e.id).getBoundingClientRect();if("right"==t)i.right>a&&(a=i.right);else if("left"==t)i.left<o&&(o=i.left);else if("top"==t)i.top<r&&(r=i.top);else if("bottom"==t)i.bottom>n&&(n=i.bottom);else if("middle"==t){let e=(i.bottom-i.top)/2;i.top+e<p&&(p=i.top+e)}else if("center"==t){let e=(i.right-i.left)/2;i.left+e<d&&(d=i.left+e)}}let c=0;for(let e of i){let i=l.node("mask_"+e.id).getBoundingClientRect(),s=0;if("right"==t){let t=a-i.right;0!=t&&(c=1,s=1,e.props.x+=t)}else if("left"==t){let t=o-i.left;0!=t&&(c=1,s=1,e.props.x+=t)}else if("top"==t){let t=r-i.top;0!=t&&(c=1,s=1,e.props.y+=t)}else if("bottom"==t){let t=n-i.bottom;0!=t&&(c=1,s=1,e.props.y+=t)}else if("middle"==t){let t=p-(i.top+(i.bottom-i.top)/2);0!=t&&(c=1,s=1,e.props.y+=t)}else if("center"==t){let t=d-(i.left+(i.right-i.left)/2);0!=t&&(c=1,s=1,e.props.x+=t)}if(s){let t=l.Vframe.byNode(l.node(e.id));t&&t.invoke("assign",[{element:e}])&&t.invoke("render")}}c&&(l.State.fire("_k"),s.default._t())}})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,i)=>{let a;const l=e("magix"),s=e("./stage-elements"),o=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,o,r=[],{elements:n,i18n:p}=e,d=n.length;return a?r.push(a):r.push(a=t("i",{mxs:"pe:_",class:"pao"})),o=[t(0,0,"\ue600")],s="pw pam",d<1&&(s+=" pap"),r.push(t("i",{title:l(p("_j"))+"(Delete)","mx-click":i+"\x1e_aP()",class:s},o)),t(i,0,r)},init(){let e=this.render.bind(this);l.State.on("__",e),l.State.on("_l",e)},render(){this.digest({elements:l.State.get("_O")})},"_aP<click>"(e){e.eventTarget.classList.contains("pap")||s.default._ay()&&(l.State.fire("_i"),o.default._t())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,i)=>{const a=e("magix"),l=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,o=[],{status:r,i18n:n}=e;return s=[t(0,0,"\ue682")],l="pw pam",r.canUndo||(l+=" pap"),o.push(t("i",{title:a(n("_r")),"mx-click":i+"\x1e_aQ({s:'-',b:"+a(r.canUndo)+"})",class:l},s)),s=[t(0,0,"\ue682")],l="pw pam pA",r.canRedo||(l+=" pap"),o.push(t("i",{title:a(n("_s")),"mx-click":i+"\x1e_aQ({s:'+',b:"+a(r.canRedo)+"})",class:l},s)),t(i,0,o)},init(){let e=this.render.bind(this);a.State.on("__",e),a.State.on("_h",e)},render(){this.digest({status:l.default._Q()})},"_aQ<click>"(e){if(e.eventTarget.classList.contains("pap"))return;let{s:t,b:i}=e.params;i&&("-"==t?l.default._S():l.default._T())}})}),define("designer/toolbar-layer",["magix","./history","./stage-elements"],(e,t,i)=>{let a;const l=e("magix"),s=e("./history"),o=e("./stage-elements");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,o,r,n=[],{elements:p,top:d,i18n:c,bottom:h}=e;s="";let u=p.length;s+=" ";let f=p[0];return a?n.push(a):n.push(a=t("i",{mxs:"pg:_",class:"pao"})),r=[t(0,0,"\ue632")],o="pw pam",(1!=u||f.props.locked||d.id==f.id)&&(o+=" pap"),n.push(t("i",{title:l(c("_f")),"mx-click":i+"\x1e_aE({to:5})",class:o},r)),r=[t(0,0,"\ue607")],o="pw pam",(1!=u||f.props.locked||d.id==f.id)&&(o+=" pap"),n.push(t("i",{title:l(c("_h")),"mx-click":i+"\x1e_aE({to:3})",class:o},r)),r=[t(0,0,"\ue632")],o="pw pam pz",(1!=u||f.props.locked||h.id==f.id)&&(o+=" pap"),n.push(t("i",{title:l(c("_g")),"mx-click":i+"\x1e_aE({to:6})",class:o},r)),r=[t(0,0,"\ue607")],o="pw pam pz",(1!=u||f.props.locked||h.id==f.id)&&(o+=" pap"),n.push(t("i",{title:l(c("_i")),"mx-click":i+"\x1e_aE({to:4})",class:o},r)),t(i,0,n)},init(){let e=this.render.bind(this);l.State.on("__",e),l.State.on("_i",e),l.State.on("_l",e),l.State.on("_m",e)},render(){let e=l.State.get("_N");this.digest({top:e[e.length-1],bottom:e[0],elements:l.State.get("_O")})},"_aE<click>"(e){if(e.eventTarget.classList.contains("pap"))return;let{to:t}=e.params,i=this.get("elements")[0];o.default._aE(t,i)&&(l.State.fire("_i"),s.default._t())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,i)=>{const a=e("magix"),l=e("../panels/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r)=>{let n,p,d,c=[],{panels:h,i18n:u}=e;for(let e=0,l=h,s=l.length;e<s;e++){let s=l[e];d=[t(0,1,s.icon)],p="pw pam",s.opened&&(p+=" pan"),n=[t("i",{"mx-click":i+"\x1e_aS({id:'"+r(s.id)+"'})",title:a(u(s.opened?"_t":"_u",s.title)),class:p},d)],c.push(...n)}return t(i,0,c)},init(){a.State.on("_n",()=>{this.render()})},render(){this.digest({panels:l.default._aR()})},"_aS<click>"(e){let{id:t}=e.params;l.default._aS(t)}})}),define("designer/toolbar-scale",["magix","./history"],(e,t,i)=>{let a={class:"paq"};const l=e("magix"),s=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,o=[],{i18n:r,scale:n}=e;return s=[t(0,0,"\ue602")],o.push(t("i",{class:"pw pam","mx-click":i+"\x1e_aT({s:'-'})",title:l(r("_v"))},s)),s=[t(0,0,100*n+"%")],o.push(t("b",a,s)),s=[t(0,0,"\ue699")],o.push(t("i",{class:"pw pam","mx-click":i+"\x1e_aT({s:'+'})",title:l(r("_w"))},s)),t(i,0,o)},init(){let e=this.render.bind(this);l.State.on("_a",e),l.State.on("__",e)},render(){this.digest({scale:l.State.get("_c")})},"_aT<click>"(e){let{s:t}=e.params,i=this.get("scale"),a=i;"+"==t?(i+=.5)>5&&(i=5):(i-=.5)<.5&&(i=.5),a!=i&&(l.State.set({_c:i}),l.State.fire("_a",{step:i/a}),s.default._t())}})}),define("designer/toolbar-space",["magix","./history"],(e,t,i)=>{let a;const l=e("magix"),s=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,o,r=[],{elements:n,i18n:p}=e,d=n.length;return a?r.push(a):r.push(a=t("i",{mxs:"pj:_",class:"pao"})),o=[t(0,0,"\ue604")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_x")),"mx-click":i+"\x1e_aU({to:'width'})",class:s},o)),o=[t(0,0,"\ue605")],s="pw pam",d<2&&(s+=" pap"),r.push(t("i",{title:l(p("_y")),"mx-click":i+"\x1e_aU({to:'height'})",class:s},o)),o=[t(0,0,"\ue608")],s="pw pam",d<3&&(s+=" pap"),r.push(t("i",{title:l(p("_z")),"mx-click":i+"\x1e_aV({to:'hor'})",class:s},o)),o=[t(0,0,"\ue608")],s="pw r90 pam",d<3&&(s+=" pap"),r.push(t("i",{title:l(p("_A")),"mx-click":i+"\x1e_aV({to:'ver'})",class:s},o)),t(i,0,r)},init(){let e=this.render.bind(this);l.State.on("__",e),l.State.on("_l",e)},render(){this.digest({elements:l.State.get("_O")})},"_aU<click>"(e){if(e.eventTarget.classList.contains("pap"))return;let{to:t}=e.params,i=l.State.get("_O"),a=-Number.MAX_SAFE_INTEGER,o=-Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER;for(let e of i){let t=e.props;t.width>a&&(a=t.width),t.width<r&&(r=t.width),t.height>o&&(o=t.height),t.height<n&&(n=t.height)}let p=0;for(let s of i){let i,d=s.props,c=0;if("width"==t?(i=e.shiftKey?r:a,d.width!=i&&(c=1,p=1,d.width=i)):(i=e.shiftKey?n:o,d.height!=i&&(c=1,p=1,d.height=i)),c){let e=l.Vframe.byNode(l.node(s.id));e&&e.invoke("assign",[{element:s}])&&e.invoke("render")}}p&&(l.State.fire("_k"),s.default._t())},"_aV<click>"(e){if(e.eventTarget.classList.contains("pap"))return;let{to:t}=e.params,i=l.State.get("_O"),a=-Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=-Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,p=[];for(let e of i){let t=e.props,i=t.x+t.width/2,l=t.y+t.height/2;i>a&&(a=i),i<o&&(o=i),l>r&&(r=l),l<n&&(n=l),p.push({m:e,mx:i,my:l})}let d=(p="ver"==t?p.sort((e,t)=>e.my-t.my):p.sort((e,t)=>e.mx-t.mx))[0],c=p.length-1,h=c,u=d.m,f=0,g=(r-n)/h,x=(a-o)/h;for(let e=1;e<c;e++){let i=p[e].m,a=0;if("ver"==t){let e=u.props.y+u.props.height/2;e+=g,e-=i.props.height/2,i.props.y!=e&&(f=1,a=1,i.props.y=e)}else{let e=u.props.x+u.props.width/2;e+=x,e-=i.props.width/2,i.props.x!=e&&(f=1,a=1,i.props.x=e)}if(a){let e=l.Vframe.byNode(l.node(i.id));e&&e.invoke("assign",[{element:i}])&&e.invoke("render")}u=i}f&&(l.State.fire("_k"),s.default._t())}})}),define("designer/toolbar",["magix","./toolbar-do","./toolbar-align","./toolbar-space","./toolbar-layer","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,i)=>{let a,l;e("./toolbar-do"),e("./toolbar-align"),e("./toolbar-space"),e("./toolbar-layer"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels");const s=e("magix");s.default.applyStyle("pe",".pal{height:22px}.pam{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.pam:hover{background:#e6e6e6;color:#333}.pan,.pan:hover{background:#c4c4c4}.pao{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.pap{color:#aaa;cursor:not-allowed}.pap:hover{color:#aaa;background:transparent}.paq{font-weight:400;font-size:14px;width:40px;display:inline-block;text-align:center}"),t.default=s.default.View.extend({tmpl:(e,t,i)=>{let s,o=[];return a?o.push(a):(s=[t("div",{class:"pal","mx-view":"designer/toolbar-do"}),t("div",{class:"pal","mx-view":"designer/toolbar-align"}),t("div",{class:"pal","mx-view":"designer/toolbar-space"}),t("div",{class:"pal","mx-view":"designer/toolbar-layer"}),t("div",{class:"pal","mx-view":"designer/toolbar-del"})],o.push(a=t("div",{mxs:"pk:_",class:"pd pD pb"},s))),l?o.push(l):(s=[t("div",{class:"pal","mx-view":"designer/toolbar-scale"}),t("i",{class:"pao"}),t("div",{class:"pal","mx-view":"designer/toolbar-panels"})],o.push(l=t("div",{mxs:"pk:a",class:"pe pb pD"},s))),t(i,0,o)},render(){this.digest()}})});