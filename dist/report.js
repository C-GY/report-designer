(function(e,t){if(!e.seajs){var i=e.seajs={version:"2.2.3"},a=i.data={},l=D("Object"),s=D("String"),o=Array.isArray||D("Array"),r=D("Function"),n=D("Undefined"),d=0,p=a.events={};i.on=function(e,t){return(p[e]||(p[e]=[])).push(t),i},i.off=function(e,t){if(!e&&!t)return p=a.events={},i;var l=p[e];if(l)if(t)for(var s=l.length-1;s>=0;s--)l[s]===t&&l.splice(s,1);else delete p[e];return i};var _,c=i.emit=function(e,t){var a,l=p[e];if(l)for(l=l.slice();a=l.shift();)a(t);return i},u=/[^?#]*\//,h=/\/\.\//g,f=/\/[^\/]+\/\.\.\//,g=/([^:\/])\/\//g,x=/^([^\/:]+)(\/.+)$/,b=/{([^{]+)}/g,m=/^\/\/.|:\//,y=/^.*?\/\/.*?\//,v=document,w=H(v.URL),k=v.scripts,A=v.getElementById("seajsnode")||k[k.length-1],S=H(((_=A).hasAttribute?_.src:_.getAttribute("src",4))||w);i.resolve=function(e,t){if(!e)return"";var i,l,o;e=function(e){var t=a.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(b,function(e,i){return s(t[i])?t[i]:e})),e}(e=function(e){var t,i=a.paths;return i&&(t=e.match(x))&&s(i[t[1]])&&(e=i[t[1]]+t[2]),e}(e=function(e){var t=a.alias;return t&&s(t[e])?t[e]:e}(e))),l=(i=e).length-1;var n=q(e="#"===(o=i.charAt(l))?i.substring(0,l):".js"===i.substring(l-2)||i.indexOf("?")>0||".css"===i.substring(l-3)||"/"===o?i:i+".js",t);return n=function(e){var t=a.map,i=e;if(t)for(var l=0,s=t.length;l<s;l++){var o=t[l];if((i=r(o)?o(e)||e:e.replace(o[0],o[1]))!==e)break}return i}(n)};var M,z,j=v.head||v.getElementsByTagName("head")[0]||v.documentElement,T=j.getElementsByTagName("base")[0],E=/\.css(?:\?|$)/i,I=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;i.request=function(e,t,i,l){var s=E.test(e),o=v.createElement(s?"link":"script");i&&(o.charset=i),n(l)||o.setAttribute("crossorigin",l),function(e,t,i,l){var s="onload"in e;function o(){e.onload=e.onerror=e.onreadystatechange=null,i||a.debug||j.removeChild(e),e=null,t()}!i||!I&&s?s?(e.onload=o,e.onerror=function(){c("error",{uri:l,node:e}),o()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&o()}:setTimeout(function(){!function e(t,i){var a,l=t.sheet;if(I)l&&(a=!0);else if(l)try{l.cssRules&&(a=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(a=!0)}setTimeout(function(){a?i():e(t,i)},20)}(e,t)},1)}(o,t,s,e),s?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),M=o,T?j.insertBefore(o,T):j.appendChild(o),M=null};var P,O=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,C=/\\\\/g,L=i.cache={},N={},Y={},X={},V=W.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};W.prototype.resolve=function(){for(var e=this.dependencies,t=[],i=0,a=e.length;i<a;i++)t[i]=W.resolve(e[i],this.uri);return t},W.prototype.load=function(){if(!(this.status>=V.LOADING)){this.status=V.LOADING;var e=this.resolve();c("load",e);for(var t,i=this._remain=e.length,a=0;a<i;a++)(t=W.get(e[a])).status<V.LOADED?t._waitings[this.uri]=(t._waitings[this.uri]||0)+1:this._remain--;if(0!==this._remain){var l={};for(a=0;a<i;a++)(t=L[e[a]]).status<V.FETCHING?t.fetch(l):t.status===V.SAVED&&t.load();for(var s in l)l.hasOwnProperty(s)&&l[s]()}else this.onload()}},W.prototype.onload=function(){this.status=V.LOADED,this.callback&&this.callback();var e,t,i=this._waitings;for(e in i)i.hasOwnProperty(e)&&((t=L[e])._remain-=i[e],0===t._remain&&t.onload());delete this._waitings,delete this._remain},W.prototype.fetch=function(e){var t=this.uri;this.status=V.FETCHING;var l={uri:t};c("fetch",l);var s=l.requestUri||t;function o(){i.request(l.requestUri,l.onRequest,l.charset,l.crossorigin)}s&&!Y[s]?N[s]?X[s].push(this):(N[s]=!0,X[s]=[this],c("request",l={uri:t,requestUri:s,onRequest:function(){delete N[s],Y[s]=!0,P&&(W.save(t,P),P=null);var e,i=X[s];delete X[s];for(;e=i.shift();)e.load()},charset:r(a.charset)?a.charset(s):a.charset,crossorigin:r(a.crossorigin)?a.crossorigin(s):a.crossorigin}),l.requested||(e?e[l.requestUri]=o:o())):this.load()},W.prototype.exec=function(){var e=this;if(e.status>=V.EXECUTING)return e.exports;e.status=V.EXECUTING;var t=e.uri;function i(e){return W.get(i.resolve(e)).exec()}i.resolve=function(e){return W.resolve(e,t)},i.async=function(e,a){return W.use(e,a,t+"_async_"+R()),i};var a=e.factory,l=r(a)?a(i,e.exports={},e):a;return void 0===l&&(l=e.exports),delete e.factory,e.exports=l,e.status=V.EXECUTED,c("exec",e),l},W.resolve=function(e,t){var a={id:e,refUri:t};return c("resolve",a),a.uri||i.resolve(a.id,t)},W.define=function(e,t,i){var a,l,s=arguments.length;1===s?(i=e,e=void 0):2===s&&(i=t,o(e)?(t=e,e=void 0):t=void 0),!o(t)&&r(i)&&(a=i.toString(),l=[],a.replace(C,"").replace(O,function(e,t,i){i&&l.push(i)}),t=l);var n={id:e,uri:W.resolve(e),deps:t,factory:i};if(!n.uri&&v.attachEvent){var d=function(){if(M)return M;if(z&&"interactive"===z.readyState)return z;for(var e=j.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var i=e[t];if("interactive"===i.readyState)return z=i}}();d&&(n.uri=d.src)}c("define",n),n.uri?W.save(n.uri,n):P=n},W.save=function(e,t){var i=W.get(e);i.status<V.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=V.SAVED)},W.get=function(e,t){return L[e]||(L[e]=new W(e,t))},W.use=function(t,i,a){var l=W.get(a,o(t)?t:[t]);l.callback=function(){for(var t=[],a=l.resolve(),s=0,o=a.length;s<o;s++)t[s]=L[a[s]].exec();i&&i.apply(e,t),delete l.callback},l.load()},W.preload=function(e){var t=a.preload,i=t.length;i?W.use(t,function(){t.splice(0,i),W.preload(e)},a.cwd+"_preload_"+R()):e()},i.use=function(e,t){return W.preload(function(){W.use(e,t,a.cwd+"_use_"+R())}),i},W.define.cmd={},e.define=W.define,i.Module=W,a.fetchedList=Y,a.cid=R,i.require=function(e){var t=W.get(W.resolve(e));return t.status<V.EXECUTING&&(t.onload(),t.exec()),t.exports};var B,F;a.base=(S.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",S])[1],a.dir=S,a.cwd=w,a.charset="utf-8",a.history={},a.preload=(B=[],F=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(F+=" "+v.cookie).replace(/(seajs-\w+)=1/g,function(e,t){B.push(t)}),B),i.config=function(e){for(var t in e){var s=e[t],r=a[t];if(a.history[t]=a.history[t]||[],a.history[t].push(U(s)),r&&l(r))for(var n in s)r[n]=s[n];else o(r)?s=r.concat(s):"base"===t&&("/"!==s.slice(-1)&&(s+="/"),s=q(s)),a[t]=s}return c("config",e),i}}function D(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function R(){return d++}function H(e){return e.match(u)[0]}function q(e,t){var i,l=e.charAt(0);if(m.test(e))i=e;else if("."===l)i=function(e){for(e=e.replace(h,"/");e.match(f);)e=e.replace(f,"/");return e=e.replace(g,"$1/")}((t?H(t):a.cwd)+e);else if("/"===l){var s=a.cwd.match(y);i=s?s[0]+e.substring(1):e}else i=a.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function W(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function U(e){if(l(e)){var t={};for(var i in e)t[i]=e[i];return t}return e}})(this),define("magix",()=>{let e=0,t=[],i=window,a=document,l=setTimeout,s=encodeURIComponent;function o(){}let r=JSON.stringify,n=a.body,d=Date.now,p="\x1e",_="prototype",c=Object[_].toString,u=e=>c.call(e).slice(8,-1),h=e=>"Object"==u(e),f=Array.isArray,g=t=>(t||"mx_")+e++,x=e=>a.getElementById(e),b=g(),m={rootId:g(),defaultView:b,error(e){throw e}},y=e=>!e||"object"!=typeof e,v=(e,t,i)=>{if(e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},{assign:w,keys:k,hasOwnProperty:A}=Object,S=a.head,M=a.createElement("div"),z=M.getAttribute,j=(e,t)=>z.call(e,t),T=(e,t)=>{t&&!T[e]&&(T[e]=1,M.innerHTML=`<style>${t}`,S.appendChild(M.firstChild))},E=(e,i,a,l,s)=>{for(s of(i=i||t,f(e)||(e=[e]),f(i)||(i=[i]),e))try{l=s&&s.apply(a,i)}catch(e){m.error(e)}return l},I=(e,t)=>e&&A.call(e,t),P=(e,t)=>{let i,a;if(y(t))(i=t+"")[0]==p&&I(e,i)&&(t=e[i]);else for(i in t)a=t[i],a=P(e,a),t[i]=a;return t},O=(e,t)=>t.a-e.a||t.b-e.b;function C(e,t,i,a){(a=this).a=[],a.b=t||5,a.c=a.b+(e||20),a.d=i}w(C[_],{get(t){let i=this.a[p+t];return i&&(i.a++,i.b=e++,i=i.c),i},set(t,i){let a=this,l=a.a,s=p+t,o=l[s],r=a.b;if(!o){if(l.length>=a.c)for(l.sort(O);r--;)(o=l.pop()).a>0&&a.del(o.o);o={d:t},l.push(o),l[s]=o}o.c=i,o.a=1,o.b=e++},del(e){e=p+e;let t=this.a,i=t[e],a=this.d;i&&(i.a=-1,i.c="",delete t[e],a&&E(a,i.d))},has(e){return I(this.a,p+e)}});let L,N,Y=(e,t)=>{if(t&&e&&1==e.nodeType)return e.matches(t)},X=[],V=()=>!0,B=()=>!1,F={preventDefault:"isDefaultPrevented",stopPropagation:"isPropagationStopped"},D=(e,t,i,a,l,s)=>{let o={a:a,b:i,c:t,d:e,e(t){t=(e=>{if(!e.isDefaultPrevented){for(let t in F){let i=F[t],a=e[t];e[t]=((...t)=>(e[i]=V,a&&a.apply(e,t))),e[i]=B}(void 0!==e.defaultPrevented?e.defaultPrevented:"returnValue"in e?!1===e.returnValue:e.getPreventDefault&&e.getPreventDefault())&&(e.isDefaultPrevented=V)}return e})(t),a?(t.eventTarget=e,E(i,t,s)):i(t)}};X.push(o),e.addEventListener(t,o.e,l)},R=(e,t,i,a,l)=>{for(let s,o=X.length;o--;)if((s=X[o]).c==t&&s.a==a&&s.d==e&&s.b===i){X.splice(o,1),e.removeEventListener(t,s.e,l);break}},H=/[#?].*$/,q=/([^=&?\/#]+)=?([^&#?]*)/g,W=/(?!^)=|&/,U=new C,G=(e,t,i)=>{try{i=decodeURIComponent(i)}catch(e){}L[t]=i},K=e=>{let t,i=U.get(e);return i||(L={},t=e.replace(H,""),e==t&&W.test(t)&&(t=""),e.replace(t,"").replace(q,G),U.set(e,i={a:t,b:L})),{path:i.a,params:w({},i.b)}},Z=new C,J=(e,t,i)=>(Z.has(e)?i=Z.get(e):(i=E(Function(`return ${e}`)),e.indexOf(p)>-1?P(t,i):Z.set(e,i)),i),Q=(e,t)=>{if(e){let i=[];b==e?(N||(N=tt.extend()),t(N)):seajs.use(e,(...e)=>{for(let t of e)i.push(t&&t.__esModule&&t.default||t);t&&t(...i)})}else t()};function $(){}let ee=(e,t,i,a,l)=>($[_]=t[_],l=new $,w(l,i),w(e,a),l.constructor=e,e[_]=l,e),te=e=>e;let ie,ae={fire(e,t){let i,a,l=this,s=l[p+e],o=0;if(t||(t={}),t.type=e,s)for(i=s.length;o<i;o++)(a=s[o]).f?(a.x=1,E(a.f,t,l),a.x=""):a.x||(s.splice(o--,1),i--);return(s=l[`on${e}`])&&E(s,t,l),l},on(e,t){let i=p+e;return(this[i]||(this[i]=[])).push({f:t}),this},off(e,t){let i,a=p+e,l=this,s=l[a];if(t){if(s)for(i of s)if(i.f==t){i.f="";break}}else delete l[a],delete l[`on${e}`];return l}},le={},se=w({get:e=>e?le[e]:le,set(e){w(le,e)}},ae),oe={},re=(e,t,i,a)=>{a=(a=(a=oe[e])&&a.a)?a.a:{},t.indexOf(p)>0&&P(a,i)},ne=(e,t)=>{I(oe,e)||(oe[e]=t,_e.fire("add",{vframe:t}))},de=(e,t,i)=>{for(t=e.c;t.length;)(i=t.shift()).r||e.invoke(i.n,i.a),delete t[i.k]},pe=e=>e.b||(e.b=g());function _e(e,t){let i=this,a=pe(e);i.id=a,i.root=e,i.pId=t,i.b={},i.d=1,i.c=[],ne(a,i)}w(_e,{all:()=>oe,byId:e=>oe[e],byNode:e=>oe[e.b]},ae),w(_e[_],{mountView(e,t){let i,a,l,s,o,r=this,{id:n,root:d,pId:p}=r;!r.e&&d&&(r.e=1,r.f=d.innerHTML),r.unmountView(),i=K(e||""),l=i.path,d&&l&&(r.path=e,s=i.params,re(p,e,s),r.g=l,w(s,t),a=r.d,Q(l,e=>{if(a==r.d){if(!e)return m.error(Error(`${n} cannot load:${l}`));o=et(e),l=new e(n,d,r,s,o),r.a=l,Ze(l),E(l.init,s,l),l.g(),l.tmpl||(r.e=0,l.h||l.endUpdate())}}))},unmountView(){let e=this,{a:t,id:i,root:a}=e;e.c=[],t&&(e.unmountZone(),e.a=0,t.d>0&&(t.d=0,delete ge[i],delete xe[i],t.fire("destroy"),t.off("destroy"),Ue(t,1),Ze(t,1),t.owner=t.root=null),t.d--,a&&e.e&&(a.innerHTML=e.f)),e.d++},mountVframe(e,t,i){let a,l=this,s=l.id,o=l.b,r=pe(e);return(a=oe[r])||(I(o,r)||(l.h=0),o[r]=r,a=new _e(e,s)),a.mountView(t,i),a},mountZone(e){let t,i=this,a=(e=e||i.root).querySelectorAll("[mx-view]");for(t of a)t.a||(t.a=1,i.mountVframe(t,j(t,"mx-view")))},unmountVframe(e,t){let i,a;var l,s;e=e?this.b[t?e:e.b]:this.id,(i=oe[e])&&(i.unmountView(),a=i.pId,(s=oe[l=e])&&(delete oe[l],s.root.a=0,_e.fire("remove",{vframe:s}),s.id=s.root=s.pId=s.b=null),(i=oe[a])&&I(i.b,e)&&(delete i.b[e],i.h=0))},unmountZone(e){let t,i,a,l=this;for(t in l.b)(a=e?(i=oe[t])&&v(i.root,e):1)&&l.unmountVframe(t,1)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=oe[t.pId];return t},children(e){return(e=this).h||(e.h=k(e.b))},invoke(e,t){let i,a,l,s,o,r=this.c;return(a=this.a)&&a.h?i=(l=a[e])&&E(l,t,a):((s=r[o=p+e])&&(s.r=t===s.a),s={n:e,a:t,k:o},r.push(s),r[o]=s),i}});let ce=new C(30,10),ue=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,he={},fe={},ge={},xe={},be=0,me=(e,i)=>{let a,l,s,o,r,d,p=[],_=e,c=j(e,`mx-${i}`),u=[],h="#",f=0;if(c&&((r=ce.get(c))||(r={v:(r=c.match(ue)||t)[1],n:r[2],i:r[3]},ce.set(c,r)),r=w({},r,{r:c})),r&&!r.v||fe[i]){if((s=xe[l=_.c])&&1==s[_.d]&&(d=1,h=l),!d){for(u.push(_);_!=n&&(_=_.parentNode);){if(oe[l=_.b]||(s=xe[l=_.c])&&1==s[_.d]){h=l;break}u.push(_)}for(c of u)(l=xe[h])||(l=xe[h]={}),l[s=c.d||(c.d=++be)]=1,c.c=h}_=e.b,oe[_]&&(f=h=_);do{if((a=oe[h])&&(d=a.a)){if(o=(s=d.i)[i])for(_=o.length;_--;)s={r:l=o[_],v:h,n:l},l?!f&&Y(e,l)&&p.push(s):f&&p.unshift(s);if(d.tmpl&&!f)break;f=0}}while(a&&(h=a.pId))}return r&&p.push(r),p},ye=e=>{let t,i,a,l,s,o,r,d,{target:_,type:c}=e,u=[];for(;_!=n;){if((t=me(_,c)).length){u=[];for(let{v:i,r:n,n:u,i:h}of t){if(r!=i){if(r&&e.isPropagationStopped())break;r=i}(l=(a=oe[i])&&a.a)?l.h&&(o=l[s=u+p+c])&&(e.eventTarget=_,d=h?J(h,l.a):{},e.params=d,E(o,e,l)):e.stopPropagation()}}if((i=ge[o=_.c])&&(i=i[_.d])&&i[c]||e.isPropagationStopped()){u.length&&u.push(o);break}r=_.b,oe[r]&&u.push(r),u.push(_),_=_.parentNode||n}if(o=u.length)for(i="#";o--;)(l=u[o]).nodeType?((t=ge[i])||(t=ge[i]={}),(d=t[r=l.d||(l.d=++be)])||(d=t[r]={}),d[c]=1):i=l},ve=(e,t,i)=>{let a=0|he[e],l=i?-1:1;a&&i!==a||(i?R:D)(n,e,ye),he[e]=a+l,t&&(fe[e]=(0|fe[e])+l)};let we={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},ke=/[&<>"'\`]/g,Ae=e=>""+(null==e?"":e),Se=e=>`&${we[e]};`,Me=e=>Ae(e).replace(ke,Se),ze={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},je=e=>ze[e],Te=/[!')(*]/g,Ee=e=>s(Ae(e)).replace(Te,je),Ie=/[\\'"]/g,Pe=e=>Ae(e).replace(Ie,"\\$&"),Oe=(e,t,i,a)=>{for(a=e[p];--a;)if(e[i=p+a]===t)return i;return e[i=p+e[p]++]=t,i},Ce=(e,t)=>{let i,a,l=e.j,s=e.k,o=e.owner,r=e.id,n={a:[]},d=e.e,p=e.a,_=i=>{t.a<t.length?Ce(e,t):(n=t.slice(),t.a=t.length=0,i&&e.fire("domready"),E(n))};if(t.a=t.length,e.k=0,e.j={},s&&e.d>0&&(i=e.tmpl)){for(a of(e.fire("dompatch"),delete ge[r],delete xe[r],a=i(d,Le,r,p,Ae,Ee,Oe,Pe,f,w),Re(e.root,e.l,a,n,o,l),e.l=a,n.a))a.g();i&&e.endUpdate(),_(1)}else _()},Le=(e,i,a,l)=>{let s;if(e){i=i||{};let o,r,n,d,p,_,c="",u={},h="<"+e,f="",g=[];if(a)for(d of a)n=d.a,d.b==Xe&&(n=n?Me(n):" "),f+=n,_&&d.b==Xe&&_.b==Xe?_.a+=d.a:(d.d&&(u[d.d]=(u[d.d]||0)+1),d.e&&(o=1),_=d,g.push(d));for(r in i)!1!==(n=i[r])&&null!=n?(!0===n&&(i[r]=n=""),"id"==r?c=n:"mx-view"==r&&n&&!c?c=K(n).path:"mxs"==r?(c||(c=n),g=t):"mxv"==r&&(o=1),"value"==r&&"textarea"==e&&(f=n),I(Ye,r)||(h+=` ${r}="${Me(n)}"`)):delete i[r];p=h,s={a:h+=l?"/>":`>${f}</${e}>`,c:f,d:c,b:e,e:o||I(Ne,e),f:p,g:i,h:g,i:u,j:l}}else s={b:i?p:Xe,a:a+""};return s},Ne={input:{value:1,checked:1},textarea:{value:1},option:{selected:1}},Ye={mxs:1,mxv:1};let Xe=e;let Ve="http://www.w3.org/",Be={svg:`${Ve}2000/svg`,math:`${Ve}1998/Math/MathML`},Fe=(e,t,i,a,l)=>{let s,o,r=Ne[t.b],n=i.g,d=t.g;if(l){if(t)for(s in d)I(r,s)||I(n,s)||(a.b=1,e.removeAttribute(s));for(s in n)I(r,s)||I(Ye,s)||(o=n[s],t&&d[s]===o||(a.b=1,e.setAttribute(s,o)))}for(s in r)o=I(n,s)?"value"!=s||n[s]:"value"==s&&"",e[s]!=o&&(a.b=1,e[s]=o)},De=(e,t,i)=>{let l,s=e.b;return s==Xe?l=a.createTextNode(e.a):(l=a.createElementNS(Be[s]||t.namespaceURI,s),Fe(l,0,e,i,1),l.innerHTML=e.c),l},Re=(e,t,i,a,l,s)=>{if(t){if(t.e||t.c!=i.c){let o,r,n,d,p,_=t.h,c=i.h,u=_.length,h=u,f=c.length,g=i.i,x=e.childNodes,b={},m=0,y=0;for(o=u;o--;)(p=(n=_[o]).d)&&(p=b[p]||(b[p]=[])).push(x[o]);for(o=0;o<f;o++)if(d=c[o],n=_[m++],(p=b[d.d])&&(p=p.pop())){if(p!=x[o]){for(r=h;r-- >o;)if(x[r+y]==p){n=_[r],_.splice(r,1),y++,h--,m--;break}e.insertBefore(p,x[o])}g[n.d]&&g[n.d]--,He(p,e,n,d,a,l,s)}else n?b[n.d]&&g[n.d]?(u++,a.b=1,e.insertBefore(De(d,e,a),x[o]),m--):He(x[o],e,n,d,a,l,s):(e.appendChild(De(d,e,a)),a.b=1);for(o=f;o<u;o++)1==(r=x[f]).nodeType&&l.unmountZone(r),e.removeChild(r)}}else a.b=1,e.innerHTML=i.c},He=(e,t,i,a,l,s,o)=>{let r=i.g,n=a.g,d=i.b;if(i.e||i.a!=a.a)if(d==a.b){if(d==Xe)l.b=1,e.nodeValue=a.a;else if(d==p)l.b=1,t.innerHTML=a.a;else if(!r.mxs||r.mxs!=n.mxs){let t,p,_,c,u,h,f,g=n["mx-view"],x=a.c,b=i.f!=a.f,m=I(Ne,d)||b,y=oe[e.b],v=g&&K(g);if(m&&Fe(e,i,a,l,b),g&&y&&y.g==v.path&&(c=y.a)){if(h=x!=i.c,f=g!=y.path,_=r.mxv,!h&&!f&&_)for(_ of u=_.split(","))if("#"==_||I(o,_)){f=1;break}(f||h||m)&&((_=c.h&&c.m)?(u=v.params,re(y.pId,g,u),y.path=g,E(_,u,c)&&l.a.push(c),t=!c.tmpl):(p=1,t=1))}else t=1,p=y;p&&(l.b=1,y.unmountVframe(0,1)),t&&!a.j&&Re(e,i,a,l,s,o)}}else i.b==p?t.innerHTML=a.a:(s.unmountZone(e),t.replaceChild(De(a,t,l),e)),l.b=1},qe=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,We=(e,t,i)=>(e.a?i=e:((i=function(e){E(i.a,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i),Ue=(e,t)=>{let i,a,l=e.c;for(i in l)a=l[i],(t||a.a)&&Ge(l,i,1)},Ge=(e,i,a,l)=>{let s,o,r=e[i];return r&&r!=l&&((s=(o=r.b).destroy)&&a&&E(s,t,o),delete e[i]),o},Ke=(e,t,i,a,l)=>{a=e[t],e[t]=e[i]=function(...e){(l=this).d>0&&(l.d++,l.fire("rendercall"),Ue(l),E(a,e,l))}},Ze=(e,t)=>{let i,{n:a,i:l,o:s,id:o}=e;for(i in a)ve(i,l[i],t);for(i of(a=t?R:D,s))a(i.a,i.b,i.c,o,i.d,e)},Je={win:i,doc:a},Qe=(e,t,i)=>{let a,l,s,o,r={};for(l of e)for(a in l)s=l[a],o=r[a],"ctor"!=a?(qe.test(a)&&(o?s=We(o,s):s.b=1),r[a]=s):i.push(s);for(a in r)I(t,a)||(t[a]=r[a])};function $e(...e){let t=this.a||(this.a=[]);return Qe(e,this[_],t),this}let et=e=>{if(!e[p]){e[p]=[];let t,i,a,l,s,o,r,n,d,c,u,h=e[_],f={},g=[],x={};for(r in(i=h.mixins)&&Qe(i,h,e[p]),h)if(t=h[r],i=r.match(qe)){if([,o,a,l,u]=i,c={},u)for(n of u=u.split(","))c[n]=!0;for(n of l=l.split(",")){if(s=Je[a],d=1,o){if(s){g.push({c:t,a:s,b:n,d:c});continue}d=2,(s=x[n])||(s=x[n]=[]),s[a]||(s[a]=1,s.push(a))}f[n]=f[n]|d,(s=h[n=a+p+n])?s.b&&(t.b?h[n]=We(t,s):I(h,r)&&(h[n]=t)):h[n]=t}}Ke(h,"render","g"),h.n=f,h.o=g,h.i=x,h.m=h.assign}return e[p]};function tt(e,t,i,a,l){(l=this).root=t,l.owner=i,l.id=e,l.c={},l.d=1,l.k=1,l.e={id:e},l.a={[p]:1},l.f=[],l.j={},(e=tt.a)&&E(e,a,l)}function it(){this.id=g("b"),this.a={}}w(tt,{merge:$e,extend:function e(t,i){let a=this,l=(t=t||{}).ctor,s=[];function o(e,t,i,l,r,n,d,p){a.call(d=this,e,t,i,l,r),(n=o.a)&&E(n,l,d),(p=s.concat(r)).length&&E(p,l,d)}return l&&s.push(l),o.merge=$e,o.extend=e,ee(o,a,t,i)}}),w(tt[_],ae,{init:o,render:o,beginUpdate(e,t){(t=this).d>0&&t.h&&t.owner.unmountZone(e)},endUpdate(e,t,i,a){(t=this).d>0&&(a=t.h,t.h=1,(i=t.owner).mountZone(e),a||l(t.wrapAsync(de),0,i))},wrapAsync(e,t){let i=this,a=i.d;return(...l)=>{if(a>0&&a==i.d)return e.apply(t||i,l)}},capture(e,t,i,a){return a=this.c,t?(Ge(a,e,1,t),a[e]={b:t,a:i}):t=(a=a[e])&&a.b,t},release(e,t){return Ge(this.c,e,t)},get(e,t){return t=this.e,e&&(t=t[e]),t},set(e,t){let i=this;return i.k=((e,t,i,a)=>{let l,s,o,r=0;for(o in e)l=e[o],s=t[o],y(l)&&s===l||I(a,o)||(i[o]=1,r=1),t[o]=l;return r})(e,i.e,i.j,t)||i.k,i},digest(e,t,i){let a=this.set(e,t),l=a.f;i&&l.push(i),l.a||Ce(a,l)},snapshot(){return this.p=r(this.e),this},altered(){let e=this;if(e.p)return e.p!=r(e.e)},translate(e){return P(this.e,e)},parse(e){return J(e,this.a)}}),w(it[_],{get(e,t){let i,a=this.a;if(e){let t,i=f(e)?e.slice():(e+"").split(".");for(;(t=i.shift())&&a;)a=a[t];t&&(a=void 0)}return void 0!==t&&(i=u(t))!=u(a)&&(a=t),a},set(e,t){h(e)||(e={[e]:t}),w(this.a,e)}});let at=(e,t,i)=>a=>{(i=e[t])&&(delete e[t],E(i,a,i.a))},lt=(e,t,i,a,l,s)=>{let o=[],r=null,n=0;return function(p,_){let c;n++;let u,h=this,f=h.b,g=f.a;if(o[p+1]=h,_?(r=_,c=1):s.has(g)||(g&&s.set(g,h),f.b=d(),(u=f.c)&&E(u,h,h),c=1),!i.a){let t=n==a;t&&(i.b=0,2==l&&(o[0]=r,E(e,o,i))),1==l&&E(e,[_||null,h,t,p],i)}c&&t.fire("end",{bag:h,error:_})}},st=(e,t,i,a,l)=>{if(e.a)return e;if(e.b)return e.enqueue(st.bind(e,e,t,i,a,l));e.b=1,f(t)||(t=[t]);let s=e.constructor,o=0,r=s.d,n=lt(i,s,e,t.length,a,s.c);for(let e of t)if(e){let t,[i,a]=s.get(e,l),d=i.b.a,p=n.bind(i,o++);d&&r[d]?r[d].push(p):a?(d&&((t=[p]).a=i,r[d]=t,p=at(r,d)),s.e(i,p)):p()}return e};function ot(){let e=this;e.id=g("s"),e.f=[]}w(ot[_],{all(e,t){return st(this,e,t,2)},save(e,t){return st(this,e,t,2,1)},one(e,t){return st(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,i=this;i.b||i.a||(i.b=1,l(()=>{i.b=0,i.a||(t=i.f.shift())&&E(t,i.g=e)},0))},destroy(e){(e=this).a=1,e.f=0}});let rt=(e,t,i)=>[r(t),r(e)].join(p),nt=w({add(e){let t,i=this.h;for(t of(f(e)||(e=[e]),e))if(t){let{name:e,cache:a}=t;t.cache=0|a,i[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,a=new it;a.set(t),a.b={c:t.after,a:i&&rt(t,e)},h(e)&&a.set(e);let l=t.before;return l&&E(l,a,a),this.fire("begin",{bag:a}),a},meta(e){return this.h[e.name||e]||e},get(e,t){let i,a,l=this;return t||(i=l.cached(e)),i||(i=l.create(e),a=1),[i,a]},cached(e){let t,i,a=this,l=a.c,s=a.meta(e),o=0|e.cache||s.cache;if(o&&(i=rt(s,e)),i){let e=a.d[i];e?t=e.a:(t=l.get(i))&&d()-t.b.b>o&&(l.del(i),t=0)}return t}},ae);ot.extend=((e,t,i)=>{function a(){ot.call(this)}return a.e=e,a.c=new C(t,i),a.d={},a.h={},ee(a,ot,null,nt)}),w(o[_],ae),o.extend=function e(t,i){let a=this,l=t&&t.ctor;function s(...e){a.apply(this,e),l&&l.apply(this,e)}return s.extend=e,ee(s,a,t,i)};let dt={config:(e,t)=>(t=m,e&&(t=h(e)?w(t,e):t[e]),t),boot(e){w(m,e),Q(m.exts,()=>{((e,t)=>(ie||(e=m.rootId,(t=x(e))||(t=n),ie=new _e(t)),ie))().mountView(m.defaultView)})},toMap:(e,t)=>{let i,a={};if(e)for(i of e)a[t&&i?i[t]:i]=t?i:1+(0|a[i]);return a},toTry:E,toUrl:(e,t,i)=>{let a,l,o,r=[];for(l in t)a=t[l]+"",(!i||a||I(i,l))&&(a=s(a),r.push(o=l+"="+a));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+r.join("&")),e},parseUrl:K,mix:w,has:I,keys:k,inside:v,applyStyle:T,guid:g,Cache:C,use:Q,dispatch:(e,t,i)=>{let l=a.createEvent("Events");l.initEvent(t,!0,!0);for(let e in i)l[e]=i[e];e.dispatchEvent(l)},match:Y,type:u,View:tt,Vframe:_e,Service:ot,State:se,guard:te,node:x};return dt.default=dt,dt});let Designer={init(e){let t=document.getElementById("boot").src.replace(/\/[^\/]+$/,"/");seajs.config({paths:{designer:t+"designer",i18n:t+"i18n",gallery:t+"gallery",util:t+"util",panels:t+"panels",elements:t+"elements"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("p_",'body,figure,h5,input,p,textarea,ul{margin:0;padding:0}ul{list-style-type:none;list-style-image:none}a{background-color:transparent}a:active,a:hover{outline-width:0}a:focus{outline:1px dotted}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.5}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h5{font-size:14px}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;cursor:pointer}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}a:focus,button:focus,input:focus,textarea:focus{outline:none;resize:none}a{color:#fa742b;text-decoration:none}a:focus,a:hover{color:#bd361b}a:active,a:focus,a:hover,a:visited{outline:0;text-decoration:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:pa;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.p_{font-family:pa;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pa{margin-right:10px}.pb{height:100%}.pc{text-align:center}.pd{float:left}.pe{float:right}html .pf{display:inline-block}.pg{position:absolute}.ph{position:relative}html .pi{display:none}.pj:after,.pj:before{content:" ";display:table}.pj:after{clear:both}.pk{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pl::-webkit-scrollbar,.pl::-webkit-scrollbar-corner{height:8px;width:8px;background:#fafafa}.pl::-webkit-scrollbar-thumb{background:silver}.pl::-webkit-scrollbar-thumb:hover{background:#949494}.pm{word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.pm,.pn{white-space:nowrap}.pn{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pn:focus,.pn:hover{background-color:#a0a0a0;color:#333}.po{background-color:#fa742b;color:#fff}.po:focus,.po:hover{background-color:#bd361b;color:#fff}.pn[disabled]{background-color:#fbfbfb}.pn[disabled]:hover{border-color:#e6e6e6}.pp{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143;background:#fff}.pq{padding:18px 25px}.pr{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6;background:#fff}.ps{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.ps:after,.ps:before{content:""}.ps:after,.ps:before,.pt{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:p_ 1s ease-in-out infinite both;animation:p_ 1s ease-in-out infinite both}.ps:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.pt{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}::-webkit-input-placeholder{color:#999}:-ms-input-placeholder{color:#999}::-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(243,123,99,.6)}::selection{background-color:rgba(243,123,99,.6)}.pu,.pv{caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none;transition:border-color .25s}.pu:hover,.pv:hover{border-color:#ccc}.pu:focus,.pv:focus,.pw,.pw:hover{border-color:#fa742b!important}.pv{height:auto}.pu[disabled],.pv[disabled]{background-color:#fbfbfb}.pu[disabled]:hover,.pv[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}@font-face{font-family:pb;src:url(//at.alicdn.com/t/font_890516_hbs4agp4pw.eot);src:url(//at.alicdn.com/t/font_890516_hbs4agp4pw.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_hbs4agp4pw.woff) format("woff"),url(//at.alicdn.com/t/font_890516_hbs4agp4pw.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_hbs4agp4pw.svg#iconfont) format("svg");font-display:swap}.px{font-family:pb;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app,body,html{height:100%;overflow:hidden}body{min-width:900px}.py{font-size:12px}.pz{margin-right:2px}.pA{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pB{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.pC{margin-left:100px}.pD{margin-right:50px}.pE{display:flex;align-items:center}.pF{position:-webkit-sticky;position:sticky;top:0}');let a="zh-cn";try{let e=window.localStorage;e&&(a=e.getItem("l.report.lang")||a)}catch(e){}t.config(e),t.config({lang:a});let l=i.default;t.View.merge({ctor(){this.set({i18n:l})},__dj(e,t){t=t||150;let i,a=Date.now();return(...l)=>{let s=Date.now();clearTimeout(i),s-a>t?(a=s,e.apply(this,l)):i=setTimeout(()=>{e.apply(this,l)},t-(s-a))}}}),document.title=l("_k"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",error(e){setTimeout(()=>{throw e},0)}})})}};define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../mx-dragdrop/index"),s=e("../mx-monitor/index");a.default.applyStyle("pg",'.paA{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.paA:hover{border-color:#ccc}.paB,.paC{background:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.paC{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.paD{padding:3px 4px}.paC:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.paE{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.paF-bottom{top:100%;margin-top:4px}.paF-top{bottom:100%;margin-bottom:4px}.paG{width:176px}.paH{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.paI:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.paJ{margin:5px 0;height:150px}.paK{position:relative;float:left;width:148px;height:148px}.paL{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.paM{width:18px;height:148px;position:relative;float:left;margin-left:10px}.paN{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.paO{height:25px}.paP{width:80px}.paQ,.paP{margin-right:5px;vertical-align:middle}.paQ{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.paR{position:absolute;right:5px;top:4px;font-size:12px;opacity:.2}.paR:hover{opacity:.5}.paB{width:174px;height:12px;margin-bottom:5px}.paS{height:100%}.paT{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.paU{cursor:not-allowed;background-color:#fbfbfb}.paU:hover{border-color:#e6e6e6}.paU:hover .paR{opacity:.1}.paU .paC{opacity:.4}.paU .paR{opacity:.1}');let o=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],r=(e,t,i)=>{let a,l,s,o,r;e=e%360/60,a=l=s=i-(r=i*t);let n=255*(a+=[r,o=r*(1-Math.abs(e%2-1)),0,0,o,r][e=~~e]),d=255*(l+=[o,r,r,o,0,0][e]),p=255*(s+=[0,0,o,r,r,o][e]);return{r:n,g:d,b:p,hex:"#"+(16777216|p|d<<8|n<<16).toString(16).slice(1)}};t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x,b,m,y,v=[],w=e.disabled,k=e.id,A=e.text,S=e.textWidth,M=e.color,z=e.clear,j=e.i18n,T=e.placement,E=e.align,I=e.renderUI,P=e.shortcuts,O=e.alpha,C=e.current;if(c=[],A&&(f=[t(0,0,A)],h="",S&&(h+="width:"+S+"px"),(_={class:"paD pk"}).style=h,_["mx-click"]=i+"\x1e__br()",u=[t("div",_,f)],c.push(...u)),u=[t(0,0,"picker")],h="",M&&(h+="background:"+M+";"),A||(h+="width:100%"),(_={class:"paC pk","mx-click":i+"\x1e__br()"}).style=h,c.push(t("div",_,u)),z&&M&&(f=[t(0,0,"\ue67f")],u=[t("i",{class:"p_ paR","mx-click":i+"\x1e__bs()",title:j("_aa")},f)],c.push(...u)),u=[],I){f=[],g=[];for(let e=0,a=P,l=a.length;e<l;e++){let l=a[e];x=[t("li",{class:"paH",id:"sc_"+l+"_"+k,style:"background:#"+l,"mx-click":i+"\x1e__bo({color:'#"+r(l)+"'})"})],g.push(...x)}f.push(t("ul",{class:"paG pj",id:"scs_"+k},g)),y=[t("stop",{mxs:"pm:_",offset:"0%","stop-color":"#000000","stop-opacity":"1"}),t("stop",{mxs:"pm:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})],m=[t("lineargradient",{id:"gb_"+k,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},y)],y=[t("stop",{mxs:"pm:b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),t("stop",{mxs:"pm:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})],m.push(t("lineargradient",{id:"gw_"+k,x1:"0%",y1:"100%",x2:"100%",y2:"100%"},y)),b=[t("defs",0,m),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+k+")"}),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+k+")"})],x=[t("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},b),t("div",{class:"paL",id:"ci_"+k})],g=[t("div",{class:"paK",id:"cz_"+k,"mx-mousedown":i+"\x1e__bk()"},x)],y=[t("stop",{mxs:"pm:c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),t("stop",{mxs:"pm:d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),t("stop",{mxs:"pm:e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),t("stop",{mxs:"pm:f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),t("stop",{mxs:"pm:g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),t("stop",{mxs:"pm:h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),t("stop",{mxs:"pm:i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),t("stop",{mxs:"pm:j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),t("stop",{mxs:"pm:k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})],m=[t("lineargradient",{id:"ghsv_"+k,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},y)],b=[t("defs",0,m),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+k+")"})],x=[t("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},b),t("div",{class:"paN",id:"si_"+k})],g.push(t("div",{class:"paM","mx-mousedown":i+"\x1e__bl()"},x)),f.push(t("div",{class:"paJ"},g)),O&&(b=[t("div",{class:"paT",id:"ai_"+k})],x=[t("div",{class:"paS ph",id:"at_"+k,"mx-mousedown":i+"\x1e__bm()"},b)],g=[t("div",{class:"paB ph"},x)],f.push(...g)),g=[t("span",{class:"paQ",id:"bc_"+k}),t("input",{class:"pu paP",readonly:!0,id:"v_"+k,value:C})],x=[t(0,0,"\u786e\u5b9a")],g.push(t("button",{mxs:"pm:l",class:"pn po",type:"button","mx-click":i+"\x1e__bn();"},x)),f.push(t("div",{class:"paO"},g)),u.push(...f)}return c.push(t("div",{id:"bd_"+k,class:"paE paF-"+T,style:E+":-1px"},u)),p="paA",w&&(p+=" paU"),(_={}).class=p,_["mx-contextmenu"]=i+"\x1e__B()",_.id="root_"+k,v.push(t("div",_,c)),t(i,0,v)},mixins:[l.default],init(e){this.set({shortcuts:o}),s.default.__ba(),this.on("destroy",()=>{s.default.__at(this),s.default.__bb()}),this.assign(e)},assign(e){return this.__a_=e.color,this.__bc=e.alpha+""=="true",this.__bd={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"}),!0},render(){this.digest({alpha:this.__bc,color:this.__a_,current:this.__a_})},__bg(e,t){let i=this,l=i.__bd;l.h=e.h,l.s=e.s,l.v=e.v;let s=r(e.h,e.s,e.v).hex,o=a.default.node("cz_"+i.id),n=o.clientWidth,d=r(e.h,1,1);if(o.style.background=d.hex,i.__be=s,i.__bf(),!t){let e=a.node("scs_"+i.id).querySelector('li[class$="paI"]');e&&e.classList.remove("paI");let t=a.node("si_"+i.id),s=t.clientHeight/2,o=Math.round(l.h*n/360-s),r=a.node("ci_"+i.id),d=r.clientWidth/2;t.style.top=o+"px",o=Math.round((1-l.v)*n-d);let p=Math.round(l.s*n-d);r.style.left=p+"px",r.style.top=o+"px"}let p=a.node("sc_"+s.substr(1,6)+"_"+i.id);p&&p.classList.add("paI")},__bj(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let a=parseInt(e.substr(3,2),16);isNaN(a)&&(a=255);let l=parseInt(e.substr(5,2),16);isNaN(l)&&(l=255);let s=((e,t,i)=>{let a,l,s,o;return e/=255,t/=255,i/=255,{h:a=(a=0==(o=(s=Math.max(e,t,i))-Math.min(e,t,i))?null:s==e?(t-i)/o+(t<i?6:0):s==t?(i-e)/o+2:(e-t)/o+4)%6*60,s:l=0===o?0:o/s,v:s}})(i,a,l),o=parseInt(e.substr(7,2),16);isNaN(o)&&(o=255),t.__bh=("0"+o.toString(16)).slice(-2),t.__bg(s),t.__bc&&t.__bi(o)},__bi(e){let t=a.node("ai_"+this.id);e/=255,e*=a.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},__bf(){let e=this,t=a.node("bc_"+e.id),i=e.__be;e.__bc&&(a.node("at_"+e.id).style.background="linear-gradient(to right, "+i+"00 0%,"+i+" 100%)",i+=e.__bh),t.style.background=i,a.node("v_"+e.id).value=i},"__B<contextmenu>"(e){e.preventDefault()},"__bk<mousedown>"(e){let t=this,i=a.node("cz_"+t.id).clientWidth,l=a.node("ci_"+t.id).clientWidth/2,s=e.eventTarget.getBoundingClientRect(),o=e.pageX-s.left-window.pageXOffset,r=e.pageY-s.top-window.pageYOffset,n=o/i,d=(i-r)/i;t.__bg({h:t.__bd.h,s:n,v:d});let p=a.node("ci_"+t.id),_=getComputedStyle(p),c=_.left,u=_.top,h=parseInt(c,10),f=parseInt(u,10),g=e;t.__x(e,e=>{let a=e.pageY-g.pageY,s=e.pageX-g.pageX;(a+=f)<=-l?a=-l:a>=i-l&&(a=i-l),(s+=h)<=-l?s=-l:s>=i-l&&(s=i-l),p.style.left=s+"px",p.style.top=a+"px";let o=(s+l)/i,r=(i-(a+l))/i;t.__bg({h:t.__bd.h,s:o,v:r})})},"__bl<mousedown>"(e){let t=this,i=e.eventTarget,l=a.node("si_"+t.id),s=a.node("cz_"+t.id).clientWidth,o=l.clientHeight/2,r=i.getBoundingClientRect(),n=(e.pageY-r.top-window.scrollY)/s*360;t.__bg({h:n,s:t.__bd.s,v:t.__bd.v});let d=parseInt(getComputedStyle(l).top,10);t.__x(e,i=>{let a=i.pageY-e.pageY;(a+=d)<=-o?a=-o:a>=s-o&&(a=s-o),l.style.top=a+"px";let r=(a+o)/s*360;t.__bg({h:r,s:t.__bd.s,v:t.__bd.v},!0)})},"__bm<mousedown>"(e){let t=e.eventTarget,i=this,l=a.node("ai_"+i.id),s=a.node("at_"+i.id).clientWidth,o=l.clientWidth/2,r=t.getBoundingClientRect(),n=(e.pageX-r.left)/s*255|0;i.__bh=("0"+n.toString(16)).slice(-2),i.__bi(n),i.__bf();let d=getComputedStyle(l),p=parseInt(d.left,10);i.__x(e,t=>{let a=t.pageX-e.pageX;(a+=p)<=-o?a=-o:a>=s-o&&(a=s-o),l.style.left=a+"px";let r=Math.round((a+o)/s*255);i.__bh=("0"+r.toString(16)).slice(-2),i.__bf()})},"__bn<click>"(){let e=this;e.__z();let t=a.node("v_"+e.id).value;t!=e.__a_&&(e.digest({color:t,current:t}),a.default.dispatch(e.root,"input",{color:e.__a_=t}))},"__bo<click>"(e){this.__bj(e.params.color),e.eventTarget.classList.add("paI")},__bp(e){return a.default.inside(e,this.root)},__y(){let e=a.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",s.default.__au(this),a.node("root_"+this.id).classList.add("pw"),this.__bq||(this.digest({renderUI:!0},null,()=>{this.__bj(this.__a_)}),this.__bq=1))},__z(){let e=a.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(a.node("root_"+this.id).classList.remove("pw"),e.style.display="none",s.default.__at(this))},"__br<click>"(){if(this.get("disabled"))return;let e=a.node("bd_"+this.id);"none"==getComputedStyle(e).display?this.__y():this.__z()},"__bs<click>"(){if(this.get("disabled"))return;let e=this;if(e.__bq){let t=a.node("v_"+e.id).value;e.__z(),e.digest({color:"",current:t})}a.default.dispatch(e.root,"input",{color:e.__a_=""})}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../../i18n/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c=[],u=e.title,h=e.body,f=e.i18n;return _=[t(0,0,u)],p=[t("h5",0,_)],c.push(t("div",{class:"pp"},p)),p=[t(0,0,h)],c.push(t("div",{class:"pq",style:"word-break:break-all;"},p)),_=[t(0,0,f("_ac"))],p=[t("button",{"mx-click":i+"\x1e__bn();",class:"pn po pe",type:"button"},_)],c.push(t("div",{class:"pr pj"},p)),t(i,0,c)},init(e){this.__bt=e.dialog,this.__bu=e.body,this.__bv=e.title||l.default("__ab"),this.__bw=e.enterCallback},render(){this.digest({body:this.__bu,title:this.__bv})},"__bn<click>"(){let e=this;e.__bt.close(),e.__bw&&a.default.toTry(e.__bw)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../../i18n/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c=[],u=e.title,h=e.body,f=e.i18n;return _=[t(0,0,u)],p=[t("h5",0,_)],c.push(t("div",{class:"pp"},p)),p=[t(0,0,h)],c.push(t("div",{class:"pq",style:"word-break:break-all;"},p)),_=[t(0,0,f("_ad"))],p=[t("button",{type:"button","mx-click":i+"\x1e__by()",class:"pn pe"},_)],_=[t(0,0,f("_ac"))],p.push(t("button",{type:"button","mx-click":i+"\x1e__bn()",class:"pn po pa pe"},_)),c.push(t("div",{class:"pr pj"},p)),t(i,0,c)},init(e){let t=this;t.__bt=e.dialog,t.__bu=e.body,t.__bv=e.title||l.default("__ab"),t.__bw=e.enterCallback,t.__bx=e.cancelCallback},render(){this.digest({body:this.__bu,title:this.__bv})},"__bn<click>"(){let e=this;e.__bt.close(),e.__bw&&a.default.toTry(e.__bw)},"__by<click>"(){let e=this;e.__bt.close(),e.__bx&&a.default.toTry(e.__bx)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");e("./alert"),e("./confirm"),a.default.applyStyle("ph",".paV{position:absolute}.paW{position:relative;background-color:#fff;border-radius:2px;border:1px solid #e6e6e6}.paX{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.paX:focus,.paX:hover{opacity:.5}.paY{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.paZ{-webkit-filter:blur(3px);filter:blur(3px)}.pb_{-webkit-animation:pc .3s;animation:pc .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.pba{position:absolute;right:10px;top:0;width:1px;height:0}.pbb{padding:80px 0}@-webkit-keyframes pc{0%{opacity:0}to{opacity:.2}}@keyframes pc{0%{opacity:0}to{opacity:.2}}.pbc{-webkit-animation:pd .2s;animation:pd .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd{0%{opacity:.2}to{opacity:0}}@keyframes pd{0%{opacity:.2}to{opacity:0}}.pbd{margin-bottom:50px;min-height:60px}.pbe{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.pbf{-webkit-animation:pe .3s;animation:pe .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.pbg{-webkit-animation:pf .2s;animation:pf .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let l=500,s=[];t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g=[],x=e.removeClass,b=e.zIndex,m=e.id,y=e.left,v=e.top,w=e.width,k=e.closable;return p="paY",x||(p+=" pb_"),(_={}).class=p,_.style="z-index:"+(b-1),_.id="mask_"+m,g.push(t("div",_)),u=[t("input",{id:"focus_"+m,class:"pba"})],h=[t(0,0,"\ue67f")],u.push(t("span",{class:"p_ paX "+(k?"":"pi"),"mx-click":i+"\x1e__bB()"},h)),f=[t("span",{class:"pt"})],h=[t("div",{mxs:"pp:_",class:"ps pbb"},f)],u.push(t("div",{class:"paW pbd",id:"cnt_"+m},h)),p="paV",x||(p+=" pbf"),(_={}).class=p,_.id="body_"+m,_.style="left:"+y+"px;top:"+v+"px;width:"+w+"px;",c=[t("div",_,u)],g.push(t("div",{class:"pbe",style:"z-index:"+b+";"},c)),t(i,0,g)},init(e){let t=this,i=a.default.node("app"),o=t.root;t.on("destroy",()=>{(e=>{for(let t,i=s.length-1;i>=0;i--)if((t=s[i]).id==e.id){s.splice(i,1);break}})(t),500==(l-=2)&&i.classList.remove("paZ"),a.default.dispatch(o,"close"),o.parentNode.removeChild(o)}),a.default.has(e,"closable")||(e.closable=!0),t.set(e),500==l&&i.classList.add("paZ"),l+=2,s.push(t)},render(){let e=this;e.digest({zIndex:l},null,()=>{let t=e.get();setTimeout(e.wrapAsync(()=>{e.root.style.display="block",a.default.node("focus_"+e.id).focus()}),30),e.owner.mountVframe(a.default.node("cnt_"+e.id),t.view,t),setTimeout(e.wrapAsync(()=>{e.digest({removeClass:!0})}),300)})},__bz(e){let t=a.default.node("cnt_"+this.id);a.default.Vframe.byNode(t).invoke("fire",["unload",e])},__bA(){let e,t=this.id;(e=a.default.node("body_"+t)).classList.add("pbg"),(e=a.default.node("mask_"+t)).classList.add("pbc")},"__bB<click>"(){a.default.dispatch(this.root,"dlg_close")},"$doc<keyup>"(e){if(27==e.keyCode){let e=s[s.length-1];e==this&&e.get("closable")&&a.default.dispatch(this.root,"dlg_close")}}},{__bD(e,t){let i=a.default.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+i+'" style="display:none" />');let l,s=a.default.node(i),o=e.owner.mountVframe(s,"gallery/mx-dialog/index",t);return s.addEventListener("dlg_close",()=>{if(!s.__bC&&!l){let e=()=>{s.__bC=1,o.invoke("__bA"),setTimeout(()=>{o.unmountVframe()},200)},t={p:0,prevent(){l=1},resolve(){t.p=1,l=0,e()},reject(){t.p=1,l=0}};o.invoke("__bz",[t]),l||t.p||e()}}),s},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,a,l){this.mxDialog("gallery/mx-dialog/"+(l||"confirm"),{body:e,cancelCallback:i,enterCallback:t,title:a,modal:!0,width:300,closable:!1,left:(window.innerWidth-300)/2,top:Math.max((window.innerHeight-220)/2,0)})},mxDialog(e,t){let i,l,s=this,o={view:e};return a.default.use(e,s.wrapAsync(r=>{let n="$dlg_"+e;s[n]||(s[n]=1,a.default.mix(o,r.dialogOptions),a.default.mix(o,t),o.width||(o.width=500),o.left||(o.left=(window.innerWidth-o.width)/2),o.top||(o.top=100),o.dialog={close(){i&&a.default.dispatch(i,"dlg_close")}},(i=s.__bD(s,o)).addEventListener("close",()=>{delete s[n],l&&l()}))})),{close(){i&&a.default.dispatch(i,"dlg_close")},whenClose(e){l=e}}}})}),define("gallery/mx-dragdrop/index",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=window.getComputedStyle,l=e=>{(e=window.getSelection)&&e().removeAllRanges()},s=e=>{e.preventDefault()},o=["mousemove","touchmove","pointermove"],r=["mouseup","touchend","pointercancel","touchcancel"],n=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];t.default={ctor(){let e=this;e.on("destroy",()=>{e.__bE()})},__bE(e){let t=this,i=t.__bF;if(i){let a;for(a of(delete t.__bF,o))document.removeEventListener(a,t.__bG);for(a of r)document.removeEventListener(a,t.__bH);for(a of n)document.removeEventListener(a,s);window.removeEventListener("blur",t.__bH);let l=i.__bI;i.__bJ&&l(e)}},__x(e,t,i){let a=this;if(a.__bE(),e){l(),a.__bF={__bI:i,__bJ:!!i};let e,d=!!t;for(e of(a.__bK=0,a.__bH=(e=>{a.__bK=1,a.__bE(e)}),a.__bG=(e=>{d&&t(e)}),o))document.addEventListener(e,a.__bG);for(e of r)document.addEventListener(e,a.__bH);for(e of n)document.addEventListener(e,s,{passive:!1});window.addEventListener("blur",a.__bH)}},__J(e,t){let i=null;if(document.elementFromPoint)for(!s.__bL&&a&&(s.__bL=!0,s.__bM=null!==document.elementFromPoint(-1,-1)),s.__bM&&(e+=window.pageXOffset,t+=window.pageYOffset),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},__bN:l}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../mx-monitor/index");a.default.applyStyle("pi",'.pbh{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.pbh:hover{border-color:#ccc}.pbi{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.pbj{cursor:not-allowed;background-color:#fbfbfb}.pbj:hover{border-color:#e6e6e6}.pbj .pbi{cursor:not-allowed}.pbk{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.pbl .pbk{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}.pbh[tabindex="0"]:focus,.pbl,.pbl:hover{border-color:#fa742b}.pbm{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.pbn{color:#999}.pbo{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pbl .pbo{display:block}.pbp{overflow:auto;max-height:196px;padding:2px 0}.pbq{padding:0 2px;margin:2px 0}.pbr{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.pbr:hover{color:#333;background-color:#f0f0f0}.pbs,.pbs:active,.pbs:focus,.pbs:hover{color:#fff;background-color:#fa742b}'),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x,b,m,y,v=[],w=e.disabled,k=e.id,A=e.selectedText,S=e.selected,M=e.emptyText,z=e.rList,j=e.list,T=e.textKey,E=e.valueKey;if(u=[],f=[t(0,0,A)],_="pbm",""!==S&&S!=M||(_+=" pbn"),(c={}).class=_,h=[t("span",c,f)],f=[t(0,0,"\ue692")],h.push(t("span",{mxs:"pq:_",class:"p_ pbk"},f)),u.push(t("div",{class:"pbi","mx-click":i+"\x1e__br()",title:A},h)),z){x=[];for(let e=0,l=j,s=l.length;e<s;e++){let s=l[e];b=[];let r=s,n=s;T&&E&&(g="",r=s[T],g+=" ",n=s[E]);let d=n+""==S+"";y=[t(0,0,r)],_="pbr pm",d&&(_+=" pbs"),(c={}).class=_,c["mx-click"]=i+"\x1e__bO({item:'"+o(a,s)+"'})",m=[t("span",c,y)],b.push(t("li",{title:r,active:(p=d)?p:null,class:"pbq"},m)),x.push(...b)}f=[t("ul",{class:"pbp",id:"list_"+k},x)],h=[t("div",{class:"pbo"},f)],u.push(...h)}return _="pbh",w&&(_+=" pbj"),(c={}).class=_,c.id="dd_"+k,v.push(t("div",c,u)),t(i,0,v)},init(e){l.default.__ba(),this.on("destroy",()=>{l.default.__at(this),l.default.__bb()}),this.assign(e)},assign(e){let t=e.selected,i=e.textKey||"",l=e.valueKey||"",s=e.emptyText||"",o=e.disabled+""=="true",r=e.list||[];r=r.slice();let n=a.default.toMap(r,l);if(s)if(i&&l){if(!n[""]){let e={};e[i]=s,e[l]="",r.unshift(e),n[""]=e}}else n[s]||(r.unshift(s),n[s]=s);t||!s||i||l||(t=s),t&&n[t]||(t=n[t]||r[0],i&&l&&(t=t[l]));let d=i&&l?n[t][i]:t;return this.set({selected:t,selectedText:d,list:r,textKey:i,valueKey:l,emptyText:s,disabled:o}),!0},render(){this.digest()},__bp(e){return a.default.inside(e,this.root)},__y(){let e=this,t=a.default.node("dd_"+e.id);if(!t.classList.contains("pbl")){t.classList.add("pbl");let i=()=>{let i=(t=a.default.node("list_"+e.id)).querySelector("li[active]");i&&i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded()};e.get("rList")?i():e.digest({rList:!0},null,i),l.default.__au(e)}},__z(){let e=this,t=a.default.node("dd_"+e.id);t.classList.contains("pbl")&&(t.classList.remove("pbl"),l.default.__at(e))},"__br<click>"(){let e=this,t=a.default.node("dd_"+e.id);t.classList.contains("pbl")?e.__z():t.classList.contains("pbj")||e.__y()},"__bO<click>"(e){let t=this;t.__z();let i=t.get("valueKey"),l=t.get("textKey"),s=t.get("selected"),o=e.params.item,r=o,n=o;l&&i&&(n=o[l],r=o[i]),s!==r&&(t.digest({selected:r,selectedText:n}),a.default.dispatch(t.root,"change",{item:o,value:i?o[i]:o,text:l?o[l]:o}))}})}),define("gallery/mx-font/align",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pj",".pbt{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbu{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbu:hover{background:#ccc}.pbv,.pbv:hover{background:#fa742b;color:#fff}.pbw,.pbw .pbu{cursor:not-allowed;opacity:.7}.pbw .pbu,.pbw .pbu:hover{background:#e9e9e9}.pbw .pbv,.pbw .pbv:hover{background:#fb955d}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h=[],f=e.disabled,g=e.i18n,x=e.value;return u=[t(0,0,"\ue687")],_={title:g("_ae")},p="pd pbu px","flex-start"==x.h&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({type:'h',v:'flex-start'})",c=[t("li",_,u)],u=[t(0,0,"\ue68a")],_={title:g("_af")},p="pd pbu px","center"==x.h&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({type:'h',v:'center'})",c.push(t("li",_,u)),u=[t(0,0,"\ue686")],_={title:g("_ag")},p="pd pbu px","flex-end"==x.h&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({type:'h',v:'flex-end'})",c.push(t("li",_,u)),u=[t(0,0,"\ue614")],_={title:g("_ah")},p="pd pbu px","flex-start"==x.v&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({type:'v',v:'flex-start'})",c.push(t("li",_,u)),u=[t(0,0,"\ue613")],_={title:g("_ai")},p="pd pbu px","center"==x.v&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({type:'v',v:'center'})",c.push(t("li",_,u)),u=[t(0,0,"\ue612")],_={title:g("_aj")},p="pd pbu px","flex-end"==x.v&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({type:'v',v:'flex-end'})",c.push(t("li",_,u)),p="pk pbt",f&&(p+=" pbw"),(_={}).class=p,h.push(t("ul",_,c)),t(i,0,h)},init(e){this.assign(e)},assign(e){return this.__bP=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"__as<click>"(e){let t=this;if(t.get("disabled"))return;let i=t.__bP,{type:l,v:s}=e.params;i[l]=s,t.__bP=i,t.digest({value:i}),a.default.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-font/style",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pj",".pbt{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbu{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbu:hover{background:#ccc}.pbv,.pbv:hover{background:#fa742b;color:#fff}.pbw,.pbw .pbu{cursor:not-allowed;opacity:.7}.pbw .pbu,.pbw .pbu:hover{background:#e9e9e9}.pbw .pbv,.pbw .pbv:hover{background:#fb955d}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h=[],f=e.disabled,g=e.i18n,x=e.value;return u=[t(0,0,"\ue749")],_={title:g("_ak")},p="pd pbu px",x.bold&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({key:'bold'})",c=[t("li",_,u)],u=[t(0,0,"\ue65f")],_={title:g("_al")},p="pd pbu px",x.italic&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({key:'italic'})",c.push(t("li",_,u)),u=[t(0,0,"\ue62e")],_={title:g("_am")},p="pd pbu px",x.underline&&(p+=" pbv"),_.class=p,_["mx-click"]=i+"\x1e__as({key:'underline'})",c.push(t("li",_,u)),p="pk pbt",f&&(p+=" pbw"),(_={}).class=p,h.push(t("ul",_,c)),t(i,0,h)},init(e){this.assign(e)},assign(e){return this.__bP=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"__as<click>"(e){let t=this;if(t.get("disabled"))return;let i=t.__bP,{key:l}=e.params;i[l]=!i[l],t.__bP=i,t.digest({value:i}),a.default.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../mx-monitor/index");a.default.applyStyle("pk",".pbx{z-index:400}.pby{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.pbz{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 2px;margin:0 2px}.pbA{color:#fff;background-color:#fa742b}.pbB{height:1px;background:#eee;margin:4px 0}.pbC{color:#ccc;cursor:not-allowed}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x=[],b=e.width,m=e.id,y=e.list,v=e.disabled,w=e.textKey;_=[];for(let e=0,l=y,s=l.length;e<s;e++){let s=l[e];c=[],s.spliter?(u=[t("li",{mxs:"pt:_",class:"pbB"})],c.push(...u)):(g=[t(0,0,s[w])],f={},h="pm pbz ",v[s.id]&&(h+=" pbC"),f.class=h,f["mx-mouseover"]=i+"\x1e__bX({d:"+(v[s.id]||0)+"})",f["mx-mouseout"]=i+"\x1e__bX({d:"+(v[s.id]||0)+"});",f["mx-click"]=i+"\x1e__bO({item:'"+o(a,s)+"',d:"+(v[s.id]||0)+"})",f.title=s[w],u=[t("li",f,g)],c.push(...u)),_.push(...c)}return p=[t("ul",{class:"pby pk"},_)],x.push(t("div",{style:"width:"+b+"px;position:absolute;left:-10000px;top:-10000px",class:"pbx",id:"cnt_"+m,"mx-contextmenu":i+"\x1e__B()"},p)),t(i,0,x)},init(e){let t=this;t.assign(e),l.default.__ba(),t.on("destroy",()=>{l.default.__at(t),l.default.__bb()})},assign(e){let t=this,i=e.width||140,a=e.valueKey||"id",l=e.textKey||"text";return t.__bQ=e.list,t.__bR=i,t.__bS=a,t.__bT=l,t.__bU=e.disabled||{},t.__bV=e.picked,!0},render(){let e=this;e.digest({disabled:e.__bU,list:e.__bQ,width:e.__bR,valueKey:e.__bS,textKey:e.__bT})},__bp(e){return a.default.inside(e,this.root)},__y(e){let t=this;if(!t.__bW){t.__bW=1;let i=a.node("cnt_"+t.id),s=i.clientWidth,o=i.clientHeight,r=e.pageX,n=e.pageY;r+s>window.innerWidth&&(r-=s)<0&&(r=0),n+o>window.innerHeight&&(n-=o)<0&&(n=0),i.style.left=r+"px",i.style.top=n+"px",l.default.__au(t)}},__z(){let e=this;if(e.__bW){e.__bW=!1,a.node("cnt_"+e.id).style.left="-10000px",l.default.__at(e)}},"__bX<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!a.default.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("pbA")},"__bO<click>"(e){if(e.params.d)return;this.__z();let t=this.__bV;t&&t(e.params.item)},"__B<contextmenu>"(e){e.preventDefault()}},{show(e,t,i){let l="ctx_"+e.id,s=a.node(l),o=s&&a.default.Vframe.byNode(s);o?(o.invoke("assign",[i]),o.invoke("render"),o.invoke("__y",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${l}"></div>`),(o=e.owner.mountVframe(a.node(l),"gallery/mx-menu/index",i)).invoke("__y",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=0,l=[],s=["mousedown","keyup","touchstart","pointerstart"],o=e=>{for(let t=l.length;t--;){let i=l[t];if(i.__bY)l.splice(t,1);else{let t=i.__bZ;"resize"!=e.type&&t.__bp(e.target)||t.__z()}}},r=e=>{let t=l[e.id];t&&(t.__bY=!0),delete l[e.id]};t.default={__au(e){r(e);let t={__bZ:e};l.push(t),l[e.id]=t},__at:r,__ba(){if(!a){for(let e of s)document.addEventListener(e,o);window.addEventListener("resize",o)}a++},__bb(){if(a>0&&!--a){for(let e of s)document.removeEventListener(e,o);window.removeEventListener("resize",o)}}}}),define("gallery/mx-number/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pl",'.pbD{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.pbE,.pbF{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.pbE:hover,.pbF:hover{background-color:#f0f0f0}.pbF{top:1px}.pbE{bottom:1px}.pbG:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.pbE:after{border-top:4px solid #ccc}.pbF:after{border-bottom:4px solid #ccc}.pbE.pbH,.pbF.pbH{cursor:not-allowed;border-color:transparent}.pbE.pbH:hover,.pbF.pbH:hover{background-color:transparent}'),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c=[],u=e.id,h=e.disabled;return c.push(t("input",{class:"pbD",id:"ipt_"+u,"mx-focusin":i+"\x1e__cr()","mx-focusout":i+"\x1e__ct()","mx-change":i+"\x1e__cq()","mx-keydown":i+"\x1e__cy()",disabled:!!h||null,autocomplete:"off","mx-input":i+"\x1e__cz()"})),p="pbF pbG pk",h&&(p+=" pbH"),(_={}).class=p,_["mx-click"]=i+"\x1e__cm({i:1})",_["mx-mousedown"]=i+"\x1e__cx({i:1})",_["mx-contextmenu"]=i+"\x1e__B()",c.push(t("span",_)),p="pbE pbG pk",h&&(p+=" pbH"),(_={}).class=p,_["mx-click"]=i+"\x1e__cm()",_["mx-mousedown"]=i+"\x1e__cx()",_["mx-contextmenu"]=i+"\x1e__B()",c.push(t("span",_)),t(i,0,c)},init(e){this.assign(e)},assign(e){let t=this,i=e.value;void 0===i&&(i=""),""!==i&&(i=+i);let l=t.__c_!==i,s=t.__ca;return t.__c_=i,t.__cb=+e.step||1,t.__cc=e.empty+""=="true",t.__cd=e.format+""=="true",t.__ca=t.root.hasAttribute("disabled"),t.__ce=a.default.has(e,"max")?+e.max:Number.MAX_VALUE,t.__cf=a.default.has(e,"min")?+e.min:-Number.MAX_VALUE,t.__cg=+e.ratio||10,t.__ch=e.fixed||0,l||s!=t.__ca},render(){let e=this;e.digest({disabled:e.__ca},null,()=>{e.__ci()})},__ci(){let e=this,t=e.__c_;""!==t&&(t=e.__cj(t),e.__cd&&(t=t.toFixed(e.__ch))),e.__ck=a.node("ipt_"+e.id),e.__ck.value=t},__cj(e){let t=this;if((e=+e)||0===e){let i=t.__ce,a=t.__cf;e>i?e=i:e<a&&(e=a),e=+e.toFixed(t.__ch)}return isNaN(e)?t.__cc?"":0:e},__cl(e,t){let i=this;if(""!==e||!i.__cc)return(e=i.__cj(e))!==i.__c_&&(t||(i.__ck.value=e),a.default.dispatch(i.root,"input",{value:i.__c_=e})),i.__c_;a.default.dispatch(i.root,"input",{value:i.__c_=e})},__cm(e,t){let i=this.__c_;""===i&&(i=0);let a=this.__cb,l=i;t&&(a*=this.__cg),e?l+=a:l-=a,this.__cl(l)},__cn(){let e=this.__ck;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},__cp(){let e=this;e.root.classList.add("pw"),a.default.has(e,"__co")||(e.__co=e.__c_)},"__cq<change>"(e){e.stopPropagation()},"__cr<focusin>"(){this.__cp()},"__ct<focusout>"(e){let t=this;t.__cs||(t.root.classList.remove("pw"),t.__ci(),t.__co!=t.__c_&&a.default.dispatch(t.root,"change",{value:t.__c_}),delete t.__co)},"__cm<click>"(e){let t=this;t.__ca||t.__cu||(t.__cm(e.params.i,e.shiftKey),t.__cn())},"__cx<mousedown>"(e){let t=this;if(!t.__ca){t.__cs=!0,t.__cp();let i=e.params.i;t.__cv=setTimeout(t.wrapAsync(()=>{t.__cw=setInterval(t.wrapAsync(()=>{t.__cu=!0,t.__cm(i),t.__cn()}),50)}),300)}},"__cy<keydown>"(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();let t=this;if(!t.__ca){let i=e.eventTarget.value;if(""===i)t.__c_="";else{let e=Number(i);(e||0===e)&&e!=t.__c_&&(t.__c_=e)}t.__cm(38==e.keyCode,e.shiftKey)}}},"__B<contextmenu>"(e){e.preventDefault()},"__cz<input>"(e){e.stopPropagation();let t=e.eventTarget;this.__cl(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e.__cv),clearInterval(e.__cw),delete e.__cs,setTimeout(e.wrapAsync(()=>{delete e.__cu}),0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../mx-dialog/index");a.default.applyStyle("pm",".pbI{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer;margin:4px 0}.pbJ{line-height:92px;text-align:center;color:#999}.pbK{min-height:500px}.pbL{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.pbL:hover{border-color:#999}.pbM{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.pbN{width:100px;margin:0 5px;height:25px}.pbO{margin:30px 0}.pbP{font-size:16px}.pbQ{position:absolute;right:3px;top:2px;opacity:.2}.pbQ:hover{opacity:.5}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h=[],f=e.src,g=e.i18n;return p=[],f?(u=[t(0,0,"\ue67f")],c=[t("i",{class:"p_ pbQ","mx-click":i+"\x1e__cC()",title:g("_an")},u)],_=[t("div",{class:"pbM",style:"background-image:url('"+f+"')"},c)],p.push(..._)):(c=[t(0,0,g("_ao"))],_=[t("div",{class:"pbJ"},c)],p.push(..._)),h.push(t("div",{class:"pbI ph","mx-click":i+"\x1e__cB()"},p)),t(i,0,h)},mixins:[l.default],init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()},"__cB<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,done(t){e.digest(t),e.__cA(t)}})},__cA(e){a.default.dispatch(this.root,"change",e)},"__cC<click>"(e){e.stopPropagation(),this.digest({src:""}),this.__cA({src:"",width:0,height:0})}})}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../../designer/service"),s=e("../../i18n/index");t.default=a.default.View.extend({mixins:[l.default],tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f=[],g=e.i18n,x=e.error,b=e.list;if(_=[t(0,0,g("_aq"))],p=[t("h5",0,_)],f.push(t("div",{class:"pp pF"},p)),p=[],x)c=[t(0,0,x.msg)],_=[t("div",{class:"pc pbO pbP"},c)],p.push(..._);else{_=[];for(let e=0,a=b,l=a.length;e<l;e++){let l=a[e];h=[t("div",{class:"pbM",style:"background-image:url('"+l.src+"')"})],u=[t("div",{class:"pbL","mx-click":i+"\x1e__cE({src:'"+r(l.src)+"'})"},h)],h=[t(0,0,l.title)],u.push(t("div",{class:"pc pbN pm"},h)),c=[t("div",{class:"pd",title:l.title},u)],_.push(...c)}p.push(..._)}return f.push(t("div",{class:"pq pj pbK"},p)),t(i,0,f)},init(e){this.__bt=e.dialog,this.__cD=e.done},render(){this.fetch(["__ah"],(e,t)=>{this.digest({error:e,list:t.get("data",[])})})},"__cE<click>"(e){let t=this,i=new Image,a=t.__cD,l=e.params.src;i.onerror=t.wrapAsync(()=>{t.alert(s.default("__ap"))}),i.onload=t.wrapAsync(()=>{let e=i.width,s=i.height;t.__bt.close(),a({src:l,width:e,height:s})}),i.src=l}})}),define("gallery/mx-pointer/cursor",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=a.default.guid("cursor_");a.default.applyStyle("pn",".pbR{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}");const s=document.body;t.default={__y(e){let t=getComputedStyle(e);this.__aw(t.cursor)},__aw(e){let t=a.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbR" id="${l}"/>`),t=a.node(l)),t.style.cursor=e,t.style.display="block"},__z(){a.node(l).style.display="none"},__I(e){s.style.cursor=e},__K(){s.style.cursor="auto"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("po",".pbS{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000;pointer-events:none}");let l=a.default.guid("de_");t.default={__aH(e){let t=a.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbS px" id="${l}"/>`),t=a.node(l)),t.innerHTML=e},__y(e){let t=a.node(l).style;t.left=e.pageX+10+"px",t.top=e.pageY+18+"px"},__z(){let e=a.node(l).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pp",".pbT{position:absolute;border:1px dashed #fa742b;display:none;pointer-events:none}");let l=a.default.guid("set_");t.default={__H(){a.node(l)||document.body.insertAdjacentHTML("beforeend",`<div id="${l}" class="pbT"></div>`)},__aH(e,t,i,s){let o=a.node(l).style;o.left=e+"px",o.top=t+"px",o.width=i+"px",o.height=s+"px",o.display="block"},__z(){a.node(l).style.display="none"}}}),define("gallery/mx-runner/fx",["magix","./index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./index");let s=e=>e,o=Date.now,r=function(e,t){let i=this;i.__cF&&!t||(t=t||s,i.__cF=((e,a)=>e+(a-e)*t(i.__cG/i.__cH))),i.__cI=[],i.__cJ=e};a.default.mix(r.prototype,{__cO(e,t){let i=this;i.__bY||(i.__cI.push({__cK:e,__cL:t}),i.__cM||i.__cN())},__cN(){let e=this,t=e.__cI.shift();t?(e.__cH=t.__cK,e.__cP=t.__cL,e.__cQ=o(),e.__cM||l.default.__cR(e.__cJ,e.__cM=(t=>{e.__cG=Date.now()-e.__cQ,e.__cG>e.__cH&&(e.__cG=e.__cH,t=1);try{e.__cP(e.__cF)}catch(e){t=e}t&&e.__cN()}))):e.__cS()},__cS(){let e=this;e.__cM&&(l.default.__cT(e.__cM),delete e.__cM)},destroy(){this.__cS(),this.__cI=[],this.__bY=1}}),t.default={__cV(e,t){let i=new r(e,t);return this.capture(a.default.guid("__cU"),i),i}}}),define("gallery/mx-runner/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let l=window.requestAnimationFrame||(e=>setTimeout(e,16)),s=window.cancelAnimationFrame||clearTimeout,o=Date.now;t.default={__cI:[],__cR(e,t){this.__cI.push({i:e||15,f:t,n:o()}),this.__cN()},__cT(e){let t=this.__cI;for(let i,a=0;a<t.length;a++)if(!(i=t[a]).r&&i.f==e){i.r=1;break}},__cN(){let e=this;if(!e.__cW){let t=()=>{let i=e.__cI;for(let e,t,l=0;l<i.length;l++)(e=i[l]).r?i.splice(l--,1):(t=o())-e.n>=e.i&&(e.n=t,a.default.toTry(e.f));i.length?e.__cW=l(t):(s(e.__cW),delete e.__cW)};e.__cW=l(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l={"zh-cn":e("./zh-cn").default},s=a.default.has,o=/\{(\d+)\}/g;t.default=((e,...t)=>{let i=(a.default.config("lang")||navigator.language).toLowerCase();s(l,i)||(i="zh-cn");let r=l[i],n=s(r,e)?r[e]:e;return t.length&&(n=n.replace(o,(e,i,a)=>(i|=0,t.length>i?(a=t[i],s(r,a)?r[a]:a):e))),n})}),define("i18n/zh-cn",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_k:"\u62a5\u8868\u8bbe\u8ba1\u5668",__ab:"\u63d0\u793a",_ac:"\u786e\u5b9a",_ad:"\u53d6\u6d88",_w:"\u653e\u5927",_v:"\u7f29\u5c0f",__:"\u5220\u9664\u8f85\u52a9\u7ebf",_a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",_r:"\u64a4\u9500(Ctrl+Z)",_s:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",__ar:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",__as:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",__at:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",__au:"\u5143\u7d20",__av:"\u5c5e\u6027",__aw:"\u6570\u636e\u6e90",_u:"\u6253\u5f00{0}\u9762\u677f",_t:"\u5173\u95ed{0}\u9762\u677f",__ax:"\u5c55\u5f00{0}\u9762\u677f",__ay:"\u6298\u53e0{0}\u9762\u677f",_x:"\u6309\u4e0b\u62d6\u52a8\u65cb\u8f6c\u5143\u7d20",_y:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6",_z:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u9ad8\u5ea6",_A:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6\u548c\u9ad8\u5ea6",__az:"\u7c7b\u578b\uff1a",__Q:"X\u5750\u6807\uff1a",__R:"Y\u5750\u6807\uff1a",__C:"\u5bbd\uff1a",__D:"\u9ad8\uff1a",__S:"\u65cb\u8f6c\u89d2\u5ea6\uff1a",__H:"\u80cc\u666f\u989c\u8272\uff1a",__W:"\u6587\u5b57\u989c\u8272\uff1a",__b:"\u5168\u9009",__e:"\u7c98\u8d34",__c:"\u590d\u5236",__d:"\u526a\u5207",__j:"\u5220\u9664",__f:"\u4e0a\u79fb\u4e00\u5c42",__h:"\u79fb\u81f3\u9876\u5c42",__g:"\u4e0b\u79fb\u4e00\u5c42",__i:"\u79fb\u81f3\u5e95\u5c42",_l:"\u5de6\u5bf9\u9f50",_n:"\u53f3\u5bf9\u9f50",_o:"\u4e0a\u5bf9\u9f50",_q:"\u4e0b\u5bf9\u9f50",_p:"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50",_m:"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50",__ap:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",_an:"\u6e05\u9664\u56fe\u7247",_ao:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",_aq:"\u56fe\u7247\u5e93",_aa:"\u6e05\u9664\u989c\u8272",__T:"\u5b57\u53f7\uff1a",__aA:"\u9875\u9762\u5bbd\u5ea6\uff1a",__aB:"\u9875\u9762\u9ad8\u5ea6\uff1a",__E:"\u9875\u9762\u7f29\u653e\uff1a",__I:"\u80cc\u666f\u56fe\u7247\uff1a",__J:"\u80cc\u666f\u5e73\u94fa\uff1a",__K:"\u62c9\u4f38\u94fa\u6ee1",__L:"\u539f\u59cb\u5c3a\u5bf8",__M:"\u6a2a\u5411\u5e73\u94fa",__N:"\u5782\u76f4\u5e73\u94fa",__O:"\u53cc\u5411\u5e73\u94fa",__F:"\u81ea\u9002\u5e94",__G:"\u5168\u5c4f\u94fa\u6ee1",__a_:"\u9501\u5b9a\u7f16\u8f91\uff1a",__P:"\u6587\u672c",__B:"\u9875\u9762",__U:"\u900f\u660e\u5ea6\uff1a",__V:"\u5b57\u95f4\u8ddd\uff1a",__Z:"\u5185\u5bb9\uff1a",__X:"\u6837\u5f0f\uff1a",__Y:"\u6392\u5217\uff1a",_ak:"\u52a0\u7c97",_al:"\u659c\u4f53",_am:"\u4e0b\u5212\u7ebf",_ae:"\u6c34\u5e73\u5c45\u5de6",_af:"\u6c34\u5e73\u5c45\u4e2d",_ag:"\u6c34\u5e73\u5c45\u53f3",_ah:"\u5782\u76f4\u5c45\u4e0a",_ai:"\u5782\u76f4\u5c45\u4e2d",_aj:"\u5782\u76f4\u5c45\u4e0b",__aC:"\u4e0a",__aD:"\u53f3",__aE:"\u4e0b",__aF:"\u5de6",__aG:"\u5916\u8fb9\u8ddd\uff1a",__aH:"\u5185\u8fb9\u8ddd\uff1a"}}),define("util/converter",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default={__aG({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e-=i.left,y:t-=i.top}},__cX({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e+=i.left,y:t+=i.top}},__aZ:e=>e/a.State.get("__c")|0,__b_:e=>e*a.State.get("__c")}}),define("util/transform",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7};t.default={__az({x:e,y:t,width:i,height:a},l){let s=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/2,o=i?Math.round(180*Math.atan(a/i)/Math.PI):0,r=180-l-o,n=o-l,d=90-l,p=l,_=i/2,c=a/2,u=e+_,h=t+c,f={x:u+s*Math.cos(r*Math.PI/180),y:h-s*Math.sin(r*Math.PI/180)},g={x:u+c*Math.cos(d*Math.PI/180),y:h-c*Math.sin(d*Math.PI/180)},x={x:u+s*Math.cos(n*Math.PI/180),y:h-s*Math.sin(n*Math.PI/180)},b={x:u+_*Math.cos(p*Math.PI/180),y:h+_*Math.sin(p*Math.PI/180)},m={x:u-s*Math.cos(r*Math.PI/180),y:h+s*Math.sin(r*Math.PI/180)},y={x:u-c*Math.sin(p*Math.PI/180),y:h+c*Math.cos(p*Math.PI/180)},v={x:u-s*Math.cos(n*Math.PI/180),y:h+s*Math.sin(n*Math.PI/180)},w={x:u-_*Math.cos(p*Math.PI/180),y:h-_*Math.sin(p*Math.PI/180)},k=Math.min(f.x,x.x,m.x,v.x),A=Math.max(f.x,x.x,m.x,v.x),S=Math.min(f.y,x.y,m.y,v.y),M=Math.max(f.y,x.y,m.y,v.y);return{point:[f,g,x,b,m,y,v,w],width:A-k,height:M-S,left:k,right:A,top:S,bottom:M}},__aW(e,t){let i={},l={},s=a[t],o=0,r=s-4;return r<0&&(r=s+4),{current:{index:s,point:l=e[s]},opposite:{index:o=r,point:i=e.slice(r,r+1)[0]}}},__dm(e,t){let{x:i,y:a,width:l,height:s,scale:o}=e,r={x:0,y:0},n=l*(o.x-1),d=s*(o.y-1),p=l+n,_=s+d,c=i-n/2,u=a-d/2;if(t){let e=[{x:i,y:a},{x:i+l,y:a},{x:i+l,y:a+s},{x:i,y:a+s}],o=[{x:c,y:u},{x:c+p,y:u},{x:c+p,y:u+_},{x:c,y:u+_}];r.x=e[t].x-o[t].x,r.y=e[t].y-o[t].y}return{x:c+r.x,y:u+r.y,width:p,height:_}},__aX(e,t,i,a){let l=this.__dm({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),s=l.width,o=l.height,r=this.__az(l,e.rotate),n=i.point[a].x-r.point[a].x+r.left,d=i.point[a].y-r.point[a].y+r.top;return{left:n+r.width/2-s/2,top:d+r.height/2-o/2,width:s,height:o}},__dk({x:e,y:t,width:i,height:a},l){if(0==i)return{x:e,y:t};let s=e+i/2,o=t+a/2,r=Math.sqrt(i*i/2/2+a*a/2/2),n=180*Math.atan(a/i)/Math.PI+l+180;return{x:s+r*Math.cos(n*Math.PI/180),y:o+r*Math.sin(n*Math.PI/180)}}}}),define("panels/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let l=[{title:"__au",icon:"&#xe629;",width:100,height:120,left:25,top:90,show:!1,resizeY:!0,id:"p-elements",view:"panels/elements/index"},{title:"__av",icon:"&#xe7a1;",width:240,height:120,right:10,top:90,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"},{title:"__aw",icon:"&#xe609;",width:200,height:120,show:!1,right:260,top:90,id:"p-data",view:"panels/data/index"}],s=a.default.toMap(l,"id");t.default={__Y(){for(let e of l)e.show&&this.__da(e.id,!0);a.State.fire("__n")},__da(e,t){let i=s[e];if(!i.opened){if(i.opened=1,i.eId)a.node(i.eId).style.display="block";else{i.eId=a.default.guid("panel_");let e=a.node(a.default.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${i.eId}"></div>`);let t=a.Vframe.byNode(e);i.close=(()=>{this.__db(i.id)}),t.mountVframe(a.node(i.eId),"panels/panel",i)}if(!t){a.State.fire("__n"),a.Vframe.byNode(a.node(i.eId)).invoke("__y")}}},__db(e){let t=s[e];if(t.opened){t.opened=0;let e=a.node(t.eId);e.style.display="none",a.State.fire("__n"),a.Vframe.byNode(e).invoke("__z")}},__aS(e){s[e].opened?this.__db(e):this.__da(e)},__aR:()=>l}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../gallery/mx-pointer/cursor"),s=e("../gallery/mx-dragdrop/index");a.default.applyStyle("pr",".pbZ{background:hsla(0,0%,100%,.93);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.pc_{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.pca{padding:0 5px;cursor:move;width:calc(100% - 36px)}.pcb{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.pcb:hover{background:#e64e30}.pcc{overflow:hidden;transition:height .25s}.pcd{transition:none}.pce{width:calc(100% - 2px);overflow:auto;float:left}.pcf{width:2px;float:right;cursor:ew-resize}.pcg,.pcf{background:#fafafa}.pcg{height:2px;cursor:ns-resize}.pch::-webkit-scrollbar,.pch::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}");let o=[],r={__au(e){o.push(e)},__at(e){for(let t=o.length;t--;)if(o[t]==e){o.splice(t,1);break}this.__dc()},__dc(){for(let e=o.length;e--;)o[e].__dd(300+e)},__de(e){if(o[o.length-1]!=e){for(let t=o.length;t--;)if(o[t]==e){o.splice(t,1);break}o.push(e),this.__dc()}}};t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x=[],b=e.width,m=e.left,y=e.right,v=e.top,w=e.zIndex,k=e.id,A=e.i18n,S=e.icon,M=e.title,z=e.shrink,j=e.height,T=e.resizeX,E=e.view,I=e.resizeY;return f=[t(0,1,S)],h=[t("i",{class:"px py pz"},f),t(0,0,A(M))],u=[t("div",{class:"pca pd",title:A("__ar"),"mx-mousedown":i+"\x1e__dg()"},h)],f=[t(0,0,"\ue73a")],g="px pcb",z&&(g+=" pA"),(_={}).class=g,_["mx-click"]=i+"\x1e__di()",_.title=A(z?"__ax":"__ay",M),h=[t("i",_,f)],f=[t(0,0,"\ue635")],h.push(t("i",{class:"px pcb","mx-click":i+"\x1e__bB()",title:A("_t",M)},f)),u.push(t("div",{class:"pe pE pb"},h)),c=[t("div",{class:"pc_ pk pj"},u)],(u=[]).push(t("div",{style:"width:"+(T?"calc(100% - 2px)":"100%"),class:"pce pl pch pb","mx-view":E})),T||(h=[t("div",{class:"pcf pk pb",title:A("__as"),"mx-mousedown":i+"\x1e__aY({w:1})"})],u.push(...h)),c.push(t("div",{class:"pcc",id:"c_"+k,style:"height:"+(z?0:`calc(100vh - ${j}px)`)},u)),g="pcg pk",!z&&I||(g+=" pi"),(_={}).class=g,_.title=A("__at"),_["mx-mousedown"]=i+"\x1e__aY({h:1})",c.push(t("div",_)),p="width:"+b+"px;",p+=0===m||m?"left:"+m:"right:"+y,(_={class:"pbZ"}).style=p+="px;top:"+v+"px;z-index:"+w+";",_.id="p_"+k,_["mx-mousedown"]=i+"\x1e__dh()",x.push(t("div",_,c)),t(i,0,x)},mixins:[s.default],init(e){r.__au(this),this.on("destroy",()=>{r.__at(this)}),this.__df=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,view:e.view,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+o.length})},"__dg<mousedown>"(e){let t=a.node("p_"+this.id).style,i=this.get("left"),s=this.get("width"),o=0;void 0===i&&(o=1,i=this.get("right"));let r=this.get("top"),n=o?"right":"left",d=0,p=e.eventTarget;this.__x(e,a=>{d||(d=1,l.default.__y(p));let _=(o?e.pageX-a.pageX:a.pageX-e.pageX)+i;_<0?_=0:_+s>window.innerWidth&&(_=window.innerWidth-s);let c=a.pageY-e.pageY+r;c<0?c=0:c+18>window.innerHeight&&(c=window.innerHeight-18),t[n]=_+"px",t.top=c+"px",this.set({[n]:_,top:c})},()=>{l.default.__z()})},"__aY<mousedown>"(e){let{w:t}=e.params,i=this.get("width"),s=this.get("height"),o=this.get("right"),r=a.node("c_"+this.id);r.classList.add("pcd");let n=r.style,d=a.node("p_"+this.id).style,p=0,_=e.eventTarget;this.__x(e,a=>{if(p||(p=1,l.default.__y(_)),t){let t=a.pageX-e.pageX;t+i<100&&(t=100-i);let l=t+i;d.width=l+"px",(o||0===s)&&(d.right=o-t+"px",this.set({right:o-t})),this.set({width:l})}else{let t=e.pageY-a.pageY+s;n.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{l.default.__z(),r.classList.remove("pcd")})},__dd(e){a.node("p_"+this.id).style.zIndex=e},"__dh<mousedown>"(){r.__de(this)},__y(){r.__de(this)},__z(){},"__di<click>"(){this.digest({shrink:!this.get("shrink")})},"__bB<click>"(){let e=this.__df;e&&a.default.toTry(e)}})}),define("panels/data/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p=[];return p.push(t(0,0,"data source panel")),t(i,0,p)},render(){this.digest()}})}),define("panels/elements/index",["magix","../../util/converter","../../designer/stage-elements"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../../util/converter"),s=e("../../designer/stage-elements");a.default.applyStyle("pq",".pbU{padding:5px 2px}.pbV{display:flex;align-items:center;padding:0 2px;color:#333;height:22px;line-height:22px;cursor:pointer;margin:1px 0}.pbV:hover{background:#f0f0f0}.pbW,.pbW:hover{background:#c4c4c4}.pbX{margin:0 4px 0 2px;font-size:12px}.pbY{border:2px solid #fa742b}");let o=a.default.guid("rp_"),r={__H(){a.node(o)||document.body.insertAdjacentHTML("beforeend",`<div class="pg pbY" id="${o}"></div>`)},__y(e){let t=a.node(o).style,{props:i}=e,s=l.default.__cX(i);t.left=s.x+"px",t.top=s.y+"px",t.width=i.width+"px",t.height=i.height+"px",t.borderWidth=2*a.State.get("__c")+"px";let r=i.rotate||0;t.transform=`rotate(${r}deg)`},__z(){a.node(o).style.left="-10000px"}};t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g=[],x=e.elements,b=e.selectedMap,m=e.i18n;p=[];for(let e=x.length;e--;){let l=x[e];f=[t(0,1,l.ctrl.icon)],h=[t("i",{class:"px pbX"},f)],f=[t(0,0,m(l.ctrl.title))],h.push(t("div",{class:"pm"},f)),u={},c="pbV",b[l.id]&&(c+=" pbW"),u.class=c,u["mx-mouseover"]=i+"\x1e__cY({element:'"+o(a,l)+"'})",u["mx-mouseout"]=i+"\x1e__cZ()",u["mx-click"]=i+"\x1e__d_({element:'"+o(a,l)+"'})",_=[t("div",u,h)],p.push(..._)}return g.push(t("div",{class:"pbU pk"},p)),t(i,0,g)},init(){r.__H();let e=this.render.bind(this);a.State.on("___",e),a.State.on("__i",e),a.State.on("__l",e)},render(){let e=a.State.get("__N"),t=a.State.get("__W");this.digest({selectedMap:t,elements:e})},"__cY<mouseover>"(e){if(!a.default.inside(e.relatedTarget,e.eventTarget)){let{element:t}=e.params;r.__y(t)}},"__cZ<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||r.__z()},"__d_<click>"(e){let{element:t}=e.params;s.default.__av(e,t)}})}),define("panels/props/index",["magix","../../designer/props","../../designer/history","../../util/transform","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-font/style","gallery/mx-font/align","./page"],(e,t,i)=>{e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("./page"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../../designer/props"),s=e("../../designer/history"),o=e("../../util/transform");a.default.applyStyle("ps",'.pci{padding:4px;min-width:200px}.pcj{line-height:28px;display:flex;align-items:center}.pck{width:80px;text-align:right}.pcl{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.pcm{width:140px}.pcn{height:90px}.pco{align-items:flex-start}.pcp{display:flex;align-items:center;cursor:pointer}.pcq{visibility:hidden;position:absolute}.pcr{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.pcr:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.pcq:checked+.pcr{background:#fa742b}.pcq:checked+.pcr:before{left:100%;margin-left:-14px}.pcq:disabled+.pcr{background:#e6e6e6;cursor:not-allowed}'),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x,b,m,y,v,w=[],k=e.elements,A=e.i18n,S=e.props;if(1==k.length){let e=k[0];c=[],h=[t(0,0,A("__az"))],u=[t("span",{class:"pck"},h)],h=[t(0,0,A(e.ctrl.title))],u.push(t("span",0,h)),c.push(t("li",{class:"pcj"},u));for(let l=0,n=e.ctrl.props,d=n.length;l<d;l++){let d=n[l];if(u=[],d.type==S.__aa)h=[t("li",{mxs:"pA:_",class:"pcl"})],u.push(...h);else{h=[];let l=e.props[d.key];d.read&&(l=d.read(l)),d.ifShow&&!d.ifShow(e.props)||(b=[],m=[t(0,0,A(d.tip))],b.push(t("span",{class:"pck"},m)),d.type==S.__Z?(x={mxv:"elements",class:"pcm pu ph",disabled:(p=e.props.locked)?o(a,p):null,"mx-input":i+"\x1e__dl({key:'"+r(d.key)+"',use:'value',element:'"+o(a,e)+"',write:'"+o(a,d.write)+"'})"},y="gallery/mx-number/index?value="+o(a,l),null!=(p=d.max)&&(y+="&max="+s(p)),null!=(p=d.step)&&(y+="&step="+s(p)),null!=(p=d.fixed)&&(y+="&fixed="+s(p)),null!=(p=d.min)&&(y+="&min="+s(p)),x["mx-view"]=y,m=[t("div",x)],b.push(...m)):d.type==S.__a_?(m=[t("div",{mxv:"elements",class:"pcm","mx-input":i+"\x1e__dl({key:'"+r(d.key)+"',use:'color',element:'"+o(a,e)+"'})","mx-view":"gallery/mx-color/index?clear="+s(d.clear)+"&color="+o(a,l)+"&align=right&disabled="+s(e.props.locked)+"&alpha="+s(d.alpha)})],b.push(...m)):d.type==S.__ab?((v=[t("input",{class:"pcq",type:"checkbox",checked:!!e.props[d.key]||null,"mx-change":i+"\x1e__dl({key:'"+r(d.key)+"',native:'checked',element:'"+o(a,e)+"',refresh:'"+o(a,d.refresh)+"'})"})]).push(t("i",{mxs:"pA:a",class:"pcr"})),m=[t("label",{class:"pcp"},v)],b.push(...m)):d.type==S.__ae?(m=[t("textarea",{class:"pv pcm pcn",disabled:!!e.props.locked||null,"mx-input":i+"\x1e__dl({key:'"+r(d.key)+"',native:'value',element:'"+o(a,e)+"'})",value:l})],b.push(...m)):d.type==S.__ac?(m=[t("div",{mxv:"elements",class:"pcm","mx-input":i+"\x1e__dl({key:'"+r(d.key)+"',use:'value',element:'"+o(a,e)+"'})","mx-view":"gallery/mx-font/style?disabled="+o(a,e.props.locked)+"&value="+o(a,l)})],b.push(...m)):d.type==S.__ad&&(m=[t("div",{mxv:"elements",class:"pcm","mx-input":i+"\x1e__dl({key:'"+r(d.key)+"',use:'value',element:'"+o(a,e)+"'})","mx-view":"gallery/mx-font/align?disabled="+o(a,e.props.locked)+"&value="+o(a,l)})],b.push(...m)),x={},g="pcj",d.dockTop&&(g+=" pco"),x.class=g,f=[t("li",x,b)],h.push(...f)),u.push(...h)}c.push(...u)}_=[t("ul",{class:"pci"},c)],w.push(..._)}else _=[t("div",{mxs:"pA:b","mx-view":"panels/props/page"})],w.push(..._);return t(i,0,w)},init(){let e=this.__dj(this.render.bind(this),100);a.State.on("__l",e),a.State.on("__k",e),a.State.on("___",e)},render(){this.digest({scale:a.State.get("__c"),props:l.default,elements:a.State.get("__O")})},"__dl<input,change>"(e){let{key:t,use:i,element:l,refresh:r,native:n,write:d}=e.params;if(i||n){let a,s=l.props,p="width"==t||"height"==t;p&&(a=o.default.__dk(s,s.rotate));let _=n?e.eventTarget[n]:e[i];if(d&&(_=d(_,s)),s[t]=_,p){let e=o.default.__dk(s,s.rotate);s.x+=a.x-e.x,s.y+=a.y-e.y,r=!0}}r&&(this.render(),a.State.fire("__m"));let p=a.node(l.id),_=a.Vframe.byNode(p);_&&_.invoke("__aH",[l]),s.default.__t("__a"+t,500)}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../../designer/history"),s=e("../../designer/props");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x,b,m=[],y=e.i18n,v=e.ctrl,w=e.props,k=e.page;_=[],u=[t(0,0,y("__az"))],c=[t("span",{class:"pck"},u)],u=[t(0,0,y(v.title))],c.push(t("span",0,u)),_.push(t("li",{class:"pcj"},c));for(let e=0,l=v.props,n=l.length;e<n;e++){let n=l[e];c=[],n.type==w.__aa?(u=[t("li",{mxs:"pB:_",class:"pcl"})],c.push(...u)):n.ifShow&&!n.ifShow(k)||(g=[],x=[t(0,0,y(n.tip))],g.push(t("span",{class:"pck"},x)),n.type==w.__Z?(f={mxv:"page,ctrl",class:"pcm pu ph","mx-input":i+"\x1e__dl({key:'"+r(n.key)+"',use:'value'})"},b="gallery/mx-number/index?value="+o(a,k[n.key]),null!=(p=n.max)&&(b+="&max="+s(p)),null!=(p=n.step)&&(b+="&step="+s(p)),null!=(p=n.fixed)&&(b+="&fixed="+s(p)),null!=(p=n.min)&&(b+="&min="+s(p)),f["mx-view"]=b,x=[t("div",f)],g.push(...x)):n.type==w.__a_?(x=[t("div",{mxv:"page,ctrl",class:"pcm","mx-input":i+"\x1e__dl({key:'"+r(n.key)+"',use:'color'})","mx-view":"gallery/mx-color/index?clear="+s(n.clear)+"&color="+o(a,k[n.key])+"&align=right&alpha="+s(n.alpha)})],g.push(...x)):n.type==w.__af?(x=[t("div",{class:"pcm","mx-change":i+"\x1e__dl({key:'"+r(n.key)+"',use:'src',refresh:'"+o(a,n.refresh)+"',write:'"+o(a,n.write)+"'})","mx-view":"gallery/mx-picture/index?src="+s(k[n.key])})],g.push(...x)):n.type==w.__ag&&(x=[t("div",{mxv:"ctrl",class:"pcm","mx-change":i+"\x1e__dl({key:'"+r(n.key)+"',use:'value'})","mx-view":"gallery/mx-dropdown/index?selected="+s(k[n.key])+"&list="+o(a,n.items)+"&textKey=text&valueKey=value"})],g.push(...x)),f={},h="pcj",n.dockTop&&(h+=" pco"),f.class=h,u=[t("li",f,g)],c.push(...u)),_.push(...c)}return m.push(t("ul",{class:"pci"},_)),t(i,0,m)},init(){let e=this.render.bind(this);a.State.on("___",e)},render(){this.digest({props:s.default,ctrl:a.State.get("__X"),page:a.State.get("__d")})},"__dl<input,change>"(e){let{key:t,use:i,refresh:s,write:o}=e.params,r=a.State.get("__d");r[t]=e[i],o&&o(r,e),l.default.__t("__b",500),a.State.fire("__b"),s&&this.render()}})}),define("elements/designer",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","../designer/history","../util/transform","../util/converter"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../gallery/mx-dragdrop/index"),s=e("../gallery/mx-pointer/cursor"),o=e("../designer/history"),r=e("../util/transform"),n=e("../util/converter");a.default.applyStyle("pf",'.pas{left:50%;top:50%;position:absolute}.pas:before{width:1px;height:5px;left:0;top:-2px}.pas:after,.pas:before{content:" ";position:absolute;background:red}.pas:after{width:5px;height:1px;left:-2px;top:0}.pat{border:1px dotted #ddd;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pau{border:1px solid #fa742b}.pav{border:1px solid #999}.paw{border-right:3px solid #fa742b;right:-2px}.pax,.pay{border-bottom:3px solid #fa742b;bottom:-2px}.pay{border-right:3px solid #fa742b;right:-2px}.paz{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABvUExURUdwTP///9XV1R0dHf///3Nzc////////////////1ZWVq+vr/T09PX19QQEBP///////8XFxf///////////wYGBv///+jo6P///4aGhqioqMzMzP///2BgYP///////////zExMf///wAAAP///xLps0AAAAAjdFJOUwCxxOdixRDmzSDMv8/Z+tz5wWpXWPk3zALCv8KnyXZVMNuNPnv3CwAAAJ1JREFUKM/NkckOwyAMRFkDBMhC9qWr+//fWCIV1WlzrjoXS36yxmMT8hdqqKoUvRAjMtw22kvecem1GjTuK1vApmI+wQMBbQFy5li+QQRaX4AtRX+vbntAJeRl9HTTx4TiwESs61DXNUPmVQeujzVrQwh43TTxpeRBslVfMUhbiXKWyiAwvnIsMcdyJkfJYdpNvG/ltDm+bjP+8KFP8ggL+zQLGxwAAAAASUVORK5CYII=") 14 14,pointer;top:-3px;right:-3px;width:6px;height:6px;border-radius:50%;background:#fa742b}');const d={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3};let p={};a.State.on("__l",()=>{for(let e in p){let t=a.Vframe.byId(e);t&&(t.invoke("__aU"),t.invoke("render"))}}),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x,b=[],m=e.element,y=e.view,v=e.id,w=e.scale,k=e.fullscreen,A=e.selected,S=e.count,M=e.i18n,z=m.props;b.push(t("div",{mxv:"element,scale","mx-view":y+"?props="+o(a,z)+"&scale="+o(a,w),id:"entity_"+v}));let j=z.rotate%360;if(h=[],!k&&!z.locked){if(f=[],A){if((g=[]).push(t("div",{mxs:"pk:_",class:"pas"})),1==S){x=[t("div",{class:"paz pg","mx-mousedown":i+"\x1e__aV()",title:M("_x")})],p="";let e=Math.min(20,z.height-3)-4;p+=" ";let a=Math.min(20,z.width)-4;p+=" ";let l=Math.max(Math.min(a,e)-2,0);p+=" ",a=Math.min(a,z.width-l-6),p+=" ",e=Math.min(e,z.height-l-6-3),p+=" ";let s=(z.height-e-l+3)/2;u={class:"pg paw"},_="height:"+Math.max(e,0)+"px;top:"+s+"px;cursor:",j<=22.5||j>337.5||j>157.5&&j<=202.5?_+="ew":j<=67.5||j>202.5&&j<=247.5?_+="nwse":j<=112.5||j>247.5&&j<=292.5?_+="ns":(j<=157.5||j>292.5&&j<=337.5)&&(_+="nesw"),_+="-resize",u.style=_,u.title=M("_y"),u["mx-mousedown"]=i+"\x1e__aY({key:'rm'})",x.push(t("div",u));let o=(z.width-a-l)/2;u={class:"pg pax"},_="width:"+Math.max(a,0)+"px;left:"+o+"px;cursor:",j<=22.5||j>337.5||j>157.5&&j<=202.5?_+="ns":j<=67.5||j>202.5&&j<=247.5?_+="nesw":j<=112.5||j>247.5&&j<=292.5?_+="ew":(j<=157.5||j>292.5&&j<=337.5)&&(_+="nwse"),_+="-resize",u.style=_,u.title=M("_z"),u["mx-mousedown"]=i+"\x1e__aY({key:'mb'})",x.push(t("div",u)),_="width:"+l+"px;height:"+l+"px;cursor:",j<=22.5||j>337.5||j>157.5&&j<=202.5?_+="nwse":j<=67.5||j>202.5&&j<=247.5?_+="ns":j<=112.5||j>247.5&&j<=292.5?_+="nesw":(j<=157.5||j>292.5&&j<=337.5)&&(_+="ew"),(u={class:"pg pay"}).style=_+="-resize;",u.title=M("_A"),u["mx-mousedown"]=i+"\x1e__aY({key:'rb'})",x.push(t("div",u)),g.push(...x)}f.push(...g)}h.push(...f)}return u={id:"mask_"+m.id},_="left:"+z.x+"px;top:"+z.y+"px;width:"+z.width+"px;height:"+z.height+"px;",j&&(_+="transform:rotate("+j+"deg);"),u.style=_,c="pg pk",k||(c+=" pat"),A&&!k&&(c+=" ",z.locked?c+="pav":c+="pau"),u.class=c,b.push(t("div",u,h)),t(i,0,b)},mixins:[l.default],ctor(e){this.assign(e),p[this.id]=1,this.on("destroy",()=>{delete p[this.id]})},__aU(){let e=a.State.get("__W"),t=a.State.get("__O").length,i=this.get().element.id;this.set({selected:a.has(e,i),count:t})},assign(e){return this.set(e),this.__aU(),!0},render(){this.digest()},__aH(e){this.digest({element:e})},"__aV<mousedown>"(e){e.stopPropagation();let t=this.get("element"),i=t.props;a.State.fire("__j",{show:1});let l=i.x+i.width/2,r=i.y+i.height/2,d=n.default.__aG({x:e.pageX,y:e.pageY}),p=i.rotate,_=Math.atan2(d.y-r,d.x-l)-p*Math.PI/180,c=!1;this.__x(e,o=>{c||s.default.__y(e.eventTarget),c=!0,d=n.default.__aG({x:o.pageX,y:o.pageY});let p=Math.atan2(d.y-r,d.x-l);p=180*(p-_)/Math.PI,i.rotate=(360+(0|p))%360,this.digest({element:t}),a.State.fire("__k")},()=>{s.default.__z(),c&&o.default.__t(),a.State.fire("__j")})},"__aY<mousedown>"(e){if(e.button)return;e.stopPropagation();let t=this,i=t.get("element"),{props:l,ctrl:n}=i;a.State.fire("__j",{show:1});let p=l.rotate||0,{key:_}=e.params;p=(p+360)%360,0==l.width&&(l.width=.01),0==l.height&&(l.height=.01);let c=l.width,u=l.height,h=l.x,f=l.y,g=0,x=0,b=Number.MAX_VALUE,m=Number.MAX_VALUE;for(let e of n.props)"width"==e.key?(a.default.has(e,"max")&&(b=e.max),a.default.has(e,"min")&&(g=e.min)):"height"==e.key&&(a.default.has(e,"max")&&(m=e.max),a.default.has(e,"min")&&(x=e.min));let y=r.default.__az(l,p),v=r.default.__aW(y.point,_),{opposite:w,current:k}=v,A=w.index,S=w.point,M=k.point,z=S.x,j=S.y,T=Math.abs(M.x-z),E=Math.abs(M.y-j),I={x:h,y:f,rotate:p,width:c,height:u},P=e.pageX,O=e.pageY,C=!1;t.__x(e,o=>{C||s.default.__y(e.eventTarget);let n={x:1,y:1};C=!0;let _=T>E,c=1,u=o.pageX-P,h=o.pageY-O;0==A||7==A?_&&p>90&&p<270?u=-u:!_&&p>180&&p<360&&(h=-h):0!=A&&1!=A||(_&&p>45&&p<135?u=-u:!_&&p>90&&p<270&&(h=-h)),(c=_?(u+T)/T:(h+E)/E)<0&&(c=0);let f=d[A];1===f?n.x=n.y=c:2===f?n.y=c:3===f&&(n.x=c);let v=r.default.__aX(I,n,y,A),w=v.width,k=v.height;w<g?w=g:w>b&&(w=b),k<x?k=x:k>m&&(k=m),w==l.width&&k==l.height||(l.x=v.left,l.y=v.top,l.width=w,l.height=k,t.digest({element:i}),a.State.fire("__k"))},()=>{C&&o.default.__t(),s.default.__z(),a.State.fire("__j")})}})}),define("elements/index",["magix","./text/designer","./page/designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./text/designer"),s=e("./page/designer");let o=[l.default],r=a.toMap(o,"type"),n=[l.default,{spliter:!0},{icon:"&#xe629;",title:"\u56fe\u8868",subs:[l.default,l.default,l.default,l.default,l.default,l.default,l.default,l.default]}];t.default={__F:()=>n,__U:()=>s.default,__V(e){let t={},i=e=>{for(let a of e){let e=r[a.type];if(a.ctrl=e,t[a.id]=a,"layout"==a.role)for(let e of a.props.columns)i(e.elements)}};return i(e),{elements:e,map:t}}}}),define("elements/page/designer",["../../designer/props","../../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../i18n/index");t.default={title:"__B",getProps:()=>({width:900,height:500,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0,scaleType:"auto"}),props:[{tip:"__C",key:"width",type:a.default.__Z,min:0},{tip:"__D",key:"height",type:a.default.__Z,min:0},{tip:"__E",key:"scaleType",type:a.default.__ag,items:[{text:l.default("__F"),value:"auto"},{text:l.default("__G"),value:"full"}]},{type:a.default.__aa},{tip:"__H",key:"background",type:a.default.__a_},{tip:"__I",dockTop:!0,key:"backgroundImage",type:a.default.__af,refresh:!0,write(e,t){e.backgroundWidth=t.width,e.backgroundHeight=t.height}},{tip:"__J",key:"backgroundRepeat",type:a.default.__ag,items:[{text:l.default("__K"),value:"full"},{text:l.default("__L"),value:"no-repeat"},{text:l.default("__M"),value:"repeat-x"},{text:l.default("__N"),value:"repeat-y"},{text:l.default("__O"),value:"repeat"}],ifShow:e=>e.backgroundImage}]}}),define("elements/text/designer",["../designer","../../designer/props","../../util/converter"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../designer"),l=e("../../designer/props"),s=e("../../util/converter");t.default=a.default.extend({ctor(){this.set({view:"elements/text/index"})}},{type:"text",role:"text",title:"__P",icon:"&#xe6bc;",getProps:(e,t)=>({background:"",height:25,alpha:1,text:"",ls:0,x:e,y:t,rotate:0,width:200,forecolor:"#000000",fontsize:14,locked:!1,style:{bold:!1,underline:!1,italic:!1},align:{h:"flex-start",v:"flex-start"}}),props:[{tip:"__Q",type:l.default.__Z,key:"x",read:s.default.__aZ,write:s.default.__b_},{tip:"__R",type:l.default.__Z,key:"y",read:s.default.__aZ,write:s.default.__b_},{tip:"__C",type:l.default.__Z,key:"width",min:0,read:s.default.__aZ,write:s.default.__b_},{tip:"__D",key:"height",type:l.default.__Z,min:0,read:s.default.__aZ,write:s.default.__b_},{tip:"__S",type:l.default.__Z,key:"rotate",min:-360,max:360},{type:l.default.__aa},{tip:"__T",key:"fontsize",type:l.default.__Z,min:0},{tip:"__U",key:"alpha",type:l.default.__Z,step:.1,fixed:1,min:0,max:1},{tip:"__V",key:"ls",type:l.default.__Z,min:0},{tip:"__H",key:"background",clear:!0,alpha:!0,type:l.default.__a_},{tip:"__W",key:"forecolor",type:l.default.__a_},{tip:"__X",key:"style",type:l.default.__ac},{tip:"__Y",key:"align",type:l.default.__ad},{tip:"__Z",key:"text",type:l.default.__ae,dockTop:!0},{type:l.default.__aa},{tip:"__a_",key:"locked",type:l.default.__ab,refresh:!0,free:!0}]})}),define("elements/text/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h=[],f=e.props,g=e.scale;return u="",f.text?u+=" "+f.text+" ":u+=" \u8bf7\u8f93\u5165\u6587\u5b57 ",c=[t(0,0,u)],_={},p="position:absolute;left:"+f.x+"px;top:"+f.y+"px;display:flex;color:"+f.forecolor+";",f.background&&(p+="background:"+f.background+";"),p+="font-size:"+f.fontsize*g+"px;height:"+f.height+"px;letter-spacing:"+f.ls*g+"px;opacity:"+f.alpha+";",f.style.bold&&(p+="font-weight:bold;"),f.style.italic&&(p+="font-style:italic;"),f.style.underline&&(p+="text-decoration:underline;"),p+="align-items:"+f.align.v+";justify-content:"+f.align.h+";overflow:hidden;width:"+f.width+"px;transform:rotate("+f.rotate+"deg);",_.style=p,h.push(t("div",_,c)),t(i,0,h)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../gallery/mx-dragdrop/index"),s=e("../gallery/mx-pointer/cursor"),o=e("./history");a.default.applyStyle("pa",".pG{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.pH{top:0;width:1px}.pH,.pI{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.pI{left:0;height:1px}.pJ{float:left;overflow:hidden;z-index:200;position:relative}.pK,.pJ{width:20px;border-right:1px solid #ccc;background:#fff}.pK{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.pL{left:5px;top:22px}.pL,.pM{cursor:default;position:absolute;font-size:10px}.pM{top:2px;left:24px}.pN,.pO{position:relative;z-index:100}.pN{top:20px}.pO{left:20px}.pP{width:4px;border-left:1px solid #fa742b}.pP,.pQ{position:absolute;pointer-events:none}.pQ{height:1px;background:#fa742b}.pR{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.pS{top:2px;cursor:default}.pS,.pT{position:absolute;left:4px;font-size:10px;color:#666}.pT{top:-15px;cursor:pointer;pointer-events:all}.pU{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.pV{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.pW,.pV{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.pW{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let r={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x,b,m,y=[],v=e.sTop,w=e.id,k=e.yHelpers,A=e.yStart,S=e.scale,M=e.vWidth,z=e.i18n,j=e.sLeft,T=e.xHelpers,E=e.xStart,I=e.vHeight,P=e.width,O=e.step,C=e.space,L=e.hbar,N=e.barColor,Y=e.bar,X=e.xEnd,V=e.height,B=e.yEnd;p=[];for(let e=0,a=k,l=a.length;e<l;e++){let l=a[e];m=Math.abs(A)+l.mm*S+20,u=[t(0,0,"\ue600")],c=[t("i",{class:"px pT",title:z("__"),"mx-click":i+"\x1e__w({type:'y',id:'"+r(l.id)+"'})"},u)],u=[t(0,0,l.mm)],c.push(t("span",{class:"pU"},u),t("span",{class:"pV","mx-mousedown":i+"\x1e__A({type:'y',id:'"+r(l.id)+"',c:"+m+"})",title:z("_a")})),_=[t("div",{class:"pQ",style:"width:"+M+"px;top:"+m+"px;"},c)],p.push(..._)}y.push(t("div",{class:"pO",style:"top:-"+v+"px",id:w+"_y_help","mx-contextmenu":i+"\x1e__B()"},p)),p=[];for(let e=0,a=T,l=a.length;e<l;e++){let l=a[e];m=Math.abs(E)+l.mm*S,u=[t(0,0,"\ue600")],c=[t("i",{class:"px pR",title:z("__"),"mx-click":i+"\x1e__w({type:'x',id:'"+r(l.id)+"'})"},u)],u=[t(0,0,l.mm)],c.push(t("span",{class:"pS"},u),t("span",{class:"pW","mx-mousedown":i+"\x1e__A({type:'x',id:'"+r(l.id)+"',c:"+m+"})",title:z("_a")})),_=[t("div",{class:"pP",style:"height:"+I+"px;left:"+m+"px;"},c)],p.push(..._)}y.push(t("div",{class:"pN",style:"left:-"+j+"px",id:w+"_x_help","mx-contextmenu":i+"\x1e__B()"},p)),u=[];for(let e=0;e<E;e+=O)h=[],e&&(f=[],(b=e/S)%C==0?(g=[t("rect",{width:"1",height:L,x:E-e,y:20-L-1,style:"fill:"+N+";"})],x=[t(0,0,-b)],g.push(t("text",{x:E-e+2,y:"14",style:"font-size:10px;fill:#999;"},x)),f.push(...g)):(g=[t("rect",{width:"1",height:Y,x:E-e,y:20-Y-1,style:"fill:"+N+";"})],f.push(...g)),h.push(...f)),u.push(...h);for(let e=0;e<X;e+=O)h=[],(b=e/S)%C==0?(f=[t("rect",{width:"1",height:L,x:E+e,y:20-L-1,style:"fill:"+N+";"})],g=[t(0,0,b)],f.push(t("text",{x:E+e+2,y:"14",style:"font-size:10px;fill:#999;"},g)),h.push(...f)):(f=[t("rect",{width:"1",height:Y,x:E+e,y:20-Y-1,style:"fill:"+N+";"})],h.push(...f)),u.push(...h);c=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+P+" 19",style:"cursor:default;"},u)],_=[t("div",{style:"width:"+P+"px;height:100%"},c)],p=[t("div",{class:"pG",id:w+"_x"},_)],c=[t(0,0,"-")],_=[t("span",{class:"pL",id:w+"_x_tip"},c)],p.push(t("div",{class:"pH",id:w+"_x_line",style:"height:"+(I+20)+"px"},_)),y.push(t("div",{"mx-mousemove":i+"\x1e__p()","mx-mouseout":i+"\x1e__q()","mx-click":i+"\x1e__u()"},p)),u=[];for(let e=0;e<A;e+=O)h=[],e&&(f=[],(b=e/S)%C==0?(g=[t("rect",{width:L,height:"1",x:20-L,y:A-e,style:"fill:"+N+";"})],x=[t(0,0,-b)],g.push(t("text",{x:"14",y:A-e+2,style:"font-size:10px;fill:#999;",transform:"rotate(-90,13,"+(A-e)+")"},x)),f.push(...g)):(g=[t("rect",{width:Y,height:"1",x:20-Y,y:A-e,style:"fill:"+N+";"})],f.push(...g)),h.push(...f)),u.push(...h);for(let e=0;e<B;e+=O)h=[],(b=e/S)%C==0?(f=[t("rect",{width:L,height:"1",x:20-L,y:A+e,style:"fill:"+N+";"})],g=[t(0,0,b)],f.push(t("text",{x:"14",y:A+e,style:"font-size:10px;fill:#999;;",transform:"rotate(-90,13,"+(A+e-2)+")"},g)),h.push(...f)):(f=[t("rect",{width:Y,height:"1",x:20-Y,y:A+e,style:"fill:"+N+";"})],h.push(...f)),u.push(...h);return c=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+V,style:"cursor:default"},u)],_=[t("div",{style:"height:"+V+"px;"},c)],p=[t("div",{class:"pJ",style:"height:"+I+"px;",id:w+"_y"},_)],c=[t(0,0,"-")],_=[t("span",{class:"pM",id:w+"_y_tip"},c)],p.push(t("div",{class:"pI",id:w+"_y_line",style:"width:"+(M+20)+"px"},_)),y.push(t("div",{"mx-mousemove":i+"\x1e__r()","mx-mouseout":i+"\x1e__s()","mx-click":i+"\x1e__v()"},p),t("div",{mxs:"p_:_",class:"pK"})),t(i,0,y)},mixins:[l.default],init(e){let t=a.node(e.scroll);t.addEventListener("scroll",()=>{this.___()},{passive:!0}),this.__a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let i=this.render.bind(this);a.State.on("___",i),a.State.on("__a",i),a.State.on("__b",i)},__m(){if(this.__b){let e=this.__a,t=a.State.get("__c"),i=a.State.get("__d"),{width:l,height:s}=i,o=Math.max(l*t,window.innerWidth)+500,n=Math.max(s*t,window.innerHeight)+300,d=0,p=0,_=20,c=0,u=0,h=10,f=10,g=a.node("stage_canvas"),x=a.node("stage_outer"),b=g.getBoundingClientRect(),m=x.getBoundingClientRect();p=o-(d=Math.round(b.left-m.left)+_),u=n-(c=Math.round(b.top-m.top)),h=e.offsetHeight,f=e.offsetWidth;let y=r[t];this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:o,scale:t,space:y.space,step:y.step,height:n,xStart:d,xEnd:p,yStart:c,vHeight:h,vWidth:f,yEnd:u},null,()=>{this.__e=a.node(this.id+"_x"),this.__f=a.node(this.id+"_y"),this.__g=a.node(this.id+"_x_line"),this.__h=a.node(this.id+"_y_line"),this.__i=a.node(this.id+"_x_tip"),this.__j=a.node(this.id+"_y_tip"),this.__k=a.node(this.id+"_x_help"),this.__l=a.node(this.id+"_y_help")})}},___(){let e=this.__e,t=this.__f,i=this.__l,a=this.__k,l=this.__a,s=l.scrollTop,o=l.scrollLeft;e&&(e.scrollLeft=o),t&&(t.scrollTop=s),a&&(a.style.left=-o+"px"),i&&(i.style.top=-s+"px"),this.set({sLeft:o,sTop:s})},render(){this.set({xHelpers:a.State.get("__n"),yHelpers:a.State.get("__o")});let e=()=>{a.node("stage_canvas")?(this.__b=1,this.__m()):setTimeout(e,30)};setTimeout(e,0)},"__p<mousemove>"(e){let t=this.__e,i=e.pageX,a=this.get("xStart"),l=this.__g.style;l.display="block",l.left=i+"px";let s=i-a+t.scrollLeft,o=this.get("scale");this.__i.innerHTML=(s/o).toFixed(0)},"__q<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||(this.__g.style.display="none")},"__r<mousemove>"(e){let t=this.root.getBoundingClientRect(),i=e.pageY-t.top,a=this.get("yStart"),l=this.__f,s=this.__h.style;s.display="block",s.top=i+"px";let o=i-a-20+l.scrollTop,r=this.get("scale");this.__j.innerHTML=(o/r).toFixed(0)},"__s<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||(this.__h.style.display="none")},"__u<click>"(e){let t=(e.pageX-this.get("xStart")+this.__e.scrollLeft)/this.get("scale")|0,i=this.get("xHelpers");i.push({mm:t,id:a.default.guid("x_")}),this.digest({xHelpers:i}),o.default.__t()},"__v<click>"(e){let t=this.root.getBoundingClientRect(),i=(e.pageY-t.top-this.get("yStart")-20+this.__f.scrollTop)/this.get("scale")|0,l=this.get("yHelpers");l.push({mm:i,id:a.default.guid("x_")}),this.digest({yHelpers:l}),o.default.__t()},"__w<click>"(e){let{type:t,id:i}=e.params,a=t+"Helpers",l=this.get(a);for(let e=l.length;e--;){if(l[e].id==i){l.splice(e,1);break}}this.digest({[a]:l}),o.default.__t()},"__A<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:a,c:l}=e.params,r=i+"Helpers",n=this.get(r);for(let e of n)if(e.id==a){t=e;break}if(t){let a=this.get(i+"Start"),d=0;this.__x(e,o=>{let p;d||(d=1,s.default.__y(e.eventTarget)),p="x"==i?o.pageX-e.pageX+l:o.pageY-e.pageY+l-20,t.mm=(p-a)/this.get("scale")|0,this.digest({[r]:n})},()=>{d&&(s.default.__z(),o.default.__t())})}},"__B<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){setTimeout(()=>{this.__m()},0)}})}),define("designer/const",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={__C:50,__c:1,__D:900,__E:500}}),define("designer/contextmenu",["magix","../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../i18n/index");let s={spliter:!0},o={id:0,text:"__b",short:" (Ctrl+A)"},r={id:1,text:"__c",short:" (Ctrl+C)"},n={id:14,text:"__d",short:" (Ctrl+X)"},d={id:2,text:"__e",short:" (Ctrl+V)"},p={id:5,text:"__f"},_={id:6,text:"__g"},c={id:3,text:"__h"},u={id:4,text:"__i"},h={id:7,text:"__j",short:" (Delete)"},f={},g=e=>t=>{e["@{menu@u.id}"]||(e["@{menu@u.id}"]=a.default.guid("_m"));let i=t+e["@{menu@u.id}"];if(!f[i]){let t=[];for(let i of e)i.spliter?t.push(i):t.push({id:i.id,text:l.default(i.text)+(i.short||"")});f[i]=t}return f[i]};t.default={allId:o.id,pasteId:d.id,topId:c.id,upId:p.id,bottomId:u.id,downId:_.id,cutId:n.id,copyId:r.id,deleteId:h.id,singleElement:g([r,n,h,s,p,c,s,_,u]),multipleElement:g([r,n,h]),stage:g([o,d])}}),define("designer/header",["magix","../elements/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../elements/index"),s=e("../gallery/mx-dragdrop/index"),o=e("../gallery/mx-pointer/select"),r=e("../gallery/mx-pointer/cursor");a.default.applyStyle("pb",".pX,.pY{width:60px;height:40px;display:grid;grid-template-rows:20px 20px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.pZ{grid-template-columns:50px 10px}.pY{float:left;border-radius:2px}.pY:hover{background:#bd361b}.pa_{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.pa_,.pX:hover{background:#e64e30}.pX:hover .pa_{display:block}.paa{grid-column:1/2;grid-row:1/2;align-self:flex-end}.pab{font-size:12px;font-weight:400;line-height:12px;grid-column:1/2;grid-row:2/3}.pac{font-size:10px;margin-left:-10px;grid-row:1/3;grid-column:2/3}.pad{height:30px;width:1px;background:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,.27)),color-stop(.3,#fff),color-stop(.7,#fff),to(hsla(0,0%,100%,.27)));margin:2px 12px;float:left}");let n=["requestFullscreen","webkitRequestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x,b,m=[],y=e.i18n,v=e.elements;_=[t(0,0,"\ue64b")],p=[t("i",{mxs:"pa:_",class:"px pa"},_),t(0,0,y("_k")+"\u2122")],m.push(t("div",{class:"pE pd"},p)),p=[];for(let e=0,l=v,s=l.length;e<s;e++){let s=l[e];if(_=[],s.spliter)c=[t("div",{mxs:"pa:a",class:"pad"})],_.push(...c);else{if(c=[],s.subs){f=[t(0,1,s.icon)],h=[t("i",{class:"px paa"},f)],f=[t(0,0,y(s.title))],h.push(t("b",{class:"pab"},f)),f=[t(0,0,"\ue73a")],h.push(t("i",{mxs:"pa:b",class:"pac px"},f)),f=[];for(let e=0,l=s.subs,r=l.length;e<r;e++){let s=l[e];b=[t(0,1,s.icon)],x=[t("i",{class:"px paa"},b)],b=[t(0,0,y(s.title))],x.push(t("b",{class:"pab"},b)),g=[t("div",{class:"pY","mx-mousedown":i+"\x1e__L({ctrl:'"+o(a,s)+"'})"},x)],f.push(...g)}h.push(t("div",{class:"pa_"},f)),u=[t("div",{class:"pX pZ ph"},h)],c.push(...u)}else f=[t(0,1,s.icon)],h=[t("i",{class:"px paa"},f)],f=[t(0,0,y(s.title))],h.push(t("b",{class:"pab"},f)),u=[t("div",{class:"pX ph","mx-mousedown":i+"\x1e__L({ctrl:'"+o(a,s)+"'})"},h)],c.push(...u);_.push(...c)}p.push(..._)}return m.push(t("div",{class:"pE pd pC pk"},p)),c=[t(0,0,"\ue64a")],_=[t("i",{class:"px"},c)],c=[t(0,0,"\u9884\u89c8")],_.push(t("b",{class:"pab"},c)),p=[t("div",{class:"pX","mx-click":i+"\x1e__M()"},_)],c=[t(0,0,"\ue6b0")],_=[t("i",{class:"px"},c)],c=[t(0,0,"\u4fdd\u5b58")],_.push(t("b",{class:"pab"},c)),p.push(t("div",{class:"pX"},_)),m.push(t("div",{mxs:"pa:c",class:"pE pe pD pk"},p)),t(i,0,m)},mixins:[s.default],render(){this.digest({elements:l.default.__F()})},"__L<mousedown>"(e){let{ctrl:t}=e.params,i=!1,l=null;a.State.set({__G:t});let n=t.getProps(0,0),{width:d,height:p}=n,_=a.State.get("__c");d*=_,p*=_,o.default.__H(),r.default.__I("move"),this.__x(e,e=>{a.State.fire("__c",{width:d,height:p,node:s.default.__J(e.clientX,e.clientY),pageX:e.pageX-d/2,pageY:e.pageY-p/2}),i=!0},e=>{o.default.__z(),r.default.__K(),i?e&&(l=s.default.__J(e.clientX,e.clientY),a.State.fire("__e",{node:l,pageX:e.pageX-d/2,pageY:e.pageY-p/2})):a.State.fire("__d",{pageX:50*Math.random()|0,pageY:50*Math.random()|0})})},"__M<click>"(){let e=a.node("stage_outer");for(let t of n)if(e[t]){e[t]();break}},"$doc<webkitfullscreenchange,mozfullscreenchange,fullscreenchange>"(e){let t=document,i=t.fullscreenElement||t.webkitCurrentFullScreenElement||t.mozFullScreenElement||null;a.State.fire("__f",{fullscreen:!0,full:!!i})}})}),define("designer/history",["magix","./const"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./const");let s=[],o=[],r=null,n=-1,d="",p=null,_=()=>JSON.stringify({page:a.State.get("__d"),scale:a.State.get("__c"),elements:a.State.get("__N"),select:a.State.get("__O"),xLines:a.State.get("__n"),yLines:a.State.get("__o")}),c=e=>{let t=JSON.parse(e),i=a.State.get("__c"),l=t.scale||i;a.State.fire("__g",{json:t}),a.State.fire("___",{scale:i!==l})};t.default={__P(){p||(p=_())},__Q:()=>({canRedo:o.length,canUndo:s.length}),__R(){s.length=0,o.length=0},__S(){if(s.length>0){let e=s.pop();o.push(e);let t=s[s.length-1]||p;c(t)}},__T(){let e=o.pop();e&&(s.push(e),c(e))},__t(e="_save",t=0){let i=_();e!=d&&r&&(s.push(r),r=null,d=e),o.length=0;let c=e=>{s.push(e),s.length>l.default.__C&&(p=s.shift()),a.State.fire("__h")};t?(r=i,clearTimeout(n),n=setTimeout(()=>{c(r),r=null},t)):c(i)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./header","./toolbar","./axis","./stage"],(e,t,i)=>{e("./header"),e("./toolbar"),e("./axis"),e("./stage"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../elements/index"),s=e("../gallery/mx-dialog/index"),o=e("./const"),r=e("./history"),n=e("../panels/index");let d=l.default.__U();a.default.applyStyle("pc",".pae{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.pae,.paf{position:relative}.paf{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.pag{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 85px);background-color:#edeef3;transition:all .3s;margin-left:20px}.pah{box-shadow:inset 1px 1px 6px 2px #dadada}");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p=[],_=e.id;return p.push(t("div",{mxs:"pb:_","mx-view":"designer/header",class:"pae"}),t("div",{mxs:"pb:a","mx-view":"designer/toolbar",class:"paf pk"}),t("div",{"mx-view":"designer/axis?scroll=s_"+s(_),class:"pk ph"}),t("div",{"mx-view":"designer/stage",id:"s_"+_,class:"pag pl pah"})),t(i,0,p)},mixins:[s.default],init(){a.State.on("__g",e=>{(e=>{let t=a.State.get("__d"),i=a.State.get("__N"),s=a.State.get("__O"),o=a.State.get("__n"),r=a.State.get("__o"),{elements:n,map:d}=l.default.__V(e.elements);i.length=0,i.push(...n),o.length=0,e.xLines&&o.push(...e.xLines),r.length=0,e.yLines&&r.push(...e.yLines);let p={};if(s.length=0,e.select)for(let t of e.select){let e=d[t.id];e&&(p[e.id]=1,s.push(e))}a.default.mix(t,e.page),a.State.set({__c:e.scale||1,__W:p})})(e.json)}),a.State.set({__X:d,__d:d.getProps(),__c:o.default.__c,__N:[],__O:[],__W:{},__n:[],__o:[]}),r.default.__P()},render(){this.digest(null,null,()=>{n.default.__Y()})}})}),define("designer/keys",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:8,TAB:9,C:67,V:86,A:65,N:78,X:88,Z:90,Y:89}}),define("designer/props",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={__Z:2,__a_:4,__aa:8,__ab:16,__ac:32,__ad:64,__ae:128,__af:256,__ag:512}}),define("designer/service",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let l=a.default.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set("data",i.data),t()}).catch(e=>{t({msg:e.message})})});l.add([{name:"__ah",url:a.default.config("getBackgroundImageUrl")}]),t.default={ctor(){let e=this;e.on("rendercall",()=>{delete e.__ai})},request(e){e=e||a.default.guid("r");let t=new l;return this.capture(e,t,!0),t},fetch(e,t){let i=JSON.stringify(e);this.request(i).all(e,t)},save(e,t){let i=this,a=JSON.stringify(e);i.lock(a,()=>{i.request(a+"_request").save(e,t)})},lock(e,t){this.__ai||(this.__ai={});let i=this.__ai;i[e]||(i[e]=t,t())},unlock(e){let t=this.__ai;t&&delete t[e]}}}),define("designer/stage-clipboard",["magix","./stage-elements","./stage-select"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./stage-elements"),s=e("./stage-select");let o=e=>{if(Array.isArray(e)){let t=[];for(let i of e)t.push(o(i));e=t}else if("Object"==a.default.type(e)){let t={};for(let i in e)t[i]=o(e[i]);e=t}return e};t.default={__ak(){return(this.__aj||[]).length},__al(){return this.__aj||[]},__am(){let e=[],t=a.State.get("__O");for(let i of t)e.push(i);this.__aj=e},__ao(){let e=a.State.get("__O");1==e.length&&e[0].props.locked||(this.__am(),this.__an=!0)},__ar(e){let t=this,i=t.__aj,r=a.State.get("__N"),n=!1;if(i){n=!0;let d=[],p=0,_=0,c=0,u=e=>{for(let t of r)if(t.props.x==e.x&&t.props.y==e.y)return 1;return 0},h=t=>{if(0===p)if(e)_=t.x-e.x,c=t.y-e.y,t.x=e.x,t.y=e.y;else{let e=t.x,i=t.y;for(;u(t);)t.x+=20,t.y+=20;for(t.x+t.width<0&&(t.x=-t.width/2),t.y+t.height<0&&(t.y=-t.height/2);u(t);)t.x-=4,t.y-=4;_=e-t.x,c=i-t.y}else t.x-=_,t.y-=c};for(let e of i){let i=o(e),s=i.props;h(s),s.locked=!1,p++,i.id=a.default.guid("e_"),r.push(i),d.push(i),t.__an&&l.default.__ap(e.id,!0)}t.__an&&(delete t.__an,delete t.__aj),a.State.fire("__i"),s.default.__aq(d)}return n}}}),define("designer/stage-elements",["magix","./stage-select","./history","../gallery/mx-pointer/cursor","../util/transform"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./stage-select"),s=e("./history"),o=e("../gallery/mx-pointer/cursor"),r=e("../util/transform");let n=(e,t)=>{let i=e.start,a=e.end,l=t.start,s=t.end,o=((a.x-i.x)*(l.y-i.y)-(a.y-i.y)*(l.x-i.x))*((a.x-i.x)*(s.y-i.y)-(a.y-i.y)*(s.x-i.x)),r=((s.x-l.x)*(i.y-l.y)-(s.y-l.y)*(i.x-l.x))*((s.x-l.x)*(a.y-l.y)-(s.y-l.y)*(a.x-l.x));return o<0&&r<0};t.default={__L(e,t){let i=a.State.get("__G");if(i){let s=a.State.get("__N"),o=i.getProps(e.pageX,e.pageY),r=a.State.get("__c");o.width*=r,o.height*=r;let n={id:a.default.guid("e_"),ctrl:i,type:i.type,props:o};return s.push(n),t&&l.default.__as(n),s}},__av(e,t){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!t.props.locked){let e=a.State.get("__O"),i=!1;for(let a=e.length;a--;){let l=e[a];l.id==t.id&&(i=!0),l.props.locked&&e.splice(a,1)}if(i&&e.length>1)return void(l.default.__at(t)&&s.default.__t());l.default.__au(t)&&s.default.__t()}}else l.default.__as(t)&&s.default.__t()},__ax(e,t){let{element:i}=e.params,r=a.State.get("__O");if(void 0===e.button||0==e.button)if(e.shiftKey||e.ctrlKey||e.metaKey)this.__av(e,i);else{o.default.__aw("move");let n=[],d=!1;for(let e of r)i.id==e.id&&(d=!0),n.push({x:e.props.x,y:e.props.y});d||(l.default.__as(i)&&s.default.__t(),n.length=0,n.push({x:i.props.x,y:i.props.y}),r.length=0,r.push(i));let p=!1;a.State.fire("__j",{show:1}),t.__x(e,t=>{let i=t.pageX-e.pageX,l=t.pageY-e.pageY,s=0;for(let e of r){let t=n[s++];if(!e.props.locked){p=!0,e.props.x=t.x+i,e.props.y=t.y+l;let s=a.Vframe.byNode(a.node(e.id));s&&s.invoke("assign",[{element:e}])&&s.invoke("render")}}a.State.fire("__k")},()=>{p&&s.default.__t(),o.default.__z(),a.State.fire("__j")})}else{let e=!1;for(let t of r)if(t.id===i.id){e=!0;break}e||l.default.__as(i)&&s.default.__t()}},__ay(){let e=a.State.get("__O"),t=a.State.get("__N"),i=!1;if(e.length){let s=a.toMap(e,"id");for(let e=t.length;e--;)s[t[e].id]&&(i=!0,t.splice(e,1));i&&l.default.__as()}return i},__aA(){let e,t,i=a.State.get("__N"),l=[];for(let a of i){if((e=a.props).locked)continue;t=e.rotate||0;let i={x:e.x,y:e.y,width:e.width,height:e.height},s=r.default.__az(i,t),o=s.point[0],n=s.point[2],d=s.point[6],p=s.point[4],_=o,c=o,u=o,h=o;for(let e of[n,d,p])e.x<_.x&&(_=e),e.x>u.x&&(u=e),e.y<c.y&&(c=e),e.y>h.y&&(h=e);l.push({element:a,left:_,top:c,right:u,bottom:h,points:[o,n,d,p],lines:[{start:o,end:n},{start:n,end:p},{start:p,end:d},{start:d,end:o}]})}return l},__aB(e,t,i){let a,l=[],s=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}];for(let o of e)if(a=!1,i&&i[o.element.id])i&&l.push(o.element);else{for(let e of o.points)if(e.x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height){l.push(o.element),a=!0;break}if(!a)for(let e of o.lines){for(let t of s)if(n(e,t)){a=!0,l.push(o.element);break}if(a)break}}return l},__ap(e,t){let i=a.State.get("__N");for(let t=i.length;t--;){e==i[t].id&&i.splice(t,1)}t||l.default.__aq()},__aD(){let e=a.State.get("__W"),t=a.State.get("__N"),i=[];for(let e of t)e.props.locked||i.push(e);l.default.__aq(i),l.default.__aC(e)&&s.default.__t()},__aE(e,t){let i=a.State.get("__N"),l=-1;for(let e=i.length;e--;){if(i[e].id===t.id){i.splice(l=e,1);break}}return 3==e?i.push(t):4==e?i.unshift(t):5==e?i.splice(l+1,0,t):6==e&&(0===l&&(l=1),i.splice(l-1,0,t)),!0},__aF(e){let t=a.State.get("__O"),i=a.State.get("__N"),s=t.length,o=t[0];if(0===s||s>1)o=i[e.shiftKey?0:i.length-1],l.default.__as(o);else{let t,a;for(let e=i.length;e--;){let l=i[e];if(l.id==o.id){t=i[e-1];break}a=l}let s=null;e.shiftKey?(t||(t=i[i.length-1]),s=t):(a||(a=i[0]),s=a),s.id!=o.id&&l.default.__as(s)}}}}),define("designer/stage-select",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default={__as(e){let t=a.State.get("__O"),i=t.length;if(i||e){let l=i>1?null:t[0];t.length=0;let s=!1;if(e?(t.push(e),s=e!=l):i&&(s=!0),s)return a.State.set({__W:a.toMap(t,"id")}),a.State.fire("__l"),!0}},__au(e){let t=a.State.get("__O"),i=!1;for(let a of t)if(a.id===e.id){i=!0;break}if(!i)return t.push(e),a.State.set({__W:a.toMap(t,"id")}),a.State.fire("__l"),!0},__at(e){let t=a.State.get("__O"),i=!1,l=-1;for(let a of t)if(l++,a.id===e.id){i=!0;break}if(i)return t.splice(l,1),a.State.set({__W:a.toMap(t,"id")}),a.State.fire("__l"),!0},__aq(e){let t=a.State.get("__O");t.length=0,e&&t.push.apply(t,e),a.State.set({__W:a.toMap(t,"id")}),a.State.fire("__l")},__aC(e){let t=a.State.get("__W"),i=0;for(let a in e)if(!t[a]){i=1;break}if(!i)for(let a in t)if(!e[a]){i=1;break}return i}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-select","./stage-clipboard","../util/converter","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-menu/index","./contextmenu"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../gallery/mx-dragdrop/index"),s=e("./history"),o=e("./keys"),r=e("./stage-elements"),n=e("./stage-select"),d=e("./stage-clipboard"),p=e("../util/converter"),_=e("../gallery/mx-pointer/select"),c=e("../gallery/mx-pointer/cursor"),u=e("../gallery/mx-menu/index"),h=e("./contextmenu");a.default.applyStyle("pd",".pai{outline:0;display:flex;position:relative}.paj{padding:50px 240px 50px 120px}.pak .paj{padding:0}.pal{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h,f,g,x=[],b=e.fullscreen,m=e.rx,y=e.ry,v=e.marginTop,w=e.marginLeft,k=e.page,A=e.scale,S=e.elements,M=e.id;f=[];for(let e=0,l=S,s=l.length;e<s;e++){let s=l[e];g=[t("div",{mxv:"elements,scale,fullscreen",id:s.id,"mx-view":"elements/"+s.type+"/designer?element="+o(a,s)+"&scale="+o(a,A)+"&fullscreen="+o(a,b),"mx-mousedown":i+"\x1e__aI({element:'"+o(a,s)+"'})"})],f.push(...g)}return _={class:"pal ph"},u="width:"+k.width*A+"px;height:"+k.height*A+"px;background:"+k.background+";",k.backgroundImage&&(u+="background-image:url("+k.backgroundImage+");background-repeat:"+("full"==k.backgroundRepeat?"no-repeat":k.backgroundRepeat)+";background-size:","full"==k.backgroundRepeat?u+="100% 100%":u+=k.backgroundWidth*A+"px "+k.backgroundHeight*A+"px;"),_.style=u,_.id="stage_canvas",h=[t("div",_,f)],u="",b&&(u+="transform:scaleX("+m+") scaleY("+y+");transform-origin:0 0;margin:"+v+"px 0 0 "+w+"px;"),(_={class:"paj"}).style=u,c=[t("div",_,h)],p="pai",b&&(p+=" pak"),(_={}).class=p,_.id="stage_outer",_["mx-contextmenu"]=i+"\x1e__B()",_["mx-mousedown"]=i+"\x1e__aK()",_.tabindex="0",_["mx-focusin"]=i+"\x1e__aM()",_["mx-focusout"]=i+"\x1e__aN()",_["mx-keydown"]=i+"\x1e__aL()",x.push(t("div",_,c),t("div",{id:"pole_"+M,style:"margin-top:-"+(k.height*A+100)+"px;display:none;"})),t(i,0,x)},mixins:[l.default],init(){let e=e=>{if(e.node){if(!a.default.inside(e.node,a.node("stage_outer")))return;{let t=p.default.__aG({x:e.pageX,y:e.pageY});e.pageX=t.x,e.pageY=t.y}}r.default.__L(e,!0)&&(a.State.fire("__i"),s.default.__t())},t=e=>{let t=a.State.get("__N");e?this.digest({elements:t}):this.set({elements:t})},i=0,l=e=>{if(e.step||e.fullscreen){let t=a.State.get("__N");if(e.fullscreen){let t=a.State.get("__d");if(e.full){let l=screen.width/t.width,s=screen.height/t.height,o=Math.min(l,s),r=0,n=0;"auto"==t.scaleType?(r=o,n=o):(r=l,n=s);let d=(screen.height-n*t.height)/2,p=(screen.width-r*t.width)/2,_=a.State.get("__c");1!=_?(e.step=1/_,i=_):i=0,a.State.set({__c:1}),this.set({rx:r,ry:n,marginTop:d,marginLeft:p})}else 0!=i&&(e.step=i,a.State.set({__c:i}));this.set({fullscreen:e.full})}if(e.step)for(let{props:i}of t)i.x*=e.step,i.y*=e.step,i.width*=e.step,i.height*=e.step;this.set({elements:t})}this.render()};a.State.on("__f",l),a.State.on("___",l),a.State.on("__a",l),a.State.on("__b",l),a.State.on("__d",e),a.State.on("__e",e),a.State.on("__i",t),a.State.on("__j",e=>{let t=this.root,i=a.node("pole_"+this.id).style;e.show?(i.width=t.scrollWidth+"px",i.height=t.scrollHeight+"px",i.display="block"):i.display="none"}),a.State.on("__c",e=>{a.default.inside(e.node,a.node("stage_outer"))?_.default.__aH(e.pageX,e.pageY,e.width,e.height):_.default.__z()}),t()},render(){let e=a.State.get("__d");this.digest({scale:a.State.get("__c"),page:e})},"__aI<mousedown>"(e){this.get("fullscreen")||r.default.__ax(e,this)},"__aK<mousedown>"(e){if(this.get("fullscreen"))return;let t=e.target;if("stage_canvas"==t.id||a.default.inside(a.node("stage_canvas"),t)){let t=null,i=0,l=a.State.get("__W");if(e.shiftKey){t={};let e=a.State.get("__O");for(let a of e)t[a.id]=1,i++}else n.default.__as();this.__aJ=i,_.default.__H();let o=0,d=r.default.__aA();this.__x(e,i=>{o||(o=1,c.default.__aw("default"));let a=Math.abs(e.pageX-i.pageX),l=Math.abs(e.pageY-i.pageY),s=Math.min(e.pageX,i.pageX),u=Math.min(e.pageY,i.pageY);_.default.__aH(s,u,a,l);let h=p.default.__aG({x:s,y:u});if(h.width=a,h.height=l,d.length){let e=r.default.__aB(d,h,t),i=e.length;i!==this.__aJ&&(this.__aJ=i,n.default.__aq(e))}},()=>{o&&(_.default.__z(),c.default.__z()),n.default.__aC(l)&&s.default.__t()})}},"__aL<keydown>"(e){if(!this.get("fullscreen"))if(e.metaKey||e.ctrlKey)e.keyCode==o.default.Z?(e.preventDefault(),e.shiftKey?s.default.__T():s.default.__S()):e.keyCode==o.default.Y?(e.preventDefault(),s.default.__T()):e.keyCode==o.default.A?(e.preventDefault(),r.default.__aD()):e.keyCode==o.default.X?(e.preventDefault(),d.default.__ao()):e.keyCode==o.default.C?(e.preventDefault(),d.default.__am()):e.keyCode==o.default.V&&(e.preventDefault(),d.default.__ar());else if(e.keyCode==o.default.TAB)e.preventDefault(),r.default.__aF(e);else if(e.keyCode==o.default.DELETE)e.preventDefault(),r.default.__ay()&&(a.State.fire("__i"),s.default.__t());else{let t=e.shiftKey?10:1;t*=a.State.get("__c");let i=a.State.get("__O");if(i.length){let l=!1;for(let s of i)if(!s.props.locked&&(e.keyCode==o.default.UP?(l=!0,s.props.y-=t):e.keyCode==o.default.DOWN?(l=!0,s.props.y+=t):e.keyCode==o.default.LEFT?(l=!0,s.props.x-=t):e.keyCode==o.default.RIGHT&&(l=!0,s.props.x+=t),l)){let e=a.Vframe.byNode(a.node(s.id));e&&e.invoke("assign",[{element:s}])&&e.invoke("render")}l&&(e.preventDefault(),a.State.fire("__k"),s.default.__t("___",500))}}},"__B<contextmenu>"(e){if(e.preventDefault(),a.default.inside(e.target,a.node("stage_canvas"))){let t=a.default.config("lang"),i=h.default.stage(t),l={},o=a.State.get("__N"),n=a.State.get("__O"),_=d.default.__ak();l[h.default.allId]=!o.length,l[h.default.pasteId]=!_;let c=n.length,f=n[0];if(1==c){i=h.default.singleElement(t);let e=o[o.length-1],a=o[0],s=e.id==f.id,r=a.id==f.id,n=f.props.locked;l[h.default.cutId]=n,l[h.default.upId]=n||s,l[h.default.topId]=n||s,l[h.default.bottomId]=n||r,l[h.default.downId]=n||r}else c>1&&(i=h.default.multipleElement(t));u.default.show(this,e,{list:i,disabled:l,picked(t){if(t.id==h.default.allId)r.default.__aD();else if(t.id==h.default.copyId)d.default.__am();else if(t.id==h.default.pasteId){let t=p.default.__aG({x:e.pageX,y:e.pageY});d.default.__ar(t)&&s.default.__t()}else t.id==h.default.cutId?d.default.__ao():t.id==h.default.deleteId?r.default.__ay()&&(a.State.fire("__i"),s.default.__t()):t.id>=3&&t.id<=6&&r.default.__aE(t.id,f)&&(a.State.fire("__i"),s.default.__t())}})}},"__aM<focusin>"(e){this.root.classList.remove("pah")},"__aN<focusout>"(){this.root.classList.add("pah")}})}),define("designer/toolbar-align",["magix","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u=[],h=e.elements,f=e.i18n,g=h.length;return u.push(t("i",{mxs:"pd:_",class:"pap"})),c=[t(0,0,"\ue70b")],p="px pan",g<2&&(p+=" paq"),(_={}).class=p,_.title=f("_l"),_["mx-click"]=i+"\x1e__aO({to:'left'})",u.push(t("i",_,c)),c=[t(0,0,"\ue711")],p="px pan",g<2&&(p+=" paq"),(_={}).class=p,_.title=f("_m"),_["mx-click"]=i+"\x1e__aO({to:'center'})",u.push(t("i",_,c)),c=[t(0,0,"\ue70c")],p="px pan",g<2&&(p+=" paq"),(_={}).class=p,_.title=f("_n"),_["mx-click"]=i+"\x1e__aO({to:'right'})",u.push(t("i",_,c)),c=[t(0,0,"\ue70d")],p="px pan",g<2&&(p+=" paq"),(_={}).class=p,_.title=f("_o"),_["mx-click"]=i+"\x1e__aO({to:'top'})",u.push(t("i",_,c)),c=[t(0,0,"\ue712")],p="px pan",g<2&&(p+=" paq"),(_={}).class=p,_.title=f("_p"),_["mx-click"]=i+"\x1e__aO({to:'middle'})",u.push(t("i",_,c)),c=[t(0,0,"\ue70e")],p="px pan",g<2&&(p+=" paq"),(_={}).class=p,_.title=f("_q"),_["mx-click"]=i+"\x1e__aO({to:'bottom'})",u.push(t("i",_,c)),t(i,0,u)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__l",e)},render(){this.digest({elements:a.State.get("__O")})},"__aO<click>"(e){if(e.eventTarget.classList.contains("paq"))return;let{to:t}=e.params,i=a.State.get("__O"),s=-Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,n=-Number.MAX_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER;for(let e of i){let i=a.node("mask_"+e.id).getBoundingClientRect();if("right"==t)i.right>s&&(s=i.right);else if("left"==t)i.left<o&&(o=i.left);else if("top"==t)i.top<r&&(r=i.top);else if("bottom"==t)i.bottom>n&&(n=i.bottom);else if("middle"==t){let e=(i.bottom-i.top)/2;i.top+e<d&&(d=i.top+e)}else if("center"==t){let e=(i.right-i.left)/2;i.left+e<p&&(p=i.left+e)}}let _=0;for(let e of i){let i=a.node("mask_"+e.id).getBoundingClientRect(),l=0;if("right"==t){let t=s-i.right;0!=t&&(_=1,l=1,e.props.x+=t)}else if("left"==t){let t=o-i.left;0!=t&&(_=1,l=1,e.props.x+=t)}else if("top"==t){let t=r-i.top;0!=t&&(_=1,l=1,e.props.y+=t)}else if("bottom"==t){let t=n-i.bottom;0!=t&&(_=1,l=1,e.props.y+=t)}else if("middle"==t){let t=d-(i.top+(i.bottom-i.top)/2);0!=t&&(_=1,l=1,e.props.y+=t)}else if("center"==t){let t=p-(i.left+(i.right-i.left)/2);0!=t&&(_=1,l=1,e.props.x+=t)}if(l){let t=a.Vframe.byNode(a.node(e.id));t&&t.invoke("assign",[{element:e}])&&t.invoke("render")}}_&&(a.State.fire("__k"),l.default.__t())}})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./stage-elements"),s=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u=[],h=e.elements,f=e.i18n,g=h.length;return u.push(t("i",{mxs:"pe:_",class:"pap"})),c=[t(0,0,"\ue600")],p="px pan",g<1&&(p+=" paq"),(_={}).class=p,_.title=f("__j")+"(Delete)",_["mx-click"]=i+"\x1e__aP()",u.push(t("i",_,c)),t(i,0,u)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__l",e)},render(){this.digest({elements:a.State.get("__O")})},"__aP<click>"(e){e.eventTarget.classList.contains("paq")||l.default.__ay()&&(a.State.fire("__i"),s.default.__t())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u=[],h=e.status,f=e.i18n;return c=[t(0,0,"\ue682")],_={},p="px pan",h.canUndo||(p+=" paq"),_.class=p,_.title=f("_r"),_["mx-click"]=i+"\x1e__aQ({s:'-',b:"+h.canUndo+"})",u.push(t("i",_,c)),c=[t(0,0,"\ue682")],_={},p="px pan pB",h.canRedo||(p+=" paq"),_.class=p,_.title=f("_s"),_["mx-click"]=i+"\x1e__aQ({s:'+',b:"+h.canRedo+"})",u.push(t("i",_,c)),t(i,0,u)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__h",e)},render(){this.digest({status:l.default.__Q()})},"__aQ<click>"(e){if(e.eventTarget.classList.contains("paq"))return;let{s:t,b:i}=e.params;i&&("-"==t?l.default.__S():l.default.__T())}})}),define("designer/toolbar-layer",["magix","./history","./stage-elements"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./history"),s=e("./stage-elements");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h=[],f=e.elements,g=e.top,x=e.i18n,b=e.bottom;p="";let m=f.length;p+=" ";let y=f[0];return h.push(t("i",{mxs:"pg:_",class:"pap"})),u=[t(0,0,"\ue632")],c={},_="px pan",(1!=m||y.props.locked||g.id==y.id)&&(_+=" paq"),c.class=_,c.title=x("__f"),c["mx-click"]=i+"\x1e__aE({to:5})",h.push(t("i",c,u)),u=[t(0,0,"\ue607")],c={},_="px pan",(1!=m||y.props.locked||g.id==y.id)&&(_+=" paq"),c.class=_,c.title=x("__h"),c["mx-click"]=i+"\x1e__aE({to:3})",h.push(t("i",c,u)),u=[t(0,0,"\ue632")],c={},_="px pan pA",(1!=m||y.props.locked||b.id==y.id)&&(_+=" paq"),c.class=_,c.title=x("__g"),c["mx-click"]=i+"\x1e__aE({to:6})",h.push(t("i",c,u)),u=[t(0,0,"\ue607")],c={},_="px pan pA",(1!=m||y.props.locked||b.id==y.id)&&(_+=" paq"),c.class=_,c.title=x("__i"),c["mx-click"]=i+"\x1e__aE({to:4})",h.push(t("i",c,u)),t(i,0,h)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__i",e),a.State.on("__l",e),a.State.on("__m",e)},render(){let e=a.State.get("__N");this.digest({top:e[e.length-1],bottom:e[0],elements:a.State.get("__O")})},"__aE<click>"(e){if(e.eventTarget.classList.contains("paq"))return;let{to:t}=e.params,i=this.get("elements")[0];s.default.__aE(t,i)&&(a.State.fire("__i"),l.default.__t())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../panels/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_,c,u,h=[],f=e.panels,g=e.i18n;for(let e=0,a=f,l=a.length;e<l;e++){let l=a[e];u=[t(0,1,l.icon)],c={},_="px pan",l.opened&&(_+=" pao"),c.class=_,c["mx-click"]=i+"\x1e__aS({id:'"+r(l.id)+"'})",c.title=g(l.opened?"_t":"_u",l.title),p=[t("i",c,u)],h.push(...p)}return t(i,0,h)},init(){a.State.on("__n",()=>{this.render()})},render(){this.digest({panels:l.default.__aR()})},"__aS<click>"(e){let{id:t}=e.params;l.default.__aS(t)}})}),define("designer/toolbar-scale",["magix","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_=[],c=e.i18n,u=e.scale;return p=[t(0,0,"\ue602")],_.push(t("i",{class:"px pan","mx-click":i+"\x1e__aT({s:'-'})",title:c("_v")},p)),p=[t(0,0,100*u+"%")],_.push(t("b",{class:"par"},p)),p=[t(0,0,"\ue699")],_.push(t("i",{class:"px pan","mx-click":i+"\x1e__aT({s:'+'})",title:c("_w")},p)),t(i,0,_)},init(){let e=this.render.bind(this);a.State.on("__a",e),a.State.on("___",e)},render(){this.digest({scale:a.State.get("__c")})},"__aT<click>"(e){let{s:t}=e.params,i=this.get("scale"),s=i;"+"==t?(i+=.5)>5&&(i=5):(i-=.5)<.5&&(i=.5),s!=i&&(a.State.set({__c:i}),a.State.fire("__a",{step:i/s}),l.default.__t())}})}),define("designer/toolbar",["magix","./toolbar-do","./toolbar-align","./toolbar-layer","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,i)=>{e("./toolbar-do"),e("./toolbar-align"),e("./toolbar-layer"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pe",".pam{height:22px}.pan{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.pan:hover{background:#e6e6e6;color:#333}.pao,.pao:hover{background:#c4c4c4}.pap{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.paq{color:#aaa;cursor:not-allowed}.paq:hover{color:#aaa;background:transparent}.par{font-weight:400;font-size:14px;width:40px;display:inline-block;text-align:center}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,o,r,n,d)=>{let p,_=[];return p=[t("div",{class:"pam","mx-view":"designer/toolbar-do"}),t("div",{class:"pam","mx-view":"designer/toolbar-align"}),t("div",{class:"pam","mx-view":"designer/toolbar-layer"}),t("div",{class:"pam","mx-view":"designer/toolbar-del"})],_.push(t("div",{mxs:"pj:_",class:"pd pE pb"},p)),p=[t("div",{class:"pam","mx-view":"designer/toolbar-scale"}),t("i",{class:"pap"}),t("div",{class:"pam","mx-view":"designer/toolbar-panels"})],_.push(t("div",{mxs:"pj:a",class:"pe pb pE"},p)),t(i,0,_)},render(){this.digest()}})});