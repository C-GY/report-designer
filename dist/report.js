(function(e,t){if(!e.seajs){var i=e.seajs={version:"2.2.3"},a=i.data={},s=F("Object"),l=F("String"),o=Array.isArray||F("Array"),r=F("Function"),n=F("Undefined"),p=0,d=a.events={};i.on=function(e,t){return(d[e]||(d[e]=[])).push(t),i},i.off=function(e,t){if(!e&&!t)return d=a.events={},i;var s=d[e];if(s)if(t)for(var l=s.length-1;l>=0;l--)s[l]===t&&s.splice(l,1);else delete d[e];return i};var _,c=i.emit=function(e,t){var a,s=d[e];if(s)for(s=s.slice();a=s.shift();)a(t);return i},u=/[^?#]*\//,h=/\/\.\//g,f=/\/[^\/]+\/\.\.\//,g=/([^:\/])\/\//g,x=/^([^\/:]+)(\/.+)$/,m=/{([^{]+)}/g,b=/^\/\/.|:\//,y=/^.*?\/\/.*?\//,v=document,w=B(v.URL),k=v.scripts,A=v.getElementById("seajsnode")||k[k.length-1],S=B(((_=A).hasAttribute?_.src:_.getAttribute("src",4))||w);i.resolve=function(e,t){if(!e)return"";var i,s,o;e=function(e){var t=a.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(m,function(e,i){return l(t[i])?t[i]:e})),e}(e=function(e){var t,i=a.paths;return i&&(t=e.match(x))&&l(i[t[1]])&&(e=i[t[1]]+t[2]),e}(e=function(e){var t=a.alias;return t&&l(t[e])?t[e]:e}(e))),s=(i=e).length-1;var n=U(e="#"===(o=i.charAt(s))?i.substring(0,s):".js"===i.substring(s-2)||i.indexOf("?")>0||".css"===i.substring(s-3)||"/"===o?i:i+".js",t);return n=function(e){var t=a.map,i=e;if(t)for(var s=0,l=t.length;s<l;s++){var o=t[s];if((i=r(o)?o(e)||e:e.replace(o[0],o[1]))!==e)break}return i}(n)};var M,z,E=v.head||v.getElementsByTagName("head")[0]||v.documentElement,$=E.getElementsByTagName("base")[0],j=/\.css(?:\?|$)/i,T=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;i.request=function(e,t,i,s){var l=j.test(e),o=v.createElement(l?"link":"script");i&&(o.charset=i),n(s)||o.setAttribute("crossorigin",s),function(e,t,i,s){var l="onload"in e;function o(){e.onload=e.onerror=e.onreadystatechange=null,i||a.debug||E.removeChild(e),e=null,t()}!i||!T&&l?l?(e.onload=o,e.onerror=function(){c("error",{uri:s,node:e}),o()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&o()}:setTimeout(function(){!function e(t,i){var a,s=t.sheet;if(T)s&&(a=!0);else if(s)try{s.cssRules&&(a=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(a=!0)}setTimeout(function(){a?i():e(t,i)},20)}(e,t)},1)}(o,t,l,e),l?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),M=o,$?E.insertBefore(o,$):E.appendChild(o),M=null};var I,P=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,C=/\\\\/g,L=i.cache={},O={},N={},X={},Y=H.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};H.prototype.resolve=function(){for(var e=this.dependencies,t=[],i=0,a=e.length;i<a;i++)t[i]=H.resolve(e[i],this.uri);return t},H.prototype.load=function(){if(!(this.status>=Y.LOADING)){this.status=Y.LOADING;var e=this.resolve();c("load",e);for(var t,i=this._remain=e.length,a=0;a<i;a++)(t=H.get(e[a])).status<Y.LOADED?t._waitings[this.uri]=(t._waitings[this.uri]||0)+1:this._remain--;if(0!==this._remain){var s={};for(a=0;a<i;a++)(t=L[e[a]]).status<Y.FETCHING?t.fetch(s):t.status===Y.SAVED&&t.load();for(var l in s)s.hasOwnProperty(l)&&s[l]()}else this.onload()}},H.prototype.onload=function(){this.status=Y.LOADED,this.callback&&this.callback();var e,t,i=this._waitings;for(e in i)i.hasOwnProperty(e)&&((t=L[e])._remain-=i[e],0===t._remain&&t.onload());delete this._waitings,delete this._remain},H.prototype.fetch=function(e){var t=this.uri;this.status=Y.FETCHING;var s={uri:t};c("fetch",s);var l=s.requestUri||t;function o(){i.request(s.requestUri,s.onRequest,s.charset,s.crossorigin)}l&&!N[l]?O[l]?X[l].push(this):(O[l]=!0,X[l]=[this],c("request",s={uri:t,requestUri:l,onRequest:function(){delete O[l],N[l]=!0,I&&(H.save(t,I),I=null);var e,i=X[l];delete X[l];for(;e=i.shift();)e.load()},charset:r(a.charset)?a.charset(l):a.charset,crossorigin:r(a.crossorigin)?a.crossorigin(l):a.crossorigin}),s.requested||(e?e[s.requestUri]=o:o())):this.load()},H.prototype.exec=function(){var e=this;if(e.status>=Y.EXECUTING)return e.exports;e.status=Y.EXECUTING;var t=e.uri;function i(e){return H.get(i.resolve(e)).exec()}i.resolve=function(e){return H.resolve(e,t)},i.async=function(e,a){return H.use(e,a,t+"_async_"+R()),i};var a=e.factory,s=r(a)?a(i,e.exports={},e):a;return void 0===s&&(s=e.exports),delete e.factory,e.exports=s,e.status=Y.EXECUTED,c("exec",e),s},H.resolve=function(e,t){var a={id:e,refUri:t};return c("resolve",a),a.uri||i.resolve(a.id,t)},H.define=function(e,t,i){var a,s,l=arguments.length;1===l?(i=e,e=void 0):2===l&&(i=t,o(e)?(t=e,e=void 0):t=void 0),!o(t)&&r(i)&&(a=i.toString(),s=[],a.replace(C,"").replace(P,function(e,t,i){i&&s.push(i)}),t=s);var n={id:e,uri:H.resolve(e),deps:t,factory:i};if(!n.uri&&v.attachEvent){var p=function(){if(M)return M;if(z&&"interactive"===z.readyState)return z;for(var e=E.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var i=e[t];if("interactive"===i.readyState)return z=i}}();p&&(n.uri=p.src)}c("define",n),n.uri?H.save(n.uri,n):I=n},H.save=function(e,t){var i=H.get(e);i.status<Y.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=Y.SAVED)},H.get=function(e,t){return L[e]||(L[e]=new H(e,t))},H.use=function(t,i,a){var s=H.get(a,o(t)?t:[t]);s.callback=function(){for(var t=[],a=s.resolve(),l=0,o=a.length;l<o;l++)t[l]=L[a[l]].exec();i&&i.apply(e,t),delete s.callback},s.load()},H.preload=function(e){var t=a.preload,i=t.length;i?H.use(t,function(){t.splice(0,i),H.preload(e)},a.cwd+"_preload_"+R()):e()},i.use=function(e,t){return H.preload(function(){H.use(e,t,a.cwd+"_use_"+R())}),i},H.define.cmd={},e.define=H.define,i.Module=H,a.fetchedList=N,a.cid=R,i.require=function(e){var t=H.get(H.resolve(e));return t.status<Y.EXECUTING&&(t.onload(),t.exec()),t.exports};var V,D;a.base=(S.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",S])[1],a.dir=S,a.cwd=w,a.charset="utf-8",a.history={},a.preload=(V=[],D=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(D+=" "+v.cookie).replace(/(seajs-\w+)=1/g,function(e,t){V.push(t)}),V),i.config=function(e){for(var t in e){var l=e[t],r=a[t];if(a.history[t]=a.history[t]||[],a.history[t].push(W(l)),r&&s(r))for(var n in l)r[n]=l[n];else o(r)?l=r.concat(l):"base"===t&&("/"!==l.slice(-1)&&(l+="/"),l=U(l)),a[t]=l}return c("config",e),i}}function F(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function R(){return p++}function B(e){return e.match(u)[0]}function U(e,t){var i,s=e.charAt(0);if(b.test(e))i=e;else if("."===s)i=function(e){for(e=e.replace(h,"/");e.match(f);)e=e.replace(f,"/");return e=e.replace(g,"$1/")}((t?B(t):a.cwd)+e);else if("/"===s){var l=a.cwd.match(y);i=l?l[0]+e.substring(1):e}else i=a.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function H(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function W(e){if(s(e)){var t={};for(var i in e)t[i]=e[i];return t}return e}})(this),define("magix",()=>{let e=e=>Object.prototype.toString.call(e).slice(8,-1),t=t=>i=>e(i)==t,i=t("Object"),a=t("Array"),s=(e,t,i)=>{let a=x.createEvent("Events");a.initEvent(t,!0,!0);for(let e in i)a[e]=i[e];e.dispatchEvent(a)},l=(e,t)=>{if(!t||!e||1!==e.nodeType)return 0;return(e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector).call(e,t)},o=e=>e._mx||(e._mx=z("e")),r={},n=()=>!0,p=()=>!1,d={preventDefault:"isDefaultPrevented",stopPropagation:"isPropagationStopped"},_=(e,t,i,a)=>{let s=o(e),l=r[s]||(r[s]=[]),_={a:i&&i.i,b:a,c:t,d(t){t=(e=>{if(!e.isDefaultPrevented){for(let t in d){let i=d[t],a=e[t];e[t]=((...t)=>(e[i]=n,a&&a.apply(e,t))),e[i]=p}(void 0!==e.defaultPrevented?e.defaultPrevented:"returnValue"in e?!1===e.returnValue:e.getPreventDefault&&e.getPreventDefault())&&(e.isDefaultPrevented=n)}return e})(t),a.call(e,t,i)}};l.push(_),e.addEventListener(t,_.d,i&&i.m)},c=(e,t)=>{e.eventTarget=t.e,D(t.f,e,t.v)},u=(e,t,i,a,s)=>{a?((e,t,i,a)=>{let s=o(e),l=r[s];if(l){let s;for(let e,o=l.length;o--;)if((e=l[o]).c==t&&e.b===a){let t=e.a;if(!i||i&&i.i==t){s=e,l.splice(o,1);break}}s&&e.removeEventListener(t,s.d,i&&i.m)}})(e,t,s,i):_(e,t,s,i)},h=0,f=[],g=window,x=document,m=g.setTimeout;function b(){}let y,v=JSON.stringify,w="\x1e",k="prototype",A=/[#?].*$/,S=/([^=&?\/#]+)=?([^&#?]*)/g,M=/(?!^)=|&/,z=e=>(e||"mx_")+h++,E={rootId:z(),error(e){throw e}},$=e=>"object"==typeof e?e:x.getElementById(e),j=e=>!e||"object"!=typeof e,T=(e,t,i)=>{if(e=$(e),t=$(t),e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},{assign:I,keys:P,hasOwnProperty:C}=Object,L=document.head,O=document.createElement("div"),N=O.getAttribute,X=(e,t)=>N.call(e,t),Y=(e,t)=>{t&&!Y[e]&&(Y[e]=1,O.innerHTML=`<style>${t}`,L.appendChild(O.firstChild))},V=e=>X(e,"id")||(e.id=z()),D=(e,t,i,s,l)=>{for(l of(t=t||f,a(e)||(e=[e]),a(t)||(t=[t]),e))try{s=l&&l.apply(i,t)}catch(e){E.error(e)}return s},F=(e,t)=>e&&C.call(e,t),R=(e,t)=>{let i,a;if(j(t))(i=t+"")[0]==w&&F(e,i)&&(t=e[i]);else for(i in t)a=t[i],a=R(e,a),t[i]=a;return t},B=(e,t)=>t.f-e.f||t.t-e.t;function U(e,t,i,a){(a=this).c=[],a.b=t||5,a.x=a.b+(e||20),a.r=i}I(U[k],{get(e){let t=this.c[w+e];return t&&(t.f++,t.t=h++,t=t.v),t},each(e,t,i,a,s){for(s of(i=this).c)e(s.v,t,i)},set(e,t){let i=this,a=i.c,s=w+e,l=a[s],o=i.b;if(!l){if(a.length>=i.x)for(a.sort(B);o--;)(l=a.pop()).f>0&&i.del(l.o);l={o:e},a.push(l),a[s]=l}l.v=t,l.f=1,l.t=h++},del(e){e=w+e;let t=this.c,i=t[e],a=this.r;i&&(i.f=-1,i.v="",delete t[e],a&&D(a,i.o))},has(e){return F(this.c,w+e)}});let H=(e,t)=>{if(e){let i,s=[];if(g.seajs)seajs.use(e,(...e)=>{for(let t of e)s.push(t&&t.__esModule&&t.default||t);t&&t(...s)});else{for(i of(a(e)||(e=[e]),e))i=require(i),s.push(i&&i.__esModule&&i.default||i);t&&t(...s)}}else t()};function W(){}let G=(e,t,i,a,s)=>(W[k]=t[k],s=new W,I(s,i),I(e,a),s.constructor=e,e[k]=s,e),q=e=>e;let K,Q=new U,J=(e,t,i)=>{try{i=decodeURIComponent(i)}catch(e){}K[t]=i},Z=e=>{let t,i=Q.get(e);return i||(K={},t=e.replace(A,""),e==t&&M.test(t)&&(t=""),e.replace(t,"").replace(S,J),Q.set(e,i={a:t,b:K})),{path:i.a,params:Object.assign({},i.b)}},ee=(e,t)=>{let i,a={};if(e)for(i of e)a[t&&i?i[t]:i]=t?i:1+(0|a[i]);return a},te=new U,ie=(e,t,i)=>(te.has(e)?i=te.get(e):(i=D(Function(`return ${e}`)),e.indexOf(w)>-1?R(t,i):te.set(e,i)),i),ae={config:(e,t)=>(t=E,e&&(t=i(e)?I(t,e):t[e]),t),boot(e){I(E,e),H(E.exts,()=>{ue().mountView(E.defaultView)})},toMap:ee,toTry:D,toUrl:(e,t,i)=>{let a,s,l,o=[];for(s in t)a=t[s]+"",(!i||a||F(i,s))&&(a=encodeURIComponent(a),o.push(l=s+"="+a));return l&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+o.join("&")),e},parseUrl:Z,mix:I,has:F,keys:P,inside:T,node:$,applyStyle:Y,guid:z,Cache:U,use:H,dispatch(e,t,i){s($(e),t,i)},match:l,type:e,nodeId:V,guard:q},se={fire(e,t,i,a){let s,l,o,r,n=this,p=n[w+e];if(t||(t={}),t.type=e,p)for(l=(s=p.length)-1;s--;)(r=p[o=a?s:l-s]).f?(r.x=1,D(r.f,t,n),r.x=""):r.x||(p.splice(o,1),l--);return(p=n[`on${e}`])&&D(p,t,n),i&&n.off(e),n},on(e,t){let i=w+e;return(this[i]||(this[i]=[])).push({f:t}),this},off(e,t){let i,a=w+e,s=this,l=s[a];if(t){if(l)for(i of l)if(i.f==t){i.f="";break}}else delete s[a],delete s[`on${e}`];return s}};ae.Event=se;let le,oe,re={},ne=Object.assign({get(e){let t=e?re[e]:re;return t},set(e,t){return I(re,e),this}},se);ae.State=ne;let pe={},de=e=>{if(!e.$a&&!e.$b&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));let{id:t,pId:i}=e,a=pe[i];a&&!F(a.$d,t)&&(a.$d[t]=1,a.$rc++,de(a))}},_e=(e,t)=>{if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);let{id:i,pId:a}=e,s=pe[a];s&&F(s.$d,i)&&(s.$rc--,delete s.$d[i],_e(s,t))}},ce=(e,t,i,a)=>{a=(a=(a=pe[e])&&a.$v)?a.$a:{},t.indexOf(w)>0&&R(a,i)},ue=(e,t)=>(le||(y=x.body,e=E.rootId,$(e)||(y.id=e),le=new xe(e)),le),he=(e,t)=>{F(pe,e)||(pe[e]=t,xe.fire("add",{vframe:t}))},fe=(e,t,i)=>{for(t=e.$e;t.length;)(i=t.shift()).r||e.invoke(i.n,i.a),delete t[i.k]},ge=[];function xe(e,t,i){(i=this).id=e,i.$c={},i.$cc=0,i.$rc=0,i.$f=i.$f||1,i.$d={},i.$e=[],i.pId=t,he(e,i)}I(xe,{all:()=>pe,get:e=>pe[e]},se),I(xe[k],se,{mountView(e,t){let i,a,s,l,o,r=this,n=r.id,p=$(n),d=r.pId;!r.$g&&p&&(r.$g=1,r.$h=p.innerHTML),r.unmountView(),r.$a=0,i=Z(e||""),s=i.path,p&&s&&(r.path=e,l=i.params,ce(d,e,l),r.$i=i.path,I(l,t),a=r.$f,H(s,e=>{if(a==r.$f){if(!e)return E.error(Error(`id:${n} cannot load:${s}`));o=He(e),s=new e(n,r,l,o),r.$v=s,Fe(s),D(s.init,l,s),s.$f(),s.tmpl||(r.$g=0,s.$g||s.endUpdate())}}))},unmountView(){let e,t,i=this,{$v:a,id:s}=i;i.$e=[],a&&(oe||(t=1,oe={id:s}),i.$a=1,i.unmountZone(0,1),_e(i,oe),i.$v=0,a.$b>0&&(a.$b=0,delete we[s],delete ke[s],a.fire("destroy",0,1,1),Ye(a,1),Fe(a,1),a.owner=0),a.$b--,(e=$(s))&&i.$g&&(e.innerHTML=i.$h),t&&(oe=0)),i.$f++},mountVframe(e,t,i){let a,s=this,l=s.id,o=s.$c;return _e(s,{id:e}),(a=pe[e])||(F(o,e)||(s.$j=0,s.$cc++),o[e]=e,(a=ge.pop())?xe.call(a,e,l):a=new xe(e,l)),a.mountView(t,i),a},mountZone(e,t){let i,a,s=this,l=[],o=(e=>x.querySelectorAll(e))(`#${e=e||s.id} [mx-view]`);for(i of(s.$b=1,o))i.$a||(a=V(i),i.$a=1,l.push([a,X(i,"mx-view")]));for([a,i]of l)s.mountVframe(a,i);s.$b=0,t||de(s)},unmountVframe(e,t){let i;if(e=e?this.$c[e]:this.id,i=pe[e]){let{$cr:a,pId:s}=i;i.unmountView(),((e,t,i)=>{(i=pe[e])&&(delete pe[e],xe.fire("remove",{vframe:i,fcc:t}),(e=$(e))&&(e.$a=0))})(e,a),i.id=i.pId=i.$c=i.$d=0,i.$g=0,i.off("alter"),i.off("created"),ge.push(i),(i=pe[s])&&F(i.$c,e)&&(delete i.$c[e],i.$j=0,i.$cc--,t||de(i))}},unmountZone(e,t){let i,a=this;for(i in a.$c)(!e||i!=e&&T(i,e))&&a.unmountVframe(i,1);t||de(a)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=pe[t.pId];return t},children(e){return(e=this).$j||(e.$j=P(e.$c))},invoke(e,t){let i,a,s,l,o,r=this.$e;return(a=this.$v)&&a.$g?i=(s=a[e])&&D(s,t,a):((l=r[o=w+e])&&(l.r=t===l.a),l={n:e,a:t,k:o},r.push(l),r[o]=l),i}}),ae.Vframe=xe;let me=new U(30,10),be=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,ye={},ve={},we={},ke={},Ae=0,Se=(e,t)=>{let i,a,s,o,r,n,p=[],d=e,_=X(e,`mx-${t}`),c=[],u="#",h=0;if(_&&((r=me.get(_))||(r={v:(r=_.match(be)||f)[1],n:r[2],i:r[3]},me.set(_,r)),r=Object.assign({},r,{r:_})),r&&!r.v||ve[t]){if((s=ke[a=d.$b])&&1==s[d.$d]&&(n=1,u=a),!n){for(c.push(d);d!=y&&(d=d.parentNode);){if(pe[a=d.id]||(s=ke[a=d.$b])&&1==s[d.$d]){u=a;break}c.push(d)}for(_ of c)(a=ke[u])||(a=ke[u]={}),a[s=_.$d||(_.$d=++Ae)]=1,_.$b=u}d=e.id,pe[d]&&(h=u=d);do{if((i=pe[u])&&(n=i.$v)){if(o=(s=n.$so)[t])for(d=o.length;d--;)s={r:a=o[d],v:u,n:a},a?!h&&l(e,a)&&p.push(s):h&&p.unshift(s);if(n.tmpl&&!h)break;h=0}}while(i&&(u=i.pId))}return r&&p.push(r),p},Me=e=>{let t,i,a,s,l,o,r,n,{target:p,type:d}=e,_=[];for(;p!=y;){if((t=Se(p,d)).length){_=[];for(let{v:i,r:_,n:c,i:u}of t){if(r!=i){if(r&&e.isPropagationStopped())break;r=i}(s=(a=pe[i])&&a.$v)?s.$g&&(o=s[l=c+w+d])&&(e.eventTarget=p,n=u?ie(u,s.$a):{},e.params=n,D(o,e,s)):e.stopPropagation()}}if((i=we[o=p.$b])&&(i=i[p.$d])&&i[d]||e.isPropagationStopped()){_.length&&_.push(o);break}r=p.id,pe[r]&&_.push(r),_.push(p),p=p.parentNode||y}if(o=_.length)for(i="#";o--;)(s=_[o]).nodeType?((t=we[i])||(t=we[i]={}),(n=t[r=s.$d||(s.$d=++Ae)])||(n=t[r]={}),n[d]=1):i=s},ze=(e,t,i)=>{let a=0|ye[e],s=i?-1:1;a&&i!==a||u(y,e,Me,i),ye[e]=a+s,t&&(ve[e]=(0|ve[e])+s)},Ee=(e,t,i,a)=>{let s;if(e){i=i||{};let l,o,r,n,p,d,_="",c={},u="<"+e,h="",f=[];if(t)for(n of t)r=n.a,n.b==je&&(r||(r=" "),r=Qe(r)),h+=r,d&&n.b==je&&d.b==je?d.a+=n.a:(n.d&&(c[n.d]=(c[n.d]||0)+1),(n.e||$e[n.b])&&(l=1),d=n,f.push(n));for(o in i)!1!==(r=i[o])&&null!=r?(!0===r&&(r=""),"id"==o?_=r:"mx-view"==o&&r&&!_?_=Z(r).path:"mxs"!=o||_?"mxv"==o&&(l=1):_=r,"x-html"==o?(h=r,f=[{b:w,a:r}],delete i[o]):(i[o]=r,u+=` ${o}="${Qe(r)}"`)):delete i[o];p=u,s={a:u+=a?"/>":`>${h}</${e}>`,c:h,d:_,b:e,e:l,f:p,g:i,h:f,i:c,j:a}}else s={b:je,a:t+""};return s},$e={input:["value","checked"],textarea:["value"],option:["selected"]};let je=h;let Te=(e,t,i)=>{1==t.nodeType&&(i=V(t),e.$c[i]?e.unmountVframe(i,1):e.unmountZone(i,1))},Ie={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Pe=(e,t,i,a)=>{let s,l,o=i.g,r=t.g;if(t)for(s in r)F(o,s)||("id"==s?a.d.push([e,""]):(a.c=1,e.removeAttribute(s)));for(s in o)l=o[s],t&&r[s]===l||("id"==s?a.d.push([e,l]):(a.c=1,e.setAttribute(s,l)))},Ce=(e,t,i)=>{let a,s=e.b;return s==je?a=x.createTextNode(e.a):(a=x.createElementNS(Ie[s]||t.namespaceURI,s),Pe(a,0,e,i),e.c&&(a.innerHTML=e.c)),a},Le=(e,t,i,a,s,l)=>{if(t){if(t.e||t.c!=i.c){let o,r,n,p,d=0,_=t.h,c=i.h,u=_.length,h=c.length,f=i.i,g=e.childNodes,x={},m=0,b=0;for(o=u;o--;)(p=(r=_[o]).d)&&(p=x[p]||(x[p]=[])).push(g[o]);for(o=0;o<h;o++){if(n=c[o],r=_[b],(p=x[n.d])&&(p=p.pop())){for(;p!=g[m];)e.appendChild(g[m]),_.push(_[b]),_.splice(b,1),r=_[b];f[r.d]&&f[r.d]--,Oe(p,e,r,n,a,s,l)}else r?x[r.d]&&f[r.d]?(u++,a.c=1,e.insertBefore(Ce(n,e,a),g[m]),b--):Oe(g[m],e,r,n,a,s,l):(e.appendChild(Ce(n,e,a)),a.c=1);b++,m++}for(o=h;o<u;o++)d=g[h],Te(s,d),e.removeChild(d)}}else a.c=1,e.innerHTML=i.c},Oe=(e,t,i,a,s,l,o)=>{let r=i.g,n=a.g;if(((e,t,i)=>{let a,s,l=t.b,o=$e[l],r=i.g,n=0;if(o)for(a of o)s=F(r,a)?"value"!=a||r[a]:"value"==a&&"",e[a]!=s&&(n=1,e[a]=s);return n})(e,i,a)||i.e||i.a!=a.a)if(i.b==a.b){if(i.b==je)s.c=1,e.nodeValue=a.a;else if(i.b==w)s.c=1,t.innerHTML=a.a;else if(!r.mxs||r.mxs!=n.mxs){let t,p,d,_,c,u,h,f=n["mx-view"],g=a.c,x=i.f!=a.f,m=pe[e.id],b=f&&Z(f);if(x&&Pe(e,i,a,s),f&&m&&m.$i==b.path&&r.id==n.id&&(_=m.$v)){if(u=g!=i.c,h=f!=m.path,d=r.mxv,!u&&!h&&d)for(d of c=d.split(","))if("#"==d||F(o,d)){h=1;break}(h||u||x)&&((d=_.$g&&_.$h)?(c=b.params,ce(m.pId,f,c),m.path=f,b={node:e,attr:x,deep:!_.tmpl,inner:u,query:h},D(d,[c,b],_)&&s.v.push(_),t=b.deep):(p=1,t=1))}else t=1,p=m;p&&(s.c=1,m.unmountVframe(0,1)),t&&!a.j&&Le(e,i,a,s,l,o)}}else i.b==w&&(t.innerHTML=" ",e=t.firstChild),Te(l,e),a.b==w?t.innerHTML=a.a:t.replaceChild(Ce(a,t,s),e),s.c=1},Ne=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Xe=(e,t,i)=>(e.a?i=e:((i=function(e){D(i.a,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i),Ye=(e,t)=>{let i,a,s=e.$r;for(i in s)a=s[i],(t||a.x)&&Ve(s,i,1)},Ve=(e,t,i,a)=>{let s,l,o=e[t];return o&&o!=a&&((s=(l=o.e).destroy)&&i&&D(s,f,l),delete e[t]),l},De=(e,t,i,a,s)=>{a=e[t],e[t]=e[i]=function(...e){(s=this).$b>0&&(s.$b++,s.fire("rendercall"),Ye(s),D(a,e,s))}},Fe=(e,t)=>{let i,{$eo:a,$so:s,$el:l,id:o}=e;for(i in a)ze(i,s[i],t);for(i of l)u(i.e,i.n,c,t,{i:o,v:e,f:i.f,m:i.m,e:i.e})},Re={win:g,doc:x},Be=(e,t,i)=>{let a,s,l,o,r={};for(s of e)for(a in s)l=s[a],o=r[a],"ctor"!=a?(Ne.test(a)&&(o?l=Xe(o,l):l.b=1),r[a]=l):i.push(l);for(a in r)F(t,a)||(t[a]=r[a])};function Ue(...e){let t=this._||(this._=[]);return Be(e,this[k],t),this}let He=e=>{if(!e[w]){e[w]=[];let t,i,a,s,l,o,r,n,p,d,_,c=e[k],u={},h=[],f={};for(r in(i=c.mixins)&&Be(i,c,e[w]),c)if(t=c[r],i=r.match(Ne)){if([,o,a,s,_]=i,d={},_)for(n of _=_.split(","))d[n]=!0;for(n of s=s.split(",")){if(l=Re[a],p=1,o){if(l){h.push({f:t,e:l,n:n,m:d});continue}p=2,(l=f[n])||(l=f[n]=[]),l[a]||(l[a]=1,l.push(a))}u[n]=u[n]|p,(l=c[n=a+w+n])?l.b&&(t.b?c[n]=Xe(t,l):F(c,r)&&(c[n]=t)):c[n]=t}}De(c,"render","$f"),c.$eo=u,c.$el=h,c.$so=f,c.$h=c.assign}return e[w]};let We={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Ge=/[&<>"'\`]/g,qe=e=>""+(null==e?"":e),Ke=e=>`&${We[e]};`,Qe=e=>qe(e).replace(Ge,Ke),Je=(e,t,i,a)=>{for(a=e[w];--a;)if(e[i=w+a]===t)return i;return e[i=w+e[w]++]=t,i},Ze={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},et=e=>Ze[e],tt=/[!')(*]/g,it=e=>encodeURIComponent(qe(e)).replace(tt,et),at=/[\\'"]/g,st=e=>qe(e).replace(at,"\\$&"),lt=(e,t)=>{let i,l,o=e.$i,r=e.$j,n=e.id,p=pe[n],d={d:[],v:[],n:[]},_=$(n),c=e.$d,u=e.$a,h=i=>{t.i<t.length?lt(updater,t):(d=t.slice(),t.i=t.length=0,i&&e.fire("domready"),D(d))};if(t.i=t.length,e.$j=0,e.$i={},r&&e.$b>0&&(i=e.tmpl)){for(l of(e.fire("dompatch"),delete we[n],delete ke[n],l=i(c,Ee,n,u,qe,it,Je,st,a,I),Le(_,e.$n,l,d,p,o),e.$n=l,d.d))l[0].id=l[1];for(l of(p.$b=i=d.c||!e.$g,d.v))l.$f();i&&e.endUpdate(n),d.c&&s(x,"htmlchanged",{vId:n}),h(1)}else h()};function ot(e,t,i,a){(a=this).owner=t,a.id=e,a.$r={},a.$b=1,a.$j=1,a.$d={id:e},a.$a={[w]:1},a.$e=[],a.$i={},(e=ot._)&&D(e,i,a)}I(ot,{merge:Ue,extend:function e(t,i){let a=this,s=(t=t||{}).ctor,l=[];function o(e,t,i,s,r,n,p){a.call(n=this,e,t,i,s),(r=o._)&&D(r,i,n),(p=l.concat(s)).length&&D(p,i,n)}return s&&l.push(s),o.merge=Ue,o.extend=e,G(o,a,t,i)}}),I(ot[k],se,{init:b,beginUpdate(e,t){(t=this).$b>0&&t.$g&&t.owner.unmountZone(e,1)},endUpdate(e,t,i,a,s){(i=this).$b>0&&(e=e||i.id,t?s=t:(s=i.$g,i.$g=1),(a=i.owner).mountZone(e,t),s||m(i.wrapAsync(fe),0,a))},wrapAsync(e,t){let i=this,a=i.$b;return(...s)=>{if(a>0&&a==i.$b)return e.apply(t||i,s)}},capture(e,t,i,a){return a=this.$r,t?(Ve(a,e,1,t),a[e]={e:t,x:i}):t=(a=a[e])&&a.e,t},release(e,t){return Ve(this.$r,e,t)},render:b,get(e,t){return t=this.$d,e&&(t=t[e]),t},set(e,t){let i=this;return i.$j=((e,t,i,a)=>{let s,l,o,r=0;for(o in e)s=e[o],l=t[o],j(s)&&l===s||F(a,o)||(i[o]=1,r=1),t[o]=s;return r})(e,i.$d,i.$i,t)||i.$j,i},digest(e,t,i){let a=this.set(e,t),s=a.$e;i&&s.push(i),s.i||lt(a,s)}}),ae.View=ot;let rt=Date.now;function nt(){this.id=z("b"),this.$={}}I(nt[k],{get(t,i){let s,l=this.$;if(t){let e,i=a(t)?t.slice():(t+"").split(".");for(;(e=i.shift())&&l;)l=l[e];e&&(l=void 0)}return void 0!==i&&(s=e(i))!=e(l)&&(l=i),l},set(e,t){i(e)||(e={[e]:t}),I(this.$,e)}});function pt(e,t,i){(i=this[e])&&(delete this[e],D(i,t,i.e))}let dt=(e,t,i,a,s,l)=>{let o=[],r=null,n=0;return function(p,d){n++;let _,c,u=this,h=u.$b,f=h.k;if(o[p+1]=u,d?(r=d,_=1):l.has(f)||(f&&l.set(f,u),h.t=rt(),(c=h.a)&&D(c,u,u),(c=h.x)&&t.clear(c),_=1),!i.$d){let t=n==a;t&&(i.$e=0,2==s&&(o[0]=r,D(e,o,i))),1==s&&D(e,[d||null,u,t,p],i)}_&&t.fire("end",{bag:u,error:d})}},_t=(e,t,i,s,l)=>{if(e.$d)return e;if(e.$e)return e.enqueue(_t.bind(e,e,t,i,s,l));e.$e=1,a(t)||(t=[t]);let o=e.constructor,r=0,n=o.$f,p=dt(i,o,e,t.length,s,o.$c);for(let e of t)if(e){let t,i=o.get(e,l),a=i.e,s=a.$b.k,d=p.bind(a,r++);s&&n[s]?n[s].push(d):i.u?(s&&((t=[d]).e=a,n[s]=t,d=pt.bind(n,s)),o.$s(a,d)):d()}return e};function ct(){let e=this;e.id=z("s"),e.$g=[]}I(ct[k],{all(e,t){return _t(this,e,t,2)},save(e,t){return _t(this,e,t,2,1)},one(e,t){return _t(this,e,t,1)},enqueue(e){let t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue(...e){let t,i=this;i.$e||i.$d||(i.$e=1,m(()=>{i.$e=0,i.$d||(t=i.$g.shift())&&D(t,i.$h=e)},0))},destroy(e){(e=this).$d=1,e.$g=0}});let ut=(e,t,i)=>[v(t),v(e)].join(w),ht=(e,t,i,a)=>{(a=e&&e.$b)&&t[a.n]&&i.del(a.k)},ft=Object.assign({add(e){let t,i=this.$b;for(t of(a(e)||(e=[e]),e))if(t){let{name:e,cache:a}=t;t.cache=0|a,i[e]=t}},create(e){let t=this.meta(e),a=0|e.cache||t.cache,s=new nt;s.set(t),s.$b={n:t.name,a:t.after,x:t.cleans,k:a&&ut(t,e)},i(e)&&s.set(e);let l=t.before;return l&&D(l,s,s),this.fire("begin",{bag:s}),s},meta(e){return this.$b[e.name||e]||e},get(e,t){let i,a,s=this;return t||(i=s.cached(e)),i||(i=s.create(e),a=1),{e:i,u:a}},clear(e){this.$c.each(ht,ee((e+"").split(",")))},cached(e){let t,i,a=this,s=a.$c,l=a.meta(e),o=0|e.cache||l.cache;if(o&&(i=ut(l,e)),i){let e=a.$f[i];e?t=e.e:(t=s.get(i))&&rt()-t.$b.t>o&&(s.del(i),t=0)}return t}},se);return ct.extend=((e,t,i)=>{function a(){ct.call(this)}return a.$s=e,a.$c=new U(t,i),a.$f={},a.$b={},G(a,ct,null,ft)}),ae.Service=ct,ae.default=ae,ae});let Designer={init(e){let t=document.getElementById("boot").src.replace("/report.js","");seajs.config({paths:{designer:t+"/designer",i18n:t+"/i18n",gallery:t+"/gallery",util:t+"/util",panels:t+"/panels",elements:t+"/elements"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("p_",'body,figure,h5,input,p,textarea,ul{margin:0;padding:0}ul{list-style-type:none;list-style-image:none}a{background-color:transparent}a:active,a:hover{outline-width:0}a:focus{outline:1px dotted}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.5}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h5{font-size:14px}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;cursor:pointer}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}a:focus,button:focus,input:focus,textarea:focus{outline:none;resize:none}a{color:#fa742b;text-decoration:none}a:focus,a:hover{color:#bd361b}a:active,a:focus,a:hover,a:visited{outline:0;text-decoration:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:pa;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.p_{font-family:pa;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pa{margin-right:10px}.pb{height:100%}.pc{text-align:center}.pd{float:left}.pe{float:right}html .pf{display:inline-block}.pg{position:absolute}.ph{position:relative}html .pi{display:none}.pj:after,.pj:before{content:" ";display:table}.pj:after{clear:both}.pk{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pl::-webkit-scrollbar,.pl::-webkit-scrollbar-corner{height:8px;width:8px;background:#fafafa}.pl::-webkit-scrollbar-thumb{background:silver}.pl::-webkit-scrollbar-thumb:hover{background:#949494}.pm{word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.pm,.pn{white-space:nowrap}.pn{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pn:focus,.pn:hover{background-color:#a0a0a0;color:#333}.po{background-color:#fa742b;color:#fff}.po:focus,.po:hover{background-color:#bd361b;color:#fff}.pn[disabled]{background-color:#fbfbfb}.pn[disabled]:hover{border-color:#e6e6e6}.pp{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143;background:#fff}.pq{padding:18px 25px}.pr{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6;background:#fff}.ps{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.ps:after,.ps:before{content:""}.ps:after,.ps:before,.pt{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:p_ 1s ease-in-out infinite both;animation:p_ 1s ease-in-out infinite both}.ps:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.pt{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}::-webkit-input-placeholder{color:#999}::-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(243,123,99,.6)}::selection{background-color:rgba(243,123,99,.6)}.pu,.pv{caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none;transition:border-color .25s}.pu:hover,.pv:hover{border-color:#ccc}.pu:focus,.pv:focus,.pw,.pw:hover{border-color:#fa742b!important}.pv{height:auto}.pu[disabled],.pv[disabled]{background-color:#fbfbfb}.pu[disabled]:hover,.pv[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}@font-face{font-family:pb;src:url(//at.alicdn.com/t/font_890516_ap3pgzsynl.eot);src:url(//at.alicdn.com/t/font_890516_ap3pgzsynl.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_ap3pgzsynl.woff) format("woff"),url(//at.alicdn.com/t/font_890516_ap3pgzsynl.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_ap3pgzsynl.svg#iconfont) format("svg")}.px{font-family:pb;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app,body,html{height:100%;overflow:hidden}body{min-width:900px}.py{font-size:12px}.pz{margin-right:2px}.pA{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pB{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.pC{margin-left:100px}.pD{margin-right:50px}.pE{display:flex;align-items:center}.pF{top:0}.pF,.pG{position:-webkit-sticky;position:sticky}.pG{bottom:0}');let a="zh-cn";try{let e=window.localStorage;e&&(a=e.getItem("l.report.lang")||a)}catch(e){}t.config(e),t.config({lang:a});let s=i.default;t.View.merge({ctor(){this.set({i18n:s})},__d_(e,t){t=t||150;let i,a=Date.now();return(...s)=>{let l=Date.now();clearTimeout(i),l-a>t?(a=l,e.apply(this,s)):i=setTimeout(()=>{e.apply(this,s)},t-(l-a))}}}),document.title=s("_k"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",error(e){setTimeout(()=>{throw e},0)}})})}};define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../mx-dragdrop/index"),l=e("../mx-monitor/index");a.default.applyStyle("pg",'.pax{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.pax:hover{border-color:#ccc}.pay,.paz{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}.paz{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.paA{cursor:not-allowed;background-color:#fbfbfb}.paA:hover{border-color:#e6e6e6}.paA .paz{opacity:.4}.paB{padding:3px 4px}.paz:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.paC{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.paD-bottom{top:100%;margin-top:4px}.paD-top{bottom:100%;margin-bottom:4px}.paE{width:176px}.paF{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.paG:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.paH{margin:5px 0;height:150px}.paI{position:relative;float:left;width:148px;height:148px}.paJ{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.paK{width:18px;height:148px;position:relative;float:left;margin-left:10px}.paL{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.paM{height:25px}.paN{width:80px}.paO,.paN{margin-right:5px;vertical-align:middle}.paO{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.paP{position:absolute;right:5px;top:3px;font-size:12px;opacity:.2}.paP:hover{opacity:.5}.pay{width:174px;height:12px;margin-bottom:5px}.paQ{height:100%}.paR{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}');let o=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],r=(e,t,i)=>{let a,s,l,o,r;e=e%360/60,a=s=l=i-(r=i*t);let n=255*(a+=[r,o=r*(1-Math.abs(e%2-1)),0,0,o,r][e=~~e]),p=255*(s+=[o,r,r,o,0,0][e]),d=255*(l+=[0,0,o,r,r,o][e]);return{r:n,g:p,b:d,hex:"#"+(16777216|d|p<<8|n<<16).toString(16).slice(1)}};t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x,m,b,y,v=[],w=e.disabled,k=e.id,A=e.text,S=e.textWidth,M=e.color,z=e.clear,E=e.i18n,$=e.placement,j=e.align,T=e.renderUI,I=e.shortcuts,P=e.alpha,C=e.current;if(c=[],A&&(f=[t(0,A)],h="",S&&(h+="width:"+S+"px"),(_={class:"paB pk"}).style=h,_["mx-click"]=i+"\x1e__bh()",u=[t("div",f,_)],c.push(...u)),u=[t(0,"picker")],h="",M&&(h+="background:"+M+";"),A||(h+="width:100%"),(_={class:"paz pk","mx-click":i+"\x1e__bh()"}).style=h,c.push(t("div",u,_)),z&&M&&(f=[t(0,"\ue67f")],u=[t("i",f,{class:"p_ paP","mx-click":i+"\x1e__bi()",title:E("_K")})],c.push(...u)),u=[],T){f=[],g=[];for(let e=0,a=I,s=a.length;e<s;e++){let s=a[e];x=[t("li",0,{class:"paF",id:"sc_"+s+"_"+k,style:"background:#"+s,"mx-click":i+"\x1e__be({color:'#"+r(s)+"'})"})],g.push(...x)}f.push(t("ul",g,{class:"paE pj",id:"scs_"+k})),(y=[t("stop",0,{mxs:"pm:_",offset:"0%","stop-color":"#000000","stop-opacity":"1"})]).push(t("stop",0,{mxs:"pm:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),b=[t("lineargradient",y,{id:"gb_"+k,x1:"0%",y1:"100%",x2:"0%",y2:"0%"})],(y=[t("stop",0,{mxs:"pm:b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})]).push(t("stop",0,{mxs:"pm:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),b.push(t("lineargradient",y,{id:"gw_"+k,x1:"0%",y1:"100%",x2:"100%",y2:"100%"})),(m=[t("defs",b)]).push(t("rect",0,{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+k+")"}),t("rect",0,{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+k+")"})),(x=[t("svg",m,{mxa:"pm:d",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"})]).push(t("div",0,{class:"paJ",id:"ci_"+k})),g=[t("div",x,{class:"paI",id:"cz_"+k,"mx-mousedown":i+"\x1e__ba()"})],(y=[t("stop",0,{mxs:"pm:c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"})]).push(t("stop",0,{mxs:"pm:d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),t("stop",0,{mxs:"pm:e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),t("stop",0,{mxs:"pm:f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),t("stop",0,{mxs:"pm:g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),t("stop",0,{mxs:"pm:h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),t("stop",0,{mxs:"pm:i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),t("stop",0,{mxs:"pm:j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),t("stop",0,{mxs:"pm:k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})),b=[t("lineargradient",y,{id:"ghsv_"+k,x1:"0%",y1:"100%",x2:"0%",y2:"0%"})],(m=[t("defs",b)]).push(t("rect",0,{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+k+")"})),(x=[t("svg",m,{mxa:"pm:f",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"})]).push(t("div",0,{class:"paL",id:"si_"+k})),g.push(t("div",x,{mxa:"pm:e",class:"paK","mx-mousedown":i+"\x1e__bb()"})),f.push(t("div",g,{mxa:"pm:c",class:"paH"})),P&&(m=[t("div",0,{class:"paR",id:"ai_"+k})],x=[t("div",m,{class:"paQ ph",id:"at_"+k,"mx-mousedown":i+"\x1e__bc()"})],g=[t("div",x,{mxa:"pm:h",class:"pay ph"})],f.push(...g)),(g=[t("span",0,{class:"paO",id:"bc_"+k})]).push(t("input",0,{class:"pu paN",readonly:!0,id:"v_"+k,value:C},1)),x=[t(0,"\u786e\u5b9a")],g.push(t("button",x,{mxs:"pm:l",class:"pn po",type:"button","mx-click":i+"\x1e__bd();"})),f.push(t("div",g,{mxa:"pm:i",class:"paM"})),u.push(...f)}return c.push(t("div",u,{id:"bd_"+k,class:"paC paD-"+$,style:j+":-1px"})),d="pax",w&&(d+=" paA"),(_={}).class=d,_["mx-contextmenu"]=i+"\x1e__B()",_.id="root_"+k,v.push(t("div",c,_)),t(i,v)},mixins:[s.default],init(e){this.set({shortcuts:o}),l.default.__aR(),this.on("destroy",()=>{l.default.__aF(this),l.default.__aS()}),this.assign(e)},assign(e){return this.__X=e.color,this.__aT=e.alpha+""=="true",this.__aU={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"}),!0},render(){this.digest({alpha:this.__aT,color:this.__X,current:this.__X})},__aX(e,t){let i=this,s=i.__aU;s.h=e.h,s.s=e.s,s.v=e.v;let l=r(e.h,e.s,e.v).hex,o=a.default.node("cz_"+i.id),n=o.clientWidth,p=r(e.h,1,1);if(o.style.background=p.hex,i.__aV=l,i.__aW(),!t){let e=a.node("scs_"+i.id).querySelector('li[class$="paG"]');e&&e.classList.remove("paG");let t=a.node("si_"+i.id),l=t.clientHeight/2,o=Math.round(s.h*n/360-l),r=a.node("ci_"+i.id),p=r.clientWidth/2;t.style.top=o+"px",o=Math.round((1-s.v)*n-p);let d=Math.round(s.s*n-p);r.style.left=d+"px",r.style.top=o+"px"}let d=a.node("sc_"+l.substr(1,6)+"_"+i.id);d&&d.classList.add("paG")},__b_(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let a=parseInt(e.substr(3,2),16);isNaN(a)&&(a=255);let s=parseInt(e.substr(5,2),16);isNaN(s)&&(s=255);let l=((e,t,i)=>{let a,s,l,o;return e/=255,t/=255,i/=255,{h:a=(a=0==(o=(l=Math.max(e,t,i))-Math.min(e,t,i))?null:l==e?(t-i)/o+(t<i?6:0):l==t?(i-e)/o+2:(e-t)/o+4)%6*60,s:s=0===o?0:o/l,v:l}})(i,a,s),o=parseInt(e.substr(7,2),16);isNaN(o)&&(o=255),t.__aY=("0"+o.toString(16)).slice(-2),t.__aX(l),t.__aT&&t.__aZ(o)},__aZ(e){let t=a.node("ai_"+this.id);e/=255,e*=a.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},__aW(){let e=this,t=a.node("bc_"+e.id),i=e.__aV;e.__aT&&(a.node("at_"+e.id).style.background="linear-gradient(to right, "+i+"00 0%,"+i+" 100%)",i+=e.__aY),t.style.background=i,a.node("v_"+e.id).value=i},"__B<contextmenu>"(e){e.preventDefault()},"__ba<mousedown>"(e){let t=this,i=a.node("cz_"+t.id).clientWidth,s=a.node("ci_"+t.id).clientWidth/2,l=e.eventTarget.getBoundingClientRect(),o=e.pageX-l.left-window.pageXOffset,r=e.pageY-l.top-window.pageYOffset,n=o/i,p=(i-r)/i;t.__aX({h:t.__aU.h,s:n,v:p});let d=a.node("ci_"+t.id),_=getComputedStyle(d),c=_.left,u=_.top,h=parseInt(c,10),f=parseInt(u,10),g=e;t.__x(e,e=>{let a=e.pageY-g.pageY,l=e.pageX-g.pageX;(a+=f)<=-s?a=-s:a>=i-s&&(a=i-s),(l+=h)<=-s?l=-s:l>=i-s&&(l=i-s),d.style.left=l+"px",d.style.top=a+"px";let o=(l+s)/i,r=(i-(a+s))/i;t.__aX({h:t.__aU.h,s:o,v:r})})},"__bb<mousedown>"(e){let t=this,i=e.eventTarget,s=a.node("si_"+t.id),l=a.node("cz_"+t.id).clientWidth,o=s.clientHeight/2,r=i.getBoundingClientRect(),n=(e.pageY-r.top-window.scrollY)/l*360;t.__aX({h:n,s:t.__aU.s,v:t.__aU.v});let p=parseInt(getComputedStyle(s).top,10);t.__x(e,i=>{let a=i.pageY-e.pageY;(a+=p)<=-o?a=-o:a>=l-o&&(a=l-o),s.style.top=a+"px";let r=(a+o)/l*360;t.__aX({h:r,s:t.__aU.s,v:t.__aU.v},!0)})},"__bc<mousedown>"(e){let t=e.eventTarget,i=this,s=a.node("ai_"+i.id),l=a.node("at_"+i.id).clientWidth,o=s.clientWidth/2,r=t.getBoundingClientRect(),n=(e.pageX-r.left)/l*255|0;i.__aY=("0"+n.toString(16)).slice(-2),i.__aZ(n),i.__aW();let p=getComputedStyle(s),d=parseInt(p.left,10);i.__x(e,t=>{let a=t.pageX-e.pageX;(a+=d)<=-o?a=-o:a>=l-o&&(a=l-o),s.style.left=a+"px";let r=Math.round((a+o)/l*255);i.__aY=("0"+r.toString(16)).slice(-2),i.__aW()})},"__bd<click>"(){let e=this;e.__z();let t=a.node("v_"+e.id).value;t!=e.__X&&(e.digest({color:t,current:t}),a.default.dispatch(e.id,"input",{color:e.__X=t}))},"__be<click>"(e){this.__b_(e.params.color),e.eventTarget.classList.add("paG")},__bf(e){return a.default.inside(e,this.id)},__y(){let e=a.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",l.default.__aE(this),a.node("root_"+this.id).classList.add("pw"),this.__bg||(this.digest({renderUI:!0},null,()=>{this.__b_(this.__X)}),this.__bg=1))},__z(){let e=a.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(a.node("root_"+this.id).classList.remove("pw"),e.style.display="none",l.default.__aF(this))},"__bh<click>"(){if(this.get("disabled"))return;let e=a.node("bd_"+this.id);"none"==getComputedStyle(e).display?this.__y():this.__z()},"__bi<click>"(){let e=this;if(e.__bg){let t=a.node("v_"+e.id).value;e.__z(),e.digest({color:"",current:t})}a.default.dispatch(e.id,"input",{color:e.__X=""})}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../i18n/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c=[],u=e.title,h=e.body,f=e.i18n;return _=[t(0,u)],d=[t("h5",_)],c.push(t("div",d,{mxa:"pn:_",class:"pp"})),d=[t(0,h)],c.push(t("div",d,{mxa:"pn:a",class:"pq",style:"word-break:break-all;"})),_=[t(0,f("_M"))],d=[t("button",_,{mxa:"pn:c","mx-click":i+"\x1e__bd();",class:"pn po pe",type:"button"})],c.push(t("div",d,{mxa:"pn:b",class:"pr pj"})),t(i,c)},init(e){this.__bj=e.dialog,this.__bk=e.body,this.__bl=e.title||s.default("__L"),this.__bm=e.enterCallback},render(){this.digest({body:this.__bk,title:this.__bl})},"__bd<click>"(){let e=this;e.__bj.close(),e.__bm&&a.default.toTry(e.__bm)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../i18n/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c=[],u=e.title,h=e.body,f=e.i18n;return _=[t(0,u)],d=[t("h5",_)],c.push(t("div",d,{mxa:"po:_",class:"pp"})),d=[t(0,h)],c.push(t("div",d,{mxa:"po:a",class:"pq",style:"word-break:break-all;"})),_=[t(0,f("_N"))],d=[t("button",_,{mxa:"po:c",type:"button","mx-click":i+"\x1e__bo()",class:"pn pe"})],_=[t(0,f("_M"))],d.push(t("button",_,{mxa:"po:d",type:"button","mx-click":i+"\x1e__bd()",class:"pn po pa pe"})),c.push(t("div",d,{mxa:"po:b",class:"pr pj"})),t(i,c)},init(e){let t=this;t.__bj=e.dialog,t.__bk=e.body,t.__bl=e.title||s.default("__L"),t.__bm=e.enterCallback,t.__bn=e.cancelCallback},render(){this.digest({body:this.__bk,title:this.__bl})},"__bd<click>"(){let e=this;e.__bj.close(),e.__bm&&a.default.toTry(e.__bm)},"__bo<click>"(){let e=this;e.__bj.close(),e.__bn&&a.default.toTry(e.__bn)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");e("./alert"),e("./confirm"),a.default.applyStyle("ph",".paS{position:absolute}.paT{position:relative;background-color:#fff;border-radius:2px;border:1px solid #e6e6e6}.paU{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.paU:focus,.paU:hover{opacity:.5}.paV{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.paW{-webkit-filter:blur(3px);filter:blur(3px)}.paX{-webkit-animation:pc .3s;animation:pc .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.paY{position:absolute;right:10px;top:0;width:1px;height:0}.paZ{padding:80px 0}@-webkit-keyframes pc{0%{opacity:0}to{opacity:.2}}@keyframes pc{0%{opacity:0}to{opacity:.2}}.pb_{-webkit-animation:pd .2s;animation:pd .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd{0%{opacity:.2}to{opacity:0}}@keyframes pd{0%{opacity:.2}to{opacity:0}}.pba{margin-bottom:50px;min-height:60px}.pbb{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.pbc{-webkit-animation:pe .3s;animation:pe .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.pbd{-webkit-animation:pf .2s;animation:pf .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let s=500,l=[];t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g=[],x=e.removeClass,m=e.zIndex,b=e.id,y=e.left,v=e.top,w=e.width,k=e.closable;return d="paV",x||(d+=" paX"),(_={}).class=d,_.style="z-index:"+(m-1),_.id="mask_"+b,g.push(t("div",0,_)),u=[t("input",0,{id:"focus_"+b,class:"paY"},1)],h=[t(0,"\ue67f")],u.push(t("span",h,{class:"p_ paU "+(k?"":"pi"),"mx-click":i+"\x1e__bq()"})),f=[t("span",0,{class:"pt"})],h=[t("div",f,{mxs:"pp:_",class:"ps paZ"})],u.push(t("div",h,{class:"paT pba",id:"cnt_"+b})),d="paS",x||(d+=" pbc"),(_={}).class=d,_.id="body_"+b,_.style="left:"+y+"px;top:"+v+"px;width:"+w+"px;",c=[t("div",u,_)],g.push(t("div",c,{class:"pbb",style:"z-index:"+m+";"})),t(i,g)},init(e){let t=this,i=a.default.node("app"),o=a.default.node(t.id);t.on("destroy",()=>{(e=>{for(let t,i=l.length-1;i>=0;i--)if((t=l[i]).id==e.id){l.splice(i,1);break}})(t),500==(s-=2)&&i.classList.remove("paW"),a.default.dispatch(o,"close"),o.parentNode.removeChild(o)}),a.default.has(e,"closable")||(e.closable=!0),t.set(e),500==s&&i.classList.add("paW"),s+=2,l.push(t)},render(){let e=this;e.digest({zIndex:s},null,()=>{let t=e.get();setTimeout(e.wrapAsync(()=>{a.default.node(e.id).style.display="block",a.default.node("focus_"+e.id).focus()}),30),e.owner.mountVframe("cnt_"+e.id,t.view,t),setTimeout(e.wrapAsync(()=>{e.digest({removeClass:!0})}),300)})},__bp(e){a.default.Vframe.get("cnt_"+this.id).invoke("fire",["unload",e])},"__bq<click>"(){a.default.dispatch(this.id,"dlg_close")},"$doc<keyup>"(e){if(27==e.keyCode){let e=l[l.length-1];e==this&&e.get("closable")&&a.default.dispatch(this.id,"dlg_close")}}},{__bs(e,t){let i=a.default.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+i+'" style="display:none" />');let s,l=e.owner.mountVframe(i,"gallery/mx-dialog/index",t),o=a.default.node(i);return o.addEventListener("dlg_close",()=>{if(!o.__br&&!s){let t=()=>{o.__br=1,(o=a.default.node("body_"+i)).classList.add("pbd"),(o=a.default.node("mask_"+i)).classList.add("pb_"),setTimeout(()=>{e.owner&&e.owner.unmountVframe(i)},200)},r={p:0,prevent(){s=1},resolve(){r.p=1,s=0,t()},reject(){r.p=1,s=0}};l.invoke("__bp",[r]),s||r.p||t()}}),o},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,a,s){this.mxDialog("gallery/mx-dialog/"+(s||"confirm"),{body:e,cancelCallback:i,enterCallback:t,title:a,modal:!0,width:300,closable:!1,left:(window.innerWidth-300)/2,top:Math.max((window.innerHeight-220)/2,0)})},mxDialog(e,t){let i,s,l=this,o={view:e};return a.default.use(e,l.wrapAsync(r=>{let n="$dlg_"+e;l[n]||(l[n]=1,a.default.mix(o,r.dialogOptions),a.default.mix(o,t),o.width||(o.width=500),o.left||(o.left=(window.innerWidth-o.width)/2),o.top||(o.top=100),o.dialog={close(){i&&a.default.dispatch(i,"dlg_close")}},(i=l.__bs(l,o)).addEventListener("close",()=>{delete l[n],s&&s()}))})),{close(){i&&a.default.dispatch(i,"dlg_close")},whenClose(e){s=e}}}})}),define("gallery/mx-dragdrop/index",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=window.getComputedStyle,s=e=>{(e=window.getSelection)&&e().removeAllRanges()},l=e=>{e.preventDefault()},o=["mousemove","touchmove","pointermove"],r=["mouseup","touchend","pointercancel","touchcancel"],n=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];t.default={ctor(){let e=this;e.on("destroy",()=>{e.__bt()})},__bt(e){let t=this,i=t.__bu;if(i){let a;for(a of(delete t.__bu,o))document.removeEventListener(a,t.__bv);for(a of r)document.removeEventListener(a,t.__bw);for(a of n)document.removeEventListener(a,l);window.removeEventListener("blur",t.__bw);let s=i.__bx;i.__by&&s(e)}},__x(e,t,i){let a=this;if(a.__bt(),e){s(),a.__bu={__bx:i,__by:!!i};let e,p=!!t;for(e of(a.__bz=0,a.__bw=(e=>{a.__bz=1,a.__bt(e)}),a.__bv=(e=>{p&&t(e)}),o))document.addEventListener(e,a.__bv);for(e of r)document.addEventListener(e,a.__bw);for(e of n)document.addEventListener(e,l);window.addEventListener("blur",a.__bw)}},__J(e,t){let i=null;if(document.elementFromPoint)for(!l.__bA&&a&&(l.__bA=!0,l.__bB=null!==document.elementFromPoint(-1,-1)),l.__bB&&(e+=window.pageXOffset,t+=window.pageYOffset),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},__bC:s}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../mx-monitor/index");a.default.applyStyle("pi",'.pbe{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.pbe:hover{border-color:#ccc}.pbf{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.pbg{cursor:not-allowed;background-color:#fbfbfb}.pbg:hover{border-color:#e6e6e6}.pbg .pbf{cursor:not-allowed}.pbh{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.pbi .pbh{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}.pbe[tabindex="0"]:focus,.pbi,.pbi:hover{border-color:#fa742b}.pbj{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.pbk{color:#999}.pbl{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pbi .pbl{display:block}.pbm{overflow:auto;max-height:196px;padding:2px 0}.pbn{padding:0 2px;margin:2px 0}.pbo{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.pbo:hover{color:#333;background-color:#f0f0f0}.pbp,.pbp:active,.pbp:focus,.pbp:hover{color:#fff;background-color:#fa742b}'),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x,m,b,y,v=[],w=e.disabled,k=e.id,A=e.selectedText,S=e.selected,M=e.emptyText,z=e.rList,E=e.list,$=e.textKey,j=e.valueKey;if(u=[],f=[t(0,A)],_="pbj",""!==S&&S!=M||(_+=" pbk"),(c={}).class=_,h=[t("span",f,c)],f=[t(0,"\ue692")],h.push(t("span",f,{mxs:"pq:_",class:"p_ pbh"})),u.push(t("div",h,{class:"pbf","mx-click":i+"\x1e__bh()",title:A})),z){x=[];for(let e=0,s=E,l=s.length;e<l;e++){let l=s[e];m=[];var T=l,I=l;$&&j&&(g="",T=l[$],g+=" ",I=l[j]);var P=I+""==S+"";y=[t(0,T)],_="pbo pm",P&&(_+=" pbp"),(c={}).class=_,c["mx-click"]=i+"\x1e__bD({item:'"+o(a,l)+"'})",b=[t("span",y,c)],m.push(t("li",b,{title:T,active:(d=P)?d:null,class:"pbn"})),x.push(...m)}f=[t("ul",x,{class:"pbm",id:"list_"+k})],h=[t("div",f,{mxa:"pq:a",class:"pbl"})],u.push(...h)}return _="pbe",w&&(_+=" pbg"),(c={}).class=_,c.id="dd_"+k,v.push(t("div",u,c)),t(i,v)},init(e){s.default.__aR(),this.on("destroy",()=>{s.default.__aF(this),s.default.__aS()}),this.assign(e)},assign(e){let t=e.selected,i=e.textKey||"",s=e.valueKey||"",l=e.emptyText||"",o=e.disabled+""=="true",r=e.list||[];r=r.slice();let n=a.default.toMap(r,s);if(l)if(i&&s){if(!n[""]){let e={};e[i]=l,e[s]="",r.unshift(e),n[""]=e}}else n[l]||(r.unshift(l),n[l]=l);t||!l||i||s||(t=l),t&&n[t]||(t=n[t]||r[0],i&&s&&(t=t[s]));let p=i&&s?n[t][i]:t;return this.set({selected:t,selectedText:p,list:r,textKey:i,valueKey:s,emptyText:l,disabled:o}),!0},render(){this.digest()},__bf(e){return a.default.inside(e,this.id)},__y(){let e=this,t=a.default.node("dd_"+e.id);if(!t.classList.contains("pbi")){t.classList.add("pbi");let i=()=>{let i=(t=a.default.node("list_"+e.id)).querySelector("li[active]");i&&i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded()};e.get("rList")?i():e.digest({rList:!0},null,i),s.default.__aE(e)}},__z(){let e=this,t=a.default.node("dd_"+e.id);t.classList.contains("pbi")&&(t.classList.remove("pbi"),s.default.__aF(e))},"__bh<click>"(){let e=this,t=a.default.node("dd_"+e.id);t.classList.contains("pbi")?e.__z():t.classList.contains("pbg")||e.__y()},"__bD<click>"(e){let t=this;t.__z();let i=t.get("valueKey"),s=t.get("textKey"),l=t.get("selected"),o=e.params.item,r=o,n=o;if(s&&i&&(n=o[s],r=o[i]),l!==r){t.digest({selected:r,selectedText:n});let e=a.default.node(t.id);a.default.dispatch(e,"change",{item:o,value:i?o[i]:o,text:s?o[s]:o})}}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../mx-monitor/index");a.default.applyStyle("pj",".pbq{z-index:400}.pbr{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.pbs{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 2px;margin:0 2px}.pbt{color:#fff;background-color:#fa742b}.pbu{height:1px;background:#eee;margin:4px 0}.pbv{color:#ccc;cursor:not-allowed}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x=[],m=e.width,b=e.id,y=e.list,v=e.disabled,w=e.textKey;_=[];for(let e=0,s=y,l=s.length;e<l;e++){let l=s[e];c=[],l.spliter?(u=[t("li",0,{class:"pbu"})],c.push(...u)):(g=[t(0,l[w])],f={},h="pm pbs ",v[l.id]&&(h+=" pbv"),f.class=h,f["mx-mouseover"]=i+"\x1e__bL({d:"+(v[l.id]||0)+"})",f["mx-mouseout"]=i+"\x1e__bL({d:"+(v[l.id]||0)+"});",f["mx-click"]=i+"\x1e__bD({item:'"+o(a,l)+"',d:"+(v[l.id]||0)+"})",f.title=l[w],u=[t("li",g,f)],c.push(...u)),_.push(...c)}return d=[t("ul",_,{mxa:"pr:_",class:"pbr pk"})],x.push(t("div",d,{style:"width:"+m+"px;position:absolute;left:-10000px;top:-10000px",class:"pbq",id:"cnt_"+b,"mx-contextmenu":i+"\x1e__B()"})),t(i,x)},init(e){let t=this;t.assign(e),s.default.__aR(),t.on("destroy",()=>{s.default.__aF(t),s.default.__aS()})},assign(e){let t=this,i=e.width||140,a=e.valueKey||"id",s=e.textKey||"text";return t.__bE=e.list,t.__bF=i,t.__bG=a,t.__bH=s,t.__bI=e.disabled||{},t.__bJ=e.picked,!0},render(){let e=this;e.digest({disabled:e.__bI,list:e.__bE,width:e.__bF,valueKey:e.__bG,textKey:e.__bH})},__bf(e){return a.default.inside(e,this.id)},__y(e){let t=this;if(!t.__bK){t.__bK=1;let i=a.node("cnt_"+t.id),l=i.clientWidth,o=i.clientHeight,r=e.pageX,n=e.pageY;r+l>window.innerWidth&&(r-=l)<0&&(r=0),n+o>window.innerHeight&&(n-=o)<0&&(n=0),i.style.left=r+"px",i.style.top=n+"px",s.default.__aE(t)}},__z(){let e=this;if(e.__bK){e.__bK=!1,a.node("cnt_"+e.id).style.left="-10000px",s.default.__aF(e)}},"__bL<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!a.default.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("pbt")},"__bD<click>"(e){if(e.params.d)return;this.__z();let t=this.__bJ;t&&t(e.params.item)},"__B<contextmenu>"(e){e.preventDefault()}},{show(e,t,i){let s="ctx_"+e.id,l=a.default.Vframe.get(s);l?(l.invoke("assign",[i]),l.invoke("render"),l.invoke("__y",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${s}"></div>`),(l=e.owner.mountVframe(s,"gallery/mx-menu/index",i)).invoke("__y",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=0,s=[],l=["mousedown","keyup","touchstart","pointerstart"],o=e=>{for(let t=s.length;t--;){let i=s[t];if(i.__bM)s.splice(t,1);else{let t=i.__bN;"resize"!=e.type&&t.__bf(e.target)||t.__z()}}},r=e=>{let t=s[e.id];t&&(t.__bM=!0),delete s[e.id]};t.default={__aE(e){r(e);let t={__bN:e};s.push(t),s[e.id]=t},__aF:r,__aR(){if(!a){for(let e of l)document.addEventListener(e,o);window.addEventListener("resize",o)}a++},__aS(){if(a>0&&!--a){for(let e of l)document.removeEventListener(e,o);window.removeEventListener("resize",o)}}}}),define("gallery/mx-number/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pk",'.pbw{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.pbx,.pby{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.pbx:hover,.pby:hover{background-color:#f0f0f0}.pby{top:1px}.pbx{bottom:1px}.pbz:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.pbx:after{border-top:4px solid #ccc}.pby:after{border-bottom:4px solid #ccc}.pbx.pbA,.pby.pbA{cursor:not-allowed;border-color:transparent}.pbx.pbA:hover,.pby.pbA:hover{background-color:transparent}'),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c=[],u=e.id,h=e.disabled;return c.push(t("input",0,{class:"pbw",id:"ipt_"+u,"mx-focusin":i+"\x1e__cg()","mx-focusout":i+"\x1e__ci()","mx-change":i+"\x1e__cf()","mx-keydown":i+"\x1e__cn()",disabled:!!h||null,autocomplete:"off","mx-input":i+"\x1e__co()"},1)),d="pby pbz pk",h&&(d+=" pbA"),(_={}).class=d,_["mx-click"]=i+"\x1e__cb({i:1})",_["mx-mousedown"]=i+"\x1e__cm({i:1})",_["mx-contextmenu"]=i+"\x1e__B()",c.push(t("span",0,_)),d="pbx pbz pk",h&&(d+=" pbA"),(_={}).class=d,_["mx-click"]=i+"\x1e__cb()",_["mx-mousedown"]=i+"\x1e__cm()",_["mx-contextmenu"]=i+"\x1e__B()",c.push(t("span",0,_)),t(i,c)},init(e){this.__bO=a.node(this.id),this.assign(e)},assign(e){let t=this,i=e.value,s=t.__bO;void 0===i&&(i=""),""!==i&&(i=+i);let l=t.__bP!==i,o=t.__bQ;return t.__bP=i,t.__bR=+e.step||1,t.__bS=e.empty+""=="true",t.__bT=e.format+""=="true",t.__bQ=s.hasAttribute("disabled"),t.__bU=a.default.has(e,"max")?+e.max:Number.MAX_VALUE,t.__bV=a.default.has(e,"min")?+e.min:-Number.MAX_VALUE,t.__bW=+e.ratio||10,t.__bX=e.fixed||0,l||o!=t.__bQ},render(){let e=this;e.digest({disabled:e.__bQ},null,()=>{e.__bY()})},__bY(){let e=this,t=e.__bP;""!==t&&(t=e.__bZ(t),e.__bT&&(t=t.toFixed(e.__bX))),e.__c_=a.node("ipt_"+e.id),e.__c_.value=t},__bZ(e){let t=this;if((e=+e)||0===e){let i=t.__bU,a=t.__bV;e>i?e=i:e<a&&(e=a),e=+e.toFixed(t.__bX)}return isNaN(e)?t.__bS?"":0:e},__ca(e,t){let i=this;if(""!==e||!i.__bS)return(e=i.__bZ(e))!==i.__bP&&(t||(i.__c_.value=e),a.default.dispatch(i.__bO,"input",{value:i.__bP=e})),i.__bP;a.default.dispatch(i.__bO,"input",{value:i.__bP=e})},__cb(e,t){let i=this.__bP;""===i&&(i=0);let a=this.__bR,s=i;t&&(a*=this.__bW),e?s+=a:s-=a,this.__ca(s)},__cc(){let e=this.__c_;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},__ce(){let e=this;e.__bO.classList.add("pw"),a.default.has(e,"__cd")||(e.__cd=e.__bP)},"__cf<change>"(e){e.stopPropagation()},"__cg<focusin>"(){this.__ce()},"__ci<focusout>"(e){let t=this;t.__ch||(t.__bO.classList.remove("pw"),t.__bY(),t.__cd!=t.__bP&&a.default.dispatch(t.__bO,"change",{value:t.__bP}),delete t.__cd)},"__cb<click>"(e){let t=this;t.__bQ||t.__cj||(t.__cb(e.params.i,e.shiftKey),t.__cc())},"__cm<mousedown>"(e){let t=this;if(!t.__bQ){t.__ch=!0,t.__ce();let i=e.params.i;t.__ck=setTimeout(t.wrapAsync(()=>{t.__cl=setInterval(t.wrapAsync(()=>{t.__cj=!0,t.__cb(i),t.__cc()}),50)}),300)}},"__cn<keydown>"(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();let t=this;if(!t.__bQ){let i=e.eventTarget.value;if(""===i)t.__bP="";else{let e=Number(i);(e||0===e)&&e!=t.__bP&&(t.__bP=e)}t.__cb(38==e.keyCode,e.shiftKey)}}},"__B<contextmenu>"(e){e.preventDefault()},"__co<input>"(e){e.stopPropagation();let t=e.eventTarget;this.__ca(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e.__ck),clearInterval(e.__cl),delete e.__ch,setTimeout(e.wrapAsync(()=>{delete e.__cj}),0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../mx-dialog/index");a.default.applyStyle("pl",".pbB{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer}.pbC{line-height:92px;text-align:center;color:#999}.pbD{min-height:500px}.pbE{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.pbE:hover{border-color:#999}.pbF{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.pbG{width:100px;margin:0 5px;height:25px}.pbH{margin:30px 0}.pbI{font-size:16px}.pbJ{position:absolute;right:3px;top:2px;opacity:.2}.pbJ:hover{opacity:.5}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h=[],f=e.src,g=e.i18n;return d=[],f?(u=[t(0,"\ue67f")],c=[t("i",u,{class:"p_ pbJ","mx-click":i+"\x1e__cs()",title:g("_O")})],_=[t("div",c,{class:"pbF",style:"background-image:url('"+f+"')"})],d.push(..._)):(c=[t(0,g("_P"))],_=[t("div",c,{mxa:"pt:c",class:"pbC"})],d.push(..._)),h.push(t("div",d,{mxa:"pt:_",class:"pbB ph","mx-click":i+"\x1e__cr()"})),t(i,h)},mixins:[s.default],init(e){this.assign(e),this.__cp=a.node(this.id)},assign(e){return this.set(e),!0},render(){this.digest()},"__cr<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,done(t){e.digest(t),e.__cq(t)}})},__cq(e){a.default.dispatch(this.__cp,"change",e)},"__cs<click>"(e){e.stopPropagation(),this.digest({src:""}),this.__cq({src:"",width:0,height:0})}})}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../designer/service"),l=e("../../i18n/index");t.default=a.default.View.extend({mixins:[s.default],tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f=[],g=e.i18n,x=e.error,m=e.list;if(_=[t(0,g("_R"))],d=[t("h5",_)],f.push(t("div",d,{mxa:"pu:_",class:"pp pF"})),d=[],x)c=[t(0,x.msg)],_=[t("div",c,{mxa:"pu:c",class:"pc pbH pbI"})],d.push(..._);else{_=[];for(let e=0,a=m,s=a.length;e<s;e++){let s=a[e];h=[t("div",0,{class:"pbF",style:"background-image:url('"+s.src+"')"})],u=[t("div",h,{class:"pbE","mx-click":i+"\x1e__cu({src:'"+r(s.src)+"'})"})],h=[t(0,s.title)],u.push(t("div",h,{mxa:"pu:e",class:"pc pbG pm"})),c=[t("div",u,{class:"pd",title:s.title})],_.push(...c)}d.push(..._)}return f.push(t("div",d,{mxa:"pu:a",class:"pq pj pbD"})),t(i,f)},init(e){this.__bj=e.dialog,this.__ct=e.done},render(){this.fetch("__a_",(e,t)=>{this.digest({error:e,list:t.get("data",[])})})},"__cu<click>"(e){let t=this,i=new Image,a=t.__ct,s=e.params.src;i.onerror=t.wrapAsync(()=>{t.alert(l.default("__Q"))}),i.onload=t.wrapAsync(()=>{let e=i.width,l=i.height;t.__bj.close(),a({src:s,width:e,height:l})}),i.src=s}})}),define("gallery/mx-pointer/cursor",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=a.default.guid("cursor_");a.default.applyStyle("pm",".pbK{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}"),t.default={__y(e){let t=getComputedStyle(e);this.__ai(t.cursor)},__ai(e){let t=a.node(s);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbK" id="${s}"/>`),t=a.node(s)),t.style.cursor=e,t.style.display="block"},__z(){a.node(s).style.display="none"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pn",".pbL{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000}");let s=a.default.guid("de_");t.default={__H(e){let t=a.node(s);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbL px" id="${s}"/>`),t=a.node(s)),t.innerHTML=e},__y(e){let t=a.node(s).style;t.left=e.pageX+10+"px",t.top=e.pageY+18+"px"},__z(){let e=a.node(s).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("po",".pbM{position:absolute;border:1px dashed #fa742b;display:none}");let s=a.default.guid("set_");t.default={__ag(){a.node(s)||document.body.insertAdjacentHTML("beforeend",`<div id="${s}" class="pbM"></div>`)},__H(e,t,i,l){let o=a.node(s).style;o.left=e+"px",o.top=t+"px",o.width=i+"px",o.height=l+"px",o.display="block"},__z(){a.node(s).style.display="none"}}}),define("gallery/mx-runner/fx",["magix","./index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./index");let l=e=>e,o=Date.now,r=function(e,t){let i=this;i.__cv&&!t||(t=t||l,i.__cv=((e,a)=>e+(a-e)*t(i.__cw/i.__cx))),i.__cy=[],i.__cz=e};a.default.mix(r.prototype,{__cE(e,t){let i=this;i.__bM||(i.__cy.push({__cA:e,__cB:t}),i.__cC||i.__cD())},__cD(){let e=this,t=e.__cy.shift();t?(e.__cx=t.__cA,e.__cF=t.__cB,e.__cG=o(),e.__cC||s.default.__cH(e.__cz,e.__cC=(t=>{e.__cw=Date.now()-e.__cG,e.__cw>e.__cx&&(e.__cw=e.__cx,t=1);try{e.__cF(e.__cv)}catch(e){t=e}t&&e.__cD()}))):e.__cI()},__cI(){let e=this;e.__cC&&(s.default.__cJ(e.__cC),delete e.__cC)},destroy(){this.__cI(),this.__cy=[],this.__bM=1}}),t.default={__cL(e,t){let i=new r(e,t);return this.capture(a.default.guid("__cK"),i),i}}}),define("gallery/mx-runner/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let s=window.requestAnimationFrame||(e=>setTimeout(e,16)),l=window.cancelAnimationFrame||clearTimeout,o=Date.now;t.default={__cy:[],__cH(e,t){this.__cy.push({i:e||15,f:t,n:o()}),this.__cD()},__cJ(e){let t=this.__cy;for(let i,a=0;a<t.length;a++)if(!(i=t[a]).r&&i.f==e){i.r=1;break}},__cD(){let e=this;if(!e.__cM){let t=()=>{let i=e.__cy;for(let e,t,s=0;s<i.length;s++)(e=i[s]).r?i.splice(s--,1):(t=o())-e.n>=e.i&&(e.n=t,a.default.toTry(e.f));i.length?e.__cM=s(t):(l(e.__cM),delete e.__cM)};e.__cM=s(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s={"zh-cn":e("./zh-cn").default},l=a.default.has,o=/\{(\d+)\}/g;t.default=((e,...t)=>{let i=(a.default.config("lang")||navigator.language).toLowerCase();l(s,i)||(i="zh-cn");let r=s[i],n=l(r,e)?r[e]:e;return t.length&&(n=n.replace(o,(e,i,a)=>(i|=0,t.length>i?(a=t[i],l(r,a)?r[a]:a):e))),n})}),define("i18n/zh-cn",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_k:"\u62a5\u8868\u8bbe\u8ba1\u5668",__L:"\u63d0\u793a",_M:"\u786e\u5b9a",_N:"\u53d6\u6d88",_w:"\u653e\u5927",_v:"\u7f29\u5c0f",__:"\u5220\u9664\u8f85\u52a9\u7ebf",_a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",_r:"\u64a4\u9500(Ctrl+Z)",_s:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",__S:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",__T:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",__U:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",__V:"\u5143\u7d20",__W:"\u5c5e\u6027",__X:"\u6570\u636e\u6e90",_u:"\u6253\u5f00{0}\u9762\u677f",_t:"\u5173\u95ed{0}\u9762\u677f",__Y:"\u5c55\u5f00{0}\u9762\u677f",__Z:"\u6298\u53e0{0}\u9762\u677f",_x:"\u6309\u4e0b\u62d6\u52a8\u65cb\u8f6c\u5143\u7d20",_y:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6",_z:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u9ad8\u5ea6",_A:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6\u548c\u9ad8\u5ea6",__a_:"\u7c7b\u578b\uff1a",__B:"X\u5750\u6807\uff1a",__C:"Y\u5750\u6807\uff1a",__D:"\u5bbd\uff1a",__E:"\u9ad8\uff1a",__F:"\u65cb\u8f6c\u89d2\u5ea6\uff1a",__G:"\u80cc\u666f\u989c\u8272\uff1a",__H:"\u6587\u5b57\u989c\u8272\uff1a",__b:"\u5168\u9009",__e:"\u7c98\u8d34",__c:"\u590d\u5236",__d:"\u526a\u5207",__j:"\u5220\u9664",__f:"\u4e0a\u79fb\u4e00\u5c42",__h:"\u79fb\u81f3\u9876\u5c42",__g:"\u4e0b\u79fb\u4e00\u5c42",__i:"\u79fb\u81f3\u5e95\u5c42",_l:"\u5de6\u5bf9\u9f50",_n:"\u53f3\u5bf9\u9f50",_o:"\u4e0a\u5bf9\u9f50",_q:"\u4e0b\u5bf9\u9f50",_p:"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50",_m:"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50",__Q:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",_O:"\u6e05\u9664\u56fe\u7247",_P:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",_R:"\u56fe\u7247\u5e93",_K:"\u6e05\u9664\u989c\u8272",__I:"\u5b57\u53f7\uff1a",__aa:"\u9875\u9762\u5bbd\u5ea6\uff1a",__ab:"\u9875\u9762\u9ad8\u5ea6\uff1a",__ac:"\u9875\u9762\u7f29\u653e\uff1a",__ad:"\u80cc\u666f\u56fe\u7247\uff1a",__ae:"\u80cc\u666f\u5e73\u94fa\uff1a",__af:"\u62c9\u4f38\u94fa\u6ee1",__ag:"\u539f\u59cb\u5c3a\u5bf8",__ah:"\u6a2a\u5411\u5e73\u94fa",__ai:"\u5782\u76f4\u5e73\u94fa",__aj:"\u53cc\u5411\u5e73\u94fa",__ak:"\u81ea\u9002\u5e94",__al:"\u5168\u5c4f\u94fa\u6ee1",__J:"\u9501\u5b9a\u7f16\u8f91\uff1a"}}),define("util/converter",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default={__ab({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e-=i.left,y:t-=i.top}},__cN({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e+=i.left,y:t+=i.top}}}}),define("util/transform",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7};t.default={__aH({x:e,y:t,width:i,height:a},s){let l=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/2,o=i?Math.round(180*Math.atan(a/i)/Math.PI):0,r=180-s-o,n=o-s,p=90-s,d=s,_=i/2,c=a/2,u=e+_,h=t+c,f={x:u+l*Math.cos(r*Math.PI/180),y:h-l*Math.sin(r*Math.PI/180)},g={x:u+c*Math.cos(p*Math.PI/180),y:h-c*Math.sin(p*Math.PI/180)},x={x:u+l*Math.cos(n*Math.PI/180),y:h-l*Math.sin(n*Math.PI/180)},m={x:u+_*Math.cos(d*Math.PI/180),y:h+_*Math.sin(d*Math.PI/180)},b={x:u-l*Math.cos(r*Math.PI/180),y:h+l*Math.sin(r*Math.PI/180)},y={x:u-c*Math.sin(d*Math.PI/180),y:h+c*Math.cos(d*Math.PI/180)},v={x:u-l*Math.cos(n*Math.PI/180),y:h+l*Math.sin(n*Math.PI/180)},w={x:u-_*Math.cos(d*Math.PI/180),y:h-_*Math.sin(d*Math.PI/180)},k=Math.min(f.x,x.x,b.x,v.x),A=Math.max(f.x,x.x,b.x,v.x),S=Math.min(f.y,x.y,b.y,v.y),M=Math.max(f.y,x.y,b.y,v.y);return{point:[f,g,x,m,b,y,v,w],width:A-k,height:M-S,left:k,right:A,top:S,bottom:M}},__aO(e,t){let i={},s={},l=a[t],o=0,r=l-4;return r<0&&(r=l+4),{current:{index:l,point:s=e[l]},opposite:{index:o=r,point:i=e.slice(r,r+1)[0]}}},__dd(e,t){let{x:i,y:a,width:s,height:l,scale:o}=e,r={x:0,y:0},n=s*(o.x-1),p=l*(o.y-1),d=s+n,_=l+p,c=i-n/2,u=a-p/2;if(t){let e=[{x:i,y:a},{x:i+s,y:a},{x:i+s,y:a+l},{x:i,y:a+l}],o=[{x:c,y:u},{x:c+d,y:u},{x:c+d,y:u+_},{x:c,y:u+_}];r.x=e[t].x-o[t].x,r.y=e[t].y-o[t].y}return{x:c+r.x,y:u+r.y,width:d,height:_}},__aP(e,t,i,a){let s=this.__dd({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),l=s.width,o=s.height,r=this.__aH(s,e.rotate),n=i.point[a].x-r.point[a].x+r.left,p=i.point[a].y-r.point[a].y+r.top;return{left:n+r.width/2-l/2,top:p+r.height/2-o/2,width:l,height:o}},__da({x:e,y:t,width:i,height:a},s){if(0==i)return{x:e,y:t};let l=e+i/2,o=t+a/2,r=Math.sqrt(i*i/2/2+a*a/2/2),n=180*Math.atan(a/i)/Math.PI+s+180;return{x:l+r*Math.cos(n*Math.PI/180),y:o+r*Math.sin(n*Math.PI/180)}}}}),define("panels/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let s=[{title:"__V",icon:"&#xe629;",width:100,height:120,left:25,top:90,show:!1,resizeY:!0,id:"p-elements",view:"panels/elements/index"},{title:"__W",icon:"&#xe7a1;",width:210,height:220,right:10,top:90,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"},{title:"__X",icon:"&#xe609;",width:200,height:120,show:!1,right:230,top:90,id:"p-data",view:"panels/data/index"}],l=a.default.toMap(s,"id");t.default={__V(){for(let e of s)e.show&&this.__cR(e.id,!0);a.State.fire("__m")},__cR(e,t){let i=l[e];if(!i.opened){if(i.opened=1,i.eId)a.node(i.eId).style.display="block";else{i.eId=a.default.guid("panel_"),a.node("app").insertAdjacentHTML("beforeend",`<div id="${i.eId}"></div>`);let e=a.Vframe.get(a.default.config("rootId"));i.close=(()=>{this.__cS(i.id)}),e.mountVframe(i.eId,"panels/panel",i)}if(!t){a.State.fire("__m"),a.Vframe.get(i.eId).invoke("__y")}}},__cS(e){let t=l[e];if(t.opened){t.opened=0,a.node(t.eId).style.display="none",a.State.fire("__m"),a.Vframe.get(t.eId).invoke("__z")}},__aC(e){l[e].opened?this.__cS(e):this.__cR(e)},__aB:()=>s}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../gallery/mx-pointer/cursor"),l=e("../gallery/mx-dragdrop/index");a.default.applyStyle("pq",".pbS{background:hsla(0,0%,100%,.93);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.pbT{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.pbU{padding:0 5px;cursor:move;width:calc(100% - 36px)}.pbV{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.pbV:hover{background:#e64e30}.pbW{overflow:hidden;transition:height .25s}.pbX{transition:none}.pbY{width:calc(100% - 2px);overflow:auto;float:left}.pbZ{width:2px;float:right;cursor:ew-resize}.pc_,.pbZ{background:#fafafa}.pc_{height:2px;cursor:ns-resize}.pca::-webkit-scrollbar,.pca::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}");let o=[],r={__aE(e){o.push(e)},__aF(e){for(let t=o.length;t--;)if(o[t]==e){o.splice(t,1);break}this.__cT()},__cT(){for(let e=o.length;e--;)o[e].__cU(300+e)},__cV(e){if(o[o.length-1]!=e){for(let t=o.length;t--;)if(o[t]==e){o.splice(t,1);break}o.push(e),this.__cT()}}};t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x=[],m=e.width,b=e.left,y=e.right,v=e.top,w=e.zIndex,k=e.id,A=e.i18n,S=e.icon,M=e.title,z=e.shrink,E=e.height,$=e.resizeX,j=e.view,T=e.resizeY;return(h=[t("i",0,{class:"px py pz","x-html":S})]).push(t(0,A(M))),u=[t("div",h,{class:"pbU pd",title:A("__S"),"mx-mousedown":i+"\x1e__cX()"})],g=[t(0,"\ue73a")],f="px pbV",z&&(f+=" pA"),(_={}).class=f,_["mx-click"]=i+"\x1e__cZ()",_.title=A(z?"__Y":"__Z",M),h=[t("i",g,_)],g=[t(0,"\ue635")],h.push(t("i",g,{class:"px pbV","mx-click":i+"\x1e__bq()",title:A("_t",M)})),u.push(t("div",h,{mxa:"px:a",class:"pe pE pb"})),c=[t("div",u,{mxa:"px:_",class:"pbT pk pj"})],(u=[]).push(t("div",0,{style:"width:"+($?"calc(100% - 2px)":"100%"),class:"pbY pl pca pb","mx-view":j})),$||(h=[t("div",0,{class:"pbZ pk pb",title:A("__T"),"mx-mousedown":i+"\x1e__aQ({w:1})"})],u.push(...h)),c.push(t("div",u,{class:"pbW",id:"c_"+k,style:"height:"+(z?0:`calc(100vh - ${E}px)`)})),f="pc_ pk",!z&&T||(f+=" pi"),(_={}).class=f,_.title=A("__U"),_["mx-mousedown"]=i+"\x1e__aQ({h:1})",c.push(t("div",0,_)),d="width:"+m+"px;",d+=0===b||b?"left:"+b:"right:"+y,(_={class:"pbS"}).style=d+="px;top:"+v+"px;z-index:"+w+";",_.id="p_"+k,_["mx-mousedown"]=i+"\x1e__cY()",x.push(t("div",c,_)),t(i,x)},mixins:[l.default],init(e){r.__aE(this),this.on("destroy",()=>{r.__aF(this)}),this.__cW=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,view:e.view,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+o.length})},"__cX<mousedown>"(e){let t=a.node("p_"+this.id).style,i=this.get("left"),l=this.get("width"),o=0;void 0===i&&(o=1,i=this.get("right"));let r=this.get("top"),n=o?"right":"left",p=0,d=e.eventTarget;this.__x(e,a=>{p||(p=1,s.default.__y(d));let _=(o?e.pageX-a.pageX:a.pageX-e.pageX)+i;_<0?_=0:_+l>window.innerWidth&&(_=window.innerWidth-l);let c=a.pageY-e.pageY+r;c<0?c=0:c+18>window.innerHeight&&(c=window.innerHeight-18),t[n]=_+"px",t.top=c+"px",this.set({[n]:_,top:c})},()=>{s.default.__z()})},"__aQ<mousedown>"(e){let{w:t}=e.params,i=this.get("width"),l=this.get("height"),o=this.get("right"),r=a.node("c_"+this.id);r.classList.add("pbX");let n=r.style,p=a.node("p_"+this.id).style,d=0,_=e.eventTarget;this.__x(e,a=>{if(d||(d=1,s.default.__y(_)),t){let t=a.pageX-e.pageX;t+i<100&&(t=100-i);let s=t+i;p.width=s+"px",(o||0===l)&&(p.right=o-t+"px",this.set({right:o-t})),this.set({width:s})}else{let t=e.pageY-a.pageY+l;n.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{s.default.__z(),r.classList.remove("pbX")})},__cU(e){a.node("p_"+this.id).style.zIndex=e},"__cY<mousedown>"(){r.__cV(this)},__y(){r.__cV(this)},__z(){},"__cZ<click>"(){this.digest({shrink:!this.get("shrink")})},"__bq<click>"(){let e=this.__cW;e&&a.default.toTry(e)}})}),define("panels/data/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d=[];return d.push(t(0,"data source panel")),t(i,d)},render(){this.digest()}})}),define("panels/elements/index",["magix","../../util/converter","../../designer/workspace"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../util/converter"),l=e("../../designer/workspace");a.default.applyStyle("pp",".pbN{padding:5px 2px}.pbO{display:flex;align-items:center;padding:0 2px;color:#333;height:22px;line-height:22px;cursor:pointer;margin:1px 0}.pbO:hover{background:#f0f0f0}.pbP,.pbP:hover{background:#c4c4c4}.pbQ{margin:0 4px 0 2px;font-size:12px}.pbR{border:2px solid #fa742b}");let o=a.default.guid("rp_"),r={__ag(){a.node(o)||document.body.insertAdjacentHTML("beforeend",`<div class="pg pbR" id="${o}"></div>`)},__y(e){let t=a.node(o).style,{props:i}=e,l=s.default.__cN(i);t.left=l.x+"px",t.top=l.y+"px",t.width=i.width+"px",t.height=i.height+"px",t.borderWidth=2*a.State.get("__c")+"px";let r=i.rotate||0;t.transform=`rotate(${r}deg)`},__z(){a.node(o).style.left="-10000px"}};t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g=[],x=e.elements,m=e.selectedMap;d=[];for(let e=x.length;e--;){var b=x[e];h=[t("i",0,{class:"px pbQ","x-html":b.ctor.icon})],f=[t(0,b.ctor.title)],h.push(t("div",f,{mxa:"pw:b",class:"pm"})),u={},c="pbO",m[b.id]&&(c+=" pbP"),u.class=c,u["mx-mouseover"]=i+"\x1e__cO({element:'"+o(a,b)+"'})",u["mx-mouseout"]=i+"\x1e__cP()",u["mx-click"]=i+"\x1e__cQ({element:'"+o(a,b)+"'})",_=[t("div",h,u)],d.push(..._)}return g.push(t("div",d,{mxa:"pw:_",class:"pbN pk"})),t(i,g)},init(){r.__ag();let e=this.render.bind(this);a.State.on("___",e),a.State.on("__g",e),a.State.on("__k",e)},render(){let e=a.State.get("__M"),t=a.State.get("__U");this.digest({selectedMap:t,elements:e})},"__cO<mouseover>"(e){if(!a.default.inside(e.relatedTarget,e.eventTarget)){let{element:t}=e.params;r.__y(t)}},"__cP<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||r.__z()},"__cQ<click>"(e){let{element:t}=e.params;l.StageElements.__aG(e,t)}})}),define("panels/props/index",["magix","../../designer/props","../../designer/history","../../util/transform","gallery/mx-number/index","gallery/mx-color/index","./page"],(e,t,i)=>{e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("./page"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../designer/props"),l=e("../../designer/history"),o=e("../../util/transform");a.default.applyStyle("pr",'.pcb{padding:4px;min-width:200px}.pcc{line-height:28px;display:flex;align-items:center}.pcd{width:80px;text-align:right}.pce{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.pcf{width:110px}.pcg{align-items:flex-start}.pch{margin:4px 0;background-repeat:r}.pci{display:flex;align-items:center;cursor:pointer}.pcj{visibility:hidden;position:absolute}.pck{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.pck:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.pcj:checked+.pck{background:#fa742b}.pcj:checked+.pck:before{left:100%;margin-left:-14px}.pcj:disabled+.pck{background:#e6e6e6;cursor:not-allowed}'),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x,m,b,y=[],v=e.elements,w=e.i18n,k=e.props,A=e.scale;if(1==v.length){var S=v[0];c=[],h=[t(0,w("__a_"))],u=[t("span",h,{mxa:"py:c",class:"pcd"})],h=[t(0,S.ctor.title)],u.push(t("span",h)),c.push(t("li",u,{mxa:"py:b",class:"pcc"}));for(let e=0,s=S.ctor.props,n=s.length;e<n;e++){let n=s[e];if(u=[],n.type==k.__Y)h=[t("li",0,{class:"pce"})],u.push(...h);else{f=[],g=[t(0,w(n.tip))],f.push(t("span",g,{mxa:"py:f",class:"pcd"}));var M=S.props[n.key];n.scale&&(M/=A),n.type==k.__W?(m={mxv:"scale",class:"pcf pu ph",disabled:(d=S.props.locked)?o(a,d):null,"mx-input":i+"\x1e__db({key:'"+r(n.key)+"',scale:"+(n.scale||0)+",use:'value',element:'"+o(a,S)+"'})"},x="gallery/mx-number/index?value="+o(a,M),(d=n.max)&&(x+="&max="+l(d)),(d=n.min)&&(x+="&min="+l(d)),m["mx-view"]=x,g=[t("div",0,m)],f.push(...g)):n.type==k.__X?(g=[t("div",0,{mxv:"scale",class:"pcf","mx-input":i+"\x1e__db({key:'"+r(n.key)+"',use:'color',element:'"+o(a,S)+"'})","mx-view":"gallery/mx-color/index?clear="+l(n.clear)+"&color="+o(a,M)+"&align=right&disabled="+l(S.props.locked)+"&alpha="+l(n.alpha)})],f.push(...g)):n.type==k.__Z&&((b=[t("input",0,{class:"pcj",type:"checkbox",checked:!!S.props[n.key]||null,"mx-change":i+"\x1e__db({key:'"+r(n.key)+"',bool:1,element:'"+o(a,S)+"',refresh:'"+o(a,n.refresh)+"'})"},1)]).push(t("i",0,{mxs:"py:a",class:"pck"})),g=[t("label",b,{mxa:"py:k",class:"pci"})],f.push(...g)),h=[t("li",f,{mxa:"py:e",class:"pcc"})],u.push(...h)}c.push(...u)}_=[t("ul",c,{mxa:"py:a",class:"pcb"})],y.push(..._)}else _=[t("div",0,{"mx-view":"panels/props/page"})],y.push(..._);return t(i,y)},init(){let e=this.__d_(this.render.bind(this),100);a.State.on("__k",e),a.State.on("__j",e),a.State.on("___",e)},render(){this.digest({scale:a.State.get("__c"),props:s.default,elements:a.State.get("__N")})},"__db<input,change>"(e){let t,{scale:i,key:s,use:r,element:n,refresh:p,bool:d}=e.params,_=n.props,c="width"==s||"height"==s;c&&(t=o.default.__da(_,_.rotate));let u=a.State.get("__c"),h=e.eventTarget,f=d?h.checked:e[r];if(i&&(f*=u),_[s]=f,c){let e=o.default.__da(_,_.rotate);_.x+=t.x-e.x,_.y+=t.y-e.y,p=!0}p&&(this.render(),a.State.fire("__l"));let g=a.Vframe.get(n.id);g&&g.invoke("__H",[n]),l.default.__t("__a"+s,500)}})}),define("panels/props/page",["magix","../../designer/history","../../i18n/index","gallery/mx-number/index","gallery/mx-dropdown/index","gallery/mx-color/index","gallery/mx-picture/index"],(e,t,i)=>{e("gallery/mx-number/index"),e("gallery/mx-dropdown/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../../designer/history"),l=e("../../i18n/index");let o=[{text:l.default("__af"),value:"full"},{text:l.default("__ag"),value:"no-repeat"},{text:l.default("__ah"),value:"repeat-x"},{text:l.default("__ai"),value:"repeat-y"},{text:l.default("__aj"),value:"repeat"}],r=[{text:l.default("__ak"),value:"auto"},{text:l.default("__al"),value:"full"}];t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h=[],f=e.i18n,g=e.page,x=e.scaleTypes,m=e.repeats;return d=[],c=[t(0,f("__aa"))],(_=[t("span",c,{mxa:"pz:b",class:"pcd"})]).push(t("div",0,{mxv:"page",class:"pcf pu ph","mx-input":i+"\x1e__dc({use:'width'})","mx-view":"gallery/mx-number/index?min=0&value="+o(a,g.width)})),d.push(t("li",_,{mxa:"pz:a",class:"pcc"})),c=[t(0,f("__ab"))],(_=[t("span",c,{mxa:"pz:d",class:"pcd"})]).push(t("div",0,{mxv:"page",class:"pcf pu ph","mx-input":i+"\x1e__dc({use:'height'})","mx-view":"gallery/mx-number/index?min=0&value="+o(a,g.height)})),d.push(t("li",_,{mxa:"pz:c",class:"pcc"})),c=[t(0,f("__ac"))],(_=[t("span",c,{mxa:"pz:f",class:"pcd"})]).push(t("div",0,{mxv:"scaleTypes",class:"pcf","mx-change":i+"\x1e__dc({use:'scaleType',from:'value'})","mx-view":"gallery/mx-dropdown/index?selected="+l(g.scaleType)+"&list="+o(a,x)+"&textKey=text&valueKey=value"})),d.push(t("li",_,{mxa:"pz:e",class:"pcc"}),t("li",0,{mxs:"pz:_",class:"pce"})),c=[t(0,f("__G"))],(_=[t("span",c,{mxa:"pz:h",class:"pcd"})]).push(t("div",0,{mxv:"page",class:"pcf","mx-input":i+"\x1e__dc({use:'background',from:'color'})","mx-view":"gallery/mx-color/index?color="+o(a,g.background)+"&align=right"})),d.push(t("li",_,{mxa:"pz:g",class:"pcc"})),c=[t(0,f("__ad"))],(_=[t("span",c,{mxa:"pz:j",class:"pcd"})]).push(t("div",0,{class:"pcf pch","mx-change":i+"\x1e__dc({use:'backgroundImage',from:'src',refresh:true})","mx-view":"gallery/mx-picture/index?src="+l(g.backgroundImage)})),d.push(t("li",_,{mxa:"pz:i",class:"pcc pcg"})),g.backgroundImage&&(u=[t(0,f("__ae"))],(c=[t("span",u,{mxa:"pz:m",class:"pcd"})]).push(t("div",0,{mxv:"repeats",class:"pcf","mx-change":i+"\x1e__dc({use:'backgroundRepeat',from:'value'})","mx-view":"gallery/mx-dropdown/index?selected="+l(g.backgroundRepeat)+"&list="+o(a,m)+"&textKey=text&valueKey=value"})),_=[t("li",c,{mxa:"pz:l",class:"pcc"})],d.push(..._)),h.push(t("ul",d,{mxa:"pz:_",class:"pcb"})),t(i,h)},init(){let e=this.render.bind(this);a.State.on("___",e)},render(){this.digest({repeats:o,scaleTypes:r,page:a.State.get("__d")})},"__dc<input,change>"(e){let{use:t,from:i="value",refresh:l}=e.params,o=a.State.get("__d");o[t]=e[i],"backgroundImage"==t&&(o.backgroundWidth=e.width,o.backgroundHeight=e.height),s.default.__t("__b",500),a.State.fire("__h"),l&&this.render()}})}),define("elements/designer",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","../designer/history","../util/transform","../util/converter"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../gallery/mx-dragdrop/index"),l=e("../gallery/mx-pointer/cursor"),o=e("../designer/history"),r=e("../util/transform"),n=e("../util/converter");a.default.applyStyle("pf",'.paq{left:50%;top:50%;position:absolute}.paq:before{width:1px;height:5px;left:0;top:-2px}.paq:after,.paq:before{content:" ";position:absolute;background:red}.paq:after{width:5px;height:1px;left:-2px;top:0}.par{border:1px dotted #fa742b}.pas{border:1px dotted #a62a22}.pat{border-right:3px solid #fa742b;right:-2px}.pau,.pav{border-bottom:3px solid #fa742b;bottom:-2px}.pav{border-right:3px solid #fa742b;right:-2px}.paw{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABvUExURUdwTP///9XV1R0dHf///3Nzc////////////////1ZWVq+vr/T09PX19QQEBP///////8XFxf///////////wYGBv///+jo6P///4aGhqioqMzMzP///2BgYP///////////zExMf///wAAAP///xLps0AAAAAjdFJOUwCxxOdixRDmzSDMv8/Z+tz5wWpXWPk3zALCv8KnyXZVMNuNPnv3CwAAAJ1JREFUKM/NkckOwyAMRFkDBMhC9qWr+//fWCIV1WlzrjoXS36yxmMT8hdqqKoUvRAjMtw22kvecem1GjTuK1vApmI+wQMBbQFy5li+QQRaX4AtRX+vbntAJeRl9HTTx4TiwESs61DXNUPmVQeujzVrQwh43TTxpeRBslVfMUhbiXKWyiAwvnIsMcdyJkfJYdpNvG/ltDm+bjP+8KFP8ggL+zQLGxwAAAAASUVORK5CYII=") 14 14,pointer;top:-3px;right:-3px;width:6px;height:6px;border-radius:50%;background:#fa742b}');const p={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3};let d={};a.State.on("__k",()=>{for(let e in d){let t=a.Vframe.get(e);t&&(t.invoke("__aM"),t.invoke("render"))}}),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x,m=[],b=e.element,y=e.view,v=e.id,w=e.selected,k=e.fullscreen,A=e.count,S=e.i18n;var M=b.props;m.push(t("div",0,{mxv:"element","mx-view":y+"?props="+o(a,M),id:"entity_"+v}));var z=M.rotate%360;if(h=[],!k&&!M.locked){if(f=[],w){if((g=[]).push(t("div",0,{mxs:"pk:_",class:"paq"})),1==A){x=[t("div",0,{class:"paw pg","mx-mousedown":i+"\x1e__aN()",title:S("_x")})],d="";var E=Math.min(20,M.height-3)-4;d+=" ";var $=Math.min(20,M.width)-4;d+=" ";var j=Math.max(Math.min($,E)-2,0);d+=" ",$=Math.min($,M.width-j-6),d+=" ",E=Math.min(E,M.height-j-6-3),d+=" ";var T=(M.height-E-j+3)/2;u={class:"pg pat"},_="height:"+Math.max(E,0)+"px;top:"+T+"px;cursor:",z<=22.5||z>337.5||z>157.5&&z<=202.5?_+="ew":z<=67.5||z>202.5&&z<=247.5?_+="nwse":z<=112.5||z>247.5&&z<=292.5?_+="ns":(z<=157.5||z>292.5&&z<=337.5)&&(_+="nesw"),_+="-resize",u.style=_,u.title=S("_y"),u["mx-mousedown"]=i+"\x1e__aQ({key:'rm'})",x.push(t("div",0,u));var I=(M.width-$-j)/2;u={class:"pg pau"},_="width:"+Math.max($,0)+"px;left:"+I+"px;cursor:",z<=22.5||z>337.5||z>157.5&&z<=202.5?_+="ns":z<=67.5||z>202.5&&z<=247.5?_+="nesw":z<=112.5||z>247.5&&z<=292.5?_+="ew":(z<=157.5||z>292.5&&z<=337.5)&&(_+="nwse"),_+="-resize",u.style=_,u.title=S("_z"),u["mx-mousedown"]=i+"\x1e__aQ({key:'mb'})",x.push(t("div",0,u)),_="width:"+j+"px;height:"+j+"px;cursor:",z<=22.5||z>337.5||z>157.5&&z<=202.5?_+="nwse":z<=67.5||z>202.5&&z<=247.5?_+="ns":z<=112.5||z>247.5&&z<=292.5?_+="nesw":(z<=157.5||z>292.5&&z<=337.5)&&(_+="ew"),(u={class:"pg pav"}).style=_+="-resize;",u.title=S("_A"),u["mx-mousedown"]=i+"\x1e__aQ({key:'rb'})",x.push(t("div",0,u)),g.push(...x)}f.push(...g)}h.push(...f)}return u={id:"mask_"+v},_="left:"+M.x+"px;top:"+M.y+"px;width:"+M.width+"px;height:"+M.height+"px;",z&&(_+="transform:rotate("+z+"deg);"),u.style=_,c="pg pk",w&&!k&&(c+=" ",M.locked?c+="pas":c+="par"),u.class=c,m.push(t("div",h,u)),t(i,m)},mixins:[s.default],ctor(e){this.assign(e),d[this.id]=1,this.on("destroy",()=>{delete d[this.id]})},__aM(){let e=a.State.get("__U"),t=a.State.get("__N").length,i=this.get().element.id;this.set({selected:a.has(e,i),count:t})},assign(e){return this.set(e),this.__aM(),!0},render(){this.digest()},__H(e){this.digest({element:e})},"__aN<mousedown>"(e){e.stopPropagation();let t=this.get("element"),i=t.props;a.State.fire("__i",{show:1});let s=i.x+i.width/2,r=i.y+i.height/2,p=n.default.__ab({x:e.pageX,y:e.pageY}),d=i.rotate,_=Math.atan2(p.y-r,p.x-s)-d*Math.PI/180,c=!1;this.__x(e,o=>{c||l.default.__y(e.eventTarget),c=!0,p=n.default.__ab({x:o.pageX,y:o.pageY});let d=Math.atan2(p.y-r,p.x-s);d=180*(d-_)/Math.PI,i.rotate=(360+(0|d))%360,this.digest({element:t}),a.State.fire("__j")},()=>{l.default.__z(),c&&o.default.__t(),a.State.fire("__i")})},"__aQ<mousedown>"(e){if(e.button)return;e.stopPropagation();let t=this,i=t.get("element"),{props:s,ctor:n}=i;a.State.fire("__i",{show:1});let d=s.rotate||0,{key:_}=e.params;d=(d+360)%360,0==s.width&&(s.width=.01),0==s.height&&(s.height=.01);let c=s.width,u=s.height,h=s.x,f=s.y,g=0,x=0,m=Number.MAX_VALUE,b=Number.MAX_VALUE;for(let e of n.props)"width"==e.key?(a.default.has(e,"max")&&(m=e.max),a.default.has(e,"min")&&(g=e.min)):"height"==e.key&&(a.default.has(e,"max")&&(b=e.max),a.default.has(e,"min")&&(x=e.min));let y=r.default.__aH(s,d),v=r.default.__aO(y.point,_),{opposite:w,current:k}=v,A=w.index,S=w.point,M=k.point,z=S.x,E=S.y,$=Math.abs(M.x-z),j=Math.abs(M.y-E),T={x:h,y:f,rotate:d,width:c,height:u},I=e.pageX,P=e.pageY,C=!1;t.__x(e,o=>{C||l.default.__y(e.eventTarget);let n={x:1,y:1};C=!0;let _=$>j,c=1,u=o.pageX-I,h=o.pageY-P;0==A||7==A?_&&d>90&&d<270?u=-u:!_&&d>180&&d<360&&(h=-h):0!=A&&1!=A||(_&&d>45&&d<135?u=-u:!_&&d>90&&d<270&&(h=-h)),(c=_?(u+$)/$:(h+j)/j)<0&&(c=0);let f=p[A];1===f?n.x=n.y=c:2===f?n.y=c:3===f&&(n.x=c);let v=r.default.__aP(T,n,y,A),w=v.width,k=v.height;w<g?w=g:w>m&&(w=m),k<x?k=x:k>b&&(k=b),w==s.width&&k==s.height||(s.x=v.left,s.y=v.top,s.width=w,s.height=k,t.digest({element:i}),a.State.fire("__j"))},()=>{C&&o.default.__t(),l.default.__z(),a.State.fire("__i")})}})}),define("elements/index",["magix","./hw/designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./hw/designer");let l=[s.default],o=a.toMap(l,"type"),r=[{icon:"&#xe64b;",title:"groups",subs:[s.default,s.default,s.default,s.default,s.default,s.default]},s.default];t.default={__G:()=>r,__T(e){let t=[],i={};for(let a of e){let e=o[a.type];a.ctor=e,t.push(a),i[a.id]=a}return{elements:t,map:i}}}}),define("elements/hw/designer",["../designer","../../designer/props"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../designer"),s=e("../../designer/props");t.default=a.default.extend({ctor(){this.set({view:"elements/hw/index"})}},{type:"hw",title:"\u6587\u672c",icon:"&#xe6bc;",resize:!0,resizeX:!0,getProps:(e,t)=>({x:e,y:t,rotate:0,width:150,height:30,background:"",forecolor:"#000000",fontsize:14,locked:!1}),props:[{tip:"__B",key:"x",type:s.default.__W,scale:!0},{tip:"__C",key:"y",type:s.default.__W,scale:!0},{tip:"__D",key:"width",type:s.default.__W,scale:!0,min:"0"},{tip:"__E",key:"height",type:s.default.__W,scale:!0,min:"0"},{tip:"__F",key:"rotate",type:s.default.__W,max:360,min:-360},{type:s.default.__Y},{tip:"__G",key:"background",clear:!0,alpha:!0,type:s.default.__X},{tip:"__H",key:"forecolor",type:s.default.__X},{tip:"__I",key:"fontsize",type:s.default.__W,min:"0"},{type:s.default.__Y},{tip:"__J",key:"locked",type:s.default.__Z,refresh:!0,free:!0}]})}),define("elements/hw/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u=[],h=e.props,f=e.scale;return c=[t(0,"hello designer")],_={},d="overflow:hidden;color:"+h.forecolor+";width:"+h.width+"px;height:"+h.height+"px;position:absolute;left:"+h.x+"px;top:"+h.y+"px;font-size:"+100*f+"%;",h.rotate&&(d+="transform:rotate("+h.rotate+"deg);"),h.background&&(d+="background:"+h.background+";"),d+="font-size:"+h.fontsize+"px",_.style=d,u.push(t("div",c,_)),t(i,u)},init(e){this.assign(e)},assign(e){return this.set(e),this.set({scale:a.State.get("__c")}),!0},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../gallery/mx-dragdrop/index"),l=e("../gallery/mx-pointer/cursor"),o=e("./history");a.default.applyStyle("pa",".pH{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.pI{top:0;width:1px}.pI,.pJ{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.pJ{left:0;height:1px}.pK{float:left;overflow:hidden;z-index:200;position:relative}.pL,.pK{width:20px;border-right:1px solid #ccc;background:#fff}.pL{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.pM{left:5px;top:22px}.pM,.pN{cursor:default;position:absolute;font-size:10px}.pN{top:2px;left:24px}.pO,.pP{position:relative;z-index:100}.pO{top:20px}.pP{left:20px}.pQ{width:4px;border-left:1px solid #fa742b}.pQ,.pR{position:absolute;pointer-events:none}.pR{height:1px;background:#fa742b}.pS{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.pT{top:2px;cursor:default}.pT,.pU{position:absolute;left:4px;font-size:10px;color:#666}.pU{top:-15px;cursor:pointer;pointer-events:all}.pV{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.pW{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.pX,.pW{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.pX{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let r={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x,m,b=[],y=e.sTop,v=e.id,w=e.yHelpers,k=e.yStart,A=e.scale,S=e.vWidth,M=e.i18n,z=e.sLeft,E=e.xHelpers,$=e.xStart,j=e.vHeight,T=e.width,I=e.step,P=e.space,C=e.hbar,L=e.barColor,O=e.bar,N=e.xEnd,X=e.height,Y=e.yEnd;d=[];for(let e=0,a=w,s=a.length;e<s;e++){let s=a[e];var V=Math.abs(k)+s.mm*A+20;u=[t(0,"\ue600")],c=[t("i",u,{class:"px pU",title:M("__"),"mx-click":i+"\x1e__w({type:'y',id:'"+r(s.id)+"'})"})],u=[t(0,s.mm)],c.push(t("span",u,{mxa:"p_:_",class:"pV"}),t("span",0,{class:"pW","mx-mousedown":i+"\x1e__A({type:'y',id:'"+r(s.id)+"',c:"+V+"})",title:M("_a")})),_=[t("div",c,{class:"pR",style:"width:"+S+"px;top:"+V+"px;"})],d.push(..._)}b.push(t("div",d,{class:"pP",style:"top:-"+y+"px",id:v+"_y_help","mx-contextmenu":i+"\x1e__B()"})),d=[];for(let e=0,a=E,s=a.length;e<s;e++){let s=a[e];V=Math.abs($)+s.mm*A;u=[t(0,"\ue600")],c=[t("i",u,{class:"px pS",title:M("__"),"mx-click":i+"\x1e__w({type:'x',id:'"+r(s.id)+"'})"})],u=[t(0,s.mm)],c.push(t("span",u,{mxa:"p_:a",class:"pT"}),t("span",0,{class:"pX","mx-mousedown":i+"\x1e__A({type:'x',id:'"+r(s.id)+"',c:"+V+"})",title:M("_a")})),_=[t("div",c,{class:"pQ",style:"height:"+j+"px;left:"+V+"px;"})],d.push(..._)}b.push(t("div",d,{class:"pO",style:"left:-"+z+"px",id:v+"_x_help","mx-contextmenu":i+"\x1e__B()"})),u=[];for(let e=0;e<$;e+=I)h=[],e&&(f=[],(m=e/A)%P==0?(g=[t("rect",0,{width:"1",height:C,x:$-e,y:20-C-1,style:"fill:"+L+";"},1)],x=[t(0,-m)],g.push(t("text",x,{x:$-e+2,y:"14",style:"font-size:10px;fill:#999;"})),f.push(...g)):(g=[t("rect",0,{width:"1",height:O,x:$-e,y:20-O-1,style:"fill:"+L+";"},1)],f.push(...g)),h.push(...f)),u.push(...h);for(let e=0;e<N;e+=I)h=[],(m=e/A)%P==0?(f=[t("rect",0,{width:"1",height:C,x:$+e,y:20-C-1,style:"fill:"+L+";"},1)],g=[t(0,m)],f.push(t("text",g,{x:$+e+2,y:"14",style:"font-size:10px;fill:#999;"})),h.push(...f)):(f=[t("rect",0,{width:"1",height:O,x:$+e,y:20-O-1,style:"fill:"+L+";"},1)],h.push(...f)),u.push(...h);c=[t("svg",u,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+T+" 19",style:"cursor:default;"})],_=[t("div",c,{style:"width:"+T+"px;height:100%"})],d=[t("div",_,{class:"pH",id:v+"_x"})],c=[t(0,"-")],_=[t("span",c,{class:"pM",id:v+"_x_tip"})],d.push(t("div",_,{class:"pI",id:v+"_x_line",style:"height:"+(j+20)+"px"})),b.push(t("div",d,{mxa:"p_:b","mx-mousemove":i+"\x1e__p()","mx-mouseout":i+"\x1e__q()","mx-click":i+"\x1e__u()"})),u=[];for(let e=0;e<k;e+=I)h=[],e&&(f=[],(m=e/A)%P==0?(g=[t("rect",0,{width:C,height:"1",x:20-C,y:k-e,style:"fill:"+L+";"},1)],x=[t(0,-m)],g.push(t("text",x,{x:"14",y:k-e+2,style:"font-size:10px;fill:#999;",transform:"rotate(-90,13,"+(k-e)+")"})),f.push(...g)):(g=[t("rect",0,{width:O,height:"1",x:20-O,y:k-e,style:"fill:"+L+";"},1)],f.push(...g)),h.push(...f)),u.push(...h);for(let e=0;e<Y;e+=I)h=[],(m=e/A)%P==0?(f=[t("rect",0,{width:C,height:"1",x:20-C,y:k+e,style:"fill:"+L+";"},1)],g=[t(0,m)],f.push(t("text",g,{x:"14",y:k+e,style:"font-size:10px;fill:#999;;",transform:"rotate(-90,13,"+(k+e-2)+")"})),h.push(...f)):(f=[t("rect",0,{width:O,height:"1",x:20-O,y:k+e,style:"fill:"+L+";"},1)],h.push(...f)),u.push(...h);return c=[t("svg",u,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+X,style:"cursor:default"})],_=[t("div",c,{style:"height:"+X+"px;"})],d=[t("div",_,{class:"pK",style:"height:"+j+"px;",id:v+"_y"})],c=[t(0,"-")],_=[t("span",c,{class:"pN",id:v+"_y_tip"})],d.push(t("div",_,{class:"pJ",id:v+"_y_line",style:"width:"+(S+20)+"px"})),b.push(t("div",d,{mxa:"p_:j","mx-mousemove":i+"\x1e__r()","mx-mouseout":i+"\x1e__s()","mx-click":i+"\x1e__v()"}),t("div",0,{mxs:"p_:_",class:"pL"})),t(i,b)},mixins:[s.default],init(e){let t=a.node(e.scroll);t.addEventListener("scroll",()=>{this.___()},{passive:!0}),this.__a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let i=this.render.bind(this);a.State.on("___",i),a.State.on("__a",i)},__m(){if(this.__b){let e=this.__a,t=a.State.get("__c"),i=a.State.get("__d"),{width:s,height:l}=i,o=Math.max(s*t,window.innerWidth)+500,n=Math.max(l*t,window.innerHeight)+300,p=0,d=0,_=20,c=0,u=0,h=10,f=10,g=a.node("stage_canvas"),x=a.node("stage_outer"),m=g.getBoundingClientRect(),b=x.getBoundingClientRect();d=o-(p=Math.round(m.left-b.left)+_),u=n-(c=Math.round(m.top-b.top)),h=e.offsetHeight,f=e.offsetWidth;let y=r[t];this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:o,scale:t,space:y.space,step:y.step,height:n,xStart:p,xEnd:d,yStart:c,vHeight:h,vWidth:f,yEnd:u},null,()=>{this.__e=a.node(this.id+"_x"),this.__f=a.node(this.id+"_y"),this.__g=a.node(this.id+"_x_line"),this.__h=a.node(this.id+"_y_line"),this.__i=a.node(this.id+"_x_tip"),this.__j=a.node(this.id+"_y_tip"),this.__k=a.node(this.id+"_x_help"),this.__l=a.node(this.id+"_y_help")})}},___(){let e=this.__e,t=this.__f,i=this.__l,a=this.__k,s=this.__a,l=s.scrollTop,o=s.scrollLeft;e&&(e.scrollLeft=o),t&&(t.scrollTop=l),a&&(a.style.left=-o+"px"),i&&(i.style.top=-l+"px"),this.set({sLeft:o,sTop:l})},render(){this.set({xHelpers:a.State.get("__n"),yHelpers:a.State.get("__o")});let e=()=>{a.node("stage_canvas")?(this.__b=1,this.__m()):setTimeout(e,30)};e()},"__p<mousemove>"(e){let t=this.__e,i=e.pageX,a=this.get("xStart"),s=this.__g.style;s.display="block",s.left=i+"px";let l=i-a+t.scrollLeft,o=this.get("scale");this.__i.innerHTML=(l/o).toFixed(0)},"__q<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||(this.__g.style.display="none")},"__r<mousemove>"(e){let t=a.node(this.id).getBoundingClientRect(),i=e.pageY-t.top,s=this.get("yStart"),l=this.__f,o=this.__h.style;o.display="block",o.top=i+"px";let r=i-s-20+l.scrollTop,n=this.get("scale");this.__j.innerHTML=(r/n).toFixed(0)},"__s<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||(this.__h.style.display="none")},"__u<click>"(e){let t=(e.pageX-this.get("xStart")+this.__e.scrollLeft)/this.get("scale")|0,i=this.get("xHelpers");i.push({mm:t,id:a.default.guid("x_")}),this.digest({xHelpers:i}),o.default.__t()},"__v<click>"(e){let t=a.node(this.id).getBoundingClientRect(),i=(e.pageY-t.top-this.get("yStart")-20+this.__f.scrollTop)/this.get("scale")|0,s=this.get("yHelpers");s.push({mm:i,id:a.default.guid("x_")}),this.digest({yHelpers:s}),o.default.__t()},"__w<click>"(e){let{type:t,id:i}=e.params,a=t+"Helpers",s=this.get(a);for(let e=s.length;e--;){if(s[e].id==i){s.splice(e,1);break}}this.digest({[a]:s}),o.default.__t()},"__A<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:a,c:s}=e.params,r=i+"Helpers",n=this.get(r);for(let e of n)if(e.id==a){t=e;break}if(t){let a=this.get(i+"Start"),p=0;this.__x(e,o=>{let d;p||(p=1,l.default.__y(e.eventTarget)),d="x"==i?o.pageX-e.pageX+s:o.pageY-e.pageY+s-20,t.mm=(d-a)/this.get("scale")|0,this.digest({[r]:n})},()=>{p&&(l.default.__z(),o.default.__t())})}},"__B<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){this.__m()}})}),define("designer/const",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={__C:50,__c:1,__D:900,__E:500}}),define("designer/contextmenu",["magix","../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../i18n/index");let l={spliter:!0},o={id:0,text:"__b",short:" (Ctrl+A)"},r={id:1,text:"__c",short:" (Ctrl+C)"},n={id:14,text:"__d",short:" (Ctrl+X)"},p={id:2,text:"__e",short:" (Ctrl+V)"},d={id:5,text:"__f"},_={id:6,text:"__g"},c={id:3,text:"__h"},u={id:4,text:"__i"},h={id:7,text:"__j",short:" (Delete)"},f={},g=e=>t=>{e.__F||(e.__F=a.default.guid("_m"));let i=t+e.__F;if(!f[i]){let t=[];for(let i of e)i.spliter?t.push(i):t.push({id:i.id,text:s.default(i.text)+(i.short||"")});f[i]=t}return f[i]};t.default={allId:o.id,pasteId:p.id,topId:c.id,upId:d.id,bottomId:u.id,downId:_.id,cutId:n.id,copyId:r.id,deleteId:h.id,singleElement:g([r,n,h,l,d,c,l,_,u]),multipleElement:g([r,n,h]),stage:g([o,p])}}),define("designer/header",["magix","../elements/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/follower"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../elements/index"),l=e("../gallery/mx-dragdrop/index"),o=e("../gallery/mx-pointer/follower");a.default.applyStyle("pb",".pY,.pZ{width:60px;height:40px;display:grid;grid-template-rows:25px 12px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.pZ{float:left;border-radius:2px}.pZ:hover{background:#bd361b}.pa_{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.pa_,.pY:hover{background:#e64e30}.pY:hover .pa_{display:block}.paa{font-size:12px;font-weight:400;line-height:12px}.pab{height:30px;width:1px;background:#eee;margin:2px 12px;float:left}");let r=["requestFullscreen","webkitRequestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x,m=[],b=e.i18n,y=e.elements;_=[t(0,"\ue64b")],(d=[t("i",_,{mxs:"pa:_",class:"px pa"})]).push(t(0,b("_k")+"\u2122")),m.push(t("div",d,{mxa:"pa:_",class:"pE pd"})),d=[];for(let e=0,s=y,l=s.length;e<l;e++){let l=s[e];if(_=[],l.subs){u=[t("i",0,{class:"px","x-html":l.icon})],h=[t(0,l.title)],u.push(t("b",h,{mxa:"pa:d",class:"paa"})),h=[];for(let e=0,s=l.subs,r=s.length;e<r;e++){let l=s[e];g=[t("i",0,{class:"px","x-html":l.icon})],x=[t(0,l.title)],g.push(t("b",x,{mxa:"pa:f",class:"paa"})),f=[t("div",g,{class:"pZ","mx-mousedown":i+"\x1e__K({ctor:'"+o(a,l)+"'})"})],h.push(...f)}u.push(t("div",h,{mxa:"pa:e",class:"pa_"})),c=[t("div",u,{mxa:"pa:c",class:"pY ph"})],_.push(...c)}else u=[t("i",0,{class:"px","x-html":l.icon})],h=[t(0,l.title)],u.push(t("b",h,{mxa:"pa:h",class:"paa"})),c=[t("div",u,{class:"pY ph","mx-mousedown":i+"\x1e__K({ctor:'"+o(a,l)+"'})"})],_.push(...c);d.push(..._)}return m.push(t("div",d,{mxa:"pa:a",class:"pE pd pC pk"})),c=[t(0,"\ue64a")],_=[t("i",c,{class:"px"})],c=[t(0,"\u9884\u89c8")],_.push(t("b",c,{class:"paa"})),d=[t("div",_,{class:"pY","mx-click":i+"\x1e__L()"})],c=[t(0,"\ue6b0")],_=[t("i",c,{class:"px"})],c=[t(0,"\u4fdd\u5b58")],_.push(t("b",c,{class:"paa"})),d.push(t("div",_,{class:"pY"})),m.push(t("div",d,{mxs:"pa:a",class:"pE pe pD pk"})),t(i,m)},mixins:[l.default],render(){this.digest({elements:s.default.__G()})},"__K<mousedown>"(e){let{ctor:t}=e.params;o.default.__H(t.icon);let i=!1,s=null;a.State.set({__I:t}),this.__x(e,e=>{o.default.__y(e),i=!0},e=>{o.default.__z(),i?e&&(s=l.default.__J(e.clientX,e.clientY),a.State.fire("__c",{node:s,pageX:e.pageX,pageY:e.pageY})):a.State.fire("__b",{pageX:50*Math.random()|0,pageY:50*Math.random()|0})})},"__L<click>"(){let e=a.node("stage_outer");for(let t of r)if(e[t]){e[t]();break}},"$doc<webkitfullscreenchange,mozfullscreenchange,fullscreenchange>"(e){let t=document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||null;a.State.fire("__d",{fullscreen:!0,full:!!t})}})}),define("designer/history",["magix","./const"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./const");let l=[],o=[],r=null,n=-1,p="",d=null,_=()=>JSON.stringify({page:a.State.get("__d"),scale:a.State.get("__c"),elements:a.State.get("__M"),select:a.State.get("__N"),xLines:a.State.get("__n"),yLines:a.State.get("__o")}),c=e=>{let t=JSON.parse(e),i=a.State.get("__c"),s=t.scale||i;a.State.fire("__e",{json:t}),a.State.fire("___",{scale:i!==s})};t.default={__O(){d||(d=_())},__P:()=>({canRedo:o.length,canUndo:l.length}),__Q(){l.length=0,o.length=0},__R(){if(l.length>0){let e=l.pop();o.push(e);let t=l[l.length-1]||d;c(t)}},__S(){let e=o.pop();e&&(l.push(e),c(e))},__t(e="_save",t=0){let i=_();e!=p&&r&&(l.push(r),r=null,p=e),o.length=0,t?(r=i,clearTimeout(n),n=setTimeout(()=>{l.push(r),r=null},t)):l.push(i),l.length>s.default.__C&&(d=l.shift()),a.State.fire("__f")}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./header","./toolbar","./axis","./stage"],(e,t,i)=>{e("./header"),e("./toolbar"),e("./axis"),e("./stage"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../elements/index"),l=e("../gallery/mx-dialog/index"),o=e("./const"),r=e("./history"),n=e("../panels/index");a.default.applyStyle("pc",".pac{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.pac,.pad{position:relative}.pad{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.pae{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 85px);background-color:#edeef3;transition:all .3s;margin-left:20px}.paf{box-shadow:inset 1px 1px 6px 2px #dadada}");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d=[],_=e.id;return d.push(t("div",0,{mxs:"pb:_","mx-view":"designer/header",class:"pac"}),t("div",0,{mxs:"pb:a","mx-view":"designer/toolbar",class:"pad pk"}),t("div",0,{"mx-view":"designer/axis?scroll=s_"+l(_),class:"pk ph"}),t("div",0,{"mx-view":"designer/stage",id:"s_"+_,class:"pae pl paf"})),t(i,d)},mixins:[l.default],init(){a.State.on("__e",e=>{(e=>{let t=a.State.get("__d"),i=a.State.get("__M"),l=a.State.get("__N"),o=a.State.get("__n"),r=a.State.get("__o"),{elements:n,map:p}=s.default.__T(e.elements);i.length=0,i.push(...n),o.length=0,e.xLines&&o.push(...e.xLines),r.length=0,e.yLines&&r.push(...e.yLines);let d={};if(l.length=0,e.select)for(let t of e.select){let e=p[t.id];e&&(d[e.id]=1,l.push(e))}a.default.mix(t,e.page),a.State.set({__c:e.scale||1,__U:d})})(e.json)}),a.State.set({__d:{width:o.default.__D,height:o.default.__E,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0,scaleType:"auto"},__c:o.default.__c,__M:[],__N:[],__U:{},__n:[],__o:[]}),r.default.__O()},render(){this.digest(null,null,()=>{n.default.__V()})}})}),define("designer/keys",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:8,TAB:9,C:67,V:86,A:65,N:78,X:88,Z:90,Y:89}}),define("designer/props",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={__W:1,__X:2,__Y:4,__Z:8}}),define("designer/service",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let s=a.default.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set("data",i.data),t()}).catch(e=>{t({msg:e.message})})});s.add([{name:"__a_",url:a.default.config("getBackgroundImageUrl")}]),t.default={ctor(){let e=this;e.on("rendercall",()=>{delete e.__aa})},request(e){e=e||a.default.guid("r");let t=new s;return this.capture(e,t,!0),t},fetch(e,t){let i=JSON.stringify(e);this.request(i).all(e,t)},save(e,t){let i=this,a=JSON.stringify(e);i.lock(a,()=>{i.request(a+"_request").save(e,t)})},lock(e,t){this.__aa||(this.__aa={});let i=this.__aa;i[e]||(i[e]=t,t())},unlock(e){let t=this.__aa;t&&delete t[e]}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./workspace","../util/converter","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-menu/index","./contextmenu"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../gallery/mx-dragdrop/index"),l=e("./history"),o=e("./keys"),r=e("./workspace"),n=e("../util/converter"),p=e("../gallery/mx-pointer/select"),d=e("../gallery/mx-pointer/cursor"),_=e("../gallery/mx-menu/index"),c=e("./contextmenu");a.default.applyStyle("pd",".pag{outline:0;display:flex;position:relative}.pah{padding:50px 240px 50px 120px}.pai .pah{padding:0}.paj{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h,f,g,x=[],m=e.fullscreen,b=e.rx,y=e.ry,v=e.marginTop,w=e.marginLeft,k=e.page,A=e.scale,S=e.elements,M=e.id;f=[];for(let e=0,s=S,l=s.length;e<l;e++){let l=s[e];g=[t("div",0,{mxv:"elements,fullscreen",id:l.id,"mx-view":"elements/"+l.type+"/designer?element="+o(a,l)+"&fullscreen="+o(a,m),"mx-mousedown":i+"\x1e__ad({element:'"+o(a,l)+"'})"})],f.push(...g)}return _={class:"paj ph"},u="width:"+k.width*A+"px;height:"+k.height*A+"px;background:"+k.background+";",k.backgroundImage&&(u+="background-image:url("+k.backgroundImage+");background-repeat:"+("full"==k.backgroundRepeat?"no-repeat":k.backgroundRepeat)+";background-size:","full"==k.backgroundRepeat?u+="100% 100%":u+=k.backgroundWidth*A+"px "+k.backgroundHeight*A+"px;"),_.style=u,_.id="stage_canvas",h=[t("div",f,_)],u="",m&&(u+="transform:scaleX("+b+") scaleY("+y+");transform-origin:0 0;margin:"+v+"px 0 0 "+w+"px;"),(_={class:"pah"}).style=u,c=[t("div",h,_)],d="pag",m&&(d+=" pai"),(_={}).class=d,_.id="stage_outer",_["mx-contextmenu"]=i+"\x1e__B()",_["mx-mousedown"]=i+"\x1e__am()",_.tabindex="0",_["mx-focusin"]=i+"\x1e__aw()",_["mx-focusout"]=i+"\x1e__ax()",_["mx-keydown"]=i+"\x1e__at()",x.push(t("div",c,_),t("div",0,{id:"pole_"+M,style:"margin-top:-"+(k.height*A+100)+"px;display:none;"})),t(i,x)},mixins:[s.default],init(){let e=e=>{if(e.node){if(!a.default.inside(e.node,"stage_canvas"))return;{let t=n.default.__ab({x:e.pageX,y:e.pageY});e.pageX=t.x,e.pageY=t.y}}r.StageElements.__K(e,!0)&&(a.State.fire("__g"),l.default.__t())},t=e=>{let t=a.State.get("__M");e?this.digest({elements:t}):this.set({elements:t})},i=0,s=e=>{if(e.step||e.fullscreen){let t=a.State.get("__M");if(e.fullscreen){let t=a.State.get("__d");if(e.full){let s=screen.width/t.width,l=screen.height/t.height,o=Math.min(s,l),r=0,n=0;"auto"==t.scaleType?(r=o,n=o):(r=s,n=l);let p=(screen.height-n*t.height)/2,d=(screen.width-r*t.width)/2,_=a.State.get("__c");1!=_?(e.step=1/_,i=_):i=0,a.State.set({__c:1}),this.set({rx:r,ry:n,marginTop:p,marginLeft:d})}else 0!=i&&(e.step=i,a.State.set({__c:i}));this.set({fullscreen:e.full})}if(e.step)for(let{props:i}of t)i.x*=e.step,i.y*=e.step,i.width*=e.step,i.height*=e.step;this.set({elements:t})}this.render()};a.State.on("__d",s),a.State.on("___",s),a.State.on("__a",s),a.State.on("__h",s),a.State.on("__b",e),a.State.on("__c",e),a.State.on("__g",t),a.State.on("__i",e=>{let t=a.node(this.id),i=a.node("pole_"+this.id).style;e.show?(i.width=t.scrollWidth+"px",i.height=t.scrollHeight+"px",i.display="block"):i.display="none"}),t()},render(){let e=a.State.get("__d");this.digest({scale:a.State.get("__c"),page:e})},"__ad<mousedown>"(e){this.get("fullscreen")||r.StageElements.__ac(e,this)},"__am<mousedown>"(e){if(this.get("fullscreen"))return;let t=e.target;if("stage_canvas"==t.id||a.default.inside("stage_canvas",t)){let t=null,i=0,s=a.State.get("__U");if(e.shiftKey){t={};let e=a.State.get("__N");for(let a of e)t[a.id]=1,i++}else r.StageSelectElements.__ae();this.__af=i,p.default.__ag();let o=0,_=r.StageElements.__ah();this.__x(e,i=>{o||(o=1,d.default.__ai("default"));let a=Math.abs(e.pageX-i.pageX),s=Math.abs(e.pageY-i.pageY),l=Math.min(e.pageX,i.pageX),c=Math.min(e.pageY,i.pageY);p.default.__H(l,c,a,s);let u=n.default.__ab({x:l,y:c});if(u.width=a,u.height=s,_.length){let e=r.StageElements.__aj(_,u,t),i=e.length;i!==this.__af&&(this.__af=i,r.StageSelectElements.__ak(e))}},()=>{o&&(p.default.__z(),d.default.__z()),r.StageSelectElements.__al(s)&&l.default.__t()})}},"__at<keydown>"(e){if(!this.get("fullscreen"))if(e.metaKey||e.ctrlKey)e.keyCode==o.default.Z?(e.preventDefault(),e.shiftKey?l.default.__S():l.default.__R()):e.keyCode==o.default.Y?(e.preventDefault(),l.default.__S()):e.keyCode==o.default.A?(e.preventDefault(),r.StageElements.__an()):e.keyCode==o.default.X?(e.preventDefault(),r.Clipboard.__ao()):e.keyCode==o.default.C?(e.preventDefault(),r.Clipboard.__ap()):e.keyCode==o.default.V&&(e.preventDefault(),r.Clipboard.__aq());else if(e.keyCode==o.default.TAB)e.preventDefault(),r.StageElements.__ar(e);else if(e.keyCode==o.default.DELETE)e.preventDefault(),r.StageElements.__as()&&(a.State.fire("__g"),l.default.__t());else{let t=e.shiftKey?10:1;t*=a.State.get("__c");let i=a.State.get("__N");if(i.length){let s=!1;for(let l of i)if(!l.props.locked&&(e.keyCode==o.default.UP?(s=!0,l.props.y-=t):e.keyCode==o.default.DOWN?(s=!0,l.props.y+=t):e.keyCode==o.default.LEFT?(s=!0,l.props.x-=t):e.keyCode==o.default.RIGHT&&(s=!0,l.props.x+=t),s)){let e=a.Vframe.get(l.id);e&&e.invoke("assign",[{element:l}])&&e.invoke("render")}s&&(e.preventDefault(),a.State.fire("__j"),l.default.__t("___",500))}}},"__B<contextmenu>"(e){if(e.preventDefault(),a.default.inside(e.target,"stage_canvas")){let t=a.default.config("lang"),i=c.default.stage(t),s={},o=a.State.get("__M"),p=a.State.get("__N"),d=r.Clipboard.__au();s[c.default.allId]=!o.length,s[c.default.pasteId]=!d;let u=p.length,h=p[0];if(1==u){i=c.default.singleElement(t);let e=o[o.length-1],a=o[0],l=e.id==h.id,r=a.id==h.id,n=h.props.locked;s[c.default.cutId]=n,s[c.default.upId]=n||l,s[c.default.topId]=n||l,s[c.default.bottomId]=n||r,s[c.default.downId]=n||r}else u>1&&(i=c.default.multipleElement(t));_.default.show(this,e,{list:i,disabled:s,picked(t){if(t.id==c.default.allId)r.StageElements.__an();else if(t.id==c.default.copyId)r.Clipboard.__ap();else if(t.id==c.default.pasteId){let t=n.default.__ab({x:e.pageX,y:e.pageY});r.Clipboard.__aq(t)&&l.default.__t()}else t.id==c.default.cutId?r.Clipboard.__ao():t.id==c.default.deleteId?r.StageElements.__as()&&(a.State.fire("__g"),l.default.__t()):t.id>=3&&t.id<=6&&r.StageElements.__av(t.id,h)&&(a.State.fire("__g"),l.default.__t())}})}},"__aw<focusin>"(e){a.node(this.id).classList.remove("paf")},"__ax<focusout>"(){a.node(this.id).classList.add("paf")}})}),define("designer/toolbar-align",["magix","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u=[],h=e.elements,f=e.i18n;var g=h.length;return u.push(t("i",0,{mxs:"pd:_",class:"pan"})),c=[t(0,"\ue70b")],d="px pal",g<2&&(d+=" pao"),(_={}).class=d,_.title=f("_l"),_["mx-click"]=i+"\x1e__ay({to:'left'})",u.push(t("i",c,_)),c=[t(0,"\ue711")],d="px pal",g<2&&(d+=" pao"),(_={}).class=d,_.title=f("_m"),_["mx-click"]=i+"\x1e__ay({to:'center'})",u.push(t("i",c,_)),c=[t(0,"\ue70c")],d="px pal",g<2&&(d+=" pao"),(_={}).class=d,_.title=f("_n"),_["mx-click"]=i+"\x1e__ay({to:'right'})",u.push(t("i",c,_)),c=[t(0,"\ue70d")],d="px pal",g<2&&(d+=" pao"),(_={}).class=d,_.title=f("_o"),_["mx-click"]=i+"\x1e__ay({to:'top'})",u.push(t("i",c,_)),c=[t(0,"\ue712")],d="px pal",g<2&&(d+=" pao"),(_={}).class=d,_.title=f("_p"),_["mx-click"]=i+"\x1e__ay({to:'middle'})",u.push(t("i",c,_)),c=[t(0,"\ue70e")],d="px pal",g<2&&(d+=" pao"),(_={}).class=d,_.title=f("_q"),_["mx-click"]=i+"\x1e__ay({to:'bottom'})",u.push(t("i",c,_)),t(i,u)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__k",e)},render(){this.digest({elements:a.State.get("__N")})},"__ay<click>"(e){if(e.eventTarget.classList.contains("pao"))return;let{to:t}=e.params,i=a.State.get("__N"),l=-Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,n=-Number.MAX_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER;for(let e of i){let i=a.node("mask_"+e.id).getBoundingClientRect();if("right"==t)i.right>l&&(l=i.right);else if("left"==t)i.left<o&&(o=i.left);else if("top"==t)i.top<r&&(r=i.top);else if("bottom"==t)i.bottom>n&&(n=i.bottom);else if("middle"==t){let e=(i.bottom-i.top)/2;i.top+e<p&&(p=i.top+e)}else if("center"==t){let e=(i.right-i.left)/2;i.left+e<d&&(d=i.left+e)}}let _=0;for(let e of i){let i=a.node("mask_"+e.id).getBoundingClientRect(),s=0;if("right"==t){let t=l-i.right;0!=t&&(_=1,s=1,e.props.x+=t)}else if("left"==t){let t=o-i.left;0!=t&&(_=1,s=1,e.props.x+=t)}else if("top"==t){let t=r-i.top;0!=t&&(_=1,s=1,e.props.y+=t)}else if("bottom"==t){let t=n-i.bottom;0!=t&&(_=1,s=1,e.props.y+=t)}else if("middle"==t){let t=p-(i.top+(i.bottom-i.top)/2);0!=t&&(_=1,s=1,e.props.y+=t)}else if("center"==t){let t=d-(i.left+(i.right-i.left)/2);0!=t&&(_=1,s=1,e.props.x+=t)}if(s){let t=a.Vframe.get(e.id);t&&t.invoke("assign",[{element:e}])&&t.invoke("render")}}_&&(a.State.fire("__j"),s.default.__t())}})}),define("designer/toolbar-del",["magix","./workspace","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./workspace"),l=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u=[],h=e.elements,f=e.i18n;var g=h.length;return u.push(t("i",0,{mxs:"pe:_",class:"pan"})),c=[t(0,"\ue600")],d="px pal",g<1&&(d+=" pao"),(_={}).class=d,_.title=f("__j")+"(Delete)",_["mx-click"]=i+"\x1e__az()",u.push(t("i",c,_)),t(i,u)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__k",e)},render(){this.digest({elements:a.State.get("__N")})},"__az<click>"(e){e.eventTarget.classList.contains("pao")||s.StageElements.__as()&&(a.State.fire("__g"),l.default.__t())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u=[],h=e.status,f=e.i18n;return c=[t(0,"\ue682")],_={},d="px pal",h.canUndo||(d+=" pao"),_.class=d,_.title=f("_r"),_["mx-click"]=i+"\x1e__aA({s:'-',b:"+h.canUndo+"})",u.push(t("i",c,_)),c=[t(0,"\ue682")],_={},d="px pal pB",h.canRedo||(d+=" pao"),_.class=d,_.title=f("_s"),_["mx-click"]=i+"\x1e__aA({s:'+',b:"+h.canRedo+"})",u.push(t("i",c,_)),t(i,u)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__f",e)},render(){this.digest({status:s.default.__P()})},"__aA<click>"(e){if(e.eventTarget.classList.contains("pao"))return;let{s:t,b:i}=e.params;i&&("-"==t?s.default.__R():s.default.__S())}})}),define("designer/toolbar-layer",["magix","./history","./workspace"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./history"),l=e("./workspace");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u,h=[],f=e.elements,g=e.top,x=e.i18n,m=e.bottom;d="";var b=f.length;d+=" ";var y=f[0];return h.push(t("i",0,{mxs:"pg:_",class:"pan"})),u=[t(0,"\ue632")],c={},_="px pal",(1!=b||y.props.locked||g.id==y.id)&&(_+=" pao"),c.class=_,c.title=x("__f"),c["mx-click"]=i+"\x1e__av({to:5})",h.push(t("i",u,c)),u=[t(0,"\ue607")],c={},_="px pal",(1!=b||y.props.locked||g.id==y.id)&&(_+=" pao"),c.class=_,c.title=x("__h"),c["mx-click"]=i+"\x1e__av({to:3})",h.push(t("i",u,c)),u=[t(0,"\ue632")],c={},_="px pal pA",(1!=b||y.props.locked||m.id==y.id)&&(_+=" pao"),c.class=_,c.title=x("__g"),c["mx-click"]=i+"\x1e__av({to:6})",h.push(t("i",u,c)),u=[t(0,"\ue607")],c={},_="px pal pA",(1!=b||y.props.locked||m.id==y.id)&&(_+=" pao"),c.class=_,c.title=x("__i"),c["mx-click"]=i+"\x1e__av({to:4})",h.push(t("i",u,c)),t(i,h)},init(){let e=this.render.bind(this);a.State.on("___",e),a.State.on("__g",e),a.State.on("__k",e),a.State.on("__l",e)},render(){let e=a.State.get("__M");this.digest({top:e[e.length-1],bottom:e[0],elements:a.State.get("__N")})},"__av<click>"(e){if(e.eventTarget.classList.contains("pao"))return;let{to:t}=e.params,i=this.get("elements")[0];l.StageElements.__av(t,i)&&(a.State.fire("__g"),s.default.__t())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("../panels/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_,c,u=[],h=e.panels,f=e.i18n;for(let e=0,a=h,s=a.length;e<s;e++){let s=a[e];c={},_="px pal",s.opened&&(_+=" pam"),c.class=_,c["x-html"]=s.icon,c["mx-click"]=i+"\x1e__aC({id:'"+r(s.id)+"'})",c.title=f(s.opened?"_t":"_u",s.title),d=[t("i",0,c)],u.push(...d)}return t(i,u)},init(){a.State.on("__m",()=>{this.render()})},render(){this.digest({panels:s.default.__aB()})},"__aC<click>"(e){let{id:t}=e.params;s.default.__aC(t)}})}),define("designer/toolbar-scale",["magix","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_=[],c=e.i18n,u=e.scale;return d=[t(0,"\ue602")],_.push(t("i",d,{class:"px pal","mx-click":i+"\x1e__aD({s:'-'})",title:c("_v")})),d=[t(0,100*u+"%")],_.push(t("b",d,{mxa:"pi:_",class:"pap"})),d=[t(0,"\ue699")],_.push(t("i",d,{class:"px pal","mx-click":i+"\x1e__aD({s:'+'})",title:c("_w")})),t(i,_)},init(){let e=this.render.bind(this);a.State.on("__a",e),a.State.on("___",e)},render(){this.digest({scale:a.State.get("__c")})},"__aD<click>"(e){let{s:t}=e.params,i=this.get("scale"),l=i;"+"==t?(i+=.5)>5&&(i=5):(i-=.5)<.5&&(i=.5),l!=i&&(a.State.set({__c:i}),a.State.fire("__a",{step:i/l}),s.default.__t())}})}),define("designer/toolbar",["magix","./toolbar-do","./toolbar-align","./toolbar-layer","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,i)=>{e("./toolbar-do"),e("./toolbar-align"),e("./toolbar-layer"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels"),Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pe",".pak{height:22px}.pal{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.pal:hover{background:#e6e6e6;color:#333}.pam,.pam:hover{background:#c4c4c4}.pan{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.pao{color:#aaa;cursor:not-allowed}.pao:hover{color:#aaa;background:transparent}.pap{font-weight:400;font-size:14px;width:40px;display:inline-block;text-align:center}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,s,l,o,r,n,p)=>{let d,_=[];return(d=[t("div",0,{class:"pak","mx-view":"designer/toolbar-do"})]).push(t("div",0,{class:"pak","mx-view":"designer/toolbar-align"}),t("div",0,{class:"pak","mx-view":"designer/toolbar-layer"}),t("div",0,{class:"pak","mx-view":"designer/toolbar-del"})),_.push(t("div",d,{mxs:"pj:_",class:"pd pE pb"})),(d=[t("div",0,{class:"pak","mx-view":"designer/toolbar-scale"})]).push(t("i",0,{class:"pan"}),t("div",0,{class:"pak","mx-view":"designer/toolbar-panels"})),_.push(t("div",d,{mxs:"pj:a",class:"pe pb pE"})),t(i,_)},render(){this.digest()}})}),define("designer/workspace",["magix","./history","../gallery/mx-pointer/cursor","../util/transform"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),s=e("./history"),l=e("../gallery/mx-pointer/cursor"),o=e("../util/transform");let r=(e,t)=>{let i=e.start,a=e.end,s=t.start,l=t.end,o=((a.x-i.x)*(s.y-i.y)-(a.y-i.y)*(s.x-i.x))*((a.x-i.x)*(l.y-i.y)-(a.y-i.y)*(l.x-i.x)),r=((l.x-s.x)*(i.y-s.y)-(l.y-s.y)*(i.x-s.x))*((l.x-s.x)*(a.y-s.y)-(l.y-s.y)*(a.x-s.x));return o<0&&r<0};t.StageSelectElements={__ae(e){let t=a.State.get("__N"),i=t.length;if(i||e){let s=i>1?null:t[0];t.length=0;let l=!1;if(e?(t.push(e),l=e!=s):i&&(l=!0),l)return a.State.set({__U:a.toMap(t,"id")}),a.State.fire("__k"),!0}},__aE(e){let t=a.State.get("__N"),i=!1;for(let a of t)if(a.id===e.id){i=!0;break}if(!i)return t.push(e),a.State.set({__U:a.toMap(t,"id")}),a.State.fire("__k"),!0},__aF(e){let t=a.State.get("__N"),i=!1,s=-1;for(let a of t)if(s++,a.id===e.id){i=!0;break}if(i)return t.splice(s,1),a.State.set({__U:a.toMap(t,"id")}),a.State.fire("__k"),!0},__ak(e){let t=a.State.get("__N");t.length=0,e&&t.push.apply(t,e),a.State.set({__U:a.toMap(t,"id")}),a.State.fire("__k")},__al(e){let t=a.State.get("__U"),i=0;for(let a in e)if(!t[a]){i=1;break}if(!i)for(let a in t)if(!e[a]){i=1;break}return i}},t.StageElements={__K(e,i){let s=a.State.get("__I");if(s){let l=a.State.get("__M"),o=s.getProps(e.pageX,e.pageY),r=a.State.get("__c");o.width*=r,o.height*=r;let n={id:a.default.guid("e_"),ctor:s,type:s.type,props:o};return l.push(n),i&&t.StageSelectElements.__ae(n),l}},__aG(e,i){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!i.props.locked){let e=a.State.get("__N"),l=!1;for(let t=e.length;t--;){let a=e[t];a.id==i.id&&(l=!0),a.props.locked&&e.splice(t,1)}if(l&&e.length>1)return void(t.StageSelectElements.__aF(i)&&s.default.__t());t.StageSelectElements.__aE(i)&&s.default.__t()}}else t.StageSelectElements.__ae(i)&&s.default.__t()},__ac(e,i){let{element:o}=e.params,r=a.State.get("__N");if(void 0===e.button||0==e.button)if(e.shiftKey||e.ctrlKey||e.metaKey)t.StageElements.__aG(e,o);else{l.default.__ai("move");let n=[],p=!1;for(let e of r)o.id==e.id&&(p=!0),n.push({x:e.props.x,y:e.props.y});p||(t.StageSelectElements.__ae(o)&&s.default.__t(),n.length=0,n.push({x:o.props.x,y:o.props.y}),r.length=0,r.push(o));let d=!1;a.State.fire("__i",{show:1}),i.__x(e,t=>{let i=t.pageX-e.pageX,s=t.pageY-e.pageY,l=0;for(let e of r){let t=n[l++];if(!e.props.locked){d=!0,e.props.x=t.x+i,e.props.y=t.y+s;let l=a.Vframe.get(e.id);l&&l.invoke("assign",[{element:e}])&&l.invoke("render")}}a.State.fire("__j")},()=>{d&&s.default.__t(),l.default.__z(),a.State.fire("__i")})}else{let e=!1;for(let t of r)if(t.id===o.id){e=!0;break}e||t.StageSelectElements.__ae(o)&&s.default.__t()}},__as(){let e=a.State.get("__N"),i=a.State.get("__M"),s=!1;if(e.length){let l=a.toMap(e,"id");for(let e=i.length;e--;)l[i[e].id]&&(s=!0,i.splice(e,1));s&&t.StageSelectElements.__ae()}return s},__ah(){let e,t,i=a.State.get("__M"),s=[];for(let a of i){if((e=a.props).locked)continue;t=e.rotate||0;let i={x:e.x,y:e.y,width:e.width,height:e.height},l=o.default.__aH(i,t),r=l.point[0],n=l.point[2],p=l.point[6],d=l.point[4],_=r,c=r,u=r,h=r;for(let e of[n,p,d])e.x<_.x&&(_=e),e.x>u.x&&(u=e),e.y<c.y&&(c=e),e.y>h.y&&(h=e);s.push({element:a,left:_,top:c,right:u,bottom:h,points:[r,n,p,d],lines:[{start:r,end:n},{start:n,end:d},{start:d,end:p},{start:p,end:r}]})}return s},__aj(e,t,i){let a,s=[],l=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}];for(let o of e)if(a=!1,i&&i[o.element.id])i&&s.push(o.element);else{for(let e of o.points)if(e.x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height){s.push(o.element),a=!0;break}if(!a)for(let e of o.lines){for(let t of l)if(r(e,t)){a=!0,s.push(o.element);break}if(a)break}}return s},__aI(e,i){let s=a.State.get("__M");for(let t=s.length;t--;){e==s[t].id&&s.splice(t,1)}i||t.StageSelectElements.__ak()},__an(){let e=a.State.get("__U"),i=a.State.get("__M"),l=[];for(let e of i)e.props.locked||l.push(e);t.StageSelectElements.__ak(l),t.StageSelectElements.__al(e)&&s.default.__t()},__av(e,t){let i=a.State.get("__M"),s=-1;for(let e=i.length;e--;){if(i[e].id===t.id){i.splice(s=e,1);break}}return 3==e?i.push(t):4==e?i.unshift(t):5==e?i.splice(s+1,0,t):6==e&&(0===s&&(s=1),i.splice(s-1,0,t)),!0},__ar(e){let i=a.State.get("__N"),s=a.State.get("__M"),l=i.length,o=i[0];if(0===l||l>1)o=s[e.shiftKey?0:s.length-1],t.StageSelectElements.__ae(o);else{let i,a;for(let e=s.length;e--;){let t=s[e];if(t.id==o.id){i=s[e-1];break}a=t}let l=null;e.shiftKey?(i||(i=s[s.length-1]),l=i):(a||(a=s[0]),l=a),l.id!=o.id&&t.StageSelectElements.__ae(l)}}};let n=e=>{if(Array.isArray(e)){let t=[];for(let i of e)t.push(n(i));e=t}else if("[object Object]"==Object.prototype.toString.call(e)){let t={};for(let i in e)t[i]=n(e[i]);e=t}return e};t.Clipboard={__au(){return(this.__aJ||[]).length},__aK(){return this.__aJ||[]},__ap(){let e=[],t=a.State.get("__N");for(let i of t)e.push(i);this.__aJ=e},__ao(){let e=a.State.get("__N");1==e.length&&e[0].props.locked||(this.__ap(),this.__aL=!0)},__aq(e){let i=this,s=i.__aJ,l=a.State.get("__M"),o=!1;if(s){o=!0;let r=[],p=0,d=0,_=0,c=e=>{for(let t of l)if(t.props.x==e.x&&t.props.y==e.y)return 1;return 0},u=t=>{if(0===p)if(e)d=t.x-e.x,_=t.y-e.y,t.x=e.x,t.y=e.y;else{let e=t.x,i=t.y;for(;c(t);)t.x+=20,t.y+=20;for(t.x+t.width<0&&(t.x=-t.width/2),t.y+t.height<0&&(t.y=-t.height/2);c(t);)t.x-=4,t.y-=4;d=e-t.x,_=i-t.y}else t.x-=d,t.y-=_};for(let e of s){let s=n(e),o=s.props;u(o),o.locked=!1,p++,s.id=a.default.guid("e_"),l.push(s),r.push(s),i.__aL&&t.StageElements.__aI(e.id,!0)}i.__aL&&(delete i.__aL,delete i.__aJ),a.State.fire("__g"),t.StageSelectElements.__ak(r)}return o}}});